"use strict";(self.webpackChunk_webviz_subsurface_components=self.webpackChunk_webviz_subsurface_components||[]).push([[8711],{"./packages/well-completions/src/components/Settings/WellPagination.stories.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var _test_storybookDataDecorator__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/well-completions/src/test/storybookDataDecorator.tsx"),_test_storybookReduxAddon__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/well-completions/src/test/storybookReduxAddon.tsx"),_WellPagination__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/well-completions/src/components/Settings/WellPagination.tsx");__webpack_exports__.default={component:_WellPagination__WEBPACK_IMPORTED_MODULE_2__.Z,title:"WellCompletions/Components/Settings/Well Pagination",decorators:[_test_storybookDataDecorator__WEBPACK_IMPORTED_MODULE_0__.F,_test_storybookReduxAddon__WEBPACK_IMPORTED_MODULE_1__.j]}},"./packages/well-completions/src/components/Settings/WellPagination.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var _equinor_eds_core_react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@equinor/eds-core-react/dist/core-react.umd.js"),_mui_material_styles__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@mui/material/styles/styled.js"),_mui_material__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@mui/material/Pagination/Pagination.js"),lodash__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/lodash/lodash.js"),react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react/index.js"),react_redux__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/react-redux/es/index.js"),_hooks_usePlotData__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/well-completions/src/hooks/usePlotData.tsx"),_redux_actions__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/well-completions/src/redux/actions.ts");const PREFIX="WellPagination",classes={root:`${PREFIX}-root`,left:`${PREFIX}-left`,right:`${PREFIX}-right`},Root=(0,_mui_material_styles__WEBPACK_IMPORTED_MODULE_6__.ZP)("div")((()=>({[`&.${classes.root}`]:{display:"flex",flexDirection:"row",justifyContent:"space-between"},[`& .${classes.left}`]:{display:"flex",flexDirection:"row",alignItems:"flex-start",padding:"5px"},[`& .${classes.right}`]:{display:"flex",flexDirection:"row",alignItems:"flex-end"}}))),WellPagination=react__WEBPACK_IMPORTED_MODULE_2__.memo((()=>{const dispatch=(0,react_redux__WEBPACK_IMPORTED_MODULE_3__.I0)(),plotData=(0,_hooks_usePlotData__WEBPACK_IMPORTED_MODULE_4__.U)(),currentPage=(0,react_redux__WEBPACK_IMPORTED_MODULE_3__.v9)((st=>st.ui.currentPage)),wellsPerPage=(0,react_redux__WEBPACK_IMPORTED_MODULE_3__.v9)((st=>st.ui.wellsPerPage)),wellsCount=(0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)((()=>plotData.wells.length),[plotData]),pageCount=(0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)((()=>Math.ceil(plotData.wells.length/wellsPerPage)),[plotData,wellsPerPage]),currentClampedPage=(0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)((()=>(0,lodash__WEBPACK_IMPORTED_MODULE_1__.clamp)(currentPage,1,pageCount)),[currentPage,pageCount]),startItem=(0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)((()=>(currentClampedPage-1)*wellsPerPage+1),[currentClampedPage,wellsPerPage]),endItem=(0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)((()=>Math.min(wellsCount,currentClampedPage*wellsPerPage)),[currentClampedPage,wellsPerPage,wellsCount]),onCurrentPageChange=(0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(((...arg)=>dispatch((0,_redux_actions__WEBPACK_IMPORTED_MODULE_5__.RZ)(arg[1]))),[dispatch]);return(0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)((()=>{dispatch((0,_redux_actions__WEBPACK_IMPORTED_MODULE_5__.RZ)(currentClampedPage))}),[currentClampedPage]),react__WEBPACK_IMPORTED_MODULE_2__.createElement(Root,{className:classes.root},react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:classes.left},react__WEBPACK_IMPORTED_MODULE_2__.createElement(_equinor_eds_core_react__WEBPACK_IMPORTED_MODULE_0__.Typography,{style:{alignSelf:"center",minWidth:"125px"}},`${startItem} - ${endItem} of ${wellsCount} items`)),react__WEBPACK_IMPORTED_MODULE_2__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__.Z,{className:classes.right,defaultPage:1,page:currentClampedPage,count:pageCount,size:"medium",onChange:onCurrentPageChange}))}));WellPagination.displayName="WellPagination",__webpack_exports__.Z=WellPagination;try{WellPagination.displayName="WellPagination",WellPagination.__docgenInfo={description:"Divide wells into pages",displayName:"WellPagination",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/well-completions/src/components/Settings/WellPagination.tsx#WellPagination"]={docgenInfo:WellPagination.__docgenInfo,name:"WellPagination",path:"packages/well-completions/src/components/Settings/WellPagination.tsx#WellPagination"})}catch(__react_docgen_typescript_loader_error){}},"./packages/well-completions/src/hooks/usePlotData.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{U:function(){return usePlotData}});var lodash__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/lodash/lodash.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/index.js"),react_redux__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react-redux/es/index.js"),_components_DataLoader__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/well-completions/src/components/DataLoader.tsx"),_utils_dataUtil__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/well-completions/src/utils/dataUtil.ts"),_utils_sort__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./packages/well-completions/src/utils/sort.ts"),_utils_stringUtil__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/well-completions/src/utils/stringUtil.ts");const usePlotData=()=>{const data=(0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(_components_DataLoader__WEBPACK_IMPORTED_MODULE_3__.R),timeIndexRange=(0,react_redux__WEBPACK_IMPORTED_MODULE_2__.v9)((state=>state.ui.timeIndexRange),lodash__WEBPACK_IMPORTED_MODULE_0__.isEqual),timeAggregation=(0,react_redux__WEBPACK_IMPORTED_MODULE_2__.v9)((state=>state.ui.timeAggregation)),hideZeroCompletions=(0,react_redux__WEBPACK_IMPORTED_MODULE_2__.v9)((state=>state.ui.hideZeroCompletions)),filteredZones=(0,react_redux__WEBPACK_IMPORTED_MODULE_2__.v9)((state=>state.ui.filteredZones)),wellSearchText=(0,react_redux__WEBPACK_IMPORTED_MODULE_2__.v9)((state=>state.ui.wellSearchText)),filterByAttributes=(0,react_redux__WEBPACK_IMPORTED_MODULE_2__.v9)((state=>state.ui.filterByAttributes)),sortBy=(0,react_redux__WEBPACK_IMPORTED_MODULE_2__.v9)((state=>state.ui.sortBy)),wellNameRegex=(0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)((()=>(0,_utils_stringUtil__WEBPACK_IMPORTED_MODULE_5__.$)(wellSearchText)),[wellSearchText]),wellAttributePredicate=(0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)((()=>(0,_utils_dataUtil__WEBPACK_IMPORTED_MODULE_4__.Kd)(filterByAttributes)),[filterByAttributes]),filteredWells=(0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)((()=>data?Array.from(data.wells).filter((well=>wellNameRegex(well.name)&&wellAttributePredicate(well))):[]),[data,wellNameRegex,wellAttributePredicate]),filteredSubzones=(0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)((()=>{const allSubzones=[],filteredZoneSet=new Set(filteredZones);return data.stratigraphy.forEach((zone=>(0,_utils_dataUtil__WEBPACK_IMPORTED_MODULE_4__.V8)(zone,allSubzones))),allSubzones.filter((zone=>filteredZoneSet.has(zone.name)))}),[data,filteredZones]),dataToPlot=(0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)((()=>(0,_utils_dataUtil__WEBPACK_IMPORTED_MODULE_4__.Pf)(filteredSubzones,filteredWells,timeIndexRange,timeAggregation,hideZeroCompletions)),[filteredSubzones,filteredWells,timeIndexRange,timeAggregation,hideZeroCompletions]),sortFunction=(0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)((()=>(0,_utils_sort__WEBPACK_IMPORTED_MODULE_6__.vD)(sortBy)),[sortBy]);return(0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)((()=>({stratigraphy:dataToPlot.stratigraphy,wells:Array.from(dataToPlot.wells).sort(sortFunction)})),[dataToPlot,sortFunction])}},"./packages/well-completions/src/utils/stringUtil.ts":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{$:function(){return getRegexPredicate},f:function(){return capitalizeFirstLetter}});const getRegexPredicate=pattern=>{const processed=[];for(let index=0;index<pattern.length;index++){const character=pattern.charAt(index);if(0===index||!"\\.)]".includes(pattern.charAt(index-1))){if("?*".includes(character)&&(processed.push("."),"?"===character))continue;"+".includes(character)&&processed.push("\\")}processed.push(character)}const processedPattern=processed.join("").toLowerCase(),rgx=new RegExp(processedPattern);return item=>0===pattern.length||!!rgx&&rgx.test(item.toLowerCase())},capitalizeFirstLetter=name=>0===name.length?name:name[0].toUpperCase()+name.slice(1)}}]);