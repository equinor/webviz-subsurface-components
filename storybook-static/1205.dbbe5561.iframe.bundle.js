/*! For license information please see 1205.dbbe5561.iframe.bundle.js.LICENSE.txt */
(self.webpackChunk_webviz_subsurface_components=self.webpackChunk_webviz_subsurface_components||[]).push([[1205],{"./node_modules/@deck.gl/core/dist/esm/controllers/controller.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return Controller}});var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),_transition_manager__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/controllers/transition-manager.js"),_transitions_linear_interpolator__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/transitions/linear-interpolator.js");const NO_TRANSITION_PROPS={transitionDuration:0},INERTIA_EASING=t=>1-(1-t)*(1-t),EVENT_TYPES_WHEEL=["wheel"],EVENT_TYPES_PAN=["panstart","panmove","panend"],EVENT_TYPES_PINCH=["pinchstart","pinchmove","pinchend"],EVENT_TYPES_TRIPLE_PAN=["tripanstart","tripanmove","tripanend"],EVENT_TYPES_DOUBLE_TAP=["doubletap"],EVENT_TYPES_KEYBOARD=["keydown"],pinchEventWorkaround={};class Controller{constructor(opts){(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.Z)(this,"props",void 0),(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.Z)(this,"state",{}),(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.Z)(this,"transitionManager",void 0),(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.Z)(this,"eventManager",void 0),(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.Z)(this,"onViewStateChange",void 0),(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.Z)(this,"onStateChange",void 0),(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.Z)(this,"makeViewport",void 0),(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.Z)(this,"_controllerState",void 0),(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.Z)(this,"_events",{}),(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.Z)(this,"_interactionState",{isDragging:!1}),(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.Z)(this,"_customEvents",[]),(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.Z)(this,"_eventStartBlocked",null),(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.Z)(this,"_panMove",!1),(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.Z)(this,"invertPan",!1),(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.Z)(this,"dragMode","rotate"),(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.Z)(this,"inertia",0),(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.Z)(this,"scrollZoom",!0),(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.Z)(this,"dragPan",!0),(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.Z)(this,"dragRotate",!0),(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.Z)(this,"doubleClickZoom",!0),(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.Z)(this,"touchZoom",!0),(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.Z)(this,"touchRotate",!1),(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.Z)(this,"keyboard",!0),this.transitionManager=new _transition_manager__WEBPACK_IMPORTED_MODULE_1__.Z({...opts,getControllerState:props=>new this.ControllerState(props),onViewStateChange:this._onTransition.bind(this),onStateChange:this._setInteractionState.bind(this)}),this.handleEvent=this.handleEvent.bind(this),this.eventManager=opts.eventManager,this.onViewStateChange=opts.onViewStateChange||(()=>{}),this.onStateChange=opts.onStateChange||(()=>{}),this.makeViewport=opts.makeViewport}set events(customEvents){this.toggleEvents(this._customEvents,!1),this.toggleEvents(customEvents,!0),this._customEvents=customEvents,this.props&&this.setProps(this.props)}finalize(){for(const eventName in this._events){var _this$eventManager;if(this._events[eventName])null===(_this$eventManager=this.eventManager)||void 0===_this$eventManager||_this$eventManager.off(eventName,this.handleEvent)}this.transitionManager.finalize()}handleEvent(event){this._controllerState=void 0;const eventStartBlocked=this._eventStartBlocked;switch(event.type){case"panstart":return!eventStartBlocked&&this._onPanStart(event);case"panmove":return this._onPan(event);case"panend":return this._onPanEnd(event);case"pinchstart":return!eventStartBlocked&&this._onPinchStart(event);case"pinchmove":return this._onPinch(event);case"pinchend":return this._onPinchEnd(event);case"tripanstart":return!eventStartBlocked&&this._onTriplePanStart(event);case"tripanmove":return this._onTriplePan(event);case"tripanend":return this._onTriplePanEnd(event);case"doubletap":return this._onDoubleTap(event);case"wheel":return this._onWheel(event);case"keydown":return this._onKeyDown(event);default:return!1}}get controllerState(){return this._controllerState=this._controllerState||new this.ControllerState({makeViewport:this.makeViewport,...this.props,...this.state}),this._controllerState}getCenter(event){const{x:x,y:y}=this.props,{offsetCenter:offsetCenter}=event;return[offsetCenter.x-x,offsetCenter.y-y]}isPointInBounds(pos,event){const{width:width,height:height}=this.props;if(event&&event.handled)return!1;const inside=pos[0]>=0&&pos[0]<=width&&pos[1]>=0&&pos[1]<=height;return inside&&event&&event.stopPropagation(),inside}isFunctionKeyPressed(event){const{srcEvent:srcEvent}=event;return Boolean(srcEvent.metaKey||srcEvent.altKey||srcEvent.ctrlKey||srcEvent.shiftKey)}isDragging(){return this._interactionState.isDragging||!1}blockEvents(timeout){const timer=setTimeout((()=>{this._eventStartBlocked===timer&&(this._eventStartBlocked=null)}),timeout);this._eventStartBlocked=timer}setProps(props){props.dragMode&&(this.dragMode=props.dragMode),this.props=props,"transitionInterpolator"in props||(props.transitionInterpolator=this._getTransitionProps().transitionInterpolator),this.transitionManager.processViewStateChange(props);const{inertia:inertia}=props;this.inertia=Number.isFinite(inertia)?inertia:!0===inertia?300:0;const{scrollZoom:scrollZoom=!0,dragPan:dragPan=!0,dragRotate:dragRotate=!0,doubleClickZoom:doubleClickZoom=!0,touchZoom:touchZoom=!0,touchRotate:touchRotate=!1,keyboard:keyboard=!0}=props,isInteractive=Boolean(this.onViewStateChange);this.toggleEvents(EVENT_TYPES_WHEEL,isInteractive&&scrollZoom),this.toggleEvents(EVENT_TYPES_PAN,isInteractive),this.toggleEvents(EVENT_TYPES_PINCH,isInteractive&&(touchZoom||touchRotate)),this.toggleEvents(EVENT_TYPES_TRIPLE_PAN,isInteractive&&touchRotate),this.toggleEvents(EVENT_TYPES_DOUBLE_TAP,isInteractive&&doubleClickZoom),this.toggleEvents(EVENT_TYPES_KEYBOARD,isInteractive&&keyboard),this.scrollZoom=scrollZoom,this.dragPan=dragPan,this.dragRotate=dragRotate,this.doubleClickZoom=doubleClickZoom,this.touchZoom=touchZoom,this.touchRotate=touchRotate,this.keyboard=keyboard}updateTransition(){this.transitionManager.updateTransition()}toggleEvents(eventNames,enabled){this.eventManager&&eventNames.forEach((eventName=>{this._events[eventName]!==enabled&&(this._events[eventName]=enabled,enabled?this.eventManager.on(eventName,this.handleEvent):this.eventManager.off(eventName,this.handleEvent))}))}updateViewport(newControllerState,extraProps=null,interactionState={}){const viewState={...newControllerState.getViewportProps(),...extraProps},changed=this.controllerState!==newControllerState;if(this.state=newControllerState.getState(),this._setInteractionState(interactionState),changed){const oldViewState=this.controllerState&&this.controllerState.getViewportProps();this.onViewStateChange&&this.onViewStateChange({viewState:viewState,interactionState:this._interactionState,oldViewState:oldViewState})}}_onTransition(params){this.onViewStateChange({...params,interactionState:this._interactionState})}_setInteractionState(newStates){Object.assign(this._interactionState,newStates),this.onStateChange(this._interactionState)}_onPanStart(event){const pos=this.getCenter(event);if(!this.isPointInBounds(pos,event))return!1;let alternateMode=this.isFunctionKeyPressed(event)||event.rightButton||!1;(this.invertPan||"pan"===this.dragMode)&&(alternateMode=!alternateMode);const newControllerState=this.controllerState[alternateMode?"panStart":"rotateStart"]({pos:pos});return this._panMove=alternateMode,this.updateViewport(newControllerState,NO_TRANSITION_PROPS,{isDragging:!0}),!0}_onPan(event){return!!this.isDragging()&&(this._panMove?this._onPanMove(event):this._onPanRotate(event))}_onPanEnd(event){return!!this.isDragging()&&(this._panMove?this._onPanMoveEnd(event):this._onPanRotateEnd(event))}_onPanMove(event){if(!this.dragPan)return!1;const pos=this.getCenter(event),newControllerState=this.controllerState.pan({pos:pos});return this.updateViewport(newControllerState,NO_TRANSITION_PROPS,{isDragging:!0,isPanning:!0}),!0}_onPanMoveEnd(event){const{inertia:inertia}=this;if(this.dragPan&&inertia&&event.velocity){const pos=this.getCenter(event),endPos=[pos[0]+event.velocityX*inertia/2,pos[1]+event.velocityY*inertia/2],newControllerState=this.controllerState.pan({pos:endPos}).panEnd();this.updateViewport(newControllerState,{...this._getTransitionProps(),transitionDuration:inertia,transitionEasing:INERTIA_EASING},{isDragging:!1,isPanning:!0})}else{const newControllerState=this.controllerState.panEnd();this.updateViewport(newControllerState,null,{isDragging:!1,isPanning:!1})}return!0}_onPanRotate(event){if(!this.dragRotate)return!1;const pos=this.getCenter(event),newControllerState=this.controllerState.rotate({pos:pos});return this.updateViewport(newControllerState,NO_TRANSITION_PROPS,{isDragging:!0,isRotating:!0}),!0}_onPanRotateEnd(event){const{inertia:inertia}=this;if(this.dragRotate&&inertia&&event.velocity){const pos=this.getCenter(event),endPos=[pos[0]+event.velocityX*inertia/2,pos[1]+event.velocityY*inertia/2],newControllerState=this.controllerState.rotate({pos:endPos}).rotateEnd();this.updateViewport(newControllerState,{...this._getTransitionProps(),transitionDuration:inertia,transitionEasing:INERTIA_EASING},{isDragging:!1,isRotating:!0})}else{const newControllerState=this.controllerState.rotateEnd();this.updateViewport(newControllerState,null,{isDragging:!1,isRotating:!1})}return!0}_onWheel(event){if(!this.scrollZoom)return!1;const pos=this.getCenter(event);if(!this.isPointInBounds(pos,event))return!1;event.srcEvent.preventDefault();const{speed:speed=.01,smooth:smooth=!1}=!0===this.scrollZoom?{}:this.scrollZoom,{delta:delta}=event;let scale=2/(1+Math.exp(-Math.abs(delta*speed)));delta<0&&0!==scale&&(scale=1/scale);const newControllerState=this.controllerState.zoom({pos:pos,scale:scale});return this.updateViewport(newControllerState,{...this._getTransitionProps({around:pos}),transitionDuration:smooth?250:1},{isZooming:!0,isPanning:!0}),!0}_onTriplePanStart(event){const pos=this.getCenter(event);if(!this.isPointInBounds(pos,event))return!1;const newControllerState=this.controllerState.rotateStart({pos:pos});return this.updateViewport(newControllerState,NO_TRANSITION_PROPS,{isDragging:!0}),!0}_onTriplePan(event){if(!this.touchRotate)return!1;if(!this.isDragging())return!1;const pos=this.getCenter(event);pos[0]-=event.deltaX;const newControllerState=this.controllerState.rotate({pos:pos});return this.updateViewport(newControllerState,NO_TRANSITION_PROPS,{isDragging:!0,isRotating:!0}),!0}_onTriplePanEnd(event){if(!this.isDragging())return!1;const{inertia:inertia}=this;if(this.touchRotate&&inertia&&event.velocityY){const pos=this.getCenter(event),endPos=[pos[0],pos[1]+=event.velocityY*inertia/2],newControllerState=this.controllerState.rotate({pos:endPos});this.updateViewport(newControllerState,{...this._getTransitionProps(),transitionDuration:inertia,transitionEasing:INERTIA_EASING},{isDragging:!1,isRotating:!0}),this.blockEvents(inertia)}else{const newControllerState=this.controllerState.rotateEnd();this.updateViewport(newControllerState,null,{isDragging:!1,isRotating:!1})}return!0}_onPinchStart(event){const pos=this.getCenter(event);if(!this.isPointInBounds(pos,event))return!1;const newControllerState=this.controllerState.zoomStart({pos:pos}).rotateStart({pos:pos});return pinchEventWorkaround._startPinchRotation=event.rotation,pinchEventWorkaround._lastPinchEvent=event,this.updateViewport(newControllerState,NO_TRANSITION_PROPS,{isDragging:!0}),!0}_onPinch(event){if(!this.touchZoom&&!this.touchRotate)return!1;if(!this.isDragging())return!1;let newControllerState=this.controllerState;if(this.touchZoom){const{scale:scale}=event,pos=this.getCenter(event);newControllerState=newControllerState.zoom({pos:pos,scale:scale})}if(this.touchRotate){const{rotation:rotation}=event;newControllerState=newControllerState.rotate({deltaAngleX:pinchEventWorkaround._startPinchRotation-rotation})}return this.updateViewport(newControllerState,NO_TRANSITION_PROPS,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),pinchEventWorkaround._lastPinchEvent=event,!0}_onPinchEnd(event){if(!this.isDragging())return!1;const{inertia:inertia}=this,{_lastPinchEvent:_lastPinchEvent}=pinchEventWorkaround;if(this.touchZoom&&inertia&&_lastPinchEvent&&event.scale!==_lastPinchEvent.scale){const pos=this.getCenter(event);let newControllerState=this.controllerState.rotateEnd();const z=Math.log2(event.scale),velocityZ=(z-Math.log2(_lastPinchEvent.scale))/(event.deltaTime-_lastPinchEvent.deltaTime),endScale=Math.pow(2,z+velocityZ*inertia/2);newControllerState=newControllerState.zoom({pos:pos,scale:endScale}).zoomEnd(),this.updateViewport(newControllerState,{...this._getTransitionProps({around:pos}),transitionDuration:inertia,transitionEasing:INERTIA_EASING},{isDragging:!1,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:!1}),this.blockEvents(inertia)}else{const newControllerState=this.controllerState.zoomEnd().rotateEnd();this.updateViewport(newControllerState,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1})}return pinchEventWorkaround._startPinchRotation=null,pinchEventWorkaround._lastPinchEvent=null,!0}_onDoubleTap(event){if(!this.doubleClickZoom)return!1;const pos=this.getCenter(event);if(!this.isPointInBounds(pos,event))return!1;const isZoomOut=this.isFunctionKeyPressed(event),newControllerState=this.controllerState.zoom({pos:pos,scale:isZoomOut?.5:2});return this.updateViewport(newControllerState,this._getTransitionProps({around:pos}),{isZooming:!0,isPanning:!0}),this.blockEvents(100),!0}_onKeyDown(event){if(!this.keyboard)return!1;const funcKey=this.isFunctionKeyPressed(event),{zoomSpeed:zoomSpeed,moveSpeed:moveSpeed,rotateSpeedX:rotateSpeedX,rotateSpeedY:rotateSpeedY}=!0===this.keyboard?{}:this.keyboard,{controllerState:controllerState}=this;let newControllerState;const interactionState={};switch(event.srcEvent.code){case"Minus":newControllerState=funcKey?controllerState.zoomOut(zoomSpeed).zoomOut(zoomSpeed):controllerState.zoomOut(zoomSpeed),interactionState.isZooming=!0;break;case"Equal":newControllerState=funcKey?controllerState.zoomIn(zoomSpeed).zoomIn(zoomSpeed):controllerState.zoomIn(zoomSpeed),interactionState.isZooming=!0;break;case"ArrowLeft":funcKey?(newControllerState=controllerState.rotateLeft(rotateSpeedX),interactionState.isRotating=!0):(newControllerState=controllerState.moveLeft(moveSpeed),interactionState.isPanning=!0);break;case"ArrowRight":funcKey?(newControllerState=controllerState.rotateRight(rotateSpeedX),interactionState.isRotating=!0):(newControllerState=controllerState.moveRight(moveSpeed),interactionState.isPanning=!0);break;case"ArrowUp":funcKey?(newControllerState=controllerState.rotateUp(rotateSpeedY),interactionState.isRotating=!0):(newControllerState=controllerState.moveUp(moveSpeed),interactionState.isPanning=!0);break;case"ArrowDown":funcKey?(newControllerState=controllerState.rotateDown(rotateSpeedY),interactionState.isRotating=!0):(newControllerState=controllerState.moveDown(moveSpeed),interactionState.isPanning=!0);break;default:return!1}return this.updateViewport(newControllerState,this._getTransitionProps(),interactionState),!0}_getTransitionProps(opts){const{transition:transition}=this;return transition&&transition.transitionInterpolator?opts?{...transition,transitionInterpolator:new _transitions_linear_interpolator__WEBPACK_IMPORTED_MODULE_2__.Z({...opts,...transition.transitionInterpolator.opts,makeViewport:this.controllerState.makeViewport})}:transition:NO_TRANSITION_PROPS}}},"./node_modules/@deck.gl/core/dist/esm/controllers/map-controller.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{U:function(){return MapState},Z:function(){return MapController}});var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),_math_gl_core__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@math.gl/core/dist/esm/lib/common.js"),_controller__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/controllers/controller.js"),_view_state__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/controllers/view-state.js"),_math_gl_web_mercator__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@math.gl/web-mercator/dist/esm/index.js"),_utils_assert__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/utils/assert.js"),_transitions_linear_interpolator__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/transitions/linear-interpolator.js");class MapState extends _view_state__WEBPACK_IMPORTED_MODULE_1__.Z{constructor(options){const{width:width,height:height,latitude:latitude,longitude:longitude,zoom:zoom,bearing:bearing=0,pitch:pitch=0,altitude:altitude=1.5,position:position=[0,0,0],maxZoom:maxZoom=20,minZoom:minZoom=0,maxPitch:maxPitch=60,minPitch:minPitch=0,startPanLngLat:startPanLngLat,startZoomLngLat:startZoomLngLat,startRotatePos:startRotatePos,startBearing:startBearing,startPitch:startPitch,startZoom:startZoom,normalize:normalize=!0}=options;(0,_utils_assert__WEBPACK_IMPORTED_MODULE_2__.Z)(Number.isFinite(longitude)),(0,_utils_assert__WEBPACK_IMPORTED_MODULE_2__.Z)(Number.isFinite(latitude)),(0,_utils_assert__WEBPACK_IMPORTED_MODULE_2__.Z)(Number.isFinite(zoom)),super({width:width,height:height,latitude:latitude,longitude:longitude,zoom:zoom,bearing:bearing,pitch:pitch,altitude:altitude,maxZoom:maxZoom,minZoom:minZoom,maxPitch:maxPitch,minPitch:minPitch,normalize:normalize,position:position},{startPanLngLat:startPanLngLat,startZoomLngLat:startZoomLngLat,startRotatePos:startRotatePos,startBearing:startBearing,startPitch:startPitch,startZoom:startZoom}),(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_3__.Z)(this,"makeViewport",void 0),this.makeViewport=options.makeViewport}panStart({pos:pos}){return this._getUpdatedState({startPanLngLat:this._unproject(pos)})}pan({pos:pos,startPos:startPos}){const startPanLngLat=this.getState().startPanLngLat||this._unproject(startPos);if(!startPanLngLat)return this;const newProps=this.makeViewport(this.getViewportProps()).panByPosition(startPanLngLat,pos);return this._getUpdatedState(newProps)}panEnd(){return this._getUpdatedState({startPanLngLat:null})}rotateStart({pos:pos}){return this._getUpdatedState({startRotatePos:pos,startBearing:this.getViewportProps().bearing,startPitch:this.getViewportProps().pitch})}rotate({pos:pos,deltaAngleX:deltaAngleX=0,deltaAngleY:deltaAngleY=0}){const{startRotatePos:startRotatePos,startBearing:startBearing,startPitch:startPitch}=this.getState();if(!startRotatePos||void 0===startBearing||void 0===startPitch)return this;let newRotation;return newRotation=pos?this._getNewRotation(pos,startRotatePos,startPitch,startBearing):{bearing:startBearing+deltaAngleX,pitch:startPitch+deltaAngleY},this._getUpdatedState(newRotation)}rotateEnd(){return this._getUpdatedState({startBearing:null,startPitch:null})}zoomStart({pos:pos}){return this._getUpdatedState({startZoomLngLat:this._unproject(pos),startZoom:this.getViewportProps().zoom})}zoom({pos:pos,startPos:startPos,scale:scale}){let{startZoom:startZoom,startZoomLngLat:startZoomLngLat}=this.getState();if(startZoomLngLat||(startZoom=this.getViewportProps().zoom,startZoomLngLat=this._unproject(startPos)||this._unproject(pos)),!startZoomLngLat)return this;const{maxZoom:maxZoom,minZoom:minZoom}=this.getViewportProps();let zoom=startZoom+Math.log2(scale);zoom=(0,_math_gl_core__WEBPACK_IMPORTED_MODULE_4__.uZ)(zoom,minZoom,maxZoom);const zoomedViewport=this.makeViewport({...this.getViewportProps(),zoom:zoom});return this._getUpdatedState({zoom:zoom,...zoomedViewport.panByPosition(startZoomLngLat,pos)})}zoomEnd(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}zoomIn(speed=2){return this._zoomFromCenter(speed)}zoomOut(speed=2){return this._zoomFromCenter(1/speed)}moveLeft(speed=100){return this._panFromCenter([speed,0])}moveRight(speed=100){return this._panFromCenter([-speed,0])}moveUp(speed=100){return this._panFromCenter([0,speed])}moveDown(speed=100){return this._panFromCenter([0,-speed])}rotateLeft(speed=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing-speed})}rotateRight(speed=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing+speed})}rotateUp(speed=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch+speed})}rotateDown(speed=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch-speed})}shortestPathFrom(viewState){const fromProps=viewState.getViewportProps(),props={...this.getViewportProps()},{bearing:bearing,longitude:longitude}=props;return Math.abs(bearing-fromProps.bearing)>180&&(props.bearing=bearing<0?bearing+360:bearing-360),Math.abs(longitude-fromProps.longitude)>180&&(props.longitude=longitude<0?longitude+360:longitude-360),props}applyConstraints(props){const{maxZoom:maxZoom,minZoom:minZoom,zoom:zoom}=props;props.zoom=(0,_math_gl_core__WEBPACK_IMPORTED_MODULE_4__.uZ)(zoom,minZoom,maxZoom);const{maxPitch:maxPitch,minPitch:minPitch,pitch:pitch}=props;props.pitch=(0,_math_gl_core__WEBPACK_IMPORTED_MODULE_4__.uZ)(pitch,minPitch,maxPitch);const{normalize:normalize=!0}=props;return normalize&&Object.assign(props,(0,_math_gl_web_mercator__WEBPACK_IMPORTED_MODULE_0__.QA)(props)),props}_zoomFromCenter(scale){const{width:width,height:height}=this.getViewportProps();return this.zoom({pos:[width/2,height/2],scale:scale})}_panFromCenter(offset){const{width:width,height:height}=this.getViewportProps();return this.pan({startPos:[width/2,height/2],pos:[width/2+offset[0],height/2+offset[1]]})}_getUpdatedState(newProps){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...newProps})}_unproject(pos){const viewport=this.makeViewport(this.getViewportProps());return pos&&viewport.unproject(pos)}_getNewRotation(pos,startPos,startPitch,startBearing){const deltaX=pos[0]-startPos[0],deltaY=pos[1]-startPos[1],centerY=pos[1],startY=startPos[1],{width:width,height:height}=this.getViewportProps(),deltaScaleX=deltaX/width;let deltaScaleY=0;deltaY>0?Math.abs(height-startY)>5&&(deltaScaleY=deltaY/(startY-height)*1.2):deltaY<0&&startY>5&&(deltaScaleY=1-centerY/startY),deltaScaleY=(0,_math_gl_core__WEBPACK_IMPORTED_MODULE_4__.uZ)(deltaScaleY,-1,1);const{minPitch:minPitch,maxPitch:maxPitch}=this.getViewportProps();let pitch=startPitch;return deltaScaleY>0?pitch=startPitch+deltaScaleY*(maxPitch-startPitch):deltaScaleY<0&&(pitch=startPitch-deltaScaleY*(minPitch-startPitch)),{pitch:pitch,bearing:startBearing+180*deltaScaleX}}}class MapController extends _controller__WEBPACK_IMPORTED_MODULE_5__.Z{constructor(...args){super(...args),(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_3__.Z)(this,"ControllerState",MapState),(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_3__.Z)(this,"transition",{transitionDuration:300,transitionInterpolator:new _transitions_linear_interpolator__WEBPACK_IMPORTED_MODULE_6__.Z({transitionProps:{compare:["longitude","latitude","zoom","bearing","pitch","position"],required:["longitude","latitude","zoom"]}})}),(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_3__.Z)(this,"dragMode","pan")}setProps(props){props.position=props.position||[0,0,0];const oldProps=this.props;super.setProps(props);(!oldProps||oldProps.height!==props.height)&&this.updateViewport(new this.ControllerState({makeViewport:this.makeViewport,...props,...this.state}))}}},"./node_modules/@deck.gl/core/dist/esm/controllers/orbit-controller.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{G:function(){return OrbitState},Z:function(){return OrbitController}});var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),_math_gl_core__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@math.gl/core/dist/esm/lib/common.js"),_controller__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/controllers/controller.js"),_view_state__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/controllers/view-state.js"),_utils_math_utils__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/utils/math-utils.js"),_transitions_linear_interpolator__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/transitions/linear-interpolator.js");class OrbitState extends _view_state__WEBPACK_IMPORTED_MODULE_0__.Z{constructor(options){const{width:width,height:height,rotationX:rotationX=0,rotationOrbit:rotationOrbit=0,target:target=[0,0,0],zoom:zoom=0,minRotationX:minRotationX=-90,maxRotationX:maxRotationX=90,minZoom:minZoom=-1/0,maxZoom:maxZoom=1/0,startPanPosition:startPanPosition,startRotatePos:startRotatePos,startRotationX:startRotationX,startRotationOrbit:startRotationOrbit,startZoomPosition:startZoomPosition,startZoom:startZoom}=options;super({width:width,height:height,rotationX:rotationX,rotationOrbit:rotationOrbit,target:target,zoom:zoom,minRotationX:minRotationX,maxRotationX:maxRotationX,minZoom:minZoom,maxZoom:maxZoom},{startPanPosition:startPanPosition,startRotatePos:startRotatePos,startRotationX:startRotationX,startRotationOrbit:startRotationOrbit,startZoomPosition:startZoomPosition,startZoom:startZoom}),(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.Z)(this,"makeViewport",void 0),this.makeViewport=options.makeViewport}panStart({pos:pos}){return this._getUpdatedState({startPanPosition:this._unproject(pos)})}pan({pos:pos,startPosition:startPosition}){const startPanPosition=this.getState().startPanPosition||startPosition;if(!startPanPosition)return this;const newProps=this.makeViewport(this.getViewportProps()).panByPosition(startPanPosition,pos);return this._getUpdatedState(newProps)}panEnd(){return this._getUpdatedState({startPanPosition:null})}rotateStart({pos:pos}){return this._getUpdatedState({startRotatePos:pos,startRotationX:this.getViewportProps().rotationX,startRotationOrbit:this.getViewportProps().rotationOrbit})}rotate({pos:pos,deltaAngleX:deltaAngleX=0,deltaAngleY:deltaAngleY=0}){const{startRotatePos:startRotatePos,startRotationX:startRotationX,startRotationOrbit:startRotationOrbit}=this.getState(),{width:width,height:height}=this.getViewportProps();if(!startRotatePos||void 0===startRotationX||void 0===startRotationOrbit)return this;let newRotation;if(pos){let deltaScaleX=(pos[0]-startRotatePos[0])/width;(startRotationX<-90||startRotationX>90)&&(deltaScaleX*=-1),newRotation={rotationX:startRotationX+180*((pos[1]-startRotatePos[1])/height),rotationOrbit:startRotationOrbit+180*deltaScaleX}}else newRotation={rotationX:startRotationX+deltaAngleY,rotationOrbit:startRotationOrbit+deltaAngleX};return this._getUpdatedState(newRotation)}rotateEnd(){return this._getUpdatedState({startRotationX:null,startRotationOrbit:null})}shortestPathFrom(viewState){const fromProps=viewState.getViewportProps(),props={...this.getViewportProps()},{rotationOrbit:rotationOrbit}=props;return Math.abs(rotationOrbit-fromProps.rotationOrbit)>180&&(props.rotationOrbit=rotationOrbit<0?rotationOrbit+360:rotationOrbit-360),props}zoomStart({pos:pos}){return this._getUpdatedState({startZoomPosition:this._unproject(pos),startZoom:this.getViewportProps().zoom})}zoom({pos:pos,startPos:startPos,scale:scale}){let{startZoom:startZoom,startZoomPosition:startZoomPosition}=this.getState();if(startZoomPosition||(startZoom=this.getViewportProps().zoom,startZoomPosition=this._unproject(startPos)||this._unproject(pos)),!startZoomPosition)return this;const newZoom=this._calculateNewZoom({scale:scale,startZoom:startZoom}),zoomedViewport=this.makeViewport({...this.getViewportProps(),zoom:newZoom});return this._getUpdatedState({zoom:newZoom,...zoomedViewport.panByPosition(startZoomPosition,pos)})}zoomEnd(){return this._getUpdatedState({startZoomPosition:null,startZoom:null})}zoomIn(speed=2){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:speed})})}zoomOut(speed=2){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:1/speed})})}moveLeft(speed=50){return this._panFromCenter([-speed,0])}moveRight(speed=50){return this._panFromCenter([speed,0])}moveUp(speed=50){return this._panFromCenter([0,-speed])}moveDown(speed=50){return this._panFromCenter([0,speed])}rotateLeft(speed=15){return this._getUpdatedState({rotationOrbit:this.getViewportProps().rotationOrbit-speed})}rotateRight(speed=15){return this._getUpdatedState({rotationOrbit:this.getViewportProps().rotationOrbit+speed})}rotateUp(speed=10){return this._getUpdatedState({rotationX:this.getViewportProps().rotationX-speed})}rotateDown(speed=10){return this._getUpdatedState({rotationX:this.getViewportProps().rotationX+speed})}_unproject(pos){const viewport=this.makeViewport(this.getViewportProps());return pos&&viewport.unproject(pos)}_calculateNewZoom({scale:scale,startZoom:startZoom}){const{maxZoom:maxZoom,minZoom:minZoom}=this.getViewportProps();void 0===startZoom&&(startZoom=this.getViewportProps().zoom);const zoom=startZoom+Math.log2(scale);return(0,_math_gl_core__WEBPACK_IMPORTED_MODULE_2__.uZ)(zoom,minZoom,maxZoom)}_panFromCenter(offset){const{width:width,height:height,target:target}=this.getViewportProps();return this.pan({startPosition:target,pos:[width/2+offset[0],height/2+offset[1]]})}_getUpdatedState(newProps){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...newProps})}applyConstraints(props){const{maxZoom:maxZoom,minZoom:minZoom,zoom:zoom,maxRotationX:maxRotationX,minRotationX:minRotationX,rotationOrbit:rotationOrbit}=props;return props.zoom=Array.isArray(zoom)?[(0,_math_gl_core__WEBPACK_IMPORTED_MODULE_2__.uZ)(zoom[0],minZoom,maxZoom),(0,_math_gl_core__WEBPACK_IMPORTED_MODULE_2__.uZ)(zoom[1],minZoom,maxZoom)]:(0,_math_gl_core__WEBPACK_IMPORTED_MODULE_2__.uZ)(zoom,minZoom,maxZoom),props.rotationX=(0,_math_gl_core__WEBPACK_IMPORTED_MODULE_2__.uZ)(props.rotationX,minRotationX,maxRotationX),(rotationOrbit<-180||rotationOrbit>180)&&(props.rotationOrbit=(0,_utils_math_utils__WEBPACK_IMPORTED_MODULE_3__.wQ)(rotationOrbit+180,360)-180),props}}class OrbitController extends _controller__WEBPACK_IMPORTED_MODULE_4__.Z{constructor(...args){super(...args),(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.Z)(this,"ControllerState",OrbitState),(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.Z)(this,"transition",{transitionDuration:300,transitionInterpolator:new _transitions_linear_interpolator__WEBPACK_IMPORTED_MODULE_5__.Z({transitionProps:{compare:["target","zoom","rotationX","rotationOrbit"],required:["target","zoom"]}})})}}},"./node_modules/@deck.gl/core/dist/esm/controllers/orthographic-controller.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return OrthographicController}});var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),_math_gl_core__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@math.gl/core/dist/esm/lib/common.js"),_controller__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/controllers/controller.js"),_orbit_controller__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/controllers/orbit-controller.js"),_transitions_linear_interpolator__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/transitions/linear-interpolator.js");class OrthographicState extends _orbit_controller__WEBPACK_IMPORTED_MODULE_0__.G{constructor(props){super(props),(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.Z)(this,"zoomAxis",void 0),this.zoomAxis=props.zoomAxis||"all"}_calculateNewZoom({scale:scale,startZoom:startZoom}){const{maxZoom:maxZoom,minZoom:minZoom}=this.getViewportProps();void 0===startZoom&&(startZoom=this.getViewportProps().zoom);let deltaZoom=Math.log2(scale);if(Array.isArray(startZoom)){let[newZoomX,newZoomY]=startZoom;switch(this.zoomAxis){case"X":newZoomX=(0,_math_gl_core__WEBPACK_IMPORTED_MODULE_2__.uZ)(newZoomX+deltaZoom,minZoom,maxZoom);break;case"Y":newZoomY=(0,_math_gl_core__WEBPACK_IMPORTED_MODULE_2__.uZ)(newZoomY+deltaZoom,minZoom,maxZoom);break;default:let z=Math.min(newZoomX+deltaZoom,newZoomY+deltaZoom);z<minZoom&&(deltaZoom+=minZoom-z),z=Math.max(newZoomX+deltaZoom,newZoomY+deltaZoom),z>maxZoom&&(deltaZoom+=maxZoom-z),newZoomX+=deltaZoom,newZoomY+=deltaZoom}return[newZoomX,newZoomY]}return(0,_math_gl_core__WEBPACK_IMPORTED_MODULE_2__.uZ)(startZoom+deltaZoom,minZoom,maxZoom)}}class OrthographicController extends _controller__WEBPACK_IMPORTED_MODULE_3__.Z{constructor(...args){super(...args),(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.Z)(this,"ControllerState",OrthographicState),(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.Z)(this,"transition",{transitionDuration:300,transitionInterpolator:new _transitions_linear_interpolator__WEBPACK_IMPORTED_MODULE_4__.Z(["target","zoom"])}),(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.Z)(this,"dragMode","pan")}_onPanRotate(){return!1}}},"./node_modules/@deck.gl/core/dist/esm/controllers/transition-manager.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return TransitionManager},r:function(){return TRANSITION_EVENTS}});var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),_transitions_transition__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/transitions/transition.js");const noop=()=>{},TRANSITION_EVENTS={BREAK:1,SNAP_TO_END:2,IGNORE:3},DEFAULT_EASING=t=>t,DEFAULT_INTERRUPTION=TRANSITION_EVENTS.BREAK;class TransitionManager{constructor(opts){(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.Z)(this,"getControllerState",void 0),(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.Z)(this,"props",void 0),(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.Z)(this,"propsInTransition",void 0),(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.Z)(this,"transition",void 0),(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.Z)(this,"onViewStateChange",void 0),(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.Z)(this,"onStateChange",void 0),(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.Z)(this,"_onTransitionUpdate",(transition=>{const{time:time,settings:{interpolator:interpolator,startProps:startProps,endProps:endProps,duration:duration,easing:easing}}=transition,t=easing(time/duration),viewport=interpolator.interpolateProps(startProps,endProps,t);this.propsInTransition=this.getControllerState({...this.props,...viewport}).getViewportProps(),this.onViewStateChange({viewState:this.propsInTransition,oldViewState:this.props})})),this.getControllerState=opts.getControllerState,this.propsInTransition=null,this.transition=new _transitions_transition__WEBPACK_IMPORTED_MODULE_1__.Z(opts.timeline),this.onViewStateChange=opts.onViewStateChange||noop,this.onStateChange=opts.onStateChange||noop}finalize(){this.transition.cancel()}getViewportInTransition(){return this.propsInTransition}processViewStateChange(nextProps){let transitionTriggered=!1;const currentProps=this.props;if(this.props=nextProps,!currentProps||this._shouldIgnoreViewportChange(currentProps,nextProps))return!1;if(this._isTransitionEnabled(nextProps)){let startProps=currentProps;if(this.transition.inProgress){const{interruption:interruption,endProps:endProps}=this.transition.settings;startProps={...currentProps,...interruption===TRANSITION_EVENTS.SNAP_TO_END?endProps:this.propsInTransition||currentProps}}this._triggerTransition(startProps,nextProps),transitionTriggered=!0}else this.transition.cancel();return transitionTriggered}updateTransition(){this.transition.update()}_isTransitionEnabled(props){const{transitionDuration:transitionDuration,transitionInterpolator:transitionInterpolator}=props;return(transitionDuration>0||"auto"===transitionDuration)&&Boolean(transitionInterpolator)}_isUpdateDueToCurrentTransition(props){return!(!this.transition.inProgress||!this.propsInTransition)&&this.transition.settings.interpolator.arePropsEqual(props,this.propsInTransition)}_shouldIgnoreViewportChange(currentProps,nextProps){return this.transition.inProgress?this.transition.settings.interruption===TRANSITION_EVENTS.IGNORE||this._isUpdateDueToCurrentTransition(nextProps):!this._isTransitionEnabled(nextProps)||nextProps.transitionInterpolator.arePropsEqual(currentProps,nextProps)}_triggerTransition(startProps,endProps){const startViewstate=this.getControllerState(startProps),endViewStateProps=this.getControllerState(endProps).shortestPathFrom(startViewstate),transitionInterpolator=endProps.transitionInterpolator,duration=transitionInterpolator.getDuration?transitionInterpolator.getDuration(startProps,endProps):endProps.transitionDuration;if(0===duration)return;const initialProps=transitionInterpolator.initializeProps(startProps,endViewStateProps);this.propsInTransition={};const transitionSettings={duration:duration,easing:endProps.transitionEasing||DEFAULT_EASING,interpolator:transitionInterpolator,interruption:endProps.transitionInterruption||DEFAULT_INTERRUPTION,startProps:initialProps.start,endProps:initialProps.end,onStart:endProps.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(endProps.onTransitionInterrupt),onEnd:this._onTransitionEnd(endProps.onTransitionEnd)};this.transition.start(transitionSettings),this.onStateChange({inTransition:!0}),this.updateTransition()}_onTransitionEnd(callback){return transition=>{this.propsInTransition=null,this.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1}),null==callback||callback(transition)}}}},"./node_modules/@deck.gl/core/dist/esm/controllers/view-state.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return ViewState}});var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js");class ViewState{constructor(props,state){(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.Z)(this,"_viewportProps",void 0),(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.Z)(this,"_state",void 0),this._viewportProps=this.applyConstraints(props),this._state=state}getViewportProps(){return this._viewportProps}getState(){return this._state}}},"./node_modules/@deck.gl/core/dist/esm/debug/index.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return debug},z:function(){return register}});var _utils_log__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/utils/log.js");let loggers={};function register(handlers){loggers=handlers}function debug(eventType,arg1,arg2,arg3){_utils_log__WEBPACK_IMPORTED_MODULE_0__.Z.level>0&&loggers[eventType]&&loggers[eventType].call(null,arg1,arg2,arg3)}},"./node_modules/@deck.gl/core/dist/esm/effects/lighting/ambient-light.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{M:function(){return AmbientLight}});var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js");const DEFAULT_LIGHT_COLOR=[255,255,255],DEFAULT_LIGHT_INTENSITY=1;let idCount=0;class AmbientLight{constructor(props={}){(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.Z)(this,"id",void 0),(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.Z)(this,"color",void 0),(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.Z)(this,"intensity",void 0),(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.Z)(this,"type","ambient");const{color:color=DEFAULT_LIGHT_COLOR}=props,{intensity:intensity=DEFAULT_LIGHT_INTENSITY}=props;this.id=props.id||"ambient-".concat(idCount++),this.color=color,this.intensity=intensity}}},"./node_modules/@deck.gl/core/dist/esm/effects/lighting/directional-light.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{O:function(){return DirectionalLight}});var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),_math_gl_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@math.gl/core/dist/esm/classes/vector3.js");const DEFAULT_LIGHT_COLOR=[255,255,255],DEFAULT_LIGHT_INTENSITY=1,DEFAULT_LIGHT_DIRECTION=[0,0,-1];let idCount=0;class DirectionalLight{constructor(props={}){(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.Z)(this,"id",void 0),(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.Z)(this,"color",void 0),(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.Z)(this,"intensity",void 0),(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.Z)(this,"type","directional"),(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.Z)(this,"direction",void 0),(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.Z)(this,"shadow",void 0);const{color:color=DEFAULT_LIGHT_COLOR}=props,{intensity:intensity=DEFAULT_LIGHT_INTENSITY}=props,{direction:direction=DEFAULT_LIGHT_DIRECTION}=props,{_shadow:_shadow=!1}=props;this.id=props.id||"directional-".concat(idCount++),this.color=color,this.intensity=intensity,this.type="directional",this.direction=new _math_gl_core__WEBPACK_IMPORTED_MODULE_1__.Z(direction).normalize().toArray(),this.shadow=_shadow}getProjectedLight(opts){return this}}},"./node_modules/@deck.gl/core/dist/esm/effects/lighting/lighting-effect.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return LightingEffect}});var defineProperty=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),program_manager=__webpack_require__("./node_modules/@luma.gl/engine/dist/esm/lib/program-manager.js"),texture_2d=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/classes/texture-2d.js"),ambient_light=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/effects/lighting/ambient-light.js"),directional_light=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/effects/lighting/directional-light.js"),matrix4=__webpack_require__("./node_modules/@math.gl/core/dist/esm/classes/matrix4.js"),vector3=__webpack_require__("./node_modules/@math.gl/core/dist/esm/classes/vector3.js"),layers_pass=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/passes/layers-pass.js"),renderbuffer=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/classes/renderbuffer.js"),framebuffer=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/classes/framebuffer.js"),esm=__webpack_require__("./node_modules/@luma.gl/gltools/dist/esm/index.js");class ShadowPass extends layers_pass.Z{constructor(gl,props){super(gl,props),(0,defineProperty.Z)(this,"shadowMap",void 0),(0,defineProperty.Z)(this,"depthBuffer",void 0),(0,defineProperty.Z)(this,"fbo",void 0),this.shadowMap=new texture_2d.Z(gl,{width:1,height:1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.depthBuffer=new renderbuffer.Z(gl,{format:33189,width:1,height:1}),this.fbo=new framebuffer.Z(gl,{id:"shadowmap",width:1,height:1,attachments:{36064:this.shadowMap,36096:this.depthBuffer}})}render(params){const target=this.fbo;(0,esm.s8)(this.gl,{depthRange:[0,1],depthTest:!0,blend:!1,clearColor:[1,1,1,1]},(()=>{const viewport=params.viewports[0],pixelRatio=(0,esm.w)(this.gl),width=viewport.width*pixelRatio,height=viewport.height*pixelRatio;width===target.width&&height===target.height||target.resize({width:width,height:height}),super.render({...params,target:target,pass:"shadow"})}))}shouldDrawLayer(layer){return!1!==layer.props.shadowEnabled}getModuleParameters(){return{drawToShadowMap:!0}}delete(){this.fbo&&(this.fbo.delete(),this.fbo=null),this.shadowMap&&(this.shadowMap.delete(),this.shadowMap=null),this.depthBuffer&&(this.depthBuffer.delete(),this.depthBuffer=null)}}var shadow=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/shaderlib/shadow/shadow.js");const DEFAULT_AMBIENT_LIGHT_PROPS={color:[255,255,255],intensity:1},DEFAULT_DIRECTIONAL_LIGHT_PROPS=[{color:[255,255,255],intensity:1,direction:[-1,3,-1]},{color:[255,255,255],intensity:.9,direction:[1,-8,-2.5]}],DEFAULT_SHADOW_COLOR=[0,0,0,200/255];class LightingEffect{constructor(props={}){(0,defineProperty.Z)(this,"id","lighting-effect"),(0,defineProperty.Z)(this,"props",void 0),(0,defineProperty.Z)(this,"shadowColor",DEFAULT_SHADOW_COLOR),(0,defineProperty.Z)(this,"shadow",void 0),(0,defineProperty.Z)(this,"ambientLight",void 0),(0,defineProperty.Z)(this,"directionalLights",void 0),(0,defineProperty.Z)(this,"pointLights",void 0),(0,defineProperty.Z)(this,"shadowPasses",[]),(0,defineProperty.Z)(this,"shadowMaps",[]),(0,defineProperty.Z)(this,"dummyShadowMap",null),(0,defineProperty.Z)(this,"programManager",void 0),(0,defineProperty.Z)(this,"shadowMatrices",void 0),this.setProps(props)}setProps(props){this.ambientLight=null,this.directionalLights=[],this.pointLights=[];for(const key in props){const lightSource=props[key];switch(lightSource.type){case"ambient":this.ambientLight=lightSource;break;case"directional":this.directionalLights.push(lightSource);break;case"point":this.pointLights.push(lightSource)}}this._applyDefaultLights(),this.shadow=this.directionalLights.some((light=>light.shadow)),this.props=props}preRender(gl,{layers:layers,layerFilter:layerFilter,viewports:viewports,onViewportActive:onViewportActive,views:views}){if(this.shadow){this.shadowMatrices=this._calculateMatrices(),0===this.shadowPasses.length&&this._createShadowPasses(gl),this.programManager||(this.programManager=program_manager.Z.getDefaultProgramManager(gl),shadow.Z&&this.programManager.addDefaultModule(shadow.Z)),this.dummyShadowMap||(this.dummyShadowMap=new texture_2d.Z(gl,{width:1,height:1}));for(let i=0;i<this.shadowPasses.length;i++){this.shadowPasses[i].render({layers:layers,layerFilter:layerFilter,viewports:viewports,onViewportActive:onViewportActive,views:views,moduleParameters:{shadowLightId:i,dummyShadowMap:this.dummyShadowMap,shadowMatrices:this.shadowMatrices}})}}}getModuleParameters(layer){const parameters=this.shadow?{shadowMaps:this.shadowMaps,dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:this.shadowMatrices}:{};return parameters.lightSources={ambientLight:this.ambientLight,directionalLights:this.directionalLights.map((directionalLight=>directionalLight.getProjectedLight({layer:layer}))),pointLights:this.pointLights.map((pointLight=>pointLight.getProjectedLight({layer:layer})))},parameters}cleanup(){for(const shadowPass of this.shadowPasses)shadowPass.delete();this.shadowPasses.length=0,this.shadowMaps.length=0,this.dummyShadowMap&&(this.dummyShadowMap.delete(),this.dummyShadowMap=null),this.shadow&&this.programManager&&(this.programManager.removeDefaultModule(shadow.Z),this.programManager=null)}_calculateMatrices(){const lightMatrices=[];for(const light of this.directionalLights){const viewMatrix=(new matrix4.Z).lookAt({eye:new vector3.Z(light.direction).negate()});lightMatrices.push(viewMatrix)}return lightMatrices}_createShadowPasses(gl){for(let i=0;i<this.directionalLights.length;i++){const shadowPass=new ShadowPass(gl);this.shadowPasses[i]=shadowPass,this.shadowMaps[i]=shadowPass.shadowMap}}_applyDefaultLights(){const{ambientLight:ambientLight,pointLights:pointLights,directionalLights:directionalLights}=this;ambientLight||0!==pointLights.length||0!==directionalLights.length||(this.ambientLight=new ambient_light.M(DEFAULT_AMBIENT_LIGHT_PROPS),this.directionalLights.push(new directional_light.O(DEFAULT_DIRECTIONAL_LIGHT_PROPS[0]),new directional_light.O(DEFAULT_DIRECTIONAL_LIGHT_PROPS[1])))}}},"./node_modules/@deck.gl/core/dist/esm/lib/attribute/attribute-manager.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return AttributeManager}});var defineProperty=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),features=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/features/features.js"),webgl_features_table=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/features/webgl-features-table.js"),buffer=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/classes/buffer.js");class ShaderAttribute{constructor(dataColumn,opts){(0,defineProperty.Z)(this,"opts",void 0),(0,defineProperty.Z)(this,"source",void 0),this.opts=opts,this.source=dataColumn}get value(){return this.source.value}getValue(){const buffer=this.source.getBuffer(),accessor=this.getAccessor();if(buffer)return[buffer,accessor];const{value:value}=this.source,{size:size}=accessor;let constantValue=value;if(value&&value.length!==size){constantValue=new Float32Array(size);const index=accessor.elementOffset||0;for(let i=0;i<size;++i)constantValue[i]=value[index+i]}return constantValue}getAccessor(){return{...this.source.getAccessor(),...this.opts}}}var typed_array_manager=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/utils/typed-array-manager.js"),math_utils=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/utils/math-utils.js"),log=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/utils/log.js");function getStride(accessor){return accessor.stride||accessor.size*accessor.bytesPerElement}function resolveShaderAttribute(baseAccessor,shaderAttributeOptions){shaderAttributeOptions.offset&&log.Z.removed("shaderAttribute.offset","vertexOffset, elementOffset")();const stride=getStride(baseAccessor),offset=(void 0!==shaderAttributeOptions.vertexOffset?shaderAttributeOptions.vertexOffset:baseAccessor.vertexOffset||0)*stride+(shaderAttributeOptions.elementOffset||0)*baseAccessor.bytesPerElement+(baseAccessor.offset||0);return{...shaderAttributeOptions,offset:offset,stride:stride}}class DataColumn{constructor(gl,opts,state){(0,defineProperty.Z)(this,"gl",void 0),(0,defineProperty.Z)(this,"id",void 0),(0,defineProperty.Z)(this,"size",void 0),(0,defineProperty.Z)(this,"settings",void 0),(0,defineProperty.Z)(this,"value",void 0),(0,defineProperty.Z)(this,"doublePrecision",void 0),(0,defineProperty.Z)(this,"_buffer",void 0),(0,defineProperty.Z)(this,"state",void 0),this.gl=gl,this.id=opts.id||"",this.size=opts.size||1;const logicalType=opts.logicalType||opts.type,doublePrecision=5130===logicalType;let bufferType,{defaultValue:defaultValue}=opts;defaultValue=Number.isFinite(defaultValue)?[defaultValue]:defaultValue||new Array(this.size).fill(0),bufferType=doublePrecision?5126:!logicalType&&opts.isIndexed?gl&&(0,features.U6)(gl,webgl_features_table.h.ELEMENT_INDEX_UINT32)?5125:5123:logicalType||5126;let defaultType=function glArrayFromType(glType){switch(glType){case 5126:return Float32Array;case 5130:return Float64Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return Uint8ClampedArray;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Unknown GL type")}}(logicalType||bufferType||5126);this.doublePrecision=doublePrecision,doublePrecision&&!1===opts.fp64&&(defaultType=Float32Array),this.value=null,this.settings={...opts,defaultType:defaultType,defaultValue:defaultValue,logicalType:logicalType,type:bufferType,size:this.size,bytesPerElement:defaultType.BYTES_PER_ELEMENT},this.state={...state,externalBuffer:null,bufferAccessor:this.settings,allocatedValue:null,numInstances:0,bounds:null,constant:!1},this._buffer=null}get isConstant(){return this.state.constant}get buffer(){if(!this._buffer){const{isIndexed:isIndexed,type:type}=this.settings;this._buffer=new buffer.Z(this.gl,{id:this.id,target:isIndexed?34963:34962,accessor:{type:type}})}return this._buffer}get byteOffset(){const accessor=this.getAccessor();return accessor.vertexOffset?accessor.vertexOffset*getStride(accessor):0}get numInstances(){return this.state.numInstances}set numInstances(n){this.state.numInstances=n}delete(){this._buffer&&(this._buffer.delete(),this._buffer=null),typed_array_manager.Z.release(this.state.allocatedValue)}getShaderAttributes(id,options){if(this.doublePrecision){const shaderAttributes={},isBuffer64Bit=this.value instanceof Float64Array,doubleShaderAttributeDefs=function resolveDoublePrecisionShaderAttributes(baseAccessor,shaderAttributeOptions){const resolvedOptions=resolveShaderAttribute(baseAccessor,shaderAttributeOptions);return{high:resolvedOptions,low:{...resolvedOptions,offset:resolvedOptions.offset+4*baseAccessor.size}}}(this.getAccessor(),options||{});return shaderAttributes[id]=new ShaderAttribute(this,doubleShaderAttributeDefs.high),shaderAttributes["".concat(id,"64Low")]=isBuffer64Bit?new ShaderAttribute(this,doubleShaderAttributeDefs.low):new Float32Array(this.size),shaderAttributes}if(options){const shaderAttributeDef=resolveShaderAttribute(this.getAccessor(),options);return{[id]:new ShaderAttribute(this,shaderAttributeDef)}}return{[id]:this}}getBuffer(){return this.state.constant?null:this.state.externalBuffer||this._buffer}getValue(){return this.state.constant?this.value:[this.getBuffer(),this.getAccessor()]}getAccessor(){return this.state.bufferAccessor}getBounds(){if(this.state.bounds)return this.state.bounds;let result=null;if(this.state.constant&&this.value){const min=Array.from(this.value);result=[min,min]}else{const{value:value,numInstances:numInstances,size:size}=this,len=numInstances*size;if(value&&len&&value.length>=len){const min=new Array(size).fill(1/0),max=new Array(size).fill(-1/0);for(let i=0;i<len;)for(let j=0;j<size;j++){const v=value[i++];v<min[j]&&(min[j]=v),v>max[j]&&(max[j]=v)}result=[min,max]}}return this.state.bounds=result,result}setData(data){const{state:state}=this;let opts;opts=ArrayBuffer.isView(data)?{value:data}:data instanceof buffer.Z?{buffer:data}:data;const accessor={...this.settings,...opts};if(state.bufferAccessor=accessor,state.bounds=null,opts.constant){let value=opts.value;value=this._normalizeValue(value,[],0),this.settings.normalized&&(value=this.normalizeConstant(value));if(!(!state.constant||!this._areValuesEqual(value,this.value)))return!1;state.externalBuffer=null,state.constant=!0,this.value=value}else if(opts.buffer){const buffer=opts.buffer;state.externalBuffer=buffer,state.constant=!1,this.value=opts.value||null;const isBuffer64Bit=opts.value instanceof Float64Array;accessor.type=opts.type||buffer.accessor.type,accessor.bytesPerElement=buffer.accessor.BYTES_PER_ELEMENT*(isBuffer64Bit?2:1),accessor.stride=getStride(accessor)}else if(opts.value){this._checkExternalBuffer(opts);let value=opts.value;state.externalBuffer=null,state.constant=!1,this.value=value,accessor.bytesPerElement=value.BYTES_PER_ELEMENT,accessor.stride=getStride(accessor);const{buffer:buffer,byteOffset:byteOffset}=this;this.doublePrecision&&value instanceof Float64Array&&(value=(0,math_utils.TK)(value,accessor));const requiredBufferSize=value.byteLength+byteOffset+2*accessor.stride;buffer.byteLength<requiredBufferSize&&buffer.reallocate(requiredBufferSize),buffer.setAccessor(null),buffer.subData({data:value,offset:byteOffset}),accessor.type=opts.type||buffer.accessor.type}return!0}updateSubBuffer(opts={}){this.state.bounds=null;const value=this.value,{startOffset:startOffset=0,endOffset:endOffset}=opts;this.buffer.subData({data:this.doublePrecision&&value instanceof Float64Array?(0,math_utils.TK)(value,{size:this.size,startIndex:startOffset,endIndex:endOffset}):value.subarray(startOffset,endOffset),offset:startOffset*value.BYTES_PER_ELEMENT+this.byteOffset})}allocate(numInstances,copy=!1){const{state:state}=this,oldValue=state.allocatedValue,value=typed_array_manager.Z.allocate(oldValue,numInstances+1,{size:this.size,type:this.settings.defaultType,copy:copy});this.value=value;const{buffer:buffer,byteOffset:byteOffset}=this;return buffer.byteLength<value.byteLength+byteOffset&&(buffer.reallocate(value.byteLength+byteOffset),copy&&oldValue&&buffer.subData({data:oldValue instanceof Float64Array?(0,math_utils.TK)(oldValue,this):oldValue,offset:byteOffset})),state.allocatedValue=value,state.constant=!1,state.externalBuffer=null,state.bufferAccessor=this.settings,!0}_checkExternalBuffer(opts){const{value:value}=opts;if(!ArrayBuffer.isView(value))throw new Error("Attribute ".concat(this.id," value is not TypedArray"));const ArrayType=this.settings.defaultType;let illegalArrayType=!1;if(this.doublePrecision&&(illegalArrayType=value.BYTES_PER_ELEMENT<4),illegalArrayType)throw new Error("Attribute ".concat(this.id," does not support ").concat(value.constructor.name));value instanceof ArrayType||!this.settings.normalized||"normalized"in opts||log.Z.warn("Attribute ".concat(this.id," is normalized"))()}normalizeConstant(value){switch(this.settings.type){case 5120:return new Float32Array(value).map((x=>(x+128)/255*2-1));case 5122:return new Float32Array(value).map((x=>(x+32768)/65535*2-1));case 5121:return new Float32Array(value).map((x=>x/255));case 5123:return new Float32Array(value).map((x=>x/65535));default:return value}}_normalizeValue(value,out,start){const{defaultValue:defaultValue,size:size}=this.settings;if(Number.isFinite(value))return out[start]=value,out;if(!value){let i=size;for(;--i>=0;)out[start+i]=defaultValue[i];return out}switch(size){case 4:out[start+3]=Number.isFinite(value[3])?value[3]:defaultValue[3];case 3:out[start+2]=Number.isFinite(value[2])?value[2]:defaultValue[2];case 2:out[start+1]=Number.isFinite(value[1])?value[1]:defaultValue[1];case 1:out[start+0]=Number.isFinite(value[0])?value[0]:defaultValue[0];break;default:let i=size;for(;--i>=0;)out[start+i]=Number.isFinite(value[i])?value[i]:defaultValue[i]}return out}_areValuesEqual(value1,value2){if(!value1||!value2)return!1;const{size:size}=this;for(let i=0;i<size;i++)if(value1[i]!==value2[i])return!1;return!0}}var assert=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/utils/assert.js"),iterable_utils=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/utils/iterable-utils.js"),flatten=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/utils/flatten.js");const EMPTY=[],FULL=[[0,1/0]];var attribute_transition_utils=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/lib/attribute/attribute-transition-utils.js");class Attribute extends DataColumn{constructor(gl,opts){super(gl,opts,{startIndices:null,lastExternalBuffer:null,binaryValue:null,binaryAccessor:null,needsUpdate:!0,needsRedraw:!1,updateRanges:FULL}),(0,defineProperty.Z)(this,"constant",!1),this.settings.update=opts.update||(opts.accessor?this._autoUpdater:void 0),Object.seal(this.settings),Object.seal(this.state),this._validateAttributeUpdaters()}get startIndices(){return this.state.startIndices}set startIndices(layout){this.state.startIndices=layout}needsUpdate(){return this.state.needsUpdate}needsRedraw({clearChangedFlags:clearChangedFlags=!1}={}){const needsRedraw=this.state.needsRedraw;return this.state.needsRedraw=needsRedraw&&!clearChangedFlags,needsRedraw}getUpdateTriggers(){const{accessor:accessor}=this.settings;return[this.id].concat("function"!=typeof accessor&&accessor||[])}supportsTransition(){return Boolean(this.settings.transition)}getTransitionSetting(opts){if(!opts||!this.supportsTransition())return null;const{accessor:accessor}=this.settings,layerSettings=this.settings.transition,userSettings=Array.isArray(accessor)?opts[accessor.find((a=>opts[a]))]:opts[accessor];return(0,attribute_transition_utils.M0)(userSettings,layerSettings)}setNeedsUpdate(reason=this.id,dataRange){if(this.state.needsUpdate=this.state.needsUpdate||reason,this.setNeedsRedraw(reason),dataRange){const{startRow:startRow=0,endRow:endRow=1/0}=dataRange;this.state.updateRanges=function add(rangeList,range){if(rangeList===FULL)return rangeList;if(range[0]<0&&(range[0]=0),range[0]>=range[1])return rangeList;const newRangeList=[],len=rangeList.length;let insertPosition=0;for(let i=0;i<len;i++){const range0=rangeList[i];range0[1]<range[0]?(newRangeList.push(range0),insertPosition=i+1):range0[0]>range[1]?newRangeList.push(range0):range=[Math.min(range0[0],range[0]),Math.max(range0[1],range[1])]}return newRangeList.splice(insertPosition,0,range),newRangeList}(this.state.updateRanges,[startRow,endRow])}else this.state.updateRanges=FULL}clearNeedsUpdate(){this.state.needsUpdate=!1,this.state.updateRanges=EMPTY}setNeedsRedraw(reason=this.id){this.state.needsRedraw=this.state.needsRedraw||reason}allocate(numInstances){const{state:state,settings:settings}=this;return!settings.noAlloc&&(!!settings.update&&(super.allocate(numInstances,state.updateRanges!==FULL),!0))}updateBuffer({numInstances:numInstances,data:data,props:props,context:context}){if(!this.needsUpdate())return!1;const{state:{updateRanges:updateRanges},settings:{update:update,noAlloc:noAlloc}}=this;let updated=!0;if(update){for(const[startRow,endRow]of updateRanges)update.call(context,this,{data:data,startRow:startRow,endRow:endRow,props:props,numInstances:numInstances});if(this.value)if(this.constant||this.buffer.byteLength<this.value.byteLength+this.byteOffset)this.setData({value:this.value,constant:this.constant}),this.constant=!1;else for(const[startRow,endRow]of updateRanges){const startOffset=Number.isFinite(startRow)?this.getVertexOffset(startRow):0,endOffset=Number.isFinite(endRow)?this.getVertexOffset(endRow):noAlloc||!Number.isFinite(numInstances)?this.value.length:numInstances*this.size;super.updateSubBuffer({startOffset:startOffset,endOffset:endOffset})}else;this._checkAttributeArray()}else updated=!1;return this.clearNeedsUpdate(),this.setNeedsRedraw(),updated}setConstantValue(value){if(void 0===value||"function"==typeof value)return!1;return this.setData({constant:!0,value:value})&&this.setNeedsRedraw(),this.clearNeedsUpdate(),!0}setExternalBuffer(buffer){const{state:state}=this;return buffer?(this.clearNeedsUpdate(),state.lastExternalBuffer===buffer||(state.lastExternalBuffer=buffer,this.setNeedsRedraw(),this.setData(buffer)),!0):(state.lastExternalBuffer=null,!1)}setBinaryValue(buffer,startIndices=null){const{state:state,settings:settings}=this;if(!buffer)return state.binaryValue=null,state.binaryAccessor=null,!1;if(settings.noAlloc)return!1;if(state.binaryValue===buffer)return this.clearNeedsUpdate(),!0;state.binaryValue=buffer,this.setNeedsRedraw();if(settings.transform||startIndices!==this.startIndices){ArrayBuffer.isView(buffer)&&(buffer={value:buffer});const binaryValue=buffer;(0,assert.Z)(ArrayBuffer.isView(binaryValue.value),"invalid ".concat(settings.accessor));const needsNormalize=Boolean(binaryValue.size)&&binaryValue.size!==this.size;return state.binaryAccessor=(0,iterable_utils.jr)(binaryValue.value,{size:binaryValue.size||this.size,stride:binaryValue.stride,offset:binaryValue.offset,startIndices:startIndices,nested:needsNormalize}),!1}return this.clearNeedsUpdate(),this.setData(buffer),!0}getVertexOffset(row){const{startIndices:startIndices}=this;return(startIndices?row<startIndices.length?startIndices[row]:this.numInstances:row)*this.size}getShaderAttributes(){const shaderAttributeDefs=this.settings.shaderAttributes||{[this.id]:null},shaderAttributes={};for(const shaderAttributeName in shaderAttributeDefs)Object.assign(shaderAttributes,super.getShaderAttributes(shaderAttributeName,shaderAttributeDefs[shaderAttributeName]));return shaderAttributes}_autoUpdater(attribute,{data:data,startRow:startRow,endRow:endRow,props:props,numInstances:numInstances}){if(attribute.constant)return;const{settings:settings,state:state,value:value,size:size,startIndices:startIndices}=attribute,{accessor:accessor,transform:transform}=settings,accessorFunc=state.binaryAccessor||("function"==typeof accessor?accessor:props[accessor]);(0,assert.Z)("function"==typeof accessorFunc,'accessor "'.concat(accessor,'" is not a function'));let i=attribute.getVertexOffset(startRow);const{iterable:iterable,objectInfo:objectInfo}=(0,iterable_utils.jB)(data,startRow,endRow);for(const object of iterable){objectInfo.index++;let objectValue=accessorFunc(object,objectInfo);if(transform&&(objectValue=transform.call(this,objectValue)),startIndices){const numVertices=(objectInfo.index<startIndices.length-1?startIndices[objectInfo.index+1]:numInstances)-startIndices[objectInfo.index];if(objectValue&&Array.isArray(objectValue[0])){let startIndex=i;for(const item of objectValue)attribute._normalizeValue(item,value,startIndex),startIndex+=size}else objectValue&&objectValue.length>size?value.set(objectValue,i):(attribute._normalizeValue(objectValue,objectInfo.target,0),(0,flatten.k)({target:value,source:objectInfo.target,start:i,count:numVertices}));i+=numVertices*size}else attribute._normalizeValue(objectValue,value,i),i+=size}}_validateAttributeUpdaters(){const{settings:settings}=this;if(!(settings.noAlloc||"function"==typeof settings.update))throw new Error("Attribute ".concat(this.id," missing update or accessor"))}_checkAttributeArray(){const{value:value}=this,limit=Math.min(4,this.size);if(value&&value.length>=limit){let valid=!0;switch(limit){case 4:valid=valid&&Number.isFinite(value[3]);case 3:valid=valid&&Number.isFinite(value[2]);case 2:valid=valid&&Number.isFinite(value[1]);case 1:valid=valid&&Number.isFinite(value[0]);break;default:valid=!1}if(!valid)throw new Error("Illegal attribute generated for ".concat(this.id))}}}var memoize=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/utils/memoize.js"),debug=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/debug/index.js"),transform=__webpack_require__("./node_modules/@luma.gl/engine/dist/esm/transform/transform.js"),transition=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/transitions/transition.js");const vs="\n#define SHADER_NAME interpolation-transition-vertex-shader\n\nuniform float time;\nattribute ATTRIBUTE_TYPE aFrom;\nattribute ATTRIBUTE_TYPE aTo;\nvarying ATTRIBUTE_TYPE vCurrent;\n\nvoid main(void) {\n  vCurrent = mix(aFrom, aTo, time);\n  gl_Position = vec4(0.0);\n}\n";var copy_and_blit=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/classes/copy-and-blit.js"),texture_2d=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/classes/texture-2d.js"),framebuffer=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/classes/framebuffer.js");const TRANSITION_TYPES={interpolation:class GPUInterpolationTransition{constructor({gl:gl,attribute:attribute,timeline:timeline}){(0,defineProperty.Z)(this,"gl",void 0),(0,defineProperty.Z)(this,"type","interpolation"),(0,defineProperty.Z)(this,"attributeInTransition",void 0),(0,defineProperty.Z)(this,"settings",void 0),(0,defineProperty.Z)(this,"attribute",void 0),(0,defineProperty.Z)(this,"transition",void 0),(0,defineProperty.Z)(this,"currentStartIndices",void 0),(0,defineProperty.Z)(this,"currentLength",void 0),(0,defineProperty.Z)(this,"transform",void 0),(0,defineProperty.Z)(this,"buffers",void 0),this.gl=gl,this.transition=new transition.Z(timeline),this.attribute=attribute,this.attributeInTransition=new Attribute(gl,attribute.settings),this.currentStartIndices=attribute.startIndices,this.currentLength=0,this.transform=function getTransform(gl,attribute){const attributeType=(0,attribute_transition_utils.w)(attribute.size);return new transform.Z(gl,{vs:vs,defines:{ATTRIBUTE_TYPE:attributeType},varyings:["vCurrent"]})}(gl,attribute);const bufferOpts={byteLength:0,usage:35050};this.buffers=[new buffer.Z(gl,bufferOpts),new buffer.Z(gl,bufferOpts)]}get inProgress(){return this.transition.inProgress}start(transitionSettings,numInstances){if(transitionSettings.duration<=0)return void this.transition.cancel();this.settings=transitionSettings;const{gl:gl,buffers:buffers,attribute:attribute}=this;(0,attribute_transition_utils.DY)(buffers);const padBufferOpts={numInstances:numInstances,attribute:attribute,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:transitionSettings.enter};for(const buffer of buffers)(0,attribute_transition_utils.IV)({buffer:buffer,...padBufferOpts});this.currentStartIndices=attribute.startIndices,this.currentLength=(0,attribute_transition_utils.pi)(attribute,numInstances),this.attributeInTransition.setData({buffer:buffers[1],value:attribute.value}),this.transition.start(transitionSettings),this.transform.update({elementCount:Math.floor(this.currentLength/attribute.size),sourceBuffers:{aFrom:buffers[0],aTo:(0,attribute_transition_utils.AQ)(gl,attribute)},feedbackBuffers:{vCurrent:buffers[1]}})}update(){const updated=this.transition.update();if(updated){const{duration:duration,easing:easing}=this.settings,{time:time}=this.transition;let t=time/duration;easing&&(t=easing(t)),this.transform.run({uniforms:{time:t}})}return updated}cancel(){this.transition.cancel(),this.transform.delete();for(const buffer of this.buffers)buffer.delete();this.buffers.length=0}},spring:class GPUSpringTransition{constructor({gl:gl,attribute:attribute,timeline:timeline}){(0,defineProperty.Z)(this,"gl",void 0),(0,defineProperty.Z)(this,"type","spring"),(0,defineProperty.Z)(this,"attributeInTransition",void 0),(0,defineProperty.Z)(this,"settings",void 0),(0,defineProperty.Z)(this,"attribute",void 0),(0,defineProperty.Z)(this,"transition",void 0),(0,defineProperty.Z)(this,"currentStartIndices",void 0),(0,defineProperty.Z)(this,"currentLength",void 0),(0,defineProperty.Z)(this,"texture",void 0),(0,defineProperty.Z)(this,"framebuffer",void 0),(0,defineProperty.Z)(this,"transform",void 0),(0,defineProperty.Z)(this,"buffers",void 0),this.gl=gl,this.type="spring",this.transition=new transition.Z(timeline),this.attribute=attribute,this.attributeInTransition=new Attribute(gl,{...attribute.settings,normalized:!1}),this.currentStartIndices=attribute.startIndices,this.currentLength=0,this.texture=function getTexture(gl){return new texture_2d.Z(gl,{data:new Uint8Array(4),format:6408,type:5121,border:0,mipmaps:!1,dataFormat:6408,width:1,height:1})}(gl),this.framebuffer=function getFramebuffer(gl,texture){return new framebuffer.Z(gl,{id:"spring-transition-is-transitioning-framebuffer",width:1,height:1,attachments:{36064:texture}})}(gl,this.texture),this.transform=function gpu_spring_transition_getTransform(gl,attribute,framebuffer){const attributeType=(0,attribute_transition_utils.w)(attribute.size);return new transform.Z(gl,{framebuffer:framebuffer,vs:"\n#define SHADER_NAME spring-transition-vertex-shader\n\n#define EPSILON 0.00001\n\nuniform float stiffness;\nuniform float damping;\nattribute ATTRIBUTE_TYPE aPrev;\nattribute ATTRIBUTE_TYPE aCur;\nattribute ATTRIBUTE_TYPE aTo;\nvarying ATTRIBUTE_TYPE vNext;\nvarying float vIsTransitioningFlag;\n\nATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {\n  ATTRIBUTE_TYPE velocity = cur - prev;\n  ATTRIBUTE_TYPE delta = dest - cur;\n  ATTRIBUTE_TYPE spring = delta * stiffness;\n  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;\n  return spring + damper + velocity + cur;\n}\n\nvoid main(void) {\n  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;\n  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;\n\n  vNext = getNextValue(aCur, aPrev, aTo);\n  gl_Position = vec4(0, 0, 0, 1);\n  gl_PointSize = 100.0;\n}\n",fs:"\n#define SHADER_NAME spring-transition-is-transitioning-fragment-shader\n\nvarying float vIsTransitioningFlag;\n\nvoid main(void) {\n  if (vIsTransitioningFlag == 0.0) {\n    discard;\n  }\n  gl_FragColor = vec4(1.0);\n}",defines:{ATTRIBUTE_TYPE:attributeType},varyings:["vNext"]})}(gl,attribute,this.framebuffer);const bufferOpts={byteLength:0,usage:35050};this.buffers=[new buffer.Z(gl,bufferOpts),new buffer.Z(gl,bufferOpts),new buffer.Z(gl,bufferOpts)]}get inProgress(){return this.transition.inProgress}start(transitionSettings,numInstances){const{gl:gl,buffers:buffers,attribute:attribute}=this,padBufferOpts={numInstances:numInstances,attribute:attribute,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:transitionSettings.enter};for(const buffer of buffers)(0,attribute_transition_utils.IV)({buffer:buffer,...padBufferOpts});this.settings=transitionSettings,this.currentStartIndices=attribute.startIndices,this.currentLength=(0,attribute_transition_utils.pi)(attribute,numInstances),this.attributeInTransition.setData({buffer:buffers[1],value:attribute.value}),this.transition.start({...transitionSettings,duration:1/0}),this.transform.update({elementCount:Math.floor(this.currentLength/attribute.size),sourceBuffers:{aTo:(0,attribute_transition_utils.AQ)(gl,attribute)}})}update(){const{buffers:buffers,transform:transform,framebuffer:framebuffer,transition:transition}=this;if(!transition.update())return!1;const settings=this.settings;transform.update({sourceBuffers:{aPrev:buffers[0],aCur:buffers[1]},feedbackBuffers:{vNext:buffers[2]}}),transform.run({framebuffer:framebuffer,discard:!1,clearRenderTarget:!0,uniforms:{stiffness:settings.stiffness,damping:settings.damping},parameters:{depthTest:!1,blend:!0,viewport:[0,0,1,1],blendFunc:[1,1],blendEquation:[32776,32776]}}),(0,attribute_transition_utils.DY)(buffers),this.attributeInTransition.setData({buffer:buffers[1],value:this.attribute.value});return(0,copy_and_blit.z6)(framebuffer)[0]>0||transition.end(),!0}cancel(){this.transition.cancel(),this.transform.delete();for(const buffer of this.buffers)buffer.delete();this.buffers.length=0,this.texture.delete(),this.framebuffer.delete()}}};class AttributeTransitionManager{constructor(gl,{id:id,timeline:timeline}){(0,defineProperty.Z)(this,"id",void 0),(0,defineProperty.Z)(this,"isSupported",void 0),(0,defineProperty.Z)(this,"gl",void 0),(0,defineProperty.Z)(this,"timeline",void 0),(0,defineProperty.Z)(this,"transitions",void 0),(0,defineProperty.Z)(this,"needsRedraw",void 0),(0,defineProperty.Z)(this,"numInstances",void 0),this.id=id,this.gl=gl,this.timeline=timeline,this.transitions={},this.needsRedraw=!1,this.numInstances=1,this.isSupported=transform.Z.isSupported(gl)}finalize(){for(const attributeName in this.transitions)this._removeTransition(attributeName)}update({attributes:attributes,transitions:transitions,numInstances:numInstances}){this.numInstances=numInstances||1;for(const attributeName in attributes){const attribute=attributes[attributeName],settings=attribute.getTransitionSetting(transitions);settings&&this._updateAttribute(attributeName,attribute,settings)}for(const attributeName in this.transitions){const attribute=attributes[attributeName];attribute&&attribute.getTransitionSetting(transitions)||this._removeTransition(attributeName)}}hasAttribute(attributeName){const transition=this.transitions[attributeName];return transition&&transition.inProgress}getAttributes(){const animatedAttributes={};for(const attributeName in this.transitions){const transition=this.transitions[attributeName];transition.inProgress&&(animatedAttributes[attributeName]=transition.attributeInTransition)}return animatedAttributes}run(){if(!this.isSupported||0===this.numInstances)return!1;for(const attributeName in this.transitions){this.transitions[attributeName].update()&&(this.needsRedraw=!0)}const needsRedraw=this.needsRedraw;return this.needsRedraw=!1,needsRedraw}_removeTransition(attributeName){this.transitions[attributeName].cancel(),delete this.transitions[attributeName]}_updateAttribute(attributeName,attribute,settings){const transition=this.transitions[attributeName];let isNew=!transition||transition.type!==settings.type;if(isNew){if(!this.isSupported)return void log.Z.warn("WebGL2 not supported by this browser. Transition for ".concat(attributeName," is disabled."))();transition&&this._removeTransition(attributeName);const TransitionType=TRANSITION_TYPES[settings.type];TransitionType?this.transitions[attributeName]=new TransitionType({attribute:attribute,timeline:this.timeline,gl:this.gl}):(log.Z.error("unsupported transition type '".concat(settings.type,"'"))(),isNew=!1)}(isNew||attribute.needsRedraw())&&(this.needsRedraw=!0,this.transitions[attributeName].start(settings,this.numInstances))}}class AttributeManager{constructor(gl,{id:id="attribute-manager",stats:stats,timeline:timeline}={}){(0,defineProperty.Z)(this,"id",void 0),(0,defineProperty.Z)(this,"gl",void 0),(0,defineProperty.Z)(this,"attributes",void 0),(0,defineProperty.Z)(this,"updateTriggers",void 0),(0,defineProperty.Z)(this,"needsRedraw",void 0),(0,defineProperty.Z)(this,"userData",void 0),(0,defineProperty.Z)(this,"stats",void 0),(0,defineProperty.Z)(this,"attributeTransitionManager",void 0),(0,defineProperty.Z)(this,"mergeBoundsMemoized",(0,memoize.Z)(math_utils.cc)),this.id=id,this.gl=gl,this.attributes={},this.updateTriggers={},this.needsRedraw=!0,this.userData={},this.stats=stats,this.attributeTransitionManager=new AttributeTransitionManager(gl,{id:"".concat(id,"-transitions"),timeline:timeline}),Object.seal(this)}finalize(){for(const attributeName in this.attributes)this.attributes[attributeName].delete();this.attributeTransitionManager.finalize()}getNeedsRedraw(opts={clearRedrawFlags:!1}){const redraw=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!opts.clearRedrawFlags,redraw&&this.id}setNeedsRedraw(){this.needsRedraw=!0}add(attributes){this._add(attributes)}addInstanced(attributes){this._add(attributes,{instanced:1})}remove(attributeNameArray){for(const name of attributeNameArray)void 0!==this.attributes[name]&&(this.attributes[name].delete(),delete this.attributes[name])}invalidate(triggerName,dataRange){const invalidatedAttributes=this._invalidateTrigger(triggerName,dataRange);(0,debug.Z)("attributeManager.invalidate",this,triggerName,invalidatedAttributes)}invalidateAll(dataRange){for(const attributeName in this.attributes)this.attributes[attributeName].setNeedsUpdate(attributeName,dataRange);(0,debug.Z)("attributeManager.invalidate",this,"all")}update({data:data,numInstances:numInstances,startIndices:startIndices=null,transitions:transitions,props:props={},buffers:buffers={},context:context={}}){let updated=!1;(0,debug.Z)("attributeManager.updateStart",this),this.stats&&this.stats.get("Update Attributes").timeStart();for(const attributeName in this.attributes){const attribute=this.attributes[attributeName],accessorName=attribute.settings.accessor;attribute.startIndices=startIndices,attribute.numInstances=numInstances,props[attributeName]&&log.Z.removed("props.".concat(attributeName),"data.attributes.".concat(attributeName))(),attribute.setExternalBuffer(buffers[attributeName])||attribute.setBinaryValue("string"==typeof accessorName?buffers[accessorName]:void 0,data.startIndices)||"string"==typeof accessorName&&!buffers[accessorName]&&attribute.setConstantValue(props[accessorName])||attribute.needsUpdate()&&(updated=!0,this._updateAttribute({attribute:attribute,numInstances:numInstances,data:data,props:props,context:context})),this.needsRedraw=this.needsRedraw||attribute.needsRedraw()}updated&&(0,debug.Z)("attributeManager.updateEnd",this,numInstances),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:numInstances,transitions:transitions})}updateTransition(){const{attributeTransitionManager:attributeTransitionManager}=this,transitionUpdated=attributeTransitionManager.run();return this.needsRedraw=this.needsRedraw||transitionUpdated,transitionUpdated}getAttributes(){return this.attributes}getBounds(attributeNames){const bounds=attributeNames.map((attributeName=>{var _this$attributes$attr;return null===(_this$attributes$attr=this.attributes[attributeName])||void 0===_this$attributes$attr?void 0:_this$attributes$attr.getBounds()}));return this.mergeBoundsMemoized(bounds)}getChangedAttributes(opts={clearChangedFlags:!1}){const{attributes:attributes,attributeTransitionManager:attributeTransitionManager}=this,changedAttributes={...attributeTransitionManager.getAttributes()};for(const attributeName in attributes){const attribute=attributes[attributeName];attribute.needsRedraw(opts)&&!attributeTransitionManager.hasAttribute(attributeName)&&(changedAttributes[attributeName]=attribute)}return changedAttributes}getShaderAttributes(attributes,excludeAttributes={}){attributes||(attributes=this.getAttributes());const shaderAttributes={};for(const attributeName in attributes)excludeAttributes[attributeName]||Object.assign(shaderAttributes,attributes[attributeName].getShaderAttributes());return shaderAttributes}_add(attributes,extraProps={}){for(const attributeName in attributes){const attribute=attributes[attributeName];this.attributes[attributeName]=this._createAttribute(attributeName,attribute,extraProps)}this._mapUpdateTriggersToAttributes()}_createAttribute(name,attribute,extraProps){const props={...attribute,id:name,size:(attribute.isIndexed?1:attribute.size)||1,divisor:extraProps.instanced?1:attribute.divisor||0};return new Attribute(this.gl,props)}_mapUpdateTriggersToAttributes(){const triggers={};for(const attributeName in this.attributes){this.attributes[attributeName].getUpdateTriggers().forEach((triggerName=>{triggers[triggerName]||(triggers[triggerName]=[]),triggers[triggerName].push(attributeName)}))}this.updateTriggers=triggers}_invalidateTrigger(triggerName,dataRange){const{attributes:attributes,updateTriggers:updateTriggers}=this,invalidatedAttributes=updateTriggers[triggerName];return invalidatedAttributes&&invalidatedAttributes.forEach((name=>{const attribute=attributes[name];attribute&&attribute.setNeedsUpdate(attribute.id,dataRange)})),invalidatedAttributes}_updateAttribute(opts){const{attribute:attribute,numInstances:numInstances}=opts;if((0,debug.Z)("attribute.updateStart",attribute),attribute.constant)return void attribute.setConstantValue(attribute.value);attribute.allocate(numInstances)&&(0,debug.Z)("attribute.allocate",attribute,numInstances);attribute.updateBuffer(opts)&&(this.needsRedraw=!0,(0,debug.Z)("attribute.updateEnd",attribute,numInstances))}}},"./node_modules/@deck.gl/core/dist/esm/lib/attribute/attribute-transition-utils.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";function padArrayChunk(options){const{source:source,target:target,start:start=0,size:size,getData:getData}=options,end=options.end||target.length,sourceLength=source.length,targetLength=end-start;if(sourceLength>targetLength)return void target.set(source.subarray(0,targetLength),start);if(target.set(source,start),!getData)return;let i=sourceLength;for(;i<targetLength;){const datum=getData(i,source);for(let j=0;j<size;j++)target[start+i]=datum[j]||0,i++}}__webpack_require__.d(__webpack_exports__,{DY:function(){return cycleBuffers},pi:function(){return getAttributeBufferLength},w:function(){return getAttributeTypeFromSize},AQ:function(){return getSourceBufferAttribute},M0:function(){return normalizeTransitionSettings},IV:function(){return padBuffer}});const DEFAULT_TRANSITION_SETTINGS={interpolation:{duration:0,easing:t=>t},spring:{stiffness:.05,damping:.5}};function normalizeTransitionSettings(userSettings,layerSettings){if(!userSettings)return null;Number.isFinite(userSettings)&&(userSettings={type:"interpolation",duration:userSettings});const type=userSettings.type||"interpolation";return{...DEFAULT_TRANSITION_SETTINGS[type],...layerSettings,...userSettings,type:type}}function getSourceBufferAttribute(gl,attribute){const buffer=attribute.getBuffer();return buffer?[buffer,{divisor:0,size:attribute.size,normalized:attribute.settings.normalized}]:attribute.value}function getAttributeTypeFromSize(size){switch(size){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error('No defined attribute type for size "'.concat(size,'"'))}}function cycleBuffers(buffers){buffers.push(buffers.shift())}function getAttributeBufferLength(attribute,numInstances){const{doublePrecision:doublePrecision,settings:settings,value:value,size:size}=attribute,multiplier=doublePrecision&&value instanceof Float64Array?2:1;return(settings.noAlloc?value.length:numInstances*size)*multiplier}function padBuffer({buffer:buffer,numInstances:numInstances,attribute:attribute,fromLength:fromLength,fromStartIndices:fromStartIndices,getData:getData=(x=>x)}){const precisionMultiplier=attribute.doublePrecision&&attribute.value instanceof Float64Array?2:1,size=attribute.size*precisionMultiplier,byteOffset=attribute.byteOffset,toStartIndices=attribute.startIndices,hasStartIndices=fromStartIndices&&toStartIndices,toLength=getAttributeBufferLength(attribute,numInstances),isConstant=attribute.isConstant;if(!hasStartIndices&&fromLength>=toLength)return;const toData=isConstant?attribute.value:attribute.getBuffer().getData({srcByteOffset:byteOffset});if(attribute.settings.normalized&&!isConstant){const getter=getData;getData=(value,chunk)=>attribute.normalizeConstant(getter(value,chunk))}const getMissingData=isConstant?(i,chunk)=>getData(toData,chunk):(i,chunk)=>getData(toData.subarray(i,i+size),chunk),source=buffer.getData({length:fromLength}),data=new Float32Array(toLength);!function padArray({source:source,target:target,size:size,getData:getData,sourceStartIndices:sourceStartIndices,targetStartIndices:targetStartIndices}){if(!Array.isArray(targetStartIndices))return padArrayChunk({source:source,target:target,size:size,getData:getData}),target;let sourceIndex=0,targetIndex=0;const getChunkData=getData&&((i,chunk)=>getData(i+targetIndex,chunk)),n=Math.min(sourceStartIndices.length,targetStartIndices.length);for(let i=1;i<n;i++){const nextSourceIndex=sourceStartIndices[i]*size,nextTargetIndex=targetStartIndices[i]*size;padArrayChunk({source:source.subarray(sourceIndex,nextSourceIndex),target:target,start:targetIndex,end:nextTargetIndex,size:size,getData:getChunkData}),sourceIndex=nextSourceIndex,targetIndex=nextTargetIndex}return targetIndex<target.length&&padArrayChunk({source:[],target:target,start:targetIndex,size:size,getData:getChunkData}),target}({source:source,target:data,sourceStartIndices:fromStartIndices,targetStartIndices:toStartIndices,size:size,getData:getMissingData}),buffer.byteLength<data.byteLength+byteOffset&&buffer.reallocate(data.byteLength+byteOffset),buffer.subData({data:data,offset:byteOffset})}},"./node_modules/@deck.gl/core/dist/esm/lib/composite-layer.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return CompositeLayer}});var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),_layer__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/lib/layer.js"),_debug__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/debug/index.js"),_utils_flatten__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/utils/flatten.js"),_lifecycle_constants__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/lifecycle/constants.js");class CompositeLayer extends _layer__WEBPACK_IMPORTED_MODULE_0__.Z{get isComposite(){return!0}get isLoaded(){return super.isLoaded&&this.getSubLayers().every((layer=>layer.isLoaded))}getSubLayers(){return this.internalState&&this.internalState.subLayers||[]}initializeState(context){}setState(updateObject){super.setState(updateObject),this.setNeedsUpdate()}getPickingInfo({info:info}){const{object:object}=info;return object&&object.__source&&object.__source.parent&&object.__source.parent.id===this.id?(info.object=object.__source.object,info.index=object.__source.index,info):info}filterSubLayer(context){return!0}shouldRenderSubLayer(subLayerId,data){return data&&data.length}getSubLayerClass(subLayerId,DefaultLayerClass){const{_subLayerProps:overridingProps}=this.props;return overridingProps&&overridingProps[subLayerId]&&overridingProps[subLayerId].type||DefaultLayerClass}getSubLayerRow(row,sourceObject,sourceObjectIndex){return row.__source={parent:this,object:sourceObject,index:sourceObjectIndex},row}getSubLayerAccessor(accessor){if("function"==typeof accessor){const objectInfo={index:-1,data:this.props.data,target:[]};return(x,i)=>x&&x.__source?(objectInfo.index=x.__source.index,accessor(x.__source.object,objectInfo)):accessor(x,i)}return accessor}getSubLayerProps(sublayerProps={}){var _this$props$updateTri;const{opacity:opacity,pickable:pickable,visible:visible,parameters:parameters,getPolygonOffset:getPolygonOffset,highlightedObjectIndex:highlightedObjectIndex,autoHighlight:autoHighlight,highlightColor:highlightColor,coordinateSystem:coordinateSystem,coordinateOrigin:coordinateOrigin,wrapLongitude:wrapLongitude,positionFormat:positionFormat,modelMatrix:modelMatrix,extensions:extensions,fetch:fetch,operation:operation,_subLayerProps:overridingProps}=this.props,newProps={id:"",updateTriggers:{},opacity:opacity,pickable:pickable,visible:visible,parameters:parameters,getPolygonOffset:getPolygonOffset,highlightedObjectIndex:highlightedObjectIndex,autoHighlight:autoHighlight,highlightColor:highlightColor,coordinateSystem:coordinateSystem,coordinateOrigin:coordinateOrigin,wrapLongitude:wrapLongitude,positionFormat:positionFormat,modelMatrix:modelMatrix,extensions:extensions,fetch:fetch,operation:operation},overridingSublayerProps=overridingProps&&sublayerProps.id&&overridingProps[sublayerProps.id],overridingSublayerTriggers=overridingSublayerProps&&overridingSublayerProps.updateTriggers,sublayerId=sublayerProps.id||"sublayer";if(overridingSublayerProps){const propTypes=this.props[_lifecycle_constants__WEBPACK_IMPORTED_MODULE_1__.Wb],subLayerPropTypes=sublayerProps.type?sublayerProps.type._propTypes:{};for(const key in overridingSublayerProps){const propType=subLayerPropTypes[key]||propTypes[key];propType&&"accessor"===propType.type&&(overridingSublayerProps[key]=this.getSubLayerAccessor(overridingSublayerProps[key]))}}Object.assign(newProps,sublayerProps,overridingSublayerProps),newProps.id="".concat(this.props.id,"-").concat(sublayerId),newProps.updateTriggers={all:null===(_this$props$updateTri=this.props.updateTriggers)||void 0===_this$props$updateTri?void 0:_this$props$updateTri.all,...sublayerProps.updateTriggers,...overridingSublayerTriggers};for(const extension of extensions){const passThroughProps=extension.getSubLayerProps.call(this,extension);passThroughProps&&Object.assign(newProps,passThroughProps,{updateTriggers:Object.assign(newProps.updateTriggers,passThroughProps.updateTriggers)})}return newProps}_updateAutoHighlight(info){for(const layer of this.getSubLayers())layer.updateAutoHighlight(info)}_getAttributeManager(){return null}_postUpdate(updateParams,forceUpdate){let subLayers=this.internalState.subLayers;const shouldUpdate=!subLayers||this.needsUpdate();if(shouldUpdate){const subLayersList=this.renderLayers();subLayers=(0,_utils_flatten__WEBPACK_IMPORTED_MODULE_2__.x)(subLayersList,Boolean),this.internalState.subLayers=subLayers}(0,_debug__WEBPACK_IMPORTED_MODULE_3__.Z)("compositeLayer.renderLayers",this,shouldUpdate,subLayers);for(const layer of subLayers)layer.parent=this}}(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_4__.Z)(CompositeLayer,"layerName","CompositeLayer")},"./node_modules/@deck.gl/core/dist/esm/lib/constants.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{COORDINATE_SYSTEM:function(){return COORDINATE_SYSTEM},FP:function(){return EVENTS},iI:function(){return UNIT},k8:function(){return OPERATION},zG:function(){return PROJECTION_MODE}});var _utils_log__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/utils/log.js");const COORDINATE_SYSTEM={DEFAULT:-1,LNGLAT:1,METER_OFFSETS:2,LNGLAT_OFFSETS:3,CARTESIAN:0};Object.defineProperty(COORDINATE_SYSTEM,"IDENTITY",{get:()=>(_utils_log__WEBPACK_IMPORTED_MODULE_0__.Z.deprecated("COORDINATE_SYSTEM.IDENTITY","COORDINATE_SYSTEM.CARTESIAN")(),0)});const PROJECTION_MODE={WEB_MERCATOR:1,GLOBE:2,WEB_MERCATOR_AUTO_OFFSET:4,IDENTITY:0},UNIT={common:0,meters:1,pixels:2},EVENTS={click:{handler:"onClick"},panstart:{handler:"onDragStart"},panmove:{handler:"onDrag"},panend:{handler:"onDragEnd"}},OPERATION={DRAW:"draw",MASK:"mask",TERRAIN:"terrain"}},"./node_modules/@deck.gl/core/dist/esm/lib/deck-renderer.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return DeckRenderer}});var defineProperty=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),debug=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/debug/index.js"),layers_pass=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/passes/layers-pass.js");class DrawLayersPass extends layers_pass.Z{shouldDrawLayer(layer){const{operation:operation}=layer.props;return operation.includes("draw")||operation.includes("terrain")}}var pick_layers_pass=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/passes/pick-layers-pass.js"),framebuffer=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/classes/framebuffer.js");class DeckRenderer{constructor(gl){(0,defineProperty.Z)(this,"gl",void 0),(0,defineProperty.Z)(this,"layerFilter",void 0),(0,defineProperty.Z)(this,"drawPickingColors",void 0),(0,defineProperty.Z)(this,"drawLayersPass",void 0),(0,defineProperty.Z)(this,"pickLayersPass",void 0),(0,defineProperty.Z)(this,"renderCount",void 0),(0,defineProperty.Z)(this,"_needsRedraw",void 0),(0,defineProperty.Z)(this,"renderBuffers",void 0),(0,defineProperty.Z)(this,"lastPostProcessEffect",void 0),this.gl=gl,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new DrawLayersPass(gl),this.pickLayersPass=new pick_layers_pass.Z(gl),this.renderCount=0,this._needsRedraw="Initial render",this.renderBuffers=[],this.lastPostProcessEffect=null}setProps(props){this.layerFilter!==props.layerFilter&&(this.layerFilter=props.layerFilter,this._needsRedraw="layerFilter changed"),this.drawPickingColors!==props.drawPickingColors&&(this.drawPickingColors=props.drawPickingColors,this._needsRedraw="drawPickingColors changed")}renderLayers(opts){if(!opts.viewports.length)return;const layerPass=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass,renderOpts={layerFilter:this.layerFilter,isPicking:this.drawPickingColors,...opts,target:opts.target||framebuffer.Z.getDefaultFramebuffer(this.gl)};renderOpts.effects&&this._preRender(renderOpts.effects,renderOpts);const outputBuffer=this.lastPostProcessEffect?this.renderBuffers[0]:renderOpts.target,renderStats=layerPass.render({...renderOpts,target:outputBuffer});renderOpts.effects&&this._postRender(renderOpts.effects,renderOpts),this.renderCount++,(0,debug.Z)("deckRenderer.renderLayers",this,renderStats,opts)}needsRedraw(opts={clearRedrawFlags:!1}){const redraw=this._needsRedraw;return opts.clearRedrawFlags&&(this._needsRedraw=!1),redraw}finalize(){const{renderBuffers:renderBuffers}=this;for(const buffer of renderBuffers)buffer.delete();renderBuffers.length=0}_preRender(effects,opts){this.lastPostProcessEffect=null,opts.preRenderStats=opts.preRenderStats||{};for(const effect of effects)opts.preRenderStats[effect.id]=effect.preRender(this.gl,opts),effect.postRender&&(this.lastPostProcessEffect=effect.id);this.lastPostProcessEffect&&this._resizeRenderBuffers()}_resizeRenderBuffers(){const{renderBuffers:renderBuffers}=this;0===renderBuffers.length&&renderBuffers.push(new framebuffer.Z(this.gl),new framebuffer.Z(this.gl));for(const buffer of renderBuffers)buffer.resize()}_postRender(effects,opts){const{renderBuffers:renderBuffers}=this,params={...opts,inputBuffer:renderBuffers[0],swapBuffer:renderBuffers[1],target:null};for(const effect of effects)if(effect.postRender){if(effect.id===this.lastPostProcessEffect){params.target=opts.target,effect.postRender(this.gl,params);break}const buffer=effect.postRender(this.gl,params);params.inputBuffer=buffer,params.swapBuffer=buffer===renderBuffers[0]?renderBuffers[1]:renderBuffers[0]}}}},"./node_modules/@deck.gl/core/dist/esm/lib/deck.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return Deck}});var defineProperty=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),layer_manager=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/lib/layer-manager.js"),deep_equal=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/utils/deep-equal.js"),log=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/utils/log.js"),flatten=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/utils/flatten.js");class ViewManager{constructor(props){(0,defineProperty.Z)(this,"width",void 0),(0,defineProperty.Z)(this,"height",void 0),(0,defineProperty.Z)(this,"views",void 0),(0,defineProperty.Z)(this,"viewState",void 0),(0,defineProperty.Z)(this,"controllers",void 0),(0,defineProperty.Z)(this,"timeline",void 0),(0,defineProperty.Z)(this,"_viewports",void 0),(0,defineProperty.Z)(this,"_viewportMap",void 0),(0,defineProperty.Z)(this,"_isUpdating",void 0),(0,defineProperty.Z)(this,"_needsRedraw",void 0),(0,defineProperty.Z)(this,"_needsUpdate",void 0),(0,defineProperty.Z)(this,"_eventManager",void 0),(0,defineProperty.Z)(this,"_eventCallbacks",void 0),this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=props.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="First render",this._needsUpdate="Initialize",this._eventManager=props.eventManager,this._eventCallbacks={onViewStateChange:props.onViewStateChange,onInteractionStateChange:props.onInteractionStateChange},Object.seal(this),this.setProps(props)}finalize(){for(const key in this.controllers){const controller=this.controllers[key];controller&&controller.finalize()}this.controllers={}}needsRedraw(opts={clearRedrawFlags:!1}){const redraw=this._needsRedraw;return opts.clearRedrawFlags&&(this._needsRedraw=!1),redraw}setNeedsUpdate(reason){this._needsUpdate=this._needsUpdate||reason,this._needsRedraw=this._needsRedraw||reason}updateViewStates(){for(const viewId in this.controllers){const controller=this.controllers[viewId];controller&&controller.updateTransition()}}getViewports(rect){return rect?this._viewports.filter((viewport=>viewport.containsPixel(rect))):this._viewports}getViews(){const viewMap={};return this.views.forEach((view=>{viewMap[view.id]=view})),viewMap}getView(viewId){return this.views.find((view=>view.id===viewId))}getViewState(viewOrViewId){const view="string"==typeof viewOrViewId?this.getView(viewOrViewId):viewOrViewId,viewState=view&&this.viewState[view.getViewStateId()]||this.viewState;return view?view.filterViewState(viewState):viewState}getViewport(viewId){return this._viewportMap[viewId]}unproject(xyz,opts){const viewports=this.getViewports(),pixel={x:xyz[0],y:xyz[1]};for(let i=viewports.length-1;i>=0;--i){const viewport=viewports[i];if(viewport.containsPixel(pixel)){const p=xyz.slice();return p[0]-=viewport.x,p[1]-=viewport.y,viewport.unproject(p,opts)}}return null}setProps(props){props.views&&this._setViews(props.views),props.viewState&&this._setViewState(props.viewState),("width"in props||"height"in props)&&this._setSize(props.width,props.height),this._isUpdating||this._update()}_update(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}_setSize(width,height){width===this.width&&height===this.height||(this.width=width,this.height=height,this.setNeedsUpdate("Size changed"))}_setViews(views){views=(0,flatten.x)(views,Boolean);this._diffViews(views,this.views)&&this.setNeedsUpdate("views changed"),this.views=views}_setViewState(viewState){if(viewState){!(0,deep_equal.v)(viewState,this.viewState,3)&&this.setNeedsUpdate("viewState changed"),this.viewState=viewState}else log.Z.warn("missing `viewState` or `initialViewState`")()}_onViewStateChange(viewId,event){this._eventCallbacks.onViewStateChange&&this._eventCallbacks.onViewStateChange({...event,viewId:viewId})}_createController(view,props){return new(0,props.type)({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._onViewStateChange.bind(this,props.id),onStateChange:this._eventCallbacks.onInteractionStateChange,makeViewport:viewState=>{var _this$getView;return null===(_this$getView=this.getView(view.id))||void 0===_this$getView?void 0:_this$getView.makeViewport({viewState:viewState,width:this.width,height:this.height})}})}_updateController(view,viewState,viewport,controller){const controllerProps=view.controller;if(controllerProps&&viewport){const resolvedProps={...viewState,...controllerProps,id:view.id,x:viewport.x,y:viewport.y,width:viewport.width,height:viewport.height};return controller&&controller.constructor===controllerProps.type||(controller=this._createController(view,resolvedProps)),controller&&controller.setProps(resolvedProps),controller}return null}_rebuildViewports(){const{views:views}=this,oldControllers=this.controllers;this._viewports=[],this.controllers={};let invalidateControllers=!1;for(let i=views.length;i--;){const view=views[i],viewState=this.getViewState(view),viewport=view.makeViewport({viewState:viewState,width:this.width,height:this.height});let oldController=oldControllers[view.id];const hasController=Boolean(view.controller);hasController&&!oldController&&(invalidateControllers=!0),!invalidateControllers&&hasController||!oldController||(oldController.finalize(),oldController=null),this.controllers[view.id]=this._updateController(view,viewState,viewport,oldController),viewport&&this._viewports.unshift(viewport)}for(const id in oldControllers){const oldController=oldControllers[id];oldController&&!this.controllers[id]&&oldController.finalize()}this._buildViewportMap()}_buildViewportMap(){this._viewportMap={},this._viewports.forEach((viewport=>{viewport.id&&(this._viewportMap[viewport.id]=this._viewportMap[viewport.id]||viewport)}))}_diffViews(newViews,oldViews){return newViews.length!==oldViews.length||newViews.some(((_,i)=>!newViews[i].equals(oldViews[i])))}}var map_view=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/views/map-view.js"),lighting_effect=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/effects/lighting/lighting-effect.js");const DEFAULT_LIGHTING_EFFECT=new lighting_effect.Z;class EffectManager{constructor(){(0,defineProperty.Z)(this,"effects",void 0),(0,defineProperty.Z)(this,"_resolvedEffects",[]),(0,defineProperty.Z)(this,"_defaultEffects",[]),(0,defineProperty.Z)(this,"_needsRedraw",void 0),this.effects=[],this._needsRedraw="Initial render",this._setEffects([])}addDefaultEffect(effect){const defaultEffects=this._defaultEffects;if(!defaultEffects.find((e=>e.id===effect.id))){const index=defaultEffects.findIndex((e=>function compareEffects(e1,e2){var _e1$order,_e2$order;return(null!==(_e1$order=e1.order)&&void 0!==_e1$order?_e1$order:1/0)-(null!==(_e2$order=e2.order)&&void 0!==_e2$order?_e2$order:1/0)}(e,effect)>0));index<0?defaultEffects.push(effect):defaultEffects.splice(index,0,effect),this._setEffects(this.effects)}}setProps(props){"effects"in props&&((0,deep_equal.v)(props.effects,this.effects,1)||this._setEffects(props.effects))}needsRedraw(opts={clearRedrawFlags:!1}){const redraw=this._needsRedraw;return opts.clearRedrawFlags&&(this._needsRedraw=!1),redraw}getEffects(){return this._resolvedEffects}_setEffects(effects){const oldEffectsMap={};for(const effect of this.effects)oldEffectsMap[effect.id]=effect;const nextEffects=[];for(const effect of effects){const oldEffect=oldEffectsMap[effect.id];oldEffect&&oldEffect!==effect?oldEffect.setProps?(oldEffect.setProps(effect.props),nextEffects.push(oldEffect)):(oldEffect.cleanup(),nextEffects.push(effect)):nextEffects.push(effect),delete oldEffectsMap[effect.id]}for(const removedEffectId in oldEffectsMap)oldEffectsMap[removedEffectId].cleanup();this.effects=nextEffects,this._resolvedEffects=nextEffects.concat(this._defaultEffects),effects.some((effect=>effect instanceof lighting_effect.Z))||this._resolvedEffects.push(DEFAULT_LIGHTING_EFFECT),this._needsRedraw="effects changed"}finalize(){for(const effect of this._resolvedEffects)effect.cleanup();this.effects.length=0,this._resolvedEffects.length=0,this._defaultEffects.length=0}}var deck_renderer=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/lib/deck-renderer.js"),framebuffer=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/classes/framebuffer.js"),texture_2d=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/classes/texture-2d.js"),esm=__webpack_require__("./node_modules/@luma.gl/gltools/dist/esm/index.js"),copy_and_blit=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/classes/copy-and-blit.js"),pick_layers_pass=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/passes/pick-layers-pass.js");const NO_PICKED_OBJECT={pickedColor:null,pickedObjectIndex:-1};function getClosestObject({pickedColors:pickedColors,decodePickingColor:decodePickingColor,deviceX:deviceX,deviceY:deviceY,deviceRadius:deviceRadius,deviceRect:deviceRect}){const{x:x,y:y,width:width,height:height}=deviceRect;let minSquareDistanceToCenter=deviceRadius*deviceRadius,closestPixelIndex=-1,i=0;for(let row=0;row<height;row++){const dy=row+y-deviceY,dy2=dy*dy;if(dy2>minSquareDistanceToCenter)i+=4*width;else for(let col=0;col<width;col++){if(pickedColors[i+3]-1>=0){const dx=col+x-deviceX,d2=dx*dx+dy2;d2<=minSquareDistanceToCenter&&(minSquareDistanceToCenter=d2,closestPixelIndex=i)}i+=4}}if(closestPixelIndex>=0){const pickedColor=pickedColors.slice(closestPixelIndex,closestPixelIndex+4),pickedObject=decodePickingColor(pickedColor);if(pickedObject){const dy=Math.floor(closestPixelIndex/4/width),dx=closestPixelIndex/4-dy*width;return{...pickedObject,pickedColor:pickedColor,pickedX:x+dx,pickedY:y+dy}}log.Z.error("Picked non-existent layer. Is picking buffer corrupt?")()}return NO_PICKED_OBJECT}function getEmptyPickingInfo({pickInfo:pickInfo,viewports:viewports,pixelRatio:pixelRatio,x:x,y:y,z:z}){let coordinate,pickedViewport=viewports[0];if(viewports.length>1&&(pickedViewport=function getViewportFromCoordinates(viewports,pixel){for(let i=viewports.length-1;i>=0;i--){const viewport=viewports[i];if(viewport.containsPixel(pixel))return viewport}return viewports[0]}((null==pickInfo?void 0:pickInfo.pickedViewports)||viewports,{x:x,y:y})),pickedViewport){const point=[x-pickedViewport.x,y-pickedViewport.y];void 0!==z&&(point[2]=z),coordinate=pickedViewport.unproject(point)}return{color:null,layer:null,viewport:pickedViewport,index:-1,picked:!1,x:x,y:y,pixel:[x,y],coordinate:coordinate,devicePixel:pickInfo&&"pickedX"in pickInfo?[pickInfo.pickedX,pickInfo.pickedY]:void 0,pixelRatio:pixelRatio}}function processPickInfo(opts){const{pickInfo:pickInfo,lastPickedInfo:lastPickedInfo,mode:mode,layers:layers}=opts,{pickedColor:pickedColor,pickedLayer:pickedLayer,pickedObjectIndex:pickedObjectIndex}=pickInfo,affectedLayers=pickedLayer?[pickedLayer]:[];if("hover"===mode){const lastPickedPixelIndex=lastPickedInfo.index,lastPickedLayerId=lastPickedInfo.layerId,pickedLayerId=pickedLayer?pickedLayer.props.id:null;if(pickedLayerId!==lastPickedLayerId||pickedObjectIndex!==lastPickedPixelIndex){if(pickedLayerId!==lastPickedLayerId){const lastPickedLayer=layers.find((layer=>layer.props.id===lastPickedLayerId));lastPickedLayer&&affectedLayers.unshift(lastPickedLayer)}lastPickedInfo.layerId=pickedLayerId,lastPickedInfo.index=pickedObjectIndex,lastPickedInfo.info=null}}const baseInfo=getEmptyPickingInfo(opts),infos=new Map;return infos.set(null,baseInfo),affectedLayers.forEach((layer=>{let info={...baseInfo};layer===pickedLayer&&(info.color=pickedColor,info.index=pickedObjectIndex,info.picked=!0),info=getLayerPickingInfo({layer:layer,info:info,mode:mode});const rootLayer=info.layer;layer===pickedLayer&&"hover"===mode&&(lastPickedInfo.info=info),infos.set(rootLayer.id,info),"hover"===mode&&rootLayer.updateAutoHighlight(info)})),infos}function getLayerPickingInfo({layer:layer,info:info,mode:mode}){for(;layer&&info;){const sourceLayer=info.layer||null;info.sourceLayer=sourceLayer,info.layer=layer,info=layer.getPickingInfo({info:info,mode:mode,sourceLayer:sourceLayer}),layer=layer.parent}return info}class DeckPicker{constructor(gl){(0,defineProperty.Z)(this,"gl",void 0),(0,defineProperty.Z)(this,"pickingFBO",void 0),(0,defineProperty.Z)(this,"depthFBO",void 0),(0,defineProperty.Z)(this,"pickLayersPass",void 0),(0,defineProperty.Z)(this,"layerFilter",void 0),(0,defineProperty.Z)(this,"lastPickedInfo",void 0),(0,defineProperty.Z)(this,"_pickable",!0),this.gl=gl,this.pickLayersPass=new pick_layers_pass.Z(gl),this.lastPickedInfo={index:-1,layerId:null,info:null}}setProps(props){"layerFilter"in props&&(this.layerFilter=props.layerFilter),"_pickable"in props&&(this._pickable=props._pickable)}finalize(){this.pickingFBO&&this.pickingFBO.delete(),this.depthFBO&&(this.depthFBO.color.delete(),this.depthFBO.delete())}pickObject(opts){return this._pickClosestObject(opts)}pickObjects(opts){return this._pickVisibleObjects(opts)}getLastPickedObject({x:x,y:y,layers:layers,viewports:viewports},lastPickedInfo=this.lastPickedInfo.info){const lastPickedLayerId=lastPickedInfo&&lastPickedInfo.layer&&lastPickedInfo.layer.id,lastPickedViewportId=lastPickedInfo&&lastPickedInfo.viewport&&lastPickedInfo.viewport.id,layer=lastPickedLayerId?layers.find((l=>l.id===lastPickedLayerId)):null,viewport=lastPickedViewportId&&viewports.find((v=>v.id===lastPickedViewportId))||viewports[0],coordinate=viewport&&viewport.unproject([x-viewport.x,y-viewport.y]),info={x:x,y:y,viewport:viewport,coordinate:coordinate,layer:layer};return{...lastPickedInfo,...info}}_resizeBuffer(){var _this$pickingFBO,_this$depthFBO;const{gl:gl}=this;if(!this.pickingFBO&&(this.pickingFBO=new framebuffer.Z(gl),framebuffer.Z.isSupported(gl,{colorBufferFloat:!0}))){const depthFBO=new framebuffer.Z(gl);depthFBO.attach({36064:new texture_2d.Z(gl,{format:(0,esm.D0)(gl)?34836:6408,type:5126})}),this.depthFBO=depthFBO}null===(_this$pickingFBO=this.pickingFBO)||void 0===_this$pickingFBO||_this$pickingFBO.resize({width:gl.canvas.width,height:gl.canvas.height}),null===(_this$depthFBO=this.depthFBO)||void 0===_this$depthFBO||_this$depthFBO.resize({width:gl.canvas.width,height:gl.canvas.height})}_getPickable(layers){if(!1===this._pickable)return null;const pickableLayers=layers.filter((layer=>this.pickLayersPass.shouldDrawLayer(layer)&&!layer.isComposite));return pickableLayers.length?pickableLayers:null}_pickClosestObject({layers:layers,views:views,viewports:viewports,x:x,y:y,radius:radius=0,depth:depth=1,mode:mode="query",unproject3D:unproject3D,onViewportActive:onViewportActive,effects:effects}){const pickableLayers=this._getPickable(layers),pixelRatio=(0,esm.w)(this.gl);if(!pickableLayers)return{result:[],emptyInfo:getEmptyPickingInfo({viewports:viewports,x:x,y:y,pixelRatio:pixelRatio})};this._resizeBuffer();const devicePixelRange=(0,esm.JY)(this.gl,[x,y],!0),devicePixel=[devicePixelRange.x+Math.floor(devicePixelRange.width/2),devicePixelRange.y+Math.floor(devicePixelRange.height/2)],deviceRadius=Math.round(radius*pixelRatio),{width:width,height:height}=this.pickingFBO,deviceRect=this._getPickingRect({deviceX:devicePixel[0],deviceY:devicePixel[1],deviceRadius:deviceRadius,deviceWidth:width,deviceHeight:height}),cullRect={x:x-radius,y:y-radius,width:2*radius+1,height:2*radius+1};let infos;const result=[],affectedLayers=new Set;for(let i=0;i<depth;i++){let pickInfo,z;if(deviceRect){pickInfo=getClosestObject({...this._drawAndSample({layers:pickableLayers,views:views,viewports:viewports,onViewportActive:onViewportActive,deviceRect:deviceRect,cullRect:cullRect,effects:effects,pass:"picking:".concat(mode)}),deviceX:devicePixel[0],deviceY:devicePixel[1],deviceRadius:deviceRadius,deviceRect:deviceRect})}else pickInfo={pickedColor:null,pickedObjectIndex:-1};if(pickInfo.pickedLayer&&unproject3D&&this.depthFBO){const{pickedColors:pickedColors2}=this._drawAndSample({layers:[pickInfo.pickedLayer],views:views,viewports:viewports,onViewportActive:onViewportActive,deviceRect:{x:pickInfo.pickedX,y:pickInfo.pickedY,width:1,height:1},cullRect:cullRect,effects:effects,pass:"picking:".concat(mode,":z")},!0);pickedColors2[3]&&(z=pickedColors2[0])}pickInfo.pickedLayer&&i+1<depth&&(affectedLayers.add(pickInfo.pickedLayer),pickInfo.pickedLayer.disablePickingIndex(pickInfo.pickedObjectIndex)),infos=processPickInfo({pickInfo:pickInfo,lastPickedInfo:this.lastPickedInfo,mode:mode,layers:pickableLayers,viewports:viewports,x:x,y:y,z:z,pixelRatio:pixelRatio});for(const info of infos.values())info.layer&&result.push(info);if(!pickInfo.pickedColor)break}for(const layer of affectedLayers)layer.restorePickingColors();return{result:result,emptyInfo:infos.get(null)}}_pickVisibleObjects({layers:layers,views:views,viewports:viewports,x:x,y:y,width:width=1,height:height=1,mode:mode="query",maxObjects:maxObjects=null,onViewportActive:onViewportActive,effects:effects}){const pickableLayers=this._getPickable(layers);if(!pickableLayers)return[];this._resizeBuffer();const pixelRatio=(0,esm.w)(this.gl),leftTop=(0,esm.JY)(this.gl,[x,y],!0),deviceLeft=leftTop.x,deviceTop=leftTop.y+leftTop.height,rightBottom=(0,esm.JY)(this.gl,[x+width,y+height],!0),deviceRight=rightBottom.x+rightBottom.width,deviceBottom=rightBottom.y,deviceRect={x:deviceLeft,y:deviceBottom,width:deviceRight-deviceLeft,height:deviceTop-deviceBottom},pickInfos=function getUniqueObjects({pickedColors:pickedColors,decodePickingColor:decodePickingColor}){const uniqueColors=new Map;if(pickedColors)for(let i=0;i<pickedColors.length;i+=4)if(pickedColors[i+3]-1>=0){const pickedColor=pickedColors.slice(i,i+4),colorKey=pickedColor.join(",");if(!uniqueColors.has(colorKey)){const pickedObject=decodePickingColor(pickedColor);pickedObject?uniqueColors.set(colorKey,{...pickedObject,color:pickedColor}):log.Z.error("Picked non-existent layer. Is picking buffer corrupt?")()}}return Array.from(uniqueColors.values())}(this._drawAndSample({layers:pickableLayers,views:views,viewports:viewports,onViewportActive:onViewportActive,deviceRect:deviceRect,cullRect:{x:x,y:y,width:width,height:height},effects:effects,pass:"picking:".concat(mode)})),uniqueInfos=new Map,isMaxObjects=Number.isFinite(maxObjects);for(let i=0;i<pickInfos.length&&!(isMaxObjects&&maxObjects&&uniqueInfos.size>=maxObjects);i++){const pickInfo=pickInfos[i];let info={color:pickInfo.pickedColor,layer:null,index:pickInfo.pickedObjectIndex,picked:!0,x:x,y:y,pixelRatio:pixelRatio};info=getLayerPickingInfo({layer:pickInfo.pickedLayer,info:info,mode:mode}),uniqueInfos.has(info.object)||uniqueInfos.set(info.object,info)}return Array.from(uniqueInfos.values())}_drawAndSample({layers:layers,views:views,viewports:viewports,onViewportActive:onViewportActive,deviceRect:deviceRect,cullRect:cullRect,effects:effects,pass:pass},pickZ=!1){const pickingFBO=pickZ?this.depthFBO:this.pickingFBO,opts={layers:layers,layerFilter:this.layerFilter,views:views,viewports:viewports,onViewportActive:onViewportActive,pickingFBO:pickingFBO,deviceRect:deviceRect,cullRect:cullRect,effects:effects,pass:pass,pickZ:pickZ,preRenderStats:{}};for(const effect of effects)effect.useInPicking&&(opts.preRenderStats[effect.id]=effect.preRender(this.gl,opts));const{decodePickingColor:decodePickingColor}=this.pickLayersPass.render(opts),{x:x,y:y,width:width,height:height}=deviceRect,pickedColors=new(pickZ?Float32Array:Uint8Array)(width*height*4);return(0,copy_and_blit.z6)(pickingFBO,{sourceX:x,sourceY:y,sourceWidth:width,sourceHeight:height,target:pickedColors}),{pickedColors:pickedColors,decodePickingColor:decodePickingColor}}_getPickingRect({deviceX:deviceX,deviceY:deviceY,deviceRadius:deviceRadius,deviceWidth:deviceWidth,deviceHeight:deviceHeight}){const x=Math.max(0,deviceX-deviceRadius),y=Math.max(0,deviceY-deviceRadius),width=Math.min(deviceWidth,deviceX+deviceRadius+1)-x,height=Math.min(deviceHeight,deviceY+deviceRadius+1)-y;return width<=0||height<=0?null:{x:x,y:y,width:width,height:height}}}const defaultStyle={zIndex:"1",position:"absolute",pointerEvents:"none",color:"#a0a7b4",backgroundColor:"#29323c",padding:"10px",top:"0",left:"0",display:"none"};class Tooltip{constructor(canvas){(0,defineProperty.Z)(this,"el",null),(0,defineProperty.Z)(this,"isVisible",!1);const canvasParent=canvas.parentElement;canvasParent&&(this.el=document.createElement("div"),this.el.className="deck-tooltip",Object.assign(this.el.style,defaultStyle),canvasParent.appendChild(this.el))}setTooltip(displayInfo,x,y){const el=this.el;if(el){if("string"==typeof displayInfo)el.innerText=displayInfo;else{if(!displayInfo)return this.isVisible=!1,void(el.style.display="none");displayInfo.text&&(el.innerText=displayInfo.text),displayInfo.html&&(el.innerHTML=displayInfo.html),displayInfo.className&&(el.className=displayInfo.className)}this.isVisible=!0,el.style.display="block",el.style.transform="translate(".concat(x,"px, ").concat(y,"px)"),displayInfo&&"object"==typeof displayInfo&&"style"in displayInfo&&Object.assign(el.style,displayInfo.style)}}remove(){this.el&&(this.el.remove(),this.el=null)}}var typed_array_manager=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/utils/typed-array-manager.js"),init=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/lib/init.js"),get_browser=__webpack_require__("./node_modules/@probe.gl/env/dist/esm/lib/get-browser.js"),animation_loop=__webpack_require__("./node_modules/@luma.gl/engine/dist/esm/lib/animation-loop.js"),animation_timeline=__webpack_require__("./node_modules/@luma.gl/engine/dist/esm/animation/timeline.js"),esm_init=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/init.js"),dist_esm=__webpack_require__("./node_modules/@probe.gl/stats/dist/esm/index.js"),hammer=__webpack_require__("./node_modules/hammerjs/hammer.js");const MOUSE_INPUT_MAP={mousedown:1,mousemove:2,mouseup:4};!function enhancePointerEventInput(PointerEventInput){const oldHandler=PointerEventInput.prototype.handler;PointerEventInput.prototype.handler=function handler(ev){const store=this.store;ev.button>0&&"pointerdown"===ev.type&&(function some(array,predict){for(let i=0;i<array.length;i++)if(predict(array[i]))return!0;return!1}(store,(e=>e.pointerId===ev.pointerId))||store.push(ev)),oldHandler.call(this,ev)}}(hammer.PointerEventInput),function enhanceMouseInput(MouseInput){MouseInput.prototype.handler=function handler(ev){let eventType=MOUSE_INPUT_MAP[ev.type];1&eventType&&ev.button>=0&&(this.pressed=!0),2&eventType&&0===ev.which&&(eventType=4),this.pressed&&(4&eventType&&(this.pressed=!1),this.callback(this.manager,eventType,{pointers:[ev],changedPointers:[ev],pointerType:"mouse",srcEvent:ev}))}}(hammer.MouseInput);const Manager=hammer.Manager;var hammer_browser=hammer;class Input{constructor(element,callback,options){this.element=element,this.callback=callback,this.options={enable:!0,...options}}}const RECOGNIZERS=hammer_browser?[[hammer_browser.Pan,{event:"tripan",pointers:3,threshold:0,enable:!1}],[hammer_browser.Rotate,{enable:!1}],[hammer_browser.Pinch,{enable:!1}],[hammer_browser.Swipe,{enable:!1}],[hammer_browser.Pan,{threshold:0,enable:!1}],[hammer_browser.Press,{enable:!1}],[hammer_browser.Tap,{event:"doubletap",taps:2,enable:!1}],[hammer_browser.Tap,{event:"anytap",enable:!1}],[hammer_browser.Tap,{enable:!1}]]:null,RECOGNIZER_COMPATIBLE_MAP={tripan:["rotate","pinch","pan"],rotate:["pinch"],pinch:["pan"],pan:["press","doubletap","anytap","tap"],doubletap:["anytap"],anytap:["tap"]},RECOGNIZER_FALLBACK_MAP={doubletap:["tap"]},BASIC_EVENT_ALIASES={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},INPUT_EVENT_TYPES={KEY_EVENTS:["keydown","keyup"],MOUSE_EVENTS:["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],WHEEL_EVENTS:["wheel","mousewheel"]},EVENT_RECOGNIZER_MAP={tap:"tap",anytap:"anytap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",tripan:"tripan",tripanstart:"tripan",tripanmove:"tripan",tripanup:"tripan",tripandown:"tripan",tripanleft:"tripan",tripanright:"tripan",tripanend:"tripan",tripancancel:"tripan",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},GESTURE_EVENT_ALIASES={click:"tap",anyclick:"anytap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"},userAgent="undefined"!=typeof navigator&&navigator.userAgent?navigator.userAgent.toLowerCase():"",window_="undefined"!=typeof window?window:__webpack_require__.g;void 0!==__webpack_require__.g?__webpack_require__.g:window,"undefined"!=typeof document&&document;let passiveSupported=!1;try{const options={get passive(){return passiveSupported=!0,!0}};window_.addEventListener("test",null,options),window_.removeEventListener("test",null)}catch(err){passiveSupported=!1}const firefox=-1!==userAgent.indexOf("firefox"),{WHEEL_EVENTS:WHEEL_EVENTS}=INPUT_EVENT_TYPES;class WheelInput extends Input{constructor(element,callback,options){super(element,callback,options),this.handleEvent=event=>{if(!this.options.enable)return;let value=event.deltaY;window_.WheelEvent&&(firefox&&event.deltaMode===window_.WheelEvent.DOM_DELTA_PIXEL&&(value/=window_.devicePixelRatio),event.deltaMode===window_.WheelEvent.DOM_DELTA_LINE&&(value*=40)),0!==value&&value%4.000244140625==0&&(value=Math.floor(value/4.000244140625)),event.shiftKey&&value&&(value*=.25),this.callback({type:"wheel",center:{x:event.clientX,y:event.clientY},delta:-value,srcEvent:event,pointerType:"mouse",target:event.target})},this.events=(this.options.events||[]).concat(WHEEL_EVENTS),this.events.forEach((event=>element.addEventListener(event,this.handleEvent,!!passiveSupported&&{passive:!1})))}destroy(){this.events.forEach((event=>this.element.removeEventListener(event,this.handleEvent)))}enableEventType(eventType,enabled){"wheel"===eventType&&(this.options.enable=enabled)}}const{MOUSE_EVENTS:MOUSE_EVENTS}=INPUT_EVENT_TYPES;class MoveInput extends Input{constructor(element,callback,options){super(element,callback,options),this.handleEvent=event=>{this.handleOverEvent(event),this.handleOutEvent(event),this.handleEnterEvent(event),this.handleLeaveEvent(event),this.handleMoveEvent(event)},this.pressed=!1;const{enable:enable}=this.options;this.enableMoveEvent=enable,this.enableLeaveEvent=enable,this.enableEnterEvent=enable,this.enableOutEvent=enable,this.enableOverEvent=enable,this.events=(this.options.events||[]).concat(MOUSE_EVENTS),this.events.forEach((event=>element.addEventListener(event,this.handleEvent)))}destroy(){this.events.forEach((event=>this.element.removeEventListener(event,this.handleEvent)))}enableEventType(eventType,enabled){"pointermove"===eventType&&(this.enableMoveEvent=enabled),"pointerover"===eventType&&(this.enableOverEvent=enabled),"pointerout"===eventType&&(this.enableOutEvent=enabled),"pointerenter"===eventType&&(this.enableEnterEvent=enabled),"pointerleave"===eventType&&(this.enableLeaveEvent=enabled)}handleOverEvent(event){this.enableOverEvent&&"mouseover"===event.type&&this._emit("pointerover",event)}handleOutEvent(event){this.enableOutEvent&&"mouseout"===event.type&&this._emit("pointerout",event)}handleEnterEvent(event){this.enableEnterEvent&&"mouseenter"===event.type&&this._emit("pointerenter",event)}handleLeaveEvent(event){this.enableLeaveEvent&&"mouseleave"===event.type&&this._emit("pointerleave",event)}handleMoveEvent(event){if(this.enableMoveEvent)switch(event.type){case"mousedown":event.button>=0&&(this.pressed=!0);break;case"mousemove":0===event.which&&(this.pressed=!1),this.pressed||this._emit("pointermove",event);break;case"mouseup":this.pressed=!1}}_emit(type,event){this.callback({type:type,center:{x:event.clientX,y:event.clientY},srcEvent:event,pointerType:"mouse",target:event.target})}}const{KEY_EVENTS:KEY_EVENTS}=INPUT_EVENT_TYPES;class KeyInput extends Input{constructor(element,callback,options){super(element,callback,options),this.handleEvent=event=>{const targetElement=event.target||event.srcElement;"INPUT"===targetElement.tagName&&"text"===targetElement.type||"TEXTAREA"===targetElement.tagName||(this.enableDownEvent&&"keydown"===event.type&&this.callback({type:"keydown",srcEvent:event,key:event.key,target:event.target}),this.enableUpEvent&&"keyup"===event.type&&this.callback({type:"keyup",srcEvent:event,key:event.key,target:event.target}))},this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=(this.options.events||[]).concat(KEY_EVENTS),element.tabIndex=this.options.tabIndex||0,element.style.outline="none",this.events.forEach((event=>element.addEventListener(event,this.handleEvent)))}destroy(){this.events.forEach((event=>this.element.removeEventListener(event,this.handleEvent)))}enableEventType(eventType,enabled){"keydown"===eventType&&(this.enableDownEvent=enabled),"keyup"===eventType&&(this.enableUpEvent=enabled)}}class ContextmenuInput extends Input{constructor(element,callback,options){super(element,callback,options),this.handleEvent=event=>{this.options.enable&&this.callback({type:"contextmenu",center:{x:event.clientX,y:event.clientY},srcEvent:event,pointerType:"mouse",target:event.target})},element.addEventListener("contextmenu",this.handleEvent)}destroy(){this.element.removeEventListener("contextmenu",this.handleEvent)}enableEventType(eventType,enabled){"contextmenu"===eventType&&(this.options.enable=enabled)}}const event_utils_MOUSE_EVENTS={pointerdown:1,pointermove:2,pointerup:4,mousedown:1,mousemove:2,mouseup:4};function whichButtons(event){const eventType=event_utils_MOUSE_EVENTS[event.srcEvent.type];if(!eventType)return null;const{buttons:buttons,button:button,which:which}=event.srcEvent;let leftButton=!1,middleButton=!1,rightButton=!1;return 4===eventType||2===eventType&&!Number.isFinite(buttons)?(leftButton=1===which,middleButton=2===which,rightButton=3===which):2===eventType?(leftButton=Boolean(1&buttons),middleButton=Boolean(4&buttons),rightButton=Boolean(2&buttons)):1===eventType&&(leftButton=0===button,middleButton=1===button,rightButton=2===button),{leftButton:leftButton,middleButton:middleButton,rightButton:rightButton}}function getOffsetPosition(event,rootElement){const center=event.center;if(!center)return null;const rect=rootElement.getBoundingClientRect(),scaleX=rect.width/rootElement.offsetWidth||1,scaleY=rect.height/rootElement.offsetHeight||1;return{center:center,offsetCenter:{x:(center.x-rect.left-rootElement.clientLeft)/scaleX,y:(center.y-rect.top-rootElement.clientTop)/scaleY}}}const DEFAULT_OPTIONS={srcElement:"root",priority:0};class EventRegistrar{constructor(eventManager){this.handleEvent=event=>{if(this.isEmpty())return;const mjolnirEvent=this._normalizeEvent(event);let target=event.srcEvent.target;for(;target&&target!==mjolnirEvent.rootElement;){if(this._emit(mjolnirEvent,target),mjolnirEvent.handled)return;target=target.parentNode}this._emit(mjolnirEvent,"root")},this.eventManager=eventManager,this.handlers=[],this.handlersByElement=new Map,this._active=!1}isEmpty(){return!this._active}add(type,handler,options,once=!1,passive=!1){const{handlers:handlers,handlersByElement:handlersByElement}=this;let opts=DEFAULT_OPTIONS;"string"==typeof options||options&&options.addEventListener?opts={...DEFAULT_OPTIONS,srcElement:options}:options&&(opts={...DEFAULT_OPTIONS,...options});let entries=handlersByElement.get(opts.srcElement);entries||(entries=[],handlersByElement.set(opts.srcElement,entries));const entry={type:type,handler:handler,srcElement:opts.srcElement,priority:opts.priority};once&&(entry.once=!0),passive&&(entry.passive=!0),handlers.push(entry),this._active=this._active||!entry.passive;let insertPosition=entries.length-1;for(;insertPosition>=0&&!(entries[insertPosition].priority>=entry.priority);)insertPosition--;entries.splice(insertPosition+1,0,entry)}remove(type,handler){const{handlers:handlers,handlersByElement:handlersByElement}=this;for(let i=handlers.length-1;i>=0;i--){const entry=handlers[i];if(entry.type===type&&entry.handler===handler){handlers.splice(i,1);const entries=handlersByElement.get(entry.srcElement);entries.splice(entries.indexOf(entry),1),0===entries.length&&handlersByElement.delete(entry.srcElement)}}this._active=handlers.some((entry=>!entry.passive))}_emit(event,srcElement){const entries=this.handlersByElement.get(srcElement);if(entries){let immediatePropagationStopped=!1;const stopPropagation=()=>{event.handled=!0},stopImmediatePropagation=()=>{event.handled=!0,immediatePropagationStopped=!0},entriesToRemove=[];for(let i=0;i<entries.length;i++){const{type:type,handler:handler,once:once}=entries[i];if(handler({...event,type:type,stopPropagation:stopPropagation,stopImmediatePropagation:stopImmediatePropagation}),once&&entriesToRemove.push(entries[i]),immediatePropagationStopped)break}for(let i=0;i<entriesToRemove.length;i++){const{type:type,handler:handler}=entriesToRemove[i];this.remove(type,handler)}}}_normalizeEvent(event){const rootElement=this.eventManager.getElement();return{...event,...whichButtons(event),...getOffsetPosition(event,rootElement),preventDefault:()=>{event.srcEvent.preventDefault()},stopImmediatePropagation:null,stopPropagation:null,handled:!1,rootElement:rootElement}}}const event_manager_DEFAULT_OPTIONS={events:null,recognizers:null,recognizerOptions:{},Manager:Manager,touchAction:"none",tabIndex:0};class EventManager{constructor(element=null,options){this._onBasicInput=event=>{const{srcEvent:srcEvent}=event,alias=BASIC_EVENT_ALIASES[srcEvent.type];alias&&this.manager.emit(alias,event)},this._onOtherEvent=event=>{this.manager.emit(event.type,event)},this.options={...event_manager_DEFAULT_OPTIONS,...options},this.events=new Map,this.setElement(element);const{events:events}=this.options;events&&this.on(events)}getElement(){return this.element}setElement(element){if(this.element&&this.destroy(),this.element=element,!element)return;const{options:options}=this,ManagerClass=options.Manager;this.manager=new ManagerClass(element,{touchAction:options.touchAction,recognizers:options.recognizers||RECOGNIZERS}).on("hammer.input",this._onBasicInput),options.recognizers||Object.keys(RECOGNIZER_COMPATIBLE_MAP).forEach((name=>{const recognizer=this.manager.get(name);recognizer&&RECOGNIZER_COMPATIBLE_MAP[name].forEach((otherName=>{recognizer.recognizeWith(otherName)}))}));for(const recognizerName in options.recognizerOptions){const recognizer=this.manager.get(recognizerName);if(recognizer){const recognizerOption=options.recognizerOptions[recognizerName];delete recognizerOption.enable,recognizer.set(recognizerOption)}}this.wheelInput=new WheelInput(element,this._onOtherEvent,{enable:!1}),this.moveInput=new MoveInput(element,this._onOtherEvent,{enable:!1}),this.keyInput=new KeyInput(element,this._onOtherEvent,{enable:!1,tabIndex:options.tabIndex}),this.contextmenuInput=new ContextmenuInput(element,this._onOtherEvent,{enable:!1});for(const[eventAlias,eventRegistrar]of this.events)eventRegistrar.isEmpty()||(this._toggleRecognizer(eventRegistrar.recognizerName,!0),this.manager.on(eventAlias,eventRegistrar.handleEvent))}destroy(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}on(event,handler,opts){this._addEventHandler(event,handler,opts,!1)}once(event,handler,opts){this._addEventHandler(event,handler,opts,!0)}watch(event,handler,opts){this._addEventHandler(event,handler,opts,!1,!0)}off(event,handler){this._removeEventHandler(event,handler)}_toggleRecognizer(name,enabled){const{manager:manager}=this;if(!manager)return;const recognizer=manager.get(name);if(recognizer&&recognizer.options.enable!==enabled){recognizer.set({enable:enabled});const fallbackRecognizers=RECOGNIZER_FALLBACK_MAP[name];fallbackRecognizers&&!this.options.recognizers&&fallbackRecognizers.forEach((otherName=>{const otherRecognizer=manager.get(otherName);enabled?(otherRecognizer.requireFailure(name),recognizer.dropRequireFailure(otherName)):otherRecognizer.dropRequireFailure(name)}))}this.wheelInput.enableEventType(name,enabled),this.moveInput.enableEventType(name,enabled),this.keyInput.enableEventType(name,enabled),this.contextmenuInput.enableEventType(name,enabled)}_addEventHandler(event,handler,opts,once,passive){if("string"!=typeof event){opts=handler;for(const eventName in event)this._addEventHandler(eventName,event[eventName],opts,once,passive);return}const{manager:manager,events:events}=this,eventAlias=GESTURE_EVENT_ALIASES[event]||event;let eventRegistrar=events.get(eventAlias);eventRegistrar||(eventRegistrar=new EventRegistrar(this),events.set(eventAlias,eventRegistrar),eventRegistrar.recognizerName=EVENT_RECOGNIZER_MAP[eventAlias]||eventAlias,manager&&manager.on(eventAlias,eventRegistrar.handleEvent)),eventRegistrar.add(event,handler,opts,once,passive),eventRegistrar.isEmpty()||this._toggleRecognizer(eventRegistrar.recognizerName,!0)}_removeEventHandler(event,handler){if("string"!=typeof event){for(const eventName in event)this._removeEventHandler(eventName,event[eventName]);return}const{events:events}=this,eventAlias=GESTURE_EVENT_ALIASES[event]||event,eventRegistrar=events.get(eventAlias);if(eventRegistrar&&(eventRegistrar.remove(event,handler),eventRegistrar.isEmpty())){const{recognizerName:recognizerName}=eventRegistrar;let isRecognizerUsed=!1;for(const eh of events.values())if(eh.recognizerName===recognizerName&&!eh.isEmpty()){isRecognizerUsed=!0;break}isRecognizerUsed||this._toggleRecognizer(recognizerName,!1)}}}var assert=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/utils/assert.js"),constants=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/lib/constants.js");function noop(){}const defaultProps={id:"",width:"100%",height:"100%",style:null,viewState:null,initialViewState:null,pickingRadius:0,layerFilter:null,glOptions:{},parameters:{},parent:null,gl:null,canvas:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",eventRecognizerOptions:{},_framebuffer:null,_animate:!1,_pickable:!0,_typedArrayManagerProps:{},_customRender:null,onWebGLInitialized:noop,onResize:noop,onViewStateChange:noop,onInteractionStateChange:noop,onBeforeRender:noop,onAfterRender:noop,onLoad:noop,onError:error=>log.Z.error(error.message,error.cause)(),onHover:null,onClick:null,onDragStart:null,onDrag:null,onDragEnd:null,_onMetrics:null,getCursor:({isDragging:isDragging})=>isDragging?"grabbing":"grab",getTooltip:null,debug:!1,drawPickingColors:!1};class Deck{constructor(props){(0,defineProperty.Z)(this,"props",void 0),(0,defineProperty.Z)(this,"width",0),(0,defineProperty.Z)(this,"height",0),(0,defineProperty.Z)(this,"userData",{}),(0,defineProperty.Z)(this,"canvas",null),(0,defineProperty.Z)(this,"viewManager",null),(0,defineProperty.Z)(this,"layerManager",null),(0,defineProperty.Z)(this,"effectManager",null),(0,defineProperty.Z)(this,"deckRenderer",null),(0,defineProperty.Z)(this,"deckPicker",null),(0,defineProperty.Z)(this,"eventManager",null),(0,defineProperty.Z)(this,"tooltip",null),(0,defineProperty.Z)(this,"metrics",void 0),(0,defineProperty.Z)(this,"animationLoop",void 0),(0,defineProperty.Z)(this,"stats",void 0),(0,defineProperty.Z)(this,"viewState",void 0),(0,defineProperty.Z)(this,"cursorState",void 0),(0,defineProperty.Z)(this,"_needsRedraw",void 0),(0,defineProperty.Z)(this,"_pickRequest",void 0),(0,defineProperty.Z)(this,"_lastPointerDownInfo",null),(0,defineProperty.Z)(this,"_metricsCounter",void 0),(0,defineProperty.Z)(this,"_onPointerMove",(event=>{const{_pickRequest:_pickRequest}=this;if("pointerleave"===event.type)_pickRequest.x=-1,_pickRequest.y=-1,_pickRequest.radius=0;else{if(event.leftButton||event.rightButton)return;{const pos=event.offsetCenter;if(!pos)return;_pickRequest.x=pos.x,_pickRequest.y=pos.y,_pickRequest.radius=this.props.pickingRadius}}this.layerManager&&(this.layerManager.context.mousePosition={x:_pickRequest.x,y:_pickRequest.y}),_pickRequest.event=event})),(0,defineProperty.Z)(this,"_onEvent",(event=>{const eventOptions=constants.FP[event.type],pos=event.offsetCenter;if(!eventOptions||!pos||!this.layerManager)return;const layers=this.layerManager.getLayers(),info=this.deckPicker.getLastPickedObject({x:pos.x,y:pos.y,layers:layers,viewports:this.getViewports(pos)},this._lastPointerDownInfo),{layer:layer}=info,layerHandler=layer&&(layer[eventOptions.handler]||layer.props[eventOptions.handler]),rootHandler=this.props[eventOptions.handler];let handled=!1;layerHandler&&(handled=layerHandler.call(layer,info,event)),!handled&&rootHandler&&rootHandler(info,event)})),(0,defineProperty.Z)(this,"_onPointerDown",(event=>{const pos=event.offsetCenter,pickedInfo=this._pick("pickObject","pickObject Time",{x:pos.x,y:pos.y,radius:this.props.pickingRadius});this._lastPointerDownInfo=pickedInfo.result[0]||pickedInfo.emptyInfo})),this.props={...defaultProps,...props},props=this.props,this._needsRedraw="Initial render",this._pickRequest={mode:"hover",x:-1,y:-1,radius:0,event:null},this.cursorState={isHovering:!1,isDragging:!1},props.viewState&&props.initialViewState&&log.Z.warn("View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.")(),"IE"===(0,get_browser.Z)()&&log.Z.warn("IE 11 is not supported")(),this.viewState=props.initialViewState,props.gl||"undefined"!=typeof document&&(this.canvas=this._createCanvas(props)),this.animationLoop=this._createAnimationLoop(props),this.stats=new dist_esm.jk({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this.setProps(props),props._typedArrayManagerProps&&typed_array_manager.Z.setOptions(props._typedArrayManagerProps),this.animationLoop.start()}finalize(){var _this$animationLoop,_this$layerManager,_this$viewManager,_this$effectManager,_this$deckRenderer,_this$deckPicker,_this$eventManager,_this$tooltip,_this$canvas$parentEl;(null===(_this$animationLoop=this.animationLoop)||void 0===_this$animationLoop||_this$animationLoop.stop(),this.animationLoop=null,this._lastPointerDownInfo=null,null===(_this$layerManager=this.layerManager)||void 0===_this$layerManager||_this$layerManager.finalize(),this.layerManager=null,null===(_this$viewManager=this.viewManager)||void 0===_this$viewManager||_this$viewManager.finalize(),this.viewManager=null,null===(_this$effectManager=this.effectManager)||void 0===_this$effectManager||_this$effectManager.finalize(),this.effectManager=null,null===(_this$deckRenderer=this.deckRenderer)||void 0===_this$deckRenderer||_this$deckRenderer.finalize(),this.deckRenderer=null,null===(_this$deckPicker=this.deckPicker)||void 0===_this$deckPicker||_this$deckPicker.finalize(),this.deckPicker=null,null===(_this$eventManager=this.eventManager)||void 0===_this$eventManager||_this$eventManager.destroy(),this.eventManager=null,null===(_this$tooltip=this.tooltip)||void 0===_this$tooltip||_this$tooltip.remove(),this.tooltip=null,this.props.canvas||this.props.gl||!this.canvas)||(null===(_this$canvas$parentEl=this.canvas.parentElement)||void 0===_this$canvas$parentEl||_this$canvas$parentEl.removeChild(this.canvas),this.canvas=null)}setProps(props){this.stats.get("setProps Time").timeStart(),"onLayerHover"in props&&log.Z.removed("onLayerHover","onHover")(),"onLayerClick"in props&&log.Z.removed("onLayerClick","onClick")(),props.initialViewState&&!(0,deep_equal.v)(this.props.initialViewState,props.initialViewState,3)&&(this.viewState=props.initialViewState),Object.assign(this.props,props),this._setCanvasSize(this.props);const resolvedProps=Object.create(this.props);Object.assign(resolvedProps,{views:this._getViews(),width:this.width,height:this.height,viewState:this._getViewState()}),this.animationLoop.setProps(resolvedProps),this.layerManager&&(this.viewManager.setProps(resolvedProps),this.layerManager.activateViewport(this.getViewports()[0]),this.layerManager.setProps(resolvedProps),this.effectManager.setProps(resolvedProps),this.deckRenderer.setProps(resolvedProps),this.deckPicker.setProps(resolvedProps)),this.stats.get("setProps Time").timeEnd()}needsRedraw(opts={clearRedrawFlags:!1}){if(!this.layerManager)return!1;if(this.props._animate)return"Deck._animate";let redraw=this._needsRedraw;opts.clearRedrawFlags&&(this._needsRedraw=!1);const viewManagerNeedsRedraw=this.viewManager.needsRedraw(opts),layerManagerNeedsRedraw=this.layerManager.needsRedraw(opts),effectManagerNeedsRedraw=this.effectManager.needsRedraw(opts),deckRendererNeedsRedraw=this.deckRenderer.needsRedraw(opts);return redraw=redraw||viewManagerNeedsRedraw||layerManagerNeedsRedraw||effectManagerNeedsRedraw||deckRendererNeedsRedraw,redraw}redraw(reason){if(!this.layerManager)return;let redrawReason=this.needsRedraw({clearRedrawFlags:!0});redrawReason=reason||redrawReason,redrawReason&&(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(redrawReason):this._drawLayers(redrawReason))}get isInitialized(){return null!==this.viewManager}getViews(){return(0,assert.Z)(this.viewManager),this.viewManager.views}getViewports(rect){return(0,assert.Z)(this.viewManager),this.viewManager.getViewports(rect)}getCanvas(){return this.canvas}pickObject(opts){const infos=this._pick("pickObject","pickObject Time",opts).result;return infos.length?infos[0]:null}pickMultipleObjects(opts){return opts.depth=opts.depth||10,this._pick("pickObject","pickMultipleObjects Time",opts).result}pickObjects(opts){return this._pick("pickObjects","pickObjects Time",opts)}_addResources(resources,forceUpdate=!1){for(const id in resources)this.layerManager.resourceManager.add({resourceId:id,data:resources[id],forceUpdate:forceUpdate})}_removeResources(resourceIds){for(const id of resourceIds)this.layerManager.resourceManager.remove(id)}_addDefaultEffect(effect){this.effectManager.addDefaultEffect(effect)}_pick(method,statKey,opts){(0,assert.Z)(this.deckPicker);const{stats:stats}=this;stats.get("Pick Count").incrementCount(),stats.get(statKey).timeStart();const infos=this.deckPicker[method]({layers:this.layerManager.getLayers(opts),views:this.viewManager.getViews(),viewports:this.getViewports(opts),onViewportActive:this.layerManager.activateViewport,effects:this.effectManager.getEffects(),...opts});return stats.get(statKey).timeEnd(),infos}_createCanvas(props){let canvas=props.canvas;if("string"==typeof canvas&&(canvas=document.getElementById(canvas),(0,assert.Z)(canvas)),!canvas){canvas=document.createElement("canvas"),canvas.id=props.id||"deckgl-overlay";(props.parent||document.body).appendChild(canvas)}return Object.assign(canvas.style,props.style),canvas}_setCanvasSize(props){if(!this.canvas)return;const{width:width,height:height}=props;if(width||0===width){const cssWidth=Number.isFinite(width)?"".concat(width,"px"):width;this.canvas.style.width=cssWidth}if(height||0===height){var _props$style;const cssHeight=Number.isFinite(height)?"".concat(height,"px"):height;this.canvas.style.position=(null===(_props$style=props.style)||void 0===_props$style?void 0:_props$style.position)||"absolute",this.canvas.style.height=cssHeight}}_updateCanvasSize(){var _canvas$clientWidth,_canvas$clientHeight;const{canvas:canvas}=this;if(!canvas)return;const newWidth=null!==(_canvas$clientWidth=canvas.clientWidth)&&void 0!==_canvas$clientWidth?_canvas$clientWidth:canvas.width,newHeight=null!==(_canvas$clientHeight=canvas.clientHeight)&&void 0!==_canvas$clientHeight?_canvas$clientHeight:canvas.height;var _this$viewManager2,_this$layerManager2;newWidth===this.width&&newHeight===this.height||(this.width=newWidth,this.height=newHeight,null===(_this$viewManager2=this.viewManager)||void 0===_this$viewManager2||_this$viewManager2.setProps({width:newWidth,height:newHeight}),null===(_this$layerManager2=this.layerManager)||void 0===_this$layerManager2||_this$layerManager2.activateViewport(this.getViewports()[0]),this.props.onResize({width:newWidth,height:newHeight}))}_createAnimationLoop(props){const{width:width,height:height,gl:gl,glOptions:glOptions,debug:debug,onError:onError,onBeforeRender:onBeforeRender,onAfterRender:onAfterRender,useDevicePixels:useDevicePixels}=props;return new animation_loop.Z({width:width,height:height,useDevicePixels:useDevicePixels,autoResizeDrawingBuffer:!gl,autoResizeViewport:!1,gl:gl,onCreateContext:opts=>(0,esm.s9)({...glOptions,...opts,canvas:this.canvas,debug:debug,onContextLost:()=>this._onContextLost()}),onInitialize:context=>this._setGLContext(context.gl),onRender:this._onRenderFrame.bind(this),onBeforeRender:onBeforeRender,onAfterRender:onAfterRender,onError:onError})}_getViewState(){return this.props.viewState||this.viewState}_getViews(){let views=this.props.views||[new map_view.Z({id:"default-view"})];return views=Array.isArray(views)?views:[views],views.length&&this.props.controller&&(views[0].props.controller=this.props.controller),views}_onContextLost(){const{onError:onError}=this.props;this.animationLoop&&onError&&onError(new Error("WebGL context is lost"))}_pickAndCallback(){const{_pickRequest:_pickRequest}=this;if(_pickRequest.event){const{result:result,emptyInfo:emptyInfo}=this._pick("pickObject","pickObject Time",_pickRequest);this.cursorState.isHovering=result.length>0;let pickedInfo=emptyInfo,handled=!1;for(const info of result){var _info$layer;pickedInfo=info,handled=(null===(_info$layer=info.layer)||void 0===_info$layer?void 0:_info$layer.onHover(info,_pickRequest.event))||handled}if(!handled&&this.props.onHover&&this.props.onHover(pickedInfo,_pickRequest.event),this.props.getTooltip&&this.tooltip){const displayInfo=this.props.getTooltip(pickedInfo);this.tooltip.setTooltip(displayInfo,pickedInfo.x,pickedInfo.y)}_pickRequest.event=null}}_updateCursor(){const container=this.props.parent||this.canvas;container&&(container.style.cursor=this.props.getCursor(this.cursorState))}_setGLContext(gl){if(this.layerManager)return;this.canvas||(this.canvas=gl.canvas,(0,esm.yW)(gl,{enable:!0,copyState:!0})),this.tooltip=new Tooltip(this.canvas),(0,esm.dR)(gl,{blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onWebGLInitialized(gl);const timeline=new animation_timeline.T;timeline.play(),this.animationLoop.attachTimeline(timeline),this.eventManager=new EventManager(this.props.parent||gl.canvas,{touchAction:this.props.touchAction,recognizerOptions:this.props.eventRecognizerOptions,events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}});for(const eventType in constants.FP)this.eventManager.on(eventType,this._onEvent);this.viewManager=new ViewManager({timeline:timeline,eventManager:this.eventManager,onViewStateChange:this._onViewStateChange.bind(this),onInteractionStateChange:this._onInteractionStateChange.bind(this),views:this._getViews(),viewState:this._getViewState(),width:this.width,height:this.height});const viewport=this.viewManager.getViewports()[0];this.layerManager=new layer_manager.Z(gl,{deck:this,stats:this.stats,viewport:viewport,timeline:timeline}),this.effectManager=new EffectManager,this.deckRenderer=new deck_renderer.Z(gl),this.deckPicker=new DeckPicker(gl),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}_drawLayers(redrawReason,renderOptions){const{gl:gl}=this.layerManager.context;(0,esm.dR)(gl,this.props.parameters),this.props.onBeforeRender({gl:gl}),this.deckRenderer.renderLayers({target:this.props._framebuffer,layers:this.layerManager.getLayers(),viewports:this.viewManager.getViewports(),onViewportActive:this.layerManager.activateViewport,views:this.viewManager.getViews(),pass:"screen",effects:this.effectManager.getEffects(),...renderOptions}),this.props.onAfterRender({gl:gl})}_onRenderFrame(animationProps){this._getFrameStats(),this._metricsCounter++%60==0&&(this._getMetrics(),this.stats.reset(),log.Z.table(4,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.tooltip.isVisible&&this.viewManager.needsRedraw()&&this.tooltip.setTooltip(null),this.layerManager.updateLayers(),this._pickAndCallback(),this.redraw(),this.viewManager&&this.viewManager.updateViewStates()}_onViewStateChange(params){const viewState=this.props.onViewStateChange(params)||params.viewState;this.viewState&&(this.viewState={...this.viewState,[params.viewId]:viewState},this.props.viewState||this.viewManager&&this.viewManager.setProps({viewState:this.viewState}))}_onInteractionStateChange(interactionState){this.cursorState.isDragging=interactionState.isDragging||!1,this.props.onInteractionStateChange(interactionState)}_getFrameStats(){const{stats:stats}=this;stats.get("frameRate").timeEnd(),stats.get("frameRate").timeStart();const animationLoopStats=this.animationLoop.stats;stats.get("GPU Time").addTime(animationLoopStats.get("GPU Time").lastTiming),stats.get("CPU Time").addTime(animationLoopStats.get("CPU Time").lastTiming)}_getMetrics(){const{metrics:metrics,stats:stats}=this;metrics.fps=stats.get("frameRate").getHz(),metrics.setPropsTime=stats.get("setProps Time").time,metrics.updateAttributesTime=stats.get("Update Attributes").time,metrics.framesRedrawn=stats.get("Redraw Count").count,metrics.pickTime=stats.get("pickObject Time").time+stats.get("pickMultipleObjects Time").time+stats.get("pickObjects Time").time,metrics.pickCount=stats.get("Pick Count").count,metrics.gpuTime=stats.get("GPU Time").time,metrics.cpuTime=stats.get("CPU Time").time,metrics.gpuTimePerFrame=stats.get("GPU Time").getAverageTime(),metrics.cpuTimePerFrame=stats.get("CPU Time").getAverageTime();const memoryStats=esm_init.lR.get("Memory Usage");metrics.bufferMemory=memoryStats.get("Buffer Memory").count,metrics.textureMemory=memoryStats.get("Texture Memory").count,metrics.renderbufferMemory=memoryStats.get("Renderbuffer Memory").count,metrics.gpuMemory=memoryStats.get("GPU Memory").count}}(0,defineProperty.Z)(Deck,"defaultProps",defaultProps),(0,defineProperty.Z)(Deck,"VERSION",init.q)},"./node_modules/@deck.gl/core/dist/esm/lib/init.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{q:function(){return VERSION}});var register_loaders=__webpack_require__("./node_modules/@loaders.gl/core/dist/esm/lib/api/register-loaders.js"),image_loader=__webpack_require__("./node_modules/@loaders.gl/images/dist/esm/image-loader.js"),log=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/utils/log.js"),debug=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/debug/index.js");var json_loader={id:"JSON",name:"JSON",module:"",version:"",options:{},extensions:["json","geojson"],mimeTypes:["application/json","application/geo+json"],testText:function isJSON(text){const firstChar=text[0],lastChar=text[text.length-1];return"{"===firstChar&&"}"===lastChar||"["===firstChar&&"]"===lastChar},parseTextSync:JSON.parse};const VERSION=function checkVersion(){const existingVersion=globalThis.deck&&globalThis.deck.VERSION;if(existingVersion&&"8.9.32"!==existingVersion)throw new Error("deck.gl - multiple versions detected: ".concat(existingVersion," vs ").concat("8.9.32"));return existingVersion||(log.Z.log(1,"deck.gl ".concat("8.9.32"))(),globalThis.deck={...globalThis.deck,VERSION:"8.9.32",version:"8.9.32",log:log.Z,_registerLoggers:debug.z},(0,register_loaders.fh)([json_loader,[image_loader.S,{imagebitmap:{premultiplyAlpha:"none"}}]])),"8.9.32"}()},"./node_modules/@deck.gl/core/dist/esm/lib/layer-manager.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return LayerManager}});var defineProperty=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),animation_timeline=__webpack_require__("./node_modules/@luma.gl/engine/dist/esm/animation/timeline.js"),constants=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/lifecycle/constants.js"),log=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/utils/log.js"),debug=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/debug/index.js"),flatten=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/utils/flatten.js"),esm=__webpack_require__("./node_modules/@probe.gl/stats/dist/esm/index.js"),load=__webpack_require__("./node_modules/@loaders.gl/core/dist/esm/lib/api/load.js");class Resource{constructor(id,data,context){(0,defineProperty.Z)(this,"id",void 0),(0,defineProperty.Z)(this,"context",void 0),(0,defineProperty.Z)(this,"isLoaded",void 0),(0,defineProperty.Z)(this,"persistent",void 0),(0,defineProperty.Z)(this,"_loadCount",0),(0,defineProperty.Z)(this,"_subscribers",new Set),(0,defineProperty.Z)(this,"_data",void 0),(0,defineProperty.Z)(this,"_loader",void 0),(0,defineProperty.Z)(this,"_error",void 0),(0,defineProperty.Z)(this,"_content",void 0),this.id=id,this.context=context,this.setData(data)}subscribe(consumer){this._subscribers.add(consumer)}unsubscribe(consumer){this._subscribers.delete(consumer)}inUse(){return this._subscribers.size>0}delete(){}getData(){return this.isLoaded?this._error?Promise.reject(this._error):this._content:this._loader.then((()=>this.getData()))}setData(data,forceUpdate){if(data===this._data&&!forceUpdate)return;this._data=data;const loadCount=++this._loadCount;let loader=data;"string"==typeof data&&(loader=(0,load.z)(data)),loader instanceof Promise?(this.isLoaded=!1,this._loader=loader.then((result=>{this._loadCount===loadCount&&(this.isLoaded=!0,this._error=void 0,this._content=result)})).catch((error=>{this._loadCount===loadCount&&(this.isLoaded=!0,this._error=error||!0)}))):(this.isLoaded=!0,this._error=void 0,this._content=data);for(const subscriber of this._subscribers)subscriber.onChange(this.getData())}}class ResourceManager{constructor({gl:gl,protocol:protocol}){(0,defineProperty.Z)(this,"protocol",void 0),(0,defineProperty.Z)(this,"_context",void 0),(0,defineProperty.Z)(this,"_resources",void 0),(0,defineProperty.Z)(this,"_consumers",void 0),(0,defineProperty.Z)(this,"_pruneRequest",void 0),this.protocol=protocol||"resource://",this._context={gl:gl,resourceManager:this},this._resources={},this._consumers={},this._pruneRequest=null}contains(resourceId){return!!resourceId.startsWith(this.protocol)||resourceId in this._resources}add({resourceId:resourceId,data:data,forceUpdate:forceUpdate=!1,persistent:persistent=!0}){let res=this._resources[resourceId];res?res.setData(data,forceUpdate):(res=new Resource(resourceId,data,this._context),this._resources[resourceId]=res),res.persistent=persistent}remove(resourceId){const res=this._resources[resourceId];res&&(res.delete(),delete this._resources[resourceId])}unsubscribe({consumerId:consumerId}){const consumer=this._consumers[consumerId];if(consumer){for(const requestId in consumer){const request=consumer[requestId],resource=this._resources[request.resourceId];resource&&resource.unsubscribe(request)}delete this._consumers[consumerId],this.prune()}}subscribe({resourceId:resourceId,onChange:onChange,consumerId:consumerId,requestId:requestId="default"}){const{_resources:resources,protocol:protocol}=this;resourceId.startsWith(protocol)&&(resources[resourceId=resourceId.replace(protocol,"")]||this.add({resourceId:resourceId,data:null,persistent:!1}));const res=resources[resourceId];if(this._track(consumerId,requestId,res,onChange),res)return res.getData()}prune(){this._pruneRequest||(this._pruneRequest=setTimeout((()=>this._prune()),0))}finalize(){for(const key in this._resources)this._resources[key].delete()}_track(consumerId,requestId,resource,onChange){const consumers=this._consumers,consumer=consumers[consumerId]=consumers[consumerId]||{},request=consumer[requestId]||{},oldResource=request.resourceId&&this._resources[request.resourceId];oldResource&&(oldResource.unsubscribe(request),this.prune()),resource&&(consumer[requestId]=request,request.onChange=onChange,request.resourceId=resource.id,resource.subscribe(request))}_prune(){this._pruneRequest=null;for(const key of Object.keys(this._resources)){const res=this._resources[key];res.persistent||res.inUse()||(res.delete(),delete this._resources[key])}}}var viewport=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/viewports/viewport.js"),program_manager=__webpack_require__("./node_modules/@luma.gl/engine/dist/esm/lib/program-manager.js");const DEFAULT_MODULES=[__webpack_require__("./node_modules/@deck.gl/core/dist/esm/shaderlib/project/project.js").Z],SHADER_HOOKS=["vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)","vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)","vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)","fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"];function createProgramManager(gl){const programManager=program_manager.Z.getDefaultProgramManager(gl);for(const shaderModule of DEFAULT_MODULES)programManager.addDefaultModule(shaderModule);for(const shaderHook of SHADER_HOOKS)programManager.addShaderHook(shaderHook);return programManager}class LayerManager{constructor(gl,{deck:deck,stats:stats,viewport:_viewport,timeline:timeline}={}){(0,defineProperty.Z)(this,"layers",void 0),(0,defineProperty.Z)(this,"context",void 0),(0,defineProperty.Z)(this,"resourceManager",void 0),(0,defineProperty.Z)(this,"_lastRenderedLayers",[]),(0,defineProperty.Z)(this,"_needsRedraw",!1),(0,defineProperty.Z)(this,"_needsUpdate",!1),(0,defineProperty.Z)(this,"_nextLayers",null),(0,defineProperty.Z)(this,"_debug",!1),(0,defineProperty.Z)(this,"activateViewport",(viewport=>{(0,debug.Z)("layerManager.activateViewport",this,viewport),viewport&&(this.context.viewport=viewport)})),this.layers=[],this.resourceManager=new ResourceManager({gl:gl,protocol:"deck://"}),this.context={mousePosition:null,userData:{},layerManager:this,gl:gl,deck:deck,programManager:gl&&createProgramManager(gl),stats:stats||new esm.jk({id:"deck.gl"}),viewport:_viewport||new viewport.Z({id:"DEFAULT-INITIAL-VIEWPORT"}),timeline:timeline||new animation_timeline.T,resourceManager:this.resourceManager,onError:void 0},Object.seal(this)}finalize(){this.resourceManager.finalize();for(const layer of this.layers)this._finalizeLayer(layer)}needsRedraw(opts={clearRedrawFlags:!1}){let redraw=this._needsRedraw;opts.clearRedrawFlags&&(this._needsRedraw=!1);for(const layer of this.layers){const layerNeedsRedraw=layer.getNeedsRedraw(opts);redraw=redraw||layerNeedsRedraw}return redraw}needsUpdate(){return this._nextLayers&&this._nextLayers!==this._lastRenderedLayers?"layers changed":this._needsUpdate}setNeedsRedraw(reason){this._needsRedraw=this._needsRedraw||reason}setNeedsUpdate(reason){this._needsUpdate=this._needsUpdate||reason}getLayers({layerIds:layerIds}={}){return layerIds?this.layers.filter((layer=>layerIds.find((layerId=>0===layer.id.indexOf(layerId))))):this.layers}setProps(props){"debug"in props&&(this._debug=props.debug),"userData"in props&&(this.context.userData=props.userData),"layers"in props&&(this._nextLayers=props.layers),"onError"in props&&(this.context.onError=props.onError)}setLayers(newLayers,reason){(0,debug.Z)("layerManager.setLayers",this,reason,newLayers),this._lastRenderedLayers=newLayers;const flatLayers=(0,flatten.x)(newLayers,Boolean);for(const layer of flatLayers)layer.context=this.context;this._updateLayers(this.layers,flatLayers)}updateLayers(){const reason=this.needsUpdate();reason&&(this.setNeedsRedraw("updating layers: ".concat(reason)),this.setLayers(this._nextLayers||this._lastRenderedLayers,reason)),this._nextLayers=null}_handleError(stage,error,layer){layer.raiseError(error,"".concat(stage," of ").concat(layer))}_updateLayers(oldLayers,newLayers){const oldLayerMap={};for(const oldLayer of oldLayers)oldLayerMap[oldLayer.id]?log.Z.warn("Multiple old layers with same id ".concat(oldLayer.id))():oldLayerMap[oldLayer.id]=oldLayer;const generatedLayers=[];this._updateSublayersRecursively(newLayers,oldLayerMap,generatedLayers),this._finalizeOldLayers(oldLayerMap);let needsUpdate=!1;for(const layer of generatedLayers)if(layer.hasUniformTransition()){needsUpdate="Uniform transition in ".concat(layer);break}this._needsUpdate=needsUpdate,this.layers=generatedLayers}_updateSublayersRecursively(newLayers,oldLayerMap,generatedLayers){for(const newLayer of newLayers){newLayer.context=this.context;const oldLayer=oldLayerMap[newLayer.id];null===oldLayer&&log.Z.warn("Multiple new layers with same id ".concat(newLayer.id))(),oldLayerMap[newLayer.id]=null;let sublayers=null;try{this._debug&&oldLayer!==newLayer&&newLayer.validateProps(),oldLayer?(this._transferLayerState(oldLayer,newLayer),this._updateLayer(newLayer)):this._initializeLayer(newLayer),generatedLayers.push(newLayer),sublayers=newLayer.isComposite?newLayer.getSubLayers():null}catch(err){this._handleError("matching",err,newLayer)}sublayers&&this._updateSublayersRecursively(sublayers,oldLayerMap,generatedLayers)}}_finalizeOldLayers(oldLayerMap){for(const layerId in oldLayerMap){const layer=oldLayerMap[layerId];layer&&this._finalizeLayer(layer)}}_initializeLayer(layer){try{layer._initialize(),layer.lifecycle=constants.dt.INITIALIZED}catch(err){this._handleError("initialization",err,layer)}}_transferLayerState(oldLayer,newLayer){newLayer._transferState(oldLayer),newLayer.lifecycle=constants.dt.MATCHED,newLayer!==oldLayer&&(oldLayer.lifecycle=constants.dt.AWAITING_GC)}_updateLayer(layer){try{layer._update()}catch(err){this._handleError("update",err,layer)}}_finalizeLayer(layer){this._needsRedraw=this._needsRedraw||"finalized ".concat(layer),layer.lifecycle=constants.dt.AWAITING_FINALIZATION;try{layer._finalize(),layer.lifecycle=constants.dt.FINALIZED}catch(err){this._handleError("finalization",err,layer)}}}},"./node_modules/@deck.gl/core/dist/esm/lib/layer.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return Layer}});var defineProperty=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),constants=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/lib/constants.js"),attribute_manager=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/lib/attribute/attribute-manager.js"),attribute_transition_utils=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/lib/attribute/attribute-transition-utils.js"),common=__webpack_require__("./node_modules/@math.gl/core/dist/esm/lib/common.js"),transition=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/transitions/transition.js");class CPUInterpolationTransition extends transition.Z{get value(){return this._value}_onUpdate(){const{time:time,settings:{fromValue:fromValue,toValue:toValue,duration:duration,easing:easing}}=this,t=easing(time/duration);this._value=(0,common.t7)(fromValue,toValue,t)}}function updateSpringElement(prev,cur,dest,damping,stiffness){const velocity=cur-prev;return(dest-cur)*stiffness+-velocity*damping+velocity+cur}function distance(value1,value2){if(Array.isArray(value1)){let distanceSquare=0;for(let i=0;i<value1.length;i++){const d=value1[i]-value2[i];distanceSquare+=d*d}return Math.sqrt(distanceSquare)}return Math.abs(value1-value2)}class CPUSpringTransition extends transition.Z{get value(){return this._currValue}_onUpdate(){const{fromValue:fromValue,toValue:toValue,damping:damping,stiffness:stiffness}=this.settings,{_prevValue:_prevValue=fromValue,_currValue:_currValue=fromValue}=this;let nextValue=function updateSpring(prev,cur,dest,damping,stiffness){if(Array.isArray(dest)){const next=[];for(let i=0;i<dest.length;i++)next[i]=updateSpringElement(prev[i],cur[i],dest[i],damping,stiffness);return next}return updateSpringElement(prev,cur,dest,damping,stiffness)}(_prevValue,_currValue,toValue,damping,stiffness);const delta=distance(nextValue,toValue),velocity=distance(nextValue,_currValue);delta<1e-5&&velocity<1e-5&&(nextValue=toValue,this.end()),this._prevValue=_currValue,this._currValue=nextValue}}var log=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/utils/log.js");const TRANSITION_TYPES={interpolation:CPUInterpolationTransition,spring:CPUSpringTransition};class UniformTransitionManager{constructor(timeline){this.transitions=new Map,this.timeline=timeline}get active(){return this.transitions.size>0}add(key,fromValue,toValue,settings){const{transitions:transitions}=this;if(transitions.has(key)){const transition=transitions.get(key),{value:value=transition.settings.fromValue}=transition;fromValue=value,this.remove(key)}if(!(settings=(0,attribute_transition_utils.M0)(settings)))return;const TransitionType=TRANSITION_TYPES[settings.type];if(!TransitionType)return void log.Z.error("unsupported transition type '".concat(settings.type,"'"))();const transition=new TransitionType(this.timeline);transition.start({...settings,fromValue:fromValue,toValue:toValue}),transitions.set(key,transition)}remove(key){const{transitions:transitions}=this;transitions.has(key)&&(transitions.get(key).cancel(),transitions.delete(key))}update(){const propsInTransition={};for(const[key,transition]of this.transitions)transition.update(),propsInTransition[key]=transition.value,transition.inProgress||this.remove(key);return propsInTransition}clear(){for(const key of this.transitions.keys())this.remove(key)}}var props=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/lifecycle/props.js"),lifecycle_constants=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/lifecycle/constants.js"),count=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/utils/count.js"),debug=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/debug/index.js"),esm=__webpack_require__("./node_modules/@luma.gl/gltools/dist/esm/index.js"),assert=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/utils/assert.js"),memoize=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/utils/memoize.js"),shader=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/utils/shader.js"),project_functions=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/shaderlib/project/project-functions.js"),typed_array_manager=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/utils/typed-array-manager.js"),iterable_utils=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/utils/iterable-utils.js"),texture_2d=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/classes/texture-2d.js");const DEFAULT_TEXTURE_PARAMETERS={10241:9987,10240:9729,10242:33071,10243:33071},internalTextures={};var deep_equal=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/utils/deep-equal.js");const TYPE_DEFINITIONS={boolean:{validate(value,propType){return!0},equal(value1,value2,propType){return Boolean(value1)===Boolean(value2)}},number:{validate(value,propType){return Number.isFinite(value)&&(!("max"in propType)||value<=propType.max)&&(!("min"in propType)||value>=propType.min)}},color:{validate(value,propType){return propType.optional&&!value||isArray(value)&&(3===value.length||4===value.length)},equal(value1,value2,propType){return(0,deep_equal.v)(value1,value2,1)}},accessor:{validate(value,propType){const valueType=getTypeOf(value);return"function"===valueType||valueType===getTypeOf(propType.value)},equal(value1,value2,propType){return"function"==typeof value2||(0,deep_equal.v)(value1,value2,1)}},array:{validate(value,propType){return propType.optional&&!value||isArray(value)},equal(value1,value2,propType){const{compare:compare}=propType,depth=Number.isInteger(compare)?compare:compare?1:0;return compare?(0,deep_equal.v)(value1,value2,depth):value1===value2}},object:{equal(value1,value2,propType){if(propType.ignore)return!0;const{compare:compare}=propType,depth=Number.isInteger(compare)?compare:compare?1:0;return compare?(0,deep_equal.v)(value1,value2,depth):value1===value2}},function:{validate(value,propType){return propType.optional&&!value||"function"==typeof value},equal(value1,value2,propType){return!propType.compare&&!1!==propType.ignore||value1===value2}},data:{transform:(value,propType,component)=>{const{dataTransform:dataTransform}=component.props;return dataTransform&&value?dataTransform(value):value}},image:{transform:(value,propType,component)=>{const context=component.context;return context&&context.gl?function createTexture(owner,gl,image,parameters){if(image instanceof texture_2d.Z)return image;image.constructor&&"Object"!==image.constructor.name&&(image={data:image});let specialTextureParameters=null;image.compressed&&(specialTextureParameters={10241:image.data.length>1?9985:9729});const texture=new texture_2d.Z(gl,{...image,parameters:{...DEFAULT_TEXTURE_PARAMETERS,...specialTextureParameters,...parameters}});return internalTextures[texture.id]=owner,texture}(component.id,context.gl,value,{...propType.parameters,...component.props.textureParameters}):null},release:(value,propType,component)=>{!function destroyTexture(owner,texture){texture&&texture instanceof texture_2d.Z&&internalTextures[texture.id]===owner&&(texture.delete(),delete internalTextures[texture.id])}(component.id,value)}}};function parsePropType(name,propDef){switch(getTypeOf(propDef)){case"object":return normalizePropDefinition(name,propDef);case"array":return normalizePropDefinition(name,{type:"array",value:propDef,compare:!1});case"boolean":return normalizePropDefinition(name,{type:"boolean",value:propDef});case"number":return normalizePropDefinition(name,{type:"number",value:propDef});case"function":return normalizePropDefinition(name,{type:"function",value:propDef,compare:!0});default:return{name:name,type:"unknown",value:propDef}}}function normalizePropDefinition(name,propDef){return"type"in propDef?{name:name,...TYPE_DEFINITIONS[propDef.type],...propDef}:"value"in propDef?{name:name,type:getTypeOf(propDef.value),...propDef}:{name:name,type:"object",value:propDef}}function isArray(value){return Array.isArray(value)||ArrayBuffer.isView(value)}function getTypeOf(value){return isArray(value)?"array":null===value?"null":typeof value}const MergedDefaultPropsCacheKey="_mergedDefaultProps";function getPropsPrototype(componentClass,extensions){let cacheKey=MergedDefaultPropsCacheKey;if(extensions)for(const extension of extensions){const ExtensionClass=extension.constructor;ExtensionClass&&(cacheKey+=":".concat(ExtensionClass.extensionName||ExtensionClass.name))}const defaultProps=getOwnProperty(componentClass,cacheKey);return defaultProps||(componentClass[cacheKey]=function createPropsPrototypeAndTypes(componentClass,extensions){const parent=componentClass.prototype;if(!parent)return null;const parentClass=Object.getPrototypeOf(componentClass),parentDefaultProps=getPropsPrototype(parentClass),componentDefaultProps=getOwnProperty(componentClass,"defaultProps")||{},componentPropDefs=function parsePropTypes(propDefs){const propTypes={},defaultProps={},deprecatedProps={};for(const[propName,propDef]of Object.entries(propDefs)){const deprecated=null==propDef?void 0:propDef.deprecatedFor;if(deprecated)deprecatedProps[propName]=Array.isArray(deprecated)?deprecated:[deprecated];else{const propType=parsePropType(propName,propDef);propTypes[propName]=propType,defaultProps[propName]=propType.value}}return{propTypes:propTypes,defaultProps:defaultProps,deprecatedProps:deprecatedProps}}(componentDefaultProps),defaultProps=Object.assign(Object.create(null),parentDefaultProps,componentPropDefs.defaultProps),propTypes=Object.assign(Object.create(null),null==parentDefaultProps?void 0:parentDefaultProps[lifecycle_constants.Wb],componentPropDefs.propTypes),deprecatedProps=Object.assign(Object.create(null),null==parentDefaultProps?void 0:parentDefaultProps[lifecycle_constants.E7],componentPropDefs.deprecatedProps);for(const extension of extensions){const extensionDefaultProps=getPropsPrototype(extension.constructor);extensionDefaultProps&&(Object.assign(defaultProps,extensionDefaultProps),Object.assign(propTypes,extensionDefaultProps[lifecycle_constants.Wb]),Object.assign(deprecatedProps,extensionDefaultProps[lifecycle_constants.E7]))}(function createPropsPrototype(defaultProps,componentClass){const id=function getComponentName(componentClass){const componentName=componentClass.componentName;componentName||log.Z.warn("".concat(componentClass.name,".componentName not specified"))();return componentName||componentClass.name}(componentClass);Object.defineProperties(defaultProps,{id:{writable:!0,value:id}})})(defaultProps,componentClass),function addAsyncPropsToPropPrototype(defaultProps,propTypes){const defaultValues={},descriptors={};for(const propName in propTypes){const propType=propTypes[propName],{name:name,value:value}=propType;propType.async&&(defaultValues[name]=value,descriptors[name]=getDescriptorForAsyncProp(name))}defaultProps[lifecycle_constants.lY]=defaultValues,defaultProps[lifecycle_constants.fO]={},Object.defineProperties(defaultProps,descriptors)}(defaultProps,propTypes),function addDeprecatedPropsToPropPrototype(defaultProps,deprecatedProps){for(const propName in deprecatedProps)Object.defineProperty(defaultProps,propName,{enumerable:!1,set(newValue){const nameStr="".concat(this.id,": ").concat(propName);for(const newPropName of deprecatedProps[propName])create_props_hasOwnProperty(this,newPropName)||(this[newPropName]=newValue);log.Z.deprecated(nameStr,deprecatedProps[propName].join("/"))()}})}(defaultProps,deprecatedProps),defaultProps[lifecycle_constants.Wb]=propTypes,defaultProps[lifecycle_constants.E7]=deprecatedProps,0!==extensions.length||create_props_hasOwnProperty(componentClass,"_propTypes")||(componentClass._propTypes=propTypes);return defaultProps}(componentClass,extensions||[]))}function getDescriptorForAsyncProp(name){return{enumerable:!0,set(newValue){"string"==typeof newValue||newValue instanceof Promise||(0,iterable_utils.D0)(newValue)?this[lifecycle_constants.fO][name]=newValue:this[lifecycle_constants.bN][name]=newValue},get(){if(this[lifecycle_constants.bN]){if(name in this[lifecycle_constants.bN]){return this[lifecycle_constants.bN][name]||this[lifecycle_constants.lY][name]}if(name in this[lifecycle_constants.fO]){const state=this[lifecycle_constants.fm]&&this[lifecycle_constants.fm].internalState;if(state&&state.hasAsyncProp(name))return state.getAsyncProp(name)||this[lifecycle_constants.lY][name]}}return this[lifecycle_constants.lY][name]}}}function create_props_hasOwnProperty(object,prop){return Object.prototype.hasOwnProperty.call(object,prop)}function getOwnProperty(object,prop){return create_props_hasOwnProperty(object,prop)&&object[prop]}let counter=0;class Component{constructor(...propObjects){(0,defineProperty.Z)(this,"id",void 0),(0,defineProperty.Z)(this,"props",void 0),(0,defineProperty.Z)(this,"count",void 0),this.props=function createProps(component,propObjects){let extensions;for(let i=propObjects.length-1;i>=0;i--){const props=propObjects[i];"extensions"in props&&(extensions=props.extensions)}const propsPrototype=getPropsPrototype(component.constructor,extensions),propsInstance=Object.create(propsPrototype);propsInstance[lifecycle_constants.fm]=component,propsInstance[lifecycle_constants.fO]={},propsInstance[lifecycle_constants.bN]={};for(let i=0;i<propObjects.length;++i){const props=propObjects[i];for(const key in props)propsInstance[key]=props[key]}return Object.freeze(propsInstance),propsInstance}(this,propObjects),this.id=this.props.id,this.count=counter++}clone(newProps){const{props:props}=this,asyncProps={};for(const key in props[lifecycle_constants.lY])key in props[lifecycle_constants.bN]?asyncProps[key]=props[lifecycle_constants.bN][key]:key in props[lifecycle_constants.fO]&&(asyncProps[key]=props[lifecycle_constants.fO][key]);return new this.constructor({...props,...asyncProps,...newProps})}}(0,defineProperty.Z)(Component,"componentName","Component"),(0,defineProperty.Z)(Component,"defaultProps",{});const EMPTY_PROPS=Object.freeze({});class ComponentState{constructor(component){(0,defineProperty.Z)(this,"component",void 0),(0,defineProperty.Z)(this,"onAsyncPropUpdated",void 0),(0,defineProperty.Z)(this,"asyncProps",void 0),(0,defineProperty.Z)(this,"oldProps",void 0),(0,defineProperty.Z)(this,"oldAsyncProps",void 0),this.component=component,this.asyncProps={},this.onAsyncPropUpdated=()=>{},this.oldProps=null,this.oldAsyncProps=null}finalize(){for(const propName in this.asyncProps){const asyncProp=this.asyncProps[propName];asyncProp&&asyncProp.type&&asyncProp.type.release&&asyncProp.type.release(asyncProp.resolvedValue,asyncProp.type,this.component)}this.asyncProps={},this.component=null,this.resetOldProps()}getOldProps(){return this.oldAsyncProps||this.oldProps||EMPTY_PROPS}resetOldProps(){this.oldAsyncProps=null,this.oldProps=this.component?this.component.props:null}hasAsyncProp(propName){return propName in this.asyncProps}getAsyncProp(propName){const asyncProp=this.asyncProps[propName];return asyncProp&&asyncProp.resolvedValue}isAsyncPropLoading(propName){if(propName){const asyncProp=this.asyncProps[propName];return Boolean(asyncProp&&asyncProp.pendingLoadCount>0&&asyncProp.pendingLoadCount!==asyncProp.resolvedLoadCount)}for(const key in this.asyncProps)if(this.isAsyncPropLoading(key))return!0;return!1}reloadAsyncProp(propName,value){this._watchPromise(propName,Promise.resolve(value))}setAsyncProps(props){this.component=props[lifecycle_constants.fm]||this.component;const resolvedValues=props[lifecycle_constants.bN]||{},originalValues=props[lifecycle_constants.fO]||props,defaultValues=props[lifecycle_constants.lY]||{};for(const propName in resolvedValues){const value=resolvedValues[propName];this._createAsyncPropData(propName,defaultValues[propName]),this._updateAsyncProp(propName,value),resolvedValues[propName]=this.getAsyncProp(propName)}for(const propName in originalValues){const value=originalValues[propName];this._createAsyncPropData(propName,defaultValues[propName]),this._updateAsyncProp(propName,value)}}_fetch(propName,url){return null}_onResolve(propName,value){}_onError(propName,error){}_updateAsyncProp(propName,value){this._didAsyncInputValueChange(propName,value)&&("string"==typeof value&&(value=this._fetch(propName,value)),value instanceof Promise?this._watchPromise(propName,value):(0,iterable_utils.D0)(value)?this._resolveAsyncIterable(propName,value):this._setPropValue(propName,value))}_freezeAsyncOldProps(){if(!this.oldAsyncProps&&this.oldProps){this.oldAsyncProps=Object.create(this.oldProps);for(const propName in this.asyncProps)Object.defineProperty(this.oldAsyncProps,propName,{enumerable:!0,value:this.oldProps[propName]})}}_didAsyncInputValueChange(propName,value){const asyncProp=this.asyncProps[propName];return value!==asyncProp.resolvedValue&&value!==asyncProp.lastValue&&(asyncProp.lastValue=value,!0)}_setPropValue(propName,value){this._freezeAsyncOldProps();const asyncProp=this.asyncProps[propName];asyncProp&&(value=this._postProcessValue(asyncProp,value),asyncProp.resolvedValue=value,asyncProp.pendingLoadCount++,asyncProp.resolvedLoadCount=asyncProp.pendingLoadCount)}_setAsyncPropValue(propName,value,loadCount){const asyncProp=this.asyncProps[propName];asyncProp&&loadCount>=asyncProp.resolvedLoadCount&&void 0!==value&&(this._freezeAsyncOldProps(),asyncProp.resolvedValue=value,asyncProp.resolvedLoadCount=loadCount,this.onAsyncPropUpdated(propName,value))}_watchPromise(propName,promise){const asyncProp=this.asyncProps[propName];if(asyncProp){asyncProp.pendingLoadCount++;const loadCount=asyncProp.pendingLoadCount;promise.then((data=>{this.component&&(data=this._postProcessValue(asyncProp,data),this._setAsyncPropValue(propName,data,loadCount),this._onResolve(propName,data))})).catch((error=>{this._onError(propName,error)}))}}async _resolveAsyncIterable(propName,iterable){if("data"!==propName)return void this._setPropValue(propName,iterable);const asyncProp=this.asyncProps[propName];if(!asyncProp)return;asyncProp.pendingLoadCount++;const loadCount=asyncProp.pendingLoadCount;let data=[],count=0;for await(const chunk of iterable){if(!this.component)return;const{dataTransform:dataTransform}=this.component.props;data=dataTransform?dataTransform(chunk,data):data.concat(chunk),Object.defineProperty(data,"__diff",{enumerable:!1,value:[{startRow:count,endRow:data.length}]}),count=data.length,this._setAsyncPropValue(propName,data,loadCount)}this._onResolve(propName,data)}_postProcessValue(asyncProp,value){const propType=asyncProp.type;return propType&&this.component&&(propType.release&&propType.release(asyncProp.resolvedValue,propType,this.component),propType.transform)?propType.transform(value,propType,this.component):value}_createAsyncPropData(propName,defaultValue){if(!this.asyncProps[propName]){const propTypes=this.component&&this.component.props[lifecycle_constants.Wb];this.asyncProps[propName]={type:propTypes&&propTypes[propName],lastValue:null,resolvedValue:defaultValue,pendingLoadCount:0,resolvedLoadCount:0}}}}class LayerState extends ComponentState{constructor({attributeManager:attributeManager,layer:layer}){super(layer),(0,defineProperty.Z)(this,"attributeManager",void 0),(0,defineProperty.Z)(this,"needsRedraw",void 0),(0,defineProperty.Z)(this,"needsUpdate",void 0),(0,defineProperty.Z)(this,"subLayers",void 0),(0,defineProperty.Z)(this,"usesPickingColorCache",void 0),(0,defineProperty.Z)(this,"hasPickingBuffer",void 0),(0,defineProperty.Z)(this,"changeFlags",void 0),(0,defineProperty.Z)(this,"viewport",void 0),(0,defineProperty.Z)(this,"uniformTransitions",void 0),(0,defineProperty.Z)(this,"propsInTransition",void 0),this.attributeManager=attributeManager,this.needsRedraw=!0,this.needsUpdate=!0,this.subLayers=null,this.usesPickingColorCache=!1}get layer(){return this.component}_fetch(propName,url){const layer=this.layer,fetch=null==layer?void 0:layer.props.fetch;return fetch?fetch(url,{propName:propName,layer:layer}):super._fetch(propName,url)}_onResolve(propName,value){const layer=this.layer;if(layer){const onDataLoad=layer.props.onDataLoad;"data"===propName&&onDataLoad&&onDataLoad(value,{propName:propName,layer:layer})}}_onError(propName,error){const layer=this.layer;layer&&layer.raiseError(error,"loading ".concat(propName," of ").concat(this.layer))}}var dist_esm=__webpack_require__("./node_modules/@math.gl/web-mercator/dist/esm/index.js"),load=__webpack_require__("./node_modules/@loaders.gl/core/dist/esm/lib/api/load.js");const EMPTY_ARRAY=Object.freeze([]),areViewportsEqual=(0,memoize.Z)((({oldViewport:oldViewport,viewport:viewport})=>oldViewport.equals(viewport)));let pickingColorCache=new Uint8ClampedArray(0);const defaultProps={data:{type:"data",value:EMPTY_ARRAY,async:!0},dataComparator:{type:"function",value:null,optional:!0},_dataDiff:{type:"function",value:data=>data&&data.__diff,optional:!0},dataTransform:{type:"function",value:null,optional:!0},onDataLoad:{type:"function",value:null,optional:!0},onError:{type:"function",value:null,optional:!0},fetch:{type:"function",value:(url,{propName:propName,layer:layer,loaders:loaders,loadOptions:loadOptions,signal:signal})=>{const{resourceManager:resourceManager}=layer.context;var _loadOptions;(loadOptions=loadOptions||layer.getLoadOptions(),loaders=loaders||layer.props.loaders,signal)&&(loadOptions={...loadOptions,fetch:{...null===(_loadOptions=loadOptions)||void 0===_loadOptions?void 0:_loadOptions.fetch,signal:signal}});let inResourceManager=resourceManager.contains(url);return inResourceManager||loadOptions||(resourceManager.add({resourceId:url,data:(0,load.z)(url,loaders),persistent:!1}),inResourceManager=!0),inResourceManager?resourceManager.subscribe({resourceId:url,onChange:data=>{var _layer$internalState;return null===(_layer$internalState=layer.internalState)||void 0===_layer$internalState?void 0:_layer$internalState.reloadAsyncProp(propName,data)},consumerId:layer.id,requestId:propName}):(0,load.z)(url,loaders,loadOptions)}},updateTriggers:{},visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:1},operation:"draw",onHover:{type:"function",value:null,optional:!0},onClick:{type:"function",value:null,optional:!0},onDragStart:{type:"function",value:null,optional:!0},onDrag:{type:"function",value:null,optional:!0},onDragEnd:{type:"function",value:null,optional:!0},coordinateSystem:constants.COORDINATE_SYSTEM.DEFAULT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:"XYZ",colorFormat:"RGBA",parameters:{type:"object",value:{},optional:!0,compare:2},loadOptions:{type:"object",value:null,optional:!0,ignore:!0},transitions:null,extensions:[],loaders:{type:"array",value:[],optional:!0,ignore:!0},getPolygonOffset:{type:"function",value:({layerIndex:layerIndex})=>[0,100*-layerIndex]},highlightedObjectIndex:null,autoHighlight:!1,highlightColor:{type:"accessor",value:[0,0,128,128]}};class Layer extends Component{constructor(...args){super(...args),(0,defineProperty.Z)(this,"internalState",null),(0,defineProperty.Z)(this,"lifecycle",lifecycle_constants.dt.NO_STATE),(0,defineProperty.Z)(this,"context",void 0),(0,defineProperty.Z)(this,"state",void 0),(0,defineProperty.Z)(this,"parent",null)}static get componentName(){return Object.prototype.hasOwnProperty.call(this,"layerName")?this.layerName:""}get root(){let layer=this;for(;layer.parent;)layer=layer.parent;return layer}toString(){const className=this.constructor.layerName||this.constructor.name;return"".concat(className,"({id: '").concat(this.props.id,"'})")}project(xyz){(0,assert.Z)(this.internalState);const viewport=this.internalState.viewport||this.context.viewport,worldPosition=(0,project_functions.T)(xyz,{viewport:viewport,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),[x,y,z]=(0,dist_esm.aW)(worldPosition,viewport.pixelProjectionMatrix);return 2===xyz.length?[x,y]:[x,y,z]}unproject(xy){(0,assert.Z)(this.internalState);return(this.internalState.viewport||this.context.viewport).unproject(xy)}projectPosition(xyz,params){(0,assert.Z)(this.internalState);const viewport=this.internalState.viewport||this.context.viewport;return(0,project_functions.D)(xyz,{viewport:viewport,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem,...params})}get isComposite(){return!1}setState(partialState){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,partialState),this.setNeedsRedraw()}setNeedsRedraw(){this.internalState&&(this.internalState.needsRedraw=!0)}setNeedsUpdate(){this.internalState&&(this.context.layerManager.setNeedsUpdate(String(this)),this.internalState.needsUpdate=!0)}get isLoaded(){return!!this.internalState&&!this.internalState.isAsyncPropLoading()}get wrapLongitude(){return this.props.wrapLongitude}isPickable(){return this.props.pickable&&this.props.visible}getModels(){return this.state&&(this.state.models||this.state.model&&[this.state.model])||[]}setModuleParameters(moduleParameters){for(const model of this.getModels())model.updateModuleSettings(moduleParameters)}getAttributeManager(){return this.internalState&&this.internalState.attributeManager}getCurrentLayer(){return this.internalState&&this.internalState.layer}getLoadOptions(){return this.props.loadOptions}use64bitPositions(){const{coordinateSystem:coordinateSystem}=this.props;return coordinateSystem===constants.COORDINATE_SYSTEM.DEFAULT||coordinateSystem===constants.COORDINATE_SYSTEM.LNGLAT||coordinateSystem===constants.COORDINATE_SYSTEM.CARTESIAN}onHover(info,pickingEvent){return this.props.onHover&&this.props.onHover(info,pickingEvent)||!1}onClick(info,pickingEvent){return this.props.onClick&&this.props.onClick(info,pickingEvent)||!1}nullPickingColor(){return[0,0,0]}encodePickingColor(i,target=[]){return target[0]=i+1&255,target[1]=i+1>>8&255,target[2]=i+1>>8>>8&255,target}decodePickingColor(color){(0,assert.Z)(color instanceof Uint8Array);const[i1,i2,i3]=color;return i1+256*i2+65536*i3-1}getNumInstances(){return Number.isFinite(this.props.numInstances)?this.props.numInstances:this.state&&void 0!==this.state.numInstances?this.state.numInstances:(0,count.Q)(this.props.data)}getStartIndices(){return this.props.startIndices?this.props.startIndices:this.state&&this.state.startIndices?this.state.startIndices:null}getBounds(){var _this$getAttributeMan;return null===(_this$getAttributeMan=this.getAttributeManager())||void 0===_this$getAttributeMan?void 0:_this$getAttributeMan.getBounds(["positions","instancePositions"])}getShaders(shaders){for(const extension of this.props.extensions)shaders=(0,shader.l)(shaders,extension.getShaders.call(this,extension));return shaders}shouldUpdateState(params){return params.changeFlags.propsOrDataChanged}updateState(params){const attributeManager=this.getAttributeManager(),{dataChanged:dataChanged}=params.changeFlags;if(dataChanged&&attributeManager)if(Array.isArray(dataChanged))for(const dataRange of dataChanged)attributeManager.invalidateAll(dataRange);else attributeManager.invalidateAll();if(attributeManager){const{props:props}=params,hasPickingBuffer=this.internalState.hasPickingBuffer,needsPickingBuffer=Number.isInteger(props.highlightedObjectIndex)||props.pickable||props.extensions.some((extension=>extension.getNeedsPickingBuffer.call(this,extension)));if(hasPickingBuffer!==needsPickingBuffer){this.internalState.hasPickingBuffer=needsPickingBuffer;const{pickingColors:pickingColors,instancePickingColors:instancePickingColors}=attributeManager.attributes,pickingColorsAttribute=pickingColors||instancePickingColors;pickingColorsAttribute&&(needsPickingBuffer&&pickingColorsAttribute.constant&&(pickingColorsAttribute.constant=!1,attributeManager.invalidate(pickingColorsAttribute.id)),pickingColorsAttribute.value||needsPickingBuffer||(pickingColorsAttribute.constant=!0,pickingColorsAttribute.value=[0,0,0]))}}}finalizeState(context){for(const model of this.getModels())model.delete();const attributeManager=this.getAttributeManager();attributeManager&&attributeManager.finalize(),this.context&&this.context.resourceManager.unsubscribe({consumerId:this.id}),this.internalState&&(this.internalState.uniformTransitions.clear(),this.internalState.finalize())}draw(opts){for(const model of this.getModels())model.draw(opts)}getPickingInfo({info:info,mode:mode,sourceLayer:sourceLayer}){const{index:index}=info;return index>=0&&Array.isArray(this.props.data)&&(info.object=this.props.data[index]),info}raiseError(error,message){var _this$props$onError,_this$props,_this$context,_this$context$onError;(message&&(error=new Error("".concat(message,": ").concat(error.message),{cause:error})),null!==(_this$props$onError=(_this$props=this.props).onError)&&void 0!==_this$props$onError&&_this$props$onError.call(_this$props,error))||(null===(_this$context=this.context)||void 0===_this$context||null===(_this$context$onError=_this$context.onError)||void 0===_this$context$onError||_this$context$onError.call(_this$context,error,this))}getNeedsRedraw(opts={clearRedrawFlags:!1}){return this._getNeedsRedraw(opts)}needsUpdate(){return!!this.internalState&&(this.internalState.needsUpdate||this.hasUniformTransition()||this.shouldUpdateState(this._getUpdateParams()))}hasUniformTransition(){var _this$internalState;return(null===(_this$internalState=this.internalState)||void 0===_this$internalState?void 0:_this$internalState.uniformTransitions.active)||!1}activateViewport(viewport){if(!this.internalState)return;const oldViewport=this.internalState.viewport;this.internalState.viewport=viewport,oldViewport&&areViewportsEqual({oldViewport:oldViewport,viewport:viewport})||(this.setChangeFlags({viewportChanged:!0}),this.isComposite?this.needsUpdate()&&this.setNeedsUpdate():this._update())}invalidateAttribute(name="all"){const attributeManager=this.getAttributeManager();attributeManager&&("all"===name?attributeManager.invalidateAll():attributeManager.invalidate(name))}updateAttributes(changedAttributes){for(const model of this.getModels())this._setModelAttributes(model,changedAttributes)}_updateAttributes(){const attributeManager=this.getAttributeManager();if(!attributeManager)return;const props=this.props,numInstances=this.getNumInstances(),startIndices=this.getStartIndices();attributeManager.update({data:props.data,numInstances:numInstances,startIndices:startIndices,props:props,transitions:props.transitions,buffers:props.data.attributes,context:this});const changedAttributes=attributeManager.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(changedAttributes)}_updateAttributeTransition(){const attributeManager=this.getAttributeManager();attributeManager&&attributeManager.updateTransition()}_updateUniformTransition(){const{uniformTransitions:uniformTransitions}=this.internalState;if(uniformTransitions.active){const propsInTransition=uniformTransitions.update(),props=Object.create(this.props);for(const key in propsInTransition)Object.defineProperty(props,key,{value:propsInTransition[key]});return props}return this.props}calculateInstancePickingColors(attribute,{numInstances:numInstances}){if(attribute.constant)return;const cacheSize=Math.floor(pickingColorCache.length/3);if(this.internalState.usesPickingColorCache=!0,cacheSize<numInstances){numInstances>16777215&&log.Z.warn("Layer has too many data objects. Picking might not be able to distinguish all objects.")(),pickingColorCache=typed_array_manager.Z.allocate(pickingColorCache,numInstances,{size:3,copy:!0,maxCount:Math.max(numInstances,16777215)});const newCacheSize=Math.floor(pickingColorCache.length/3),pickingColor=[];for(let i=cacheSize;i<newCacheSize;i++)this.encodePickingColor(i,pickingColor),pickingColorCache[3*i+0]=pickingColor[0],pickingColorCache[3*i+1]=pickingColor[1],pickingColorCache[3*i+2]=pickingColor[2]}attribute.value=pickingColorCache.subarray(0,3*numInstances)}_setModelAttributes(model,changedAttributes){const attributeManager=this.getAttributeManager(),excludeAttributes=model.userData.excludeAttributes||{},shaderAttributes=attributeManager.getShaderAttributes(changedAttributes,excludeAttributes);model.setAttributes(shaderAttributes)}disablePickingIndex(objectIndex){const data=this.props.data;if(!("attributes"in data))return void this._disablePickingIndex(objectIndex);const{pickingColors:pickingColors,instancePickingColors:instancePickingColors}=this.getAttributeManager().attributes,colors=pickingColors||instancePickingColors,externalColorAttribute=colors&&data.attributes&&data.attributes[colors.id];if(externalColorAttribute&&externalColorAttribute.value){const values=externalColorAttribute.value,objectColor=this.encodePickingColor(objectIndex);for(let index=0;index<data.length;index++){const i=colors.getVertexOffset(index);values[i]===objectColor[0]&&values[i+1]===objectColor[1]&&values[i+2]===objectColor[2]&&this._disablePickingIndex(index)}}else this._disablePickingIndex(objectIndex)}_disablePickingIndex(objectIndex){const{pickingColors:pickingColors,instancePickingColors:instancePickingColors}=this.getAttributeManager().attributes,colors=pickingColors||instancePickingColors;if(!colors)return;const start=colors.getVertexOffset(objectIndex),end=colors.getVertexOffset(objectIndex+1);colors.buffer.subData({data:new Uint8Array(end-start),offset:start})}restorePickingColors(){const{pickingColors:pickingColors,instancePickingColors:instancePickingColors}=this.getAttributeManager().attributes,colors=pickingColors||instancePickingColors;colors&&(this.internalState.usesPickingColorCache&&colors.value.buffer!==pickingColorCache.buffer&&(colors.value=pickingColorCache.subarray(0,colors.value.length)),colors.updateSubBuffer({startOffset:0}))}_initialize(){(0,assert.Z)(!this.internalState),(0,assert.Z)(Number.isFinite(this.props.coordinateSystem)),(0,debug.Z)("layer.initialize",this);const attributeManager=this._getAttributeManager();attributeManager&&attributeManager.addInstanced({instancePickingColors:{type:5121,size:3,noAlloc:!0,update:this.calculateInstancePickingColors}}),this.internalState=new LayerState({attributeManager:attributeManager,layer:this}),this._clearChangeFlags(),this.state={},Object.defineProperty(this.state,"attributeManager",{get:()=>(log.Z.deprecated("layer.state.attributeManager","layer.getAttributeManager()")(),attributeManager)}),this.internalState.uniformTransitions=new UniformTransitionManager(this.context.timeline),this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props),this.initializeState(this.context);for(const extension of this.props.extensions)extension.initializeState.call(this,this.context,extension);this.setChangeFlags({dataChanged:"init",propsChanged:"init",viewportChanged:!0,extensionsChanged:!0}),this._update()}_transferState(oldLayer){(0,debug.Z)("layer.matched",this,this===oldLayer);const{state:state,internalState:internalState}=oldLayer;this!==oldLayer&&(this.internalState=internalState,this.state=state,this.internalState.setAsyncProps(this.props),this._diffProps(this.props,this.internalState.getOldProps()))}_update(){const stateNeedsUpdate=this.needsUpdate();if((0,debug.Z)("layer.update",this,stateNeedsUpdate),!stateNeedsUpdate)return;const currentProps=this.props,context=this.context,internalState=this.internalState,currentViewport=context.viewport,propsInTransition=this._updateUniformTransition();internalState.propsInTransition=propsInTransition,context.viewport=internalState.viewport||currentViewport,this.props=propsInTransition;try{const updateParams=this._getUpdateParams(),oldModels=this.getModels();if(context.gl)this.updateState(updateParams);else try{this.updateState(updateParams)}catch(error){}for(const extension of this.props.extensions)extension.updateState.call(this,updateParams,extension);const modelChanged=this.getModels()[0]!==oldModels[0];this._postUpdate(updateParams,modelChanged)}finally{context.viewport=currentViewport,this.props=currentProps,this._clearChangeFlags(),internalState.needsUpdate=!1,internalState.resetOldProps()}}_finalize(){(0,debug.Z)("layer.finalize",this),this.finalizeState(this.context);for(const extension of this.props.extensions)extension.finalizeState.call(this,this.context,extension)}_drawLayer({moduleParameters:moduleParameters=null,uniforms:uniforms={},parameters:parameters={}}){this._updateAttributeTransition();const currentProps=this.props,context=this.context;this.props=this.internalState.propsInTransition||currentProps;const opacity=this.props.opacity;uniforms.opacity=Math.pow(opacity,1/2.2);try{moduleParameters&&this.setModuleParameters(moduleParameters);const{getPolygonOffset:getPolygonOffset}=this.props,offsets=getPolygonOffset&&getPolygonOffset(uniforms)||[0,0];(0,esm.dR)(context.gl,{polygonOffset:offsets}),(0,esm.s8)(context.gl,parameters,(()=>{const opts={moduleParameters:moduleParameters,uniforms:uniforms,parameters:parameters,context:context};for(const extension of this.props.extensions)extension.draw.call(this,opts,extension);this.draw(opts)}))}finally{this.props=currentProps}}getChangeFlags(){var _this$internalState2;return null===(_this$internalState2=this.internalState)||void 0===_this$internalState2?void 0:_this$internalState2.changeFlags}setChangeFlags(flags){if(!this.internalState)return;const{changeFlags:changeFlags}=this.internalState;for(const key in flags)if(flags[key]){let flagChanged=!1;if("dataChanged"===key){const dataChangedReason=flags[key],prevDataChangedReason=changeFlags[key];dataChangedReason&&Array.isArray(prevDataChangedReason)&&(changeFlags.dataChanged=Array.isArray(dataChangedReason)?prevDataChangedReason.concat(dataChangedReason):dataChangedReason,flagChanged=!0)}changeFlags[key]||(changeFlags[key]=flags[key],flagChanged=!0),flagChanged&&(0,debug.Z)("layer.changeFlag",this,key,flags)}const propsOrDataChanged=Boolean(changeFlags.dataChanged||changeFlags.updateTriggersChanged||changeFlags.propsChanged||changeFlags.extensionsChanged);changeFlags.propsOrDataChanged=propsOrDataChanged,changeFlags.somethingChanged=propsOrDataChanged||changeFlags.viewportChanged||changeFlags.stateChanged}_clearChangeFlags(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}_diffProps(newProps,oldProps){const changeFlags=(0,props.Yt)(newProps,oldProps);if(changeFlags.updateTriggersChanged)for(const key in changeFlags.updateTriggersChanged)changeFlags.updateTriggersChanged[key]&&this.invalidateAttribute(key);if(changeFlags.transitionsChanged)for(const key in changeFlags.transitionsChanged){var _newProps$transitions;this.internalState.uniformTransitions.add(key,oldProps[key],newProps[key],null===(_newProps$transitions=newProps.transitions)||void 0===_newProps$transitions?void 0:_newProps$transitions[key])}return this.setChangeFlags(changeFlags)}validateProps(){(0,props.eQ)(this.props)}updateAutoHighlight(info){this.props.autoHighlight&&!Number.isInteger(this.props.highlightedObjectIndex)&&this._updateAutoHighlight(info)}_updateAutoHighlight(info){const pickingModuleParameters={pickingSelectedColor:info.picked?info.color:null},{highlightColor:highlightColor}=this.props;info.picked&&"function"==typeof highlightColor&&(pickingModuleParameters.pickingHighlightColor=highlightColor(info)),this.setModuleParameters(pickingModuleParameters),this.setNeedsRedraw()}_getAttributeManager(){const context=this.context;return new attribute_manager.Z(context.gl,{id:this.props.id,stats:context.stats,timeline:context.timeline})}_postUpdate(updateParams,forceUpdate){const{props:props,oldProps:oldProps}=updateParams;this.setNeedsRedraw(),this._updateAttributes();const{model:model}=this.state;null==model||model.setInstanceCount(this.getNumInstances());const{autoHighlight:autoHighlight,highlightedObjectIndex:highlightedObjectIndex,highlightColor:highlightColor}=props;if(forceUpdate||oldProps.autoHighlight!==autoHighlight||oldProps.highlightedObjectIndex!==highlightedObjectIndex||oldProps.highlightColor!==highlightColor){const parameters={};autoHighlight||(parameters.pickingSelectedColor=null),Array.isArray(highlightColor)&&(parameters.pickingHighlightColor=highlightColor),(forceUpdate||highlightedObjectIndex!==oldProps.highlightedObjectIndex)&&(parameters.pickingSelectedColor=Number.isFinite(highlightedObjectIndex)&&highlightedObjectIndex>=0?this.encodePickingColor(highlightedObjectIndex):null),this.setModuleParameters(parameters)}}_getUpdateParams(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}_getNeedsRedraw(opts){if(!this.internalState)return!1;let redraw=!1;redraw=redraw||this.internalState.needsRedraw&&this.id;const attributeManager=this.getAttributeManager(),attributeManagerNeedsRedraw=!!attributeManager&&attributeManager.getNeedsRedraw(opts);if(redraw=redraw||attributeManagerNeedsRedraw,redraw)for(const extension of this.props.extensions)extension.onNeedsRedraw.call(this,extension);return this.internalState.needsRedraw=this.internalState.needsRedraw&&!opts.clearRedrawFlags,redraw}_onAsyncPropUpdated(){this._diffProps(this.props,this.internalState.getOldProps()),this.setNeedsUpdate()}}(0,defineProperty.Z)(Layer,"defaultProps",defaultProps),(0,defineProperty.Z)(Layer,"layerName","Layer")},"./node_modules/@deck.gl/core/dist/esm/lifecycle/constants.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{E7:function(){return DEPRECATED_PROPS_SYMBOL},Wb:function(){return PROP_TYPES_SYMBOL},bN:function(){return ASYNC_RESOLVED_SYMBOL},dt:function(){return LIFECYCLE},fO:function(){return ASYNC_ORIGINAL_SYMBOL},fm:function(){return COMPONENT_SYMBOL},lY:function(){return ASYNC_DEFAULTS_SYMBOL}});const LIFECYCLE={NO_STATE:"Awaiting state",MATCHED:"Matched. State transferred from previous layer",INITIALIZED:"Initialized",AWAITING_GC:"Discarded. Awaiting garbage collection",AWAITING_FINALIZATION:"No longer matched. Awaiting garbage collection",FINALIZED:"Finalized! Awaiting garbage collection"},COMPONENT_SYMBOL=Symbol.for("component"),PROP_TYPES_SYMBOL=Symbol.for("propTypes"),DEPRECATED_PROPS_SYMBOL=Symbol.for("deprecatedProps"),ASYNC_DEFAULTS_SYMBOL=Symbol.for("asyncPropDefaults"),ASYNC_ORIGINAL_SYMBOL=Symbol.for("asyncPropOriginal"),ASYNC_RESOLVED_SYMBOL=Symbol.for("asyncPropResolved")},"./node_modules/@deck.gl/core/dist/esm/lifecycle/props.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Yt:function(){return diffProps},eQ:function(){return validateProps},tg:function(){return compareProps}});var _constants__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/lifecycle/constants.js");function validateProps(props){const propTypes=props[_constants__WEBPACK_IMPORTED_MODULE_0__.Wb];for(const propName in propTypes){const propType=propTypes[propName],{validate:validate}=propType;if(validate&&!validate(props[propName],propType))throw new Error("Invalid prop ".concat(propName,": ").concat(props[propName]))}}function diffProps(props,oldProps){const propsChangedReason=compareProps({newProps:props,oldProps:oldProps,propTypes:props[_constants__WEBPACK_IMPORTED_MODULE_0__.Wb],ignoreProps:{data:null,updateTriggers:null,extensions:null,transitions:null}}),dataChangedReason=function diffDataProps(props,oldProps){if(null===oldProps)return"oldProps is null, initial diff";let dataChanged=!1;const{dataComparator:dataComparator,_dataDiff:_dataDiff}=props;dataComparator?dataComparator(props.data,oldProps.data)||(dataChanged="Data comparator detected a change"):props.data!==oldProps.data&&(dataChanged="A new data container was supplied");dataChanged&&_dataDiff&&(dataChanged=_dataDiff(props.data,oldProps.data)||dataChanged);return dataChanged}(props,oldProps);let updateTriggersChangedReason=!1;return dataChangedReason||(updateTriggersChangedReason=function diffUpdateTriggers(props,oldProps){if(null===oldProps)return{all:!0};if("all"in props.updateTriggers){if(diffUpdateTrigger(props,oldProps,"all"))return{all:!0}}const reason={};let changed=!1;for(const triggerName in props.updateTriggers)if("all"!==triggerName){diffUpdateTrigger(props,oldProps,triggerName)&&(reason[triggerName]=!0,changed=!0)}return!!changed&&reason}(props,oldProps)),{dataChanged:dataChangedReason,propsChanged:propsChangedReason,updateTriggersChanged:updateTriggersChangedReason,extensionsChanged:diffExtensions(props,oldProps),transitionsChanged:diffTransitions(props,oldProps)}}function diffTransitions(props,oldProps){if(!props.transitions)return!1;const result={},propTypes=props[_constants__WEBPACK_IMPORTED_MODULE_0__.Wb];let changed=!1;for(const key in props.transitions){const propType=propTypes[key],type=propType&&propType.type;("number"===type||"color"===type||"array"===type)&&comparePropValues(props[key],oldProps[key],propType)&&(result[key]=!0,changed=!0)}return!!changed&&result}function compareProps({newProps:newProps,oldProps:oldProps,ignoreProps:ignoreProps={},propTypes:propTypes={},triggerName:triggerName="props"}){if(oldProps===newProps)return!1;if("object"!=typeof newProps||null===newProps)return"".concat(triggerName," changed shallowly");if("object"!=typeof oldProps||null===oldProps)return"".concat(triggerName," changed shallowly");for(const key of Object.keys(newProps))if(!(key in ignoreProps)){if(!(key in oldProps))return"".concat(triggerName,".").concat(key," added");const changed=comparePropValues(newProps[key],oldProps[key],propTypes[key]);if(changed)return"".concat(triggerName,".").concat(key," ").concat(changed)}for(const key of Object.keys(oldProps))if(!(key in ignoreProps)){if(!(key in newProps))return"".concat(triggerName,".").concat(key," dropped");if(!Object.hasOwnProperty.call(newProps,key)){const changed=comparePropValues(newProps[key],oldProps[key],propTypes[key]);if(changed)return"".concat(triggerName,".").concat(key," ").concat(changed)}}return!1}function comparePropValues(newProp,oldProp,propType){let equal=propType&&propType.equal;return equal&&!equal(newProp,oldProp,propType)?"changed deeply":equal||(equal=newProp&&oldProp&&newProp.equals,!equal||equal.call(newProp,oldProp))?equal||oldProp===newProp?null:"changed shallowly":"changed deeply"}function diffExtensions(props,oldProps){if(null===oldProps)return!0;const oldExtensions=oldProps.extensions,{extensions:extensions}=props;if(extensions===oldExtensions)return!1;if(!oldExtensions||!extensions)return!0;if(extensions.length!==oldExtensions.length)return!0;for(let i=0;i<extensions.length;i++)if(!extensions[i].equals(oldExtensions[i]))return!0;return!1}function diffUpdateTrigger(props,oldProps,triggerName){let newTriggers=props.updateTriggers[triggerName];newTriggers=null==newTriggers?{}:newTriggers;let oldTriggers=oldProps.updateTriggers[triggerName];oldTriggers=null==oldTriggers?{}:oldTriggers;return compareProps({oldProps:oldTriggers,newProps:newTriggers,triggerName:triggerName})}},"./node_modules/@deck.gl/core/dist/esm/passes/layers-pass.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return LayersPass}});var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),_pass__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/passes/pass.js"),_luma_gl_core__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@luma.gl/gltools/dist/esm/index.js"),_luma_gl_core__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/classes/clear.js");class LayersPass extends _pass__WEBPACK_IMPORTED_MODULE_0__.Z{constructor(...args){super(...args),(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.Z)(this,"_lastRenderIndex",-1)}render(options){const gl=this.gl;return(0,_luma_gl_core__WEBPACK_IMPORTED_MODULE_2__.dR)(gl,{framebuffer:options.target}),this._drawLayers(options)}_drawLayers(options){const{target:target,moduleParameters:moduleParameters,viewports:viewports,views:views,onViewportActive:onViewportActive,clearStack:clearStack=!0,clearCanvas:clearCanvas=!0}=options;options.pass=options.pass||"unknown";const gl=this.gl;clearCanvas&&function clearGLCanvas(gl,targetFramebuffer){const width=targetFramebuffer?targetFramebuffer.width:gl.drawingBufferWidth,height=targetFramebuffer?targetFramebuffer.height:gl.drawingBufferHeight;(0,_luma_gl_core__WEBPACK_IMPORTED_MODULE_2__.dR)(gl,{viewport:[0,0,width,height]}),gl.clear(16640)}(gl,target),clearStack&&(this._lastRenderIndex=-1);const renderStats=[];for(const viewport of viewports){const view=views&&views[viewport.id];null==onViewportActive||onViewportActive(viewport);const drawLayerParams=this._getDrawLayerParams(viewport,options),subViewports=viewport.subViewports||[viewport];for(const subViewport of subViewports){const stats=this._drawLayersInViewport(gl,{target:target,moduleParameters:moduleParameters,viewport:subViewport,view:view,pass:options.pass,layers:options.layers},drawLayerParams);renderStats.push(stats)}}return renderStats}_getDrawLayerParams(viewport,{layers:layers,pass:pass,isPicking:isPicking=!1,layerFilter:layerFilter,cullRect:cullRect,effects:effects,moduleParameters:moduleParameters},evaluateShouldDrawOnly=!1){const drawLayerParams=[],indexResolver=layerIndexResolver(this._lastRenderIndex+1),drawContext={layer:layers[0],viewport:viewport,isPicking:isPicking,renderPass:pass,cullRect:cullRect},layerFilterCache={};for(let layerIndex=0;layerIndex<layers.length;layerIndex++){const layer=layers[layerIndex],shouldDrawLayer=this._shouldDrawLayer(layer,drawContext,layerFilter,layerFilterCache),layerParam={shouldDrawLayer:shouldDrawLayer};shouldDrawLayer&&!evaluateShouldDrawOnly&&(layerParam.layerRenderIndex=indexResolver(layer,shouldDrawLayer),layerParam.moduleParameters=this._getModuleParameters(layer,effects,pass,moduleParameters),layerParam.layerParameters=this.getLayerParameters(layer,layerIndex,viewport)),drawLayerParams[layerIndex]=layerParam}return drawLayerParams}_drawLayersInViewport(gl,{layers:layers,moduleParameters:globalModuleParameters,pass:pass,target:target,viewport:viewport,view:view},drawLayerParams){const glViewport=function getGLViewport(gl,{moduleParameters:moduleParameters,target:target,viewport:viewport}){const useTarget=target&&"default-framebuffer"!==target.id,pixelRatio=moduleParameters&&moduleParameters.devicePixelRatio||(0,_luma_gl_core__WEBPACK_IMPORTED_MODULE_2__.w)(gl),height=useTarget?target.height:gl.drawingBufferHeight,dimensions=viewport;return[dimensions.x*pixelRatio,height-(dimensions.y+dimensions.height)*pixelRatio,dimensions.width*pixelRatio,dimensions.height*pixelRatio]}(gl,{moduleParameters:globalModuleParameters,target:target,viewport:viewport});if(view&&view.props.clear){const clearOpts=!0===view.props.clear?{color:!0,depth:!0}:view.props.clear;(0,_luma_gl_core__WEBPACK_IMPORTED_MODULE_2__.s8)(gl,{scissorTest:!0,scissor:glViewport},(()=>(0,_luma_gl_core__WEBPACK_IMPORTED_MODULE_3__.Z)(gl,clearOpts)))}const renderStatus={totalCount:layers.length,visibleCount:0,compositeCount:0,pickableCount:0};(0,_luma_gl_core__WEBPACK_IMPORTED_MODULE_2__.dR)(gl,{viewport:glViewport});for(let layerIndex=0;layerIndex<layers.length;layerIndex++){const layer=layers[layerIndex],{shouldDrawLayer:shouldDrawLayer,layerRenderIndex:layerRenderIndex,moduleParameters:moduleParameters,layerParameters:layerParameters}=drawLayerParams[layerIndex];if(shouldDrawLayer&&layer.props.pickable&&renderStatus.pickableCount++,layer.isComposite)renderStatus.compositeCount++;else if(shouldDrawLayer){renderStatus.visibleCount++,this._lastRenderIndex=Math.max(this._lastRenderIndex,layerRenderIndex),moduleParameters.viewport=viewport;try{layer._drawLayer({moduleParameters:moduleParameters,uniforms:{layerIndex:layerRenderIndex},parameters:layerParameters})}catch(err){layer.raiseError(err,"drawing ".concat(layer," to ").concat(pass))}}}return renderStatus}shouldDrawLayer(layer){return!0}getModuleParameters(layer,effects){return null}getLayerParameters(layer,layerIndex,viewport){return layer.props.parameters}_shouldDrawLayer(layer,drawContext,layerFilter,layerFilterCache){if(!(layer.props.visible&&this.shouldDrawLayer(layer)))return!1;drawContext.layer=layer;let parent=layer.parent;for(;parent;){if(!parent.props.visible||!parent.filterSubLayer(drawContext))return!1;drawContext.layer=parent,parent=parent.parent}if(layerFilter){const rootLayerId=drawContext.layer.id;if(rootLayerId in layerFilterCache||(layerFilterCache[rootLayerId]=layerFilter(drawContext)),!layerFilterCache[rootLayerId])return!1}return layer.activateViewport(drawContext.viewport),!0}_getModuleParameters(layer,effects,pass,overrides){var _layer$internalState;const moduleParameters=Object.assign(Object.create((null===(_layer$internalState=layer.internalState)||void 0===_layer$internalState?void 0:_layer$internalState.propsInTransition)||layer.props),{autoWrapLongitude:layer.wrapLongitude,viewport:layer.context.viewport,mousePosition:layer.context.mousePosition,pickingActive:0,devicePixelRatio:(0,_luma_gl_core__WEBPACK_IMPORTED_MODULE_2__.w)(this.gl)});if(effects)for(const effect of effects){var _effect$getModulePara;Object.assign(moduleParameters,null===(_effect$getModulePara=effect.getModuleParameters)||void 0===_effect$getModulePara?void 0:_effect$getModulePara.call(effect,layer))}return Object.assign(moduleParameters,this.getModuleParameters(layer,effects),overrides)}}function layerIndexResolver(startIndex=0,layerIndices={}){const resolvers={},resolveLayerIndex=(layer,isDrawn)=>{const indexOverride=layer.props._offset,layerId=layer.id,parentId=layer.parent&&layer.parent.id;let index;if(parentId&&!(parentId in layerIndices)&&resolveLayerIndex(layer.parent,!1),parentId in resolvers){const resolver=resolvers[parentId]=resolvers[parentId]||layerIndexResolver(layerIndices[parentId],layerIndices);index=resolver(layer,isDrawn),resolvers[layerId]=resolver}else Number.isFinite(indexOverride)?(index=indexOverride+(layerIndices[parentId]||0),resolvers[layerId]=null):index=startIndex;return isDrawn&&index>=startIndex&&(startIndex=index+1),layerIndices[layerId]=index,index};return resolveLayerIndex}},"./node_modules/@deck.gl/core/dist/esm/passes/pass.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return Pass}});var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js");class Pass{constructor(gl,props={id:"pass"}){(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.Z)(this,"id",void 0),(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.Z)(this,"gl",void 0),(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.Z)(this,"props",void 0);const{id:id}=props;this.id=id,this.gl=gl,this.props={...props}}setProps(props){Object.assign(this.props,props)}render(params){}cleanup(){}}},"./node_modules/@deck.gl/core/dist/esm/passes/pick-layers-pass.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return PickLayersPass}});var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),_layers_pass__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/passes/layers-pass.js"),_luma_gl_core__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@luma.gl/gltools/dist/esm/index.js"),_utils_log__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/utils/log.js");const PICKING_PARAMETERS={blendFunc:[1,0,32771,0],blendEquation:32774};class PickLayersPass extends _layers_pass__WEBPACK_IMPORTED_MODULE_0__.Z{constructor(...args){super(...args),(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.Z)(this,"pickZ",void 0),(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.Z)(this,"_colorEncoderState",null)}render(props){return"pickingFBO"in props?this._drawPickingBuffer(props):super.render(props)}_drawPickingBuffer({layers:layers,layerFilter:layerFilter,views:views,viewports:viewports,onViewportActive:onViewportActive,pickingFBO:pickingFBO,deviceRect:{x:x,y:y,width:width,height:height},cullRect:cullRect,effects:effects,pass:pass="picking",pickZ:pickZ,moduleParameters:moduleParameters}){const gl=this.gl;this.pickZ=pickZ;const colorEncoderState=this._resetColorEncoder(pickZ),renderStatus=(0,_luma_gl_core__WEBPACK_IMPORTED_MODULE_2__.s8)(gl,{scissorTest:!0,scissor:[x,y,width,height],clearColor:[0,0,0,0],depthMask:!0,depthTest:!0,depthRange:[0,1],colorMask:[!0,!0,!0,!0],...PICKING_PARAMETERS,blend:!pickZ},(()=>super.render({target:pickingFBO,layers:layers,layerFilter:layerFilter,views:views,viewports:viewports,onViewportActive:onViewportActive,cullRect:cullRect,effects:null==effects?void 0:effects.filter((e=>e.useInPicking)),pass:pass,isPicking:!0,moduleParameters:moduleParameters})));this._colorEncoderState=null;return{decodePickingColor:colorEncoderState&&decodeColor.bind(null,colorEncoderState),stats:renderStatus}}shouldDrawLayer(layer){const{pickable:pickable,operation:operation}=layer.props;return pickable&&operation.includes("draw")||operation.includes("terrain")||operation.includes("mask")}getModuleParameters(){return{pickingActive:1,pickingAttribute:this.pickZ,lightSources:{}}}getLayerParameters(layer,layerIndex,viewport){const pickParameters={...layer.props.parameters},{pickable:pickable,operation:operation}=layer.props;return this._colorEncoderState?pickable&&operation.includes("draw")&&(Object.assign(pickParameters,PICKING_PARAMETERS),pickParameters.blend=!0,pickParameters.blendColor=function encodeColor(encoded,layer,viewport){const{byLayer:byLayer,byAlpha:byAlpha}=encoded;let a,entry=byLayer.get(layer);entry?(entry.viewports.push(viewport),a=entry.a):(a=byLayer.size+1,a<=255?(entry={a:a,layer:layer,viewports:[viewport]},byLayer.set(layer,entry),byAlpha[a]=entry):(_utils_log__WEBPACK_IMPORTED_MODULE_3__.Z.warn("Too many pickable layers, only picking the first 255")(),a=0));return[0,0,0,a/255]}(this._colorEncoderState,layer,viewport)):pickParameters.blend=!1,operation.includes("terrain")&&(pickParameters.blend=!1),pickParameters}_resetColorEncoder(pickZ){return this._colorEncoderState=pickZ?null:{byLayer:new Map,byAlpha:[]},this._colorEncoderState}}function decodeColor(encoded,pickedColor){const entry=encoded.byAlpha[pickedColor[3]];return entry&&{pickedLayer:entry.layer,pickedViewports:entry.viewports,pickedObjectIndex:entry.layer.decodePickingColor(pickedColor)}}},"./node_modules/@deck.gl/core/dist/esm/shaderlib/picking/picking.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";var _luma_gl_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@luma.gl/shadertools/dist/esm/modules/picking/picking.js");__webpack_exports__.Z={inject:{"vs:DECKGL_FILTER_GL_POSITION":"\n    // for picking depth values\n    picking_setPickingAttribute(position.z / position.w);\n  ","vs:DECKGL_FILTER_COLOR":"\n  picking_setPickingColor(geometry.pickingColor);\n  ","fs:#decl":"\nuniform bool picking_uAttribute;\n  ","fs:DECKGL_FILTER_COLOR":{order:99,injection:"\n  // use highlight color if this fragment belongs to the selected object.\n  color = picking_filterHighlightColor(color);\n\n  // use picking color if rendering to picking FBO.\n  color = picking_filterPickingColor(color);\n    "}},..._luma_gl_core__WEBPACK_IMPORTED_MODULE_0__.q}},"./node_modules/@deck.gl/core/dist/esm/shaderlib/project/project-functions.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{D:function(){return projectPosition},T:function(){return getWorldPosition}});var _lib_constants__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/lib/constants.js"),_viewport_uniforms__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/shaderlib/project/viewport-uniforms.js"),_viewports_web_mercator_viewport__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/viewports/web-mercator-viewport.js"),gl_matrix_vec4__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/gl-matrix/esm/vec4.js"),gl_matrix_vec3__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/gl-matrix/esm/vec3.js"),_math_gl_web_mercator__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@math.gl/web-mercator/dist/esm/index.js");const DEFAULT_COORDINATE_ORIGIN=[0,0,0];function lngLatZToWorldPosition(lngLatZ,viewport,offsetMode=!1){const p=viewport.projectPosition(lngLatZ);if(offsetMode&&viewport instanceof _viewports_web_mercator_viewport__WEBPACK_IMPORTED_MODULE_1__.Z){const[longitude,latitude,z=0]=lngLatZ,distanceScales=viewport.getDistanceScales([longitude,latitude]);p[2]=z*distanceScales.unitsPerMeter[2]}return p}function getWorldPosition(position,{viewport:viewport,modelMatrix:modelMatrix,coordinateSystem:coordinateSystem,coordinateOrigin:coordinateOrigin,offsetMode:offsetMode}){let[x,y,z=0]=position;switch(modelMatrix&&([x,y,z]=gl_matrix_vec4__WEBPACK_IMPORTED_MODULE_3__.fF([],[x,y,z,1],modelMatrix)),coordinateSystem){case _lib_constants__WEBPACK_IMPORTED_MODULE_2__.COORDINATE_SYSTEM.LNGLAT:return lngLatZToWorldPosition([x,y,z],viewport,offsetMode);case _lib_constants__WEBPACK_IMPORTED_MODULE_2__.COORDINATE_SYSTEM.LNGLAT_OFFSETS:return lngLatZToWorldPosition([x+coordinateOrigin[0],y+coordinateOrigin[1],z+(coordinateOrigin[2]||0)],viewport,offsetMode);case _lib_constants__WEBPACK_IMPORTED_MODULE_2__.COORDINATE_SYSTEM.METER_OFFSETS:return lngLatZToWorldPosition((0,_math_gl_web_mercator__WEBPACK_IMPORTED_MODULE_0__.eG)(coordinateOrigin,[x,y,z]),viewport,offsetMode);case _lib_constants__WEBPACK_IMPORTED_MODULE_2__.COORDINATE_SYSTEM.CARTESIAN:default:return viewport.isGeospatial?[x+coordinateOrigin[0],y+coordinateOrigin[1],z+coordinateOrigin[2]]:viewport.projectPosition([x,y,z])}}function projectPosition(position,params){const{viewport:viewport,coordinateSystem:coordinateSystem,coordinateOrigin:coordinateOrigin,modelMatrix:modelMatrix,fromCoordinateSystem:fromCoordinateSystem,fromCoordinateOrigin:fromCoordinateOrigin}=function normalizeParameters(opts){const{viewport:viewport,modelMatrix:modelMatrix,coordinateOrigin:coordinateOrigin}=opts;let{coordinateSystem:coordinateSystem,fromCoordinateSystem:fromCoordinateSystem,fromCoordinateOrigin:fromCoordinateOrigin}=opts;return coordinateSystem===_lib_constants__WEBPACK_IMPORTED_MODULE_2__.COORDINATE_SYSTEM.DEFAULT&&(coordinateSystem=viewport.isGeospatial?_lib_constants__WEBPACK_IMPORTED_MODULE_2__.COORDINATE_SYSTEM.LNGLAT:_lib_constants__WEBPACK_IMPORTED_MODULE_2__.COORDINATE_SYSTEM.CARTESIAN),void 0===fromCoordinateSystem&&(fromCoordinateSystem=coordinateSystem),void 0===fromCoordinateOrigin&&(fromCoordinateOrigin=coordinateOrigin),{viewport:viewport,coordinateSystem:coordinateSystem,coordinateOrigin:coordinateOrigin,modelMatrix:modelMatrix,fromCoordinateSystem:fromCoordinateSystem,fromCoordinateOrigin:fromCoordinateOrigin}}(params),{autoOffset:autoOffset=!0}=params,{geospatialOrigin:geospatialOrigin=DEFAULT_COORDINATE_ORIGIN,shaderCoordinateOrigin:shaderCoordinateOrigin=DEFAULT_COORDINATE_ORIGIN,offsetMode:offsetMode=!1}=autoOffset?(0,_viewport_uniforms__WEBPACK_IMPORTED_MODULE_4__.v)(viewport,coordinateSystem,coordinateOrigin):{},worldPosition=getWorldPosition(position,{viewport:viewport,modelMatrix:modelMatrix,coordinateSystem:fromCoordinateSystem,coordinateOrigin:fromCoordinateOrigin,offsetMode:offsetMode});if(offsetMode){const positionCommonSpace=viewport.projectPosition(geospatialOrigin||shaderCoordinateOrigin);gl_matrix_vec3__WEBPACK_IMPORTED_MODULE_5__.lu(worldPosition,worldPosition,positionCommonSpace)}return worldPosition}},"./node_modules/@deck.gl/core/dist/esm/shaderlib/project/project.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return project}});var fp32=__webpack_require__("./node_modules/@luma.gl/shadertools/dist/esm/modules/fp32/fp32.js");const defines="#define SMOOTH_EDGE_RADIUS 0.5";var geometry={name:"geometry",vs:"\n".concat(defines,"\n\nstruct VertexGeometry {\n  vec4 position;\n  vec3 worldPosition;\n  vec3 worldPositionAlt;\n  vec3 normal;\n  vec2 uv;\n  vec3 pickingColor;\n} geometry = VertexGeometry(\n  vec4(0.0, 0.0, 1.0, 0.0),\n  vec3(0.0),\n  vec3(0.0),\n  vec3(0.0),\n  vec2(0.0),\n  vec3(0.0)\n);\n"),fs:"\n".concat(defines,"\n\nstruct FragmentGeometry {\n  vec2 uv;\n} geometry;\n\nfloat smoothedge(float edge, float x) {\n  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);\n}\n")},constants=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/lib/constants.js");const COORDINATE_SYSTEM_GLSL_CONSTANTS=Object.keys(constants.COORDINATE_SYSTEM).map((key=>"const int COORDINATE_SYSTEM_".concat(key," = ").concat(constants.COORDINATE_SYSTEM[key],";"))).join(""),PROJECTION_MODE_GLSL_CONSTANTS=Object.keys(constants.zG).map((key=>"const int PROJECTION_MODE_".concat(key," = ").concat(constants.zG[key],";"))).join(""),UNIT_GLSL_CONSTANTS=Object.keys(constants.iI).map((key=>"const int UNIT_".concat(key.toUpperCase()," = ").concat(constants.iI[key],";"))).join("");var project_glsl="".concat(COORDINATE_SYSTEM_GLSL_CONSTANTS,"\n").concat(PROJECTION_MODE_GLSL_CONSTANTS,"\n").concat(UNIT_GLSL_CONSTANTS,"\n\nuniform int project_uCoordinateSystem;\nuniform int project_uProjectionMode;\nuniform float project_uScale;\nuniform bool project_uWrapLongitude;\nuniform vec3 project_uCommonUnitsPerMeter;\nuniform vec3 project_uCommonUnitsPerWorldUnit;\nuniform vec3 project_uCommonUnitsPerWorldUnit2;\nuniform vec4 project_uCenter;\nuniform mat4 project_uModelMatrix;\nuniform mat4 project_uViewProjectionMatrix;\nuniform vec2 project_uViewportSize;\nuniform float project_uDevicePixelRatio;\nuniform float project_uFocalDistance;\nuniform vec3 project_uCameraPosition;\nuniform vec3 project_uCoordinateOrigin;\nuniform vec3 project_uCommonOrigin;\nuniform bool project_uPseudoMeters;\n\nconst float TILE_SIZE = 512.0;\nconst float PI = 3.1415926536;\nconst float WORLD_SCALE = TILE_SIZE / (PI * 2.0);\nconst vec3 ZERO_64_LOW = vec3(0.0);\nconst float EARTH_RADIUS = 6370972.0;\nconst float GLOBE_RADIUS = 256.0;\nfloat project_size_at_latitude(float lat) {\n  float y = clamp(lat, -89.9, 89.9);\n  return 1.0 / cos(radians(y));\n}\n\nfloat project_size() {\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR &&\n    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT &&\n    project_uPseudoMeters == false) {\n    \n    if (geometry.position.w == 0.0) {\n      return project_size_at_latitude(geometry.worldPosition.y);\n    }\n  \n    float y = geometry.position.y / TILE_SIZE * 2.0 - 1.0;\n    float y2 = y * y;\n    float y4 = y2 * y2;\n    float y6 = y4 * y2;\n    return 1.0 + 4.9348 * y2 + 4.0587 * y4 + 1.5642 * y6;\n  }\n  return 1.0;\n}\n\nfloat project_size_at_latitude(float meters, float lat) {\n  return meters * project_uCommonUnitsPerMeter.z * project_size_at_latitude(lat);\n}\nfloat project_size(float meters) {\n  return meters * project_uCommonUnitsPerMeter.z * project_size();\n}\n\nvec2 project_size(vec2 meters) {\n  return meters * project_uCommonUnitsPerMeter.xy * project_size();\n}\n\nvec3 project_size(vec3 meters) {\n  return meters * project_uCommonUnitsPerMeter * project_size();\n}\n\nvec4 project_size(vec4 meters) {\n  return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);\n}\nmat3 project_get_orientation_matrix(vec3 up) {\n  vec3 uz = normalize(up);\n  vec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));\n  vec3 uy = cross(uz, ux);\n  return mat3(ux, uy, uz);\n}\n\nbool project_needs_rotation(vec3 commonPosition, out mat3 transform) {\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\n    transform = project_get_orientation_matrix(commonPosition);\n    return true;\n  }\n  return false;\n}\nvec3 project_normal(vec3 vector) {\n  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);\n  vec3 n = normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);\n  mat3 rotation;\n  if (project_needs_rotation(geometry.position.xyz, rotation)) {\n    n = rotation * n;\n  }\n  return n;\n}\n\nvec4 project_offset_(vec4 offset) {\n  float dy = offset.y;\n  vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;\n  return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);\n}\nvec2 project_mercator_(vec2 lnglat) {\n  float x = lnglat.x;\n  if (project_uWrapLongitude) {\n    x = mod(x + 180., 360.0) - 180.;\n  }\n  float y = clamp(lnglat.y, -89.9, 89.9);\n  return vec2(\n    radians(x) + PI,\n    PI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))\n  ) * WORLD_SCALE;\n}\n\nvec3 project_globe_(vec3 lnglatz) {\n  float lambda = radians(lnglatz.x);\n  float phi = radians(lnglatz.y);\n  float cosPhi = cos(phi);\n  float D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;\n\n  return vec3(\n    sin(lambda) * cosPhi,\n    -cos(lambda) * cosPhi,\n    sin(phi)\n  ) * D;\n}\nvec4 project_position(vec4 position, vec3 position64Low) {\n  vec4 position_world = project_uModelMatrix * position;\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      return vec4(\n        project_mercator_(position_world.xy),\n        project_size_at_latitude(position_world.z, position_world.y),\n        position_world.w\n      );\n    }\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {\n      position_world.xyz += project_uCoordinateOrigin;\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      return vec4(\n        project_globe_(position_world.xyz),\n        position_world.w\n      );\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      if (abs(position_world.y - project_uCoordinateOrigin.y) > 0.25) {\n        return vec4(\n          project_mercator_(position_world.xy) - project_uCommonOrigin.xy,\n          project_size(position_world.z),\n          position_world.w\n        );\n      }\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_IDENTITY ||\n    (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&\n    (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\n     project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {\n    position_world.xyz -= project_uCoordinateOrigin;\n  }\n  return project_offset_(position_world + project_uModelMatrix * vec4(position64Low, 0.0));\n}\n\nvec4 project_position(vec4 position) {\n  return project_position(position, ZERO_64_LOW);\n}\n\nvec3 project_position(vec3 position, vec3 position64Low) {\n  vec4 projected_position = project_position(vec4(position, 1.0), position64Low);\n  return projected_position.xyz;\n}\n\nvec3 project_position(vec3 position) {\n  vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);\n  return projected_position.xyz;\n}\n\nvec2 project_position(vec2 position) {\n  vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);\n  return projected_position.xy;\n}\n\nvec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {\n  return viewProjectionMatrix * position + center;\n}\nvec4 project_common_position_to_clipspace(vec4 position) {\n  return project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);\n}\nvec2 project_pixel_size_to_clipspace(vec2 pixels) {\n  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;\n  return offset * project_uFocalDistance;\n}\n\nfloat project_size_to_pixel(float meters) {\n  return project_size(meters) * project_uScale;\n}\nfloat project_size_to_pixel(float size, int unit) {\n  if (unit == UNIT_METERS) return project_size_to_pixel(size);\n  if (unit == UNIT_COMMON) return size * project_uScale;\n  return size;\n}\nfloat project_pixel_size(float pixels) {\n  return pixels / project_uScale;\n}\nvec2 project_pixel_size(vec2 pixels) {\n  return pixels / project_uScale;\n}\n"),viewport_uniforms=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/shaderlib/project/viewport-uniforms.js");const INITIAL_MODULE_OPTIONS={};var project={name:"project",dependencies:[fp32.O,geometry],vs:project_glsl,getUniforms:function getUniforms(opts=INITIAL_MODULE_OPTIONS){return"viewport"in opts?(0,viewport_uniforms.C)(opts):{}}}},"./node_modules/@deck.gl/core/dist/esm/shaderlib/project/viewport-uniforms.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{C:function(){return getUniformsFromViewport},v:function(){return getOffsetOrigin}});var gl_matrix_mat4__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/gl-matrix/esm/mat4.js"),gl_matrix_vec4__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/gl-matrix/esm/vec4.js"),_lib_constants__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/lib/constants.js"),_utils_memoize__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/utils/memoize.js");const ZERO_VECTOR=[0,0,0,0],VECTOR_TO_POINT_MATRIX=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],IDENTITY_MATRIX=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],DEFAULT_PIXELS_PER_UNIT2=[0,0,0],DEFAULT_COORDINATE_ORIGIN=[0,0,0],getMemoizedViewportUniforms=(0,_utils_memoize__WEBPACK_IMPORTED_MODULE_0__.Z)((function calculateViewportUniforms({viewport:viewport,devicePixelRatio:devicePixelRatio,coordinateSystem:coordinateSystem,coordinateOrigin:coordinateOrigin}){const{projectionCenter:projectionCenter,viewProjectionMatrix:viewProjectionMatrix,originCommon:originCommon,cameraPosCommon:cameraPosCommon,shaderCoordinateOrigin:shaderCoordinateOrigin,geospatialOrigin:geospatialOrigin}=function calculateMatrixAndOffset(viewport,coordinateSystem,coordinateOrigin){const{viewMatrixUncentered:viewMatrixUncentered,projectionMatrix:projectionMatrix}=viewport;let{viewMatrix:viewMatrix,viewProjectionMatrix:viewProjectionMatrix}=viewport,projectionCenter=ZERO_VECTOR,originCommon=ZERO_VECTOR,cameraPosCommon=viewport.cameraPosition;const{geospatialOrigin:geospatialOrigin,shaderCoordinateOrigin:shaderCoordinateOrigin,offsetMode:offsetMode}=getOffsetOrigin(viewport,coordinateSystem,coordinateOrigin);offsetMode&&(originCommon=viewport.projectPosition(geospatialOrigin||shaderCoordinateOrigin),cameraPosCommon=[cameraPosCommon[0]-originCommon[0],cameraPosCommon[1]-originCommon[1],cameraPosCommon[2]-originCommon[2]],originCommon[3]=1,projectionCenter=gl_matrix_vec4__WEBPACK_IMPORTED_MODULE_2__.fF([],originCommon,viewProjectionMatrix),viewMatrix=viewMatrixUncentered||viewMatrix,viewProjectionMatrix=gl_matrix_mat4__WEBPACK_IMPORTED_MODULE_3__.Jp([],projectionMatrix,viewMatrix),viewProjectionMatrix=gl_matrix_mat4__WEBPACK_IMPORTED_MODULE_3__.Jp([],viewProjectionMatrix,VECTOR_TO_POINT_MATRIX));return{viewMatrix:viewMatrix,viewProjectionMatrix:viewProjectionMatrix,projectionCenter:projectionCenter,originCommon:originCommon,cameraPosCommon:cameraPosCommon,shaderCoordinateOrigin:shaderCoordinateOrigin,geospatialOrigin:geospatialOrigin}}(viewport,coordinateSystem,coordinateOrigin),distanceScales=viewport.getDistanceScales(),viewportSize=[viewport.width*devicePixelRatio,viewport.height*devicePixelRatio],focalDistance=gl_matrix_vec4__WEBPACK_IMPORTED_MODULE_2__.fF([],[0,0,-viewport.focalDistance,1],viewport.projectionMatrix)[3]||1,uniforms={project_uCoordinateSystem:coordinateSystem,project_uProjectionMode:viewport.projectionMode,project_uCoordinateOrigin:shaderCoordinateOrigin,project_uCommonOrigin:originCommon.slice(0,3),project_uCenter:projectionCenter,project_uPseudoMeters:Boolean(viewport._pseudoMeters),project_uViewportSize:viewportSize,project_uDevicePixelRatio:devicePixelRatio,project_uFocalDistance:focalDistance,project_uCommonUnitsPerMeter:distanceScales.unitsPerMeter,project_uCommonUnitsPerWorldUnit:distanceScales.unitsPerMeter,project_uCommonUnitsPerWorldUnit2:DEFAULT_PIXELS_PER_UNIT2,project_uScale:viewport.scale,project_uWrapLongitude:!1,project_uViewProjectionMatrix:viewProjectionMatrix,project_uModelMatrix:IDENTITY_MATRIX,project_uCameraPosition:cameraPosCommon};if(geospatialOrigin){const distanceScalesAtOrigin=viewport.getDistanceScales(geospatialOrigin);switch(coordinateSystem){case _lib_constants__WEBPACK_IMPORTED_MODULE_1__.COORDINATE_SYSTEM.METER_OFFSETS:uniforms.project_uCommonUnitsPerWorldUnit=distanceScalesAtOrigin.unitsPerMeter,uniforms.project_uCommonUnitsPerWorldUnit2=distanceScalesAtOrigin.unitsPerMeter2;break;case _lib_constants__WEBPACK_IMPORTED_MODULE_1__.COORDINATE_SYSTEM.LNGLAT:case _lib_constants__WEBPACK_IMPORTED_MODULE_1__.COORDINATE_SYSTEM.LNGLAT_OFFSETS:viewport._pseudoMeters||(uniforms.project_uCommonUnitsPerMeter=distanceScalesAtOrigin.unitsPerMeter),uniforms.project_uCommonUnitsPerWorldUnit=distanceScalesAtOrigin.unitsPerDegree,uniforms.project_uCommonUnitsPerWorldUnit2=distanceScalesAtOrigin.unitsPerDegree2;break;case _lib_constants__WEBPACK_IMPORTED_MODULE_1__.COORDINATE_SYSTEM.CARTESIAN:uniforms.project_uCommonUnitsPerWorldUnit=[1,1,distanceScalesAtOrigin.unitsPerMeter[2]],uniforms.project_uCommonUnitsPerWorldUnit2=[0,0,distanceScalesAtOrigin.unitsPerMeter2[2]]}}return uniforms}));function getOffsetOrigin(viewport,coordinateSystem,coordinateOrigin=DEFAULT_COORDINATE_ORIGIN){coordinateOrigin.length<3&&(coordinateOrigin=[coordinateOrigin[0],coordinateOrigin[1],0]);let geospatialOrigin,shaderCoordinateOrigin=coordinateOrigin,offsetMode=!0;switch(geospatialOrigin=coordinateSystem===_lib_constants__WEBPACK_IMPORTED_MODULE_1__.COORDINATE_SYSTEM.LNGLAT_OFFSETS||coordinateSystem===_lib_constants__WEBPACK_IMPORTED_MODULE_1__.COORDINATE_SYSTEM.METER_OFFSETS?coordinateOrigin:viewport.isGeospatial?[Math.fround(viewport.longitude),Math.fround(viewport.latitude),0]:null,viewport.projectionMode){case _lib_constants__WEBPACK_IMPORTED_MODULE_1__.zG.WEB_MERCATOR:coordinateSystem!==_lib_constants__WEBPACK_IMPORTED_MODULE_1__.COORDINATE_SYSTEM.LNGLAT&&coordinateSystem!==_lib_constants__WEBPACK_IMPORTED_MODULE_1__.COORDINATE_SYSTEM.CARTESIAN||(geospatialOrigin=[0,0,0],offsetMode=!1);break;case _lib_constants__WEBPACK_IMPORTED_MODULE_1__.zG.WEB_MERCATOR_AUTO_OFFSET:coordinateSystem===_lib_constants__WEBPACK_IMPORTED_MODULE_1__.COORDINATE_SYSTEM.LNGLAT?shaderCoordinateOrigin=geospatialOrigin:coordinateSystem===_lib_constants__WEBPACK_IMPORTED_MODULE_1__.COORDINATE_SYSTEM.CARTESIAN&&(shaderCoordinateOrigin=[Math.fround(viewport.center[0]),Math.fround(viewport.center[1]),0],geospatialOrigin=viewport.unprojectPosition(shaderCoordinateOrigin),shaderCoordinateOrigin[0]-=coordinateOrigin[0],shaderCoordinateOrigin[1]-=coordinateOrigin[1],shaderCoordinateOrigin[2]-=coordinateOrigin[2]);break;case _lib_constants__WEBPACK_IMPORTED_MODULE_1__.zG.IDENTITY:shaderCoordinateOrigin=viewport.position.map(Math.fround),shaderCoordinateOrigin[2]=shaderCoordinateOrigin[2]||0;break;case _lib_constants__WEBPACK_IMPORTED_MODULE_1__.zG.GLOBE:offsetMode=!1,geospatialOrigin=null;break;default:offsetMode=!1}return{geospatialOrigin:geospatialOrigin,shaderCoordinateOrigin:shaderCoordinateOrigin,offsetMode:offsetMode}}function getUniformsFromViewport({viewport:viewport,devicePixelRatio:devicePixelRatio=1,modelMatrix:modelMatrix=null,coordinateSystem:coordinateSystem=_lib_constants__WEBPACK_IMPORTED_MODULE_1__.COORDINATE_SYSTEM.DEFAULT,coordinateOrigin:coordinateOrigin=DEFAULT_COORDINATE_ORIGIN,autoWrapLongitude:autoWrapLongitude=!1}){coordinateSystem===_lib_constants__WEBPACK_IMPORTED_MODULE_1__.COORDINATE_SYSTEM.DEFAULT&&(coordinateSystem=viewport.isGeospatial?_lib_constants__WEBPACK_IMPORTED_MODULE_1__.COORDINATE_SYSTEM.LNGLAT:_lib_constants__WEBPACK_IMPORTED_MODULE_1__.COORDINATE_SYSTEM.CARTESIAN);const uniforms=getMemoizedViewportUniforms({viewport:viewport,devicePixelRatio:devicePixelRatio,coordinateSystem:coordinateSystem,coordinateOrigin:coordinateOrigin});return uniforms.project_uWrapLongitude=autoWrapLongitude,uniforms.project_uModelMatrix=modelMatrix||IDENTITY_MATRIX,uniforms}},"./node_modules/@deck.gl/core/dist/esm/shaderlib/project32/project32.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";var _project_project__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/shaderlib/project/project.js");__webpack_exports__.Z={name:"project32",dependencies:[_project_project__WEBPACK_IMPORTED_MODULE_0__.Z],vs:"\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition\n) {\n  vec3 projectedPosition = project_position(position, position64Low);\n  mat3 rotation;\n  if (project_needs_rotation(projectedPosition, rotation)) {\n    // offset is specified as ENU\n    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe\n    offset = rotation * offset;\n  }\n  commonPosition = vec4(projectedPosition + offset, 1.0);\n  return project_common_position_to_clipspace(commonPosition);\n}\n\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset\n) {\n  vec4 commonPosition;\n  return project_position_to_clipspace(position, position64Low, offset, commonPosition);\n}\n"}},"./node_modules/@deck.gl/core/dist/esm/shaderlib/shadow/shadow.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";var _lib_constants__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/lib/constants.js"),_project_project__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/shaderlib/project/project.js"),_math_gl_core__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@math.gl/core/dist/esm/classes/matrix4.js"),_math_gl_core__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@math.gl/core/dist/esm/classes/vector3.js"),_utils_memoize__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/utils/memoize.js"),_math_gl_web_mercator__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@math.gl/web-mercator/dist/esm/index.js");const getMemoizedViewportCenterPosition=(0,_utils_memoize__WEBPACK_IMPORTED_MODULE_1__.Z)((function getViewportCenterPosition({viewport:viewport,center:center}){return new _math_gl_core__WEBPACK_IMPORTED_MODULE_2__.Z(viewport.viewProjectionMatrix).invert().transform(center)})),getMemoizedViewProjectionMatrices=(0,_utils_memoize__WEBPACK_IMPORTED_MODULE_1__.Z)((function getViewProjectionMatrices({viewport:viewport,shadowMatrices:shadowMatrices}){const projectionMatrices=[],pixelUnprojectionMatrix=viewport.pixelUnprojectionMatrix,farZ=viewport.isGeospatial?void 0:1,corners=[[0,0,farZ],[viewport.width,0,farZ],[0,viewport.height,farZ],[viewport.width,viewport.height,farZ],[0,0,-1],[viewport.width,0,-1],[0,viewport.height,-1],[viewport.width,viewport.height,-1]].map((pixel=>function screenToCommonSpace(xyz,pixelUnprojectionMatrix){const[x,y,z]=xyz,coord=(0,_math_gl_web_mercator__WEBPACK_IMPORTED_MODULE_0__.CT)([x,y,z],pixelUnprojectionMatrix);if(Number.isFinite(z))return coord;return[coord[0],coord[1],0]}(pixel,pixelUnprojectionMatrix)));for(const shadowMatrix of shadowMatrices){const viewMatrix=shadowMatrix.clone().translate(new _math_gl_core__WEBPACK_IMPORTED_MODULE_3__.Z(viewport.center).negate()),positions=corners.map((corner=>viewMatrix.transform(corner))),projectionMatrix=(new _math_gl_core__WEBPACK_IMPORTED_MODULE_2__.Z).ortho({left:Math.min(...positions.map((position=>position[0]))),right:Math.max(...positions.map((position=>position[0]))),bottom:Math.min(...positions.map((position=>position[1]))),top:Math.max(...positions.map((position=>position[1]))),near:Math.min(...positions.map((position=>-position[2]))),far:Math.max(...positions.map((position=>-position[2])))});projectionMatrices.push(projectionMatrix.multiplyRight(shadowMatrix))}return projectionMatrices})),DEFAULT_SHADOW_COLOR=[0,0,0,1],VECTOR_TO_POINT_MATRIX=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0];__webpack_exports__.Z={name:"shadow",dependencies:[_project_project__WEBPACK_IMPORTED_MODULE_5__.Z],vs:"\nconst int max_lights = 2;\nuniform mat4 shadow_uViewProjectionMatrices[max_lights];\nuniform vec4 shadow_uProjectCenters[max_lights];\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform int shadow_uLightId;\nuniform float shadow_uLightCount;\n\nvarying vec3 shadow_vPosition[max_lights];\n\nvec4 shadow_setVertexPosition(vec4 position_commonspace) {\n  if (shadow_uDrawShadowMap) {\n    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);\n  }\n  if (shadow_uUseShadowMap) {\n    for (int i = 0; i < max_lights; i++) {\n      if(i < int(shadow_uLightCount)) {\n        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);\n        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;\n      }\n    }\n  }\n  return gl_Position;\n}\n",fs:"\nconst int max_lights = 2;\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform sampler2D shadow_uShadowMap0;\nuniform sampler2D shadow_uShadowMap1;\nuniform vec4 shadow_uColor;\nuniform float shadow_uLightCount;\n\nvarying vec3 shadow_vPosition[max_lights];\n\nconst vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);\nconst vec4 bitUnpackShift = 1.0 / bitPackShift;\nconst vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);\n\nfloat shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {\n  vec4 rgbaDepth = texture2D(shadowMap, position.xy);\n\n  float z = dot(rgbaDepth, bitUnpackShift);\n  return smoothstep(0.001, 0.01, position.z - z);\n}\n\nvec4 shadow_filterShadowColor(vec4 color) {\n  if (shadow_uDrawShadowMap) {\n    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);\n    rgbaDepth -= rgbaDepth.gbaa * bitMask;\n    return rgbaDepth;\n  }\n  if (shadow_uUseShadowMap) {\n    float shadowAlpha = 0.0;\n    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);\n    if(shadow_uLightCount > 1.0) {\n      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);\n    }\n    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;\n    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);\n\n    return vec4(\n      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),\n      blendedAlpha\n    );\n  }\n  return color;\n}\n",inject:{"vs:DECKGL_FILTER_GL_POSITION":"\n    position = shadow_setVertexPosition(geometry.position);\n    ","fs:DECKGL_FILTER_COLOR":"\n    color = shadow_filterShadowColor(color);\n    "},getUniforms:(opts={},context={})=>"viewport"in opts&&(opts.drawToShadowMap||opts.shadowMaps&&opts.shadowMaps.length>0)?function createShadowUniforms(opts,context){const{shadowEnabled:shadowEnabled=!0}=opts;if(!shadowEnabled||!opts.shadowMatrices||!opts.shadowMatrices.length)return{shadow_uDrawShadowMap:!1,shadow_uUseShadowMap:!1};const uniforms={shadow_uDrawShadowMap:Boolean(opts.drawToShadowMap),shadow_uUseShadowMap:!!opts.shadowMaps&&opts.shadowMaps.length>0,shadow_uColor:opts.shadowColor||DEFAULT_SHADOW_COLOR,shadow_uLightId:opts.shadowLightId||0,shadow_uLightCount:opts.shadowMatrices.length},center=getMemoizedViewportCenterPosition({viewport:opts.viewport,center:context.project_uCenter}),projectCenters=[],viewProjectionMatrices=getMemoizedViewProjectionMatrices({shadowMatrices:opts.shadowMatrices,viewport:opts.viewport}).slice();for(let i=0;i<opts.shadowMatrices.length;i++){const viewProjectionMatrix=viewProjectionMatrices[i],viewProjectionMatrixCentered=viewProjectionMatrix.clone().translate(new _math_gl_core__WEBPACK_IMPORTED_MODULE_3__.Z(opts.viewport.center).negate());context.project_uCoordinateSystem===_lib_constants__WEBPACK_IMPORTED_MODULE_4__.COORDINATE_SYSTEM.LNGLAT&&context.project_uProjectionMode===_lib_constants__WEBPACK_IMPORTED_MODULE_4__.zG.WEB_MERCATOR?(viewProjectionMatrices[i]=viewProjectionMatrixCentered,projectCenters[i]=center):(viewProjectionMatrices[i]=viewProjectionMatrix.clone().multiplyRight(VECTOR_TO_POINT_MATRIX),projectCenters[i]=viewProjectionMatrixCentered.transform(center))}for(let i=0;i<viewProjectionMatrices.length;i++)uniforms["shadow_uViewProjectionMatrices[".concat(i,"]")]=viewProjectionMatrices[i],uniforms["shadow_uProjectCenters[".concat(i,"]")]=projectCenters[i],opts.shadowMaps&&opts.shadowMaps.length>0?uniforms["shadow_uShadowMap".concat(i)]=opts.shadowMaps[i]:uniforms["shadow_uShadowMap".concat(i)]=opts.dummyShadowMap;return uniforms}(opts,context):{}}},"./node_modules/@deck.gl/core/dist/esm/transitions/linear-interpolator.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return LinearInterpolator}});var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),_transition_interpolator__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/transitions/transition-interpolator.js"),_math_gl_core__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@math.gl/core/dist/esm/lib/common.js");const DEFAULT_PROPS=["longitude","latitude","zoom","bearing","pitch"],DEFAULT_REQUIRED_PROPS=["longitude","latitude","zoom"];class LinearInterpolator extends _transition_interpolator__WEBPACK_IMPORTED_MODULE_0__.Z{constructor(opts={}){const transitionProps=Array.isArray(opts)?opts:opts.transitionProps,normalizedOpts=Array.isArray(opts)?{}:opts;normalizedOpts.transitionProps=Array.isArray(transitionProps)?{compare:transitionProps,required:transitionProps}:transitionProps||{compare:DEFAULT_PROPS,required:DEFAULT_REQUIRED_PROPS},super(normalizedOpts.transitionProps),(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.Z)(this,"opts",void 0),this.opts=normalizedOpts}initializeProps(startProps,endProps){const result=super.initializeProps(startProps,endProps),{makeViewport:makeViewport,around:around}=this.opts;if(makeViewport&&around){const startViewport=makeViewport(startProps),endViewport=makeViewport(endProps),aroundPosition=startViewport.unproject(around);result.start.around=around,Object.assign(result.end,{around:endViewport.project(aroundPosition),aroundPosition:aroundPosition,width:endProps.width,height:endProps.height})}return result}interpolateProps(startProps,endProps,t){const propsInTransition={};for(const key of this._propsToExtract)propsInTransition[key]=(0,_math_gl_core__WEBPACK_IMPORTED_MODULE_2__.t7)(startProps[key]||0,endProps[key]||0,t);if(endProps.aroundPosition&&this.opts.makeViewport){const viewport=this.opts.makeViewport({...endProps,...propsInTransition});Object.assign(propsInTransition,viewport.panByPosition(endProps.aroundPosition,(0,_math_gl_core__WEBPACK_IMPORTED_MODULE_2__.t7)(startProps.around,endProps.around,t)))}return propsInTransition}}},"./node_modules/@deck.gl/core/dist/esm/transitions/transition-interpolator.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return TransitionInterpolator}});var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),_math_gl_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@math.gl/core/dist/esm/lib/common.js"),_utils_assert__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/utils/assert.js");class TransitionInterpolator{constructor(opts){(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.Z)(this,"_propsToCompare",void 0),(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.Z)(this,"_propsToExtract",void 0),(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.Z)(this,"_requiredProps",void 0);const{compare:compare,extract:extract,required:required}=opts;this._propsToCompare=compare,this._propsToExtract=extract||compare,this._requiredProps=required}arePropsEqual(currentProps,nextProps){for(const key of this._propsToCompare)if(!(key in currentProps)||!(key in nextProps)||!(0,_math_gl_core__WEBPACK_IMPORTED_MODULE_1__.fS)(currentProps[key],nextProps[key]))return!1;return!0}initializeProps(startProps,endProps){const startViewStateProps={},endViewStateProps={};for(const key of this._propsToExtract)(key in startProps||key in endProps)&&(startViewStateProps[key]=startProps[key],endViewStateProps[key]=endProps[key]);return this._checkRequiredProps(startViewStateProps),this._checkRequiredProps(endViewStateProps),{start:startViewStateProps,end:endViewStateProps}}getDuration(startProps,endProps){return endProps.transitionDuration}_checkRequiredProps(props){this._requiredProps&&this._requiredProps.forEach((propName=>{const value=props[propName];(0,_utils_assert__WEBPACK_IMPORTED_MODULE_2__.Z)(Number.isFinite(value)||Array.isArray(value),"".concat(propName," is required for transition"))}))}}},"./node_modules/@deck.gl/core/dist/esm/transitions/transition.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return Transition}});var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js");class Transition{constructor(timeline){(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.Z)(this,"_inProgress",void 0),(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.Z)(this,"_handle",void 0),(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.Z)(this,"_timeline",void 0),(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.Z)(this,"time",void 0),(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.Z)(this,"settings",void 0),this._inProgress=!1,this._handle=null,this._timeline=timeline,this.time=0,this.settings={duration:0}}get inProgress(){return this._inProgress}start(settings){var _this$settings$onStar,_this$settings;this.cancel(),this.settings=settings,this._inProgress=!0,null===(_this$settings$onStar=(_this$settings=this.settings).onStart)||void 0===_this$settings$onStar||_this$settings$onStar.call(_this$settings,this)}end(){var _this$settings$onEnd,_this$settings2;this._inProgress&&(this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,null===(_this$settings$onEnd=(_this$settings2=this.settings).onEnd)||void 0===_this$settings$onEnd||_this$settings$onEnd.call(_this$settings2,this))}cancel(){var _this$settings$onInte,_this$settings3;this._inProgress&&(null===(_this$settings$onInte=(_this$settings3=this.settings).onInterrupt)||void 0===_this$settings$onInte||_this$settings$onInte.call(_this$settings3,this),this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1)}update(){var _this$settings$onUpda,_this$settings4;if(!this._inProgress)return!1;if(null===this._handle){const{_timeline:timeline,settings:settings}=this;this._handle=timeline.addChannel({delay:timeline.getTime(),duration:settings.duration})}return this.time=this._timeline.getTime(this._handle),this._onUpdate(),null===(_this$settings$onUpda=(_this$settings4=this.settings).onUpdate)||void 0===_this$settings$onUpda||_this$settings$onUpda.call(_this$settings4,this),this._timeline.isFinished(this._handle)&&this.end(),!0}_onUpdate(){}}},"./node_modules/@deck.gl/core/dist/esm/utils/assert.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";function assert(condition,message){if(!condition)throw new Error(message||"deck.gl: assertion failed.")}__webpack_require__.d(__webpack_exports__,{Z:function(){return assert}})},"./node_modules/@deck.gl/core/dist/esm/utils/count.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Q:function(){return count}});const ERR_NOT_OBJECT="count(): argument not an object",ERR_NOT_CONTAINER="count(): argument not a container";function count(container){if(!function isObject(value){return null!==value&&"object"==typeof value}(container))throw new Error(ERR_NOT_OBJECT);if("function"==typeof container.count)return container.count();if(Number.isFinite(container.size))return container.size;if(Number.isFinite(container.length))return container.length;if(function isPlainObject(value){return null!==value&&"object"==typeof value&&value.constructor===Object}(container))return Object.keys(container).length;throw new Error(ERR_NOT_CONTAINER)}},"./node_modules/@deck.gl/core/dist/esm/utils/deep-equal.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";function deepEqual(a,b,depth){if(a===b)return!0;if(!depth||!a||!b)return!1;if(Array.isArray(a)){if(!Array.isArray(b)||a.length!==b.length)return!1;for(let i=0;i<a.length;i++)if(!deepEqual(a[i],b[i],depth-1))return!1;return!0}if(Array.isArray(b))return!1;if("object"==typeof a&&"object"==typeof b){const aKeys=Object.keys(a),bKeys=Object.keys(b);if(aKeys.length!==bKeys.length)return!1;for(const key of aKeys){if(!b.hasOwnProperty(key))return!1;if(!deepEqual(a[key],b[key],depth-1))return!1}return!0}return!1}__webpack_require__.d(__webpack_exports__,{v:function(){return deepEqual}})},"./node_modules/@deck.gl/core/dist/esm/utils/flatten.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";function flatten(array,filter=(()=>!0)){return Array.isArray(array)?flattenArray(array,filter,[]):filter(array)?[array]:[]}function flattenArray(array,filter,result){let index=-1;for(;++index<array.length;){const value=array[index];Array.isArray(value)?flattenArray(value,filter,result):filter(value)&&result.push(value)}return result}function fillArray({target:target,source:source,start:start=0,count:count=1}){const length=source.length,total=count*length;let copied=0;for(let i=start;copied<length;copied++)target[i++]=source[copied];for(;copied<total;)copied<total-copied?(target.copyWithin(start+copied,start,start+copied),copied*=2):(target.copyWithin(start+copied,start,start+total-copied),copied=total);return target}__webpack_require__.d(__webpack_exports__,{k:function(){return fillArray},x:function(){return flatten}})},"./node_modules/@deck.gl/core/dist/esm/utils/iterable-utils.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{D0:function(){return isAsyncIterable},jB:function(){return createIterable},jr:function(){return getAccessorFromBuffer}});const EMPTY_ARRAY=[],placeholderArray=[];function createIterable(data,startRow=0,endRow=1/0){let iterable=EMPTY_ARRAY;const objectInfo={index:-1,data:data,target:[]};return data?"function"==typeof data[Symbol.iterator]?iterable=data:data.length>0&&(placeholderArray.length=data.length,iterable=placeholderArray):iterable=EMPTY_ARRAY,(startRow>0||Number.isFinite(endRow))&&(iterable=(Array.isArray(iterable)?iterable:Array.from(iterable)).slice(startRow,endRow),objectInfo.index=startRow-1),{iterable:iterable,objectInfo:objectInfo}}function isAsyncIterable(data){return data&&data[Symbol.asyncIterator]}function getAccessorFromBuffer(typedArray,options){const{size:size,stride:stride,offset:offset,startIndices:startIndices,nested:nested}=options,bytesPerElement=typedArray.BYTES_PER_ELEMENT,elementStride=stride?stride/bytesPerElement:size,elementOffset=offset?offset/bytesPerElement:0,vertexCount=Math.floor((typedArray.length-elementOffset)/elementStride);return(_,{index:index,target:target})=>{if(!startIndices){const sourceIndex=index*elementStride+elementOffset;for(let j=0;j<size;j++)target[j]=typedArray[sourceIndex+j];return target}const startIndex=startIndices[index],endIndex=startIndices[index+1]||vertexCount;let result;if(nested){result=new Array(endIndex-startIndex);for(let i=startIndex;i<endIndex;i++){const sourceIndex=i*elementStride+elementOffset;target=new Array(size);for(let j=0;j<size;j++)target[j]=typedArray[sourceIndex+j];result[i-startIndex]=target}}else if(elementStride===size)result=typedArray.subarray(startIndex*size+elementOffset,endIndex*size+elementOffset);else{result=new typedArray.constructor((endIndex-startIndex)*size);let targetIndex=0;for(let i=startIndex;i<endIndex;i++){const sourceIndex=i*elementStride+elementOffset;for(let j=0;j<size;j++)result[targetIndex++]=typedArray[sourceIndex+j]}}return result}}},"./node_modules/@deck.gl/core/dist/esm/utils/log.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";var _probe_gl_log__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@probe.gl/log/dist/esm/log.js");__webpack_exports__.Z=new _probe_gl_log__WEBPACK_IMPORTED_MODULE_0__.Z({id:"deck"})},"./node_modules/@deck.gl/core/dist/esm/utils/math-utils.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Du:function(){return getFrustumPlanes},Ks:function(){return fp64LowPart},TK:function(){return toDoublePrecisionArray},Xt:function(){return getCameraPosition},bS:function(){return createMat4},cc:function(){return mergeBounds},wQ:function(){return mod}});var _typed_array_manager__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/utils/typed-array-manager.js"),_math_gl_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@math.gl/core/dist/esm/classes/vector3.js");function createMat4(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function mod(value,divisor){const modulus=value%divisor;return modulus<0?divisor+modulus:modulus}function getCameraPosition(viewMatrixInverse){return[viewMatrixInverse[12],viewMatrixInverse[13],viewMatrixInverse[14]]}function getFrustumPlanes(viewProjectionMatrix){return{left:getFrustumPlane(viewProjectionMatrix[3]+viewProjectionMatrix[0],viewProjectionMatrix[7]+viewProjectionMatrix[4],viewProjectionMatrix[11]+viewProjectionMatrix[8],viewProjectionMatrix[15]+viewProjectionMatrix[12]),right:getFrustumPlane(viewProjectionMatrix[3]-viewProjectionMatrix[0],viewProjectionMatrix[7]-viewProjectionMatrix[4],viewProjectionMatrix[11]-viewProjectionMatrix[8],viewProjectionMatrix[15]-viewProjectionMatrix[12]),bottom:getFrustumPlane(viewProjectionMatrix[3]+viewProjectionMatrix[1],viewProjectionMatrix[7]+viewProjectionMatrix[5],viewProjectionMatrix[11]+viewProjectionMatrix[9],viewProjectionMatrix[15]+viewProjectionMatrix[13]),top:getFrustumPlane(viewProjectionMatrix[3]-viewProjectionMatrix[1],viewProjectionMatrix[7]-viewProjectionMatrix[5],viewProjectionMatrix[11]-viewProjectionMatrix[9],viewProjectionMatrix[15]-viewProjectionMatrix[13]),near:getFrustumPlane(viewProjectionMatrix[3]+viewProjectionMatrix[2],viewProjectionMatrix[7]+viewProjectionMatrix[6],viewProjectionMatrix[11]+viewProjectionMatrix[10],viewProjectionMatrix[15]+viewProjectionMatrix[14]),far:getFrustumPlane(viewProjectionMatrix[3]-viewProjectionMatrix[2],viewProjectionMatrix[7]-viewProjectionMatrix[6],viewProjectionMatrix[11]-viewProjectionMatrix[10],viewProjectionMatrix[15]-viewProjectionMatrix[14])}}const scratchVector=new _math_gl_core__WEBPACK_IMPORTED_MODULE_0__.Z;function getFrustumPlane(a,b,c,d){scratchVector.set(a,b,c);const L=scratchVector.len();return{distance:d/L,normal:new _math_gl_core__WEBPACK_IMPORTED_MODULE_0__.Z(-a/L,-b/L,-c/L)}}function fp64LowPart(x){return x-Math.fround(x)}let scratchArray;function toDoublePrecisionArray(typedArray,options){const{size:size=1,startIndex:startIndex=0}=options,endIndex=void 0!==options.endIndex?options.endIndex:typedArray.length,count=(endIndex-startIndex)/size;scratchArray=_typed_array_manager__WEBPACK_IMPORTED_MODULE_1__.Z.allocate(scratchArray,count,{type:Float32Array,size:2*size});let sourceIndex=startIndex,targetIndex=0;for(;sourceIndex<endIndex;){for(let j=0;j<size;j++){const value=typedArray[sourceIndex++];scratchArray[targetIndex+j]=value,scratchArray[targetIndex+j+size]=fp64LowPart(value)}targetIndex+=2*size}return scratchArray.subarray(0,count*size*2)}function mergeBounds(boundsList){let mergedBounds=null,isMerged=!1;for(const bounds of boundsList)bounds&&(mergedBounds?(isMerged||(mergedBounds=[[mergedBounds[0][0],mergedBounds[0][1]],[mergedBounds[1][0],mergedBounds[1][1]]],isMerged=!0),mergedBounds[0][0]=Math.min(mergedBounds[0][0],bounds[0][0]),mergedBounds[0][1]=Math.min(mergedBounds[0][1],bounds[0][1]),mergedBounds[1][0]=Math.max(mergedBounds[1][0],bounds[1][0]),mergedBounds[1][1]=Math.max(mergedBounds[1][1],bounds[1][1])):mergedBounds=bounds);return mergedBounds}},"./node_modules/@deck.gl/core/dist/esm/utils/memoize.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";function isEqual(a,b){if(a===b)return!0;if(Array.isArray(a)){const len=a.length;if(!b||b.length!==len)return!1;for(let i=0;i<len;i++)if(a[i]!==b[i])return!1;return!0}return!1}function memoize(compute){let cachedResult,cachedArgs={};return args=>{for(const key in args)if(!isEqual(args[key],cachedArgs[key])){cachedResult=compute(args),cachedArgs=args;break}return cachedResult}}__webpack_require__.d(__webpack_exports__,{Z:function(){return memoize}})},"./node_modules/@deck.gl/core/dist/esm/utils/shader.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";function mergeShaders(target,source){if(!source)return target;const result={...target,...source};if("defines"in source&&(result.defines={...target.defines,...source.defines}),"modules"in source&&(result.modules=(target.modules||[]).concat(source.modules),source.modules.some((module=>"project64"===module.name)))){const index=result.modules.findIndex((module=>"project32"===module.name));index>=0&&result.modules.splice(index,1)}if("inject"in source)if(target.inject){const mergedInjection={...target.inject};for(const key in source.inject)mergedInjection[key]=(mergedInjection[key]||"")+source.inject[key];result.inject=mergedInjection}else result.inject=source.inject;return result}__webpack_require__.d(__webpack_exports__,{l:function(){return mergeShaders}})},"./node_modules/@deck.gl/core/dist/esm/utils/typed-array-manager.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js");__webpack_exports__.Z=new class TypedArrayManager{constructor(options={}){(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.Z)(this,"_pool",[]),(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.Z)(this,"opts",{overAlloc:2,poolSize:100}),this.setOptions(options)}setOptions(options){Object.assign(this.opts,options)}allocate(typedArray,count,{size:size=1,type:type,padding:padding=0,copy:copy=!1,initialize:initialize=!1,maxCount:maxCount}){const Type=type||typedArray&&typedArray.constructor||Float32Array,newSize=count*size+padding;if(ArrayBuffer.isView(typedArray)){if(newSize<=typedArray.length)return typedArray;if(newSize*typedArray.BYTES_PER_ELEMENT<=typedArray.buffer.byteLength)return new Type(typedArray.buffer,0,newSize)}let maxSize=1/0;maxCount&&(maxSize=maxCount*size+padding);const newArray=this._allocate(Type,newSize,initialize,maxSize);return typedArray&&copy?newArray.set(typedArray):initialize||newArray.fill(0,0,4),this._release(typedArray),newArray}release(typedArray){this._release(typedArray)}_allocate(Type,size,initialize,maxSize){let sizeToAllocate=Math.max(Math.ceil(size*this.opts.overAlloc),1);sizeToAllocate>maxSize&&(sizeToAllocate=maxSize);const pool=this._pool,byteLength=Type.BYTES_PER_ELEMENT*sizeToAllocate,i=pool.findIndex((b=>b.byteLength>=byteLength));if(i>=0){const array=new Type(pool.splice(i,1)[0],0,sizeToAllocate);return initialize&&array.fill(0),array}return new Type(sizeToAllocate)}_release(typedArray){if(!ArrayBuffer.isView(typedArray))return;const pool=this._pool,{buffer:buffer}=typedArray,{byteLength:byteLength}=buffer,i=pool.findIndex((b=>b.byteLength>=byteLength));i<0?pool.push(buffer):(i>0||pool.length<this.opts.poolSize)&&pool.splice(i,0,buffer),pool.length>this.opts.poolSize&&pool.shift()}}},"./node_modules/@deck.gl/core/dist/esm/viewports/orthographic-viewport.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return OrthographicViewport}});var _viewports_viewport__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/viewports/viewport.js"),_math_gl_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@math.gl/core/dist/esm/classes/matrix4.js"),_math_gl_core__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@math.gl/core/dist/esm/lib/common.js"),_math_gl_web_mercator__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@math.gl/web-mercator/dist/esm/index.js"),gl_matrix_vec2__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/gl-matrix/esm/vec2.js");const viewMatrix=(new _math_gl_core__WEBPACK_IMPORTED_MODULE_1__.Z).lookAt({eye:[0,0,1]});function getProjectionMatrix({width:width,height:height,near:near,far:far,padding:padding}){let left=-width/2,right=width/2,bottom=-height/2,top=height/2;if(padding){const{left:l=0,right:r=0,top:t=0,bottom:b=0}=padding,offsetX=(0,_math_gl_core__WEBPACK_IMPORTED_MODULE_2__.uZ)((l+width-r)/2,0,width)-width/2,offsetY=(0,_math_gl_core__WEBPACK_IMPORTED_MODULE_2__.uZ)((t+height-b)/2,0,height)-height/2;left-=offsetX,right-=offsetX,bottom+=offsetY,top+=offsetY}return(new _math_gl_core__WEBPACK_IMPORTED_MODULE_1__.Z).ortho({left:left,right:right,bottom:bottom,top:top,near:near,far:far})}class OrthographicViewport extends _viewports_viewport__WEBPACK_IMPORTED_MODULE_3__.Z{constructor(props){const{width:width,height:height,near:near=.1,far:far=1e3,zoom:zoom=0,target:target=[0,0,0],padding:padding=null,flipY:flipY=!0}=props,zoomX=Array.isArray(zoom)?zoom[0]:zoom,zoomY=Array.isArray(zoom)?zoom[1]:zoom,zoom_=Math.min(zoomX,zoomY),scale=Math.pow(2,zoom_);let distanceScales;if(zoomX!==zoomY){const scaleX=Math.pow(2,zoomX),scaleY=Math.pow(2,zoomY);distanceScales={unitsPerMeter:[scaleX/scale,scaleY/scale,1],metersPerUnit:[scale/scaleX,scale/scaleY,1]}}super({...props,longitude:void 0,position:target,viewMatrix:viewMatrix.clone().scale([scale,scale*(flipY?-1:1),scale]),projectionMatrix:getProjectionMatrix({width:width||1,height:height||1,padding:padding,near:near,far:far}),zoom:zoom_,distanceScales:distanceScales})}projectFlat([X,Y]){const{unitsPerMeter:unitsPerMeter}=this.distanceScales;return[X*unitsPerMeter[0],Y*unitsPerMeter[1]]}unprojectFlat([x,y]){const{metersPerUnit:metersPerUnit}=this.distanceScales;return[x*metersPerUnit[0],y*metersPerUnit[1]]}panByPosition(coords,pixel){const fromLocation=(0,_math_gl_web_mercator__WEBPACK_IMPORTED_MODULE_0__.CT)(pixel,this.pixelUnprojectionMatrix),toLocation=this.projectFlat(coords),translate=gl_matrix_vec2__WEBPACK_IMPORTED_MODULE_4__.IH([],toLocation,gl_matrix_vec2__WEBPACK_IMPORTED_MODULE_4__.tk([],fromLocation)),newCenter=gl_matrix_vec2__WEBPACK_IMPORTED_MODULE_4__.IH([],this.center,translate);return{target:this.unprojectFlat(newCenter)}}}},"./node_modules/@deck.gl/core/dist/esm/viewports/viewport.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return Viewport}});var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),_utils_log__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/utils/log.js"),_utils_math_utils__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/utils/math-utils.js"),_math_gl_core__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@math.gl/core/dist/esm/classes/matrix4.js"),_math_gl_core__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@math.gl/core/dist/esm/lib/common.js"),_math_gl_core__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@math.gl/core/dist/esm/classes/vector3.js"),gl_matrix_mat4__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/gl-matrix/esm/mat4.js"),_math_gl_web_mercator__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@math.gl/web-mercator/dist/esm/index.js"),_lib_constants__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/lib/constants.js");const DEGREES_TO_RADIANS=Math.PI/180,IDENTITY=(0,_utils_math_utils__WEBPACK_IMPORTED_MODULE_1__.bS)(),ZERO_VECTOR=[0,0,0],DEFAULT_DISTANCE_SCALES={unitsPerMeter:[1,1,1],metersPerUnit:[1,1,1]};class Viewport{constructor(opts={}){(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_4__.Z)(this,"id",void 0),(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_4__.Z)(this,"x",void 0),(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_4__.Z)(this,"y",void 0),(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_4__.Z)(this,"width",void 0),(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_4__.Z)(this,"height",void 0),(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_4__.Z)(this,"padding",void 0),(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_4__.Z)(this,"isGeospatial",void 0),(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_4__.Z)(this,"zoom",void 0),(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_4__.Z)(this,"focalDistance",void 0),(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_4__.Z)(this,"position",void 0),(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_4__.Z)(this,"modelMatrix",void 0),(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_4__.Z)(this,"distanceScales",void 0),(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_4__.Z)(this,"scale",void 0),(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_4__.Z)(this,"center",void 0),(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_4__.Z)(this,"cameraPosition",void 0),(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_4__.Z)(this,"projectionMatrix",void 0),(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_4__.Z)(this,"viewMatrix",void 0),(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_4__.Z)(this,"viewMatrixUncentered",void 0),(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_4__.Z)(this,"viewMatrixInverse",void 0),(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_4__.Z)(this,"viewProjectionMatrix",void 0),(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_4__.Z)(this,"pixelProjectionMatrix",void 0),(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_4__.Z)(this,"pixelUnprojectionMatrix",void 0),(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_4__.Z)(this,"resolution",void 0),(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_4__.Z)(this,"_frustumPlanes",{}),this.id=opts.id||this.constructor.displayName||"viewport",this.x=opts.x||0,this.y=opts.y||0,this.width=opts.width||1,this.height=opts.height||1,this.zoom=opts.zoom||0,this.padding=opts.padding,this.distanceScales=opts.distanceScales||DEFAULT_DISTANCE_SCALES,this.focalDistance=opts.focalDistance||1,this.position=opts.position||ZERO_VECTOR,this.modelMatrix=opts.modelMatrix||null;const{longitude:longitude,latitude:latitude}=opts;this.isGeospatial=Number.isFinite(latitude)&&Number.isFinite(longitude),this._initProps(opts),this._initMatrices(opts),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}get subViewports(){return null}get metersPerPixel(){return this.distanceScales.metersPerUnit[2]/this.scale}get projectionMode(){return this.isGeospatial?this.zoom<12?_lib_constants__WEBPACK_IMPORTED_MODULE_5__.zG.WEB_MERCATOR:_lib_constants__WEBPACK_IMPORTED_MODULE_5__.zG.WEB_MERCATOR_AUTO_OFFSET:_lib_constants__WEBPACK_IMPORTED_MODULE_5__.zG.IDENTITY}equals(viewport){return viewport instanceof Viewport&&(this===viewport||viewport.width===this.width&&viewport.height===this.height&&viewport.scale===this.scale&&(0,_math_gl_core__WEBPACK_IMPORTED_MODULE_3__.fS)(viewport.projectionMatrix,this.projectionMatrix)&&(0,_math_gl_core__WEBPACK_IMPORTED_MODULE_3__.fS)(viewport.viewMatrix,this.viewMatrix))}project(xyz,{topLeft:topLeft=!0}={}){const worldPosition=this.projectPosition(xyz),coord=(0,_math_gl_web_mercator__WEBPACK_IMPORTED_MODULE_0__.aW)(worldPosition,this.pixelProjectionMatrix),[x,y]=coord,y2=topLeft?y:this.height-y;return 2===xyz.length?[x,y2]:[x,y2,coord[2]]}unproject(xyz,{topLeft:topLeft=!0,targetZ:targetZ}={}){const[x,y,z]=xyz,y2=topLeft?y:this.height-y,targetZWorld=targetZ&&targetZ*this.distanceScales.unitsPerMeter[2],coord=(0,_math_gl_web_mercator__WEBPACK_IMPORTED_MODULE_0__.CT)([x,y2,z],this.pixelUnprojectionMatrix,targetZWorld),[X,Y,Z]=this.unprojectPosition(coord);return Number.isFinite(z)?[X,Y,Z]:Number.isFinite(targetZ)?[X,Y,targetZ]:[X,Y]}projectPosition(xyz){const[X,Y]=this.projectFlat(xyz);return[X,Y,(xyz[2]||0)*this.distanceScales.unitsPerMeter[2]]}unprojectPosition(xyz){const[X,Y]=this.unprojectFlat(xyz);return[X,Y,(xyz[2]||0)*this.distanceScales.metersPerUnit[2]]}projectFlat(xyz){if(this.isGeospatial){const result=(0,_math_gl_web_mercator__WEBPACK_IMPORTED_MODULE_0__.w5)(xyz);return result[1]=(0,_math_gl_core__WEBPACK_IMPORTED_MODULE_3__.uZ)(result[1],-318,830),result}return xyz}unprojectFlat(xyz){return this.isGeospatial?(0,_math_gl_web_mercator__WEBPACK_IMPORTED_MODULE_0__.es)(xyz):xyz}getBounds(options={}){const unprojectOption={targetZ:options.z||0},topLeft=this.unproject([0,0],unprojectOption),topRight=this.unproject([this.width,0],unprojectOption),bottomLeft=this.unproject([0,this.height],unprojectOption),bottomRight=this.unproject([this.width,this.height],unprojectOption);return[Math.min(topLeft[0],topRight[0],bottomLeft[0],bottomRight[0]),Math.min(topLeft[1],topRight[1],bottomLeft[1],bottomRight[1]),Math.max(topLeft[0],topRight[0],bottomLeft[0],bottomRight[0]),Math.max(topLeft[1],topRight[1],bottomLeft[1],bottomRight[1])]}getDistanceScales(coordinateOrigin){return coordinateOrigin?(0,_math_gl_web_mercator__WEBPACK_IMPORTED_MODULE_0__.ro)({longitude:coordinateOrigin[0],latitude:coordinateOrigin[1],highPrecision:!0}):this.distanceScales}containsPixel({x:x,y:y,width:width=1,height:height=1}){return x<this.x+this.width&&this.x<x+width&&y<this.y+this.height&&this.y<y+height}getFrustumPlanes(){return this._frustumPlanes.near||Object.assign(this._frustumPlanes,(0,_utils_math_utils__WEBPACK_IMPORTED_MODULE_1__.Du)(this.viewProjectionMatrix)),this._frustumPlanes}panByPosition(coords,pixel){return null}_initProps(opts){const longitude=opts.longitude,latitude=opts.latitude;this.isGeospatial&&(Number.isFinite(opts.zoom)||(this.zoom=(0,_math_gl_web_mercator__WEBPACK_IMPORTED_MODULE_0__.Bf)({latitude:latitude})+Math.log2(this.focalDistance)),this.distanceScales=opts.distanceScales||(0,_math_gl_web_mercator__WEBPACK_IMPORTED_MODULE_0__.ro)({latitude:latitude,longitude:longitude}));const scale=Math.pow(2,this.zoom);this.scale=scale;const{position:position,modelMatrix:modelMatrix}=opts;let meterOffset=ZERO_VECTOR;if(position&&(meterOffset=modelMatrix?new _math_gl_core__WEBPACK_IMPORTED_MODULE_2__.Z(modelMatrix).transformAsVector(position,[]):position),this.isGeospatial){const center=this.projectPosition([longitude,latitude,0]);this.center=new _math_gl_core__WEBPACK_IMPORTED_MODULE_6__.Z(meterOffset).scale(this.distanceScales.unitsPerMeter).add(center)}else this.center=this.projectPosition(meterOffset)}_initMatrices(opts){const{viewMatrix:viewMatrix=IDENTITY,projectionMatrix:projectionMatrix=null,orthographic:orthographic=!1,fovyRadians:fovyRadians,fovy:fovy=75,near:near=.1,far:far=1e3,padding:padding=null,focalDistance:focalDistance=1}=opts;this.viewMatrixUncentered=viewMatrix,this.viewMatrix=(new _math_gl_core__WEBPACK_IMPORTED_MODULE_2__.Z).multiplyRight(viewMatrix).translate(new _math_gl_core__WEBPACK_IMPORTED_MODULE_6__.Z(this.center).negate()),this.projectionMatrix=projectionMatrix||function createProjectionMatrix({width:width,height:height,orthographic:orthographic,fovyRadians:fovyRadians,focalDistance:focalDistance,padding:padding,near:near,far:far}){const aspect=width/height,matrix=orthographic?(new _math_gl_core__WEBPACK_IMPORTED_MODULE_2__.Z).orthographic({fovy:fovyRadians,aspect:aspect,focalDistance:focalDistance,near:near,far:far}):(new _math_gl_core__WEBPACK_IMPORTED_MODULE_2__.Z).perspective({fovy:fovyRadians,aspect:aspect,near:near,far:far});if(padding){const{left:left=0,right:right=0,top:top=0,bottom:bottom=0}=padding,offsetX=(0,_math_gl_core__WEBPACK_IMPORTED_MODULE_3__.uZ)((left+width-right)/2,0,width)-width/2,offsetY=(0,_math_gl_core__WEBPACK_IMPORTED_MODULE_3__.uZ)((top+height-bottom)/2,0,height)-height/2;matrix[8]-=2*offsetX/width,matrix[9]+=2*offsetY/height}return matrix}({width:this.width,height:this.height,orthographic:orthographic,fovyRadians:fovyRadians||fovy*DEGREES_TO_RADIANS,focalDistance:focalDistance,padding:padding,near:near,far:far});const vpm=(0,_utils_math_utils__WEBPACK_IMPORTED_MODULE_1__.bS)();gl_matrix_mat4__WEBPACK_IMPORTED_MODULE_7__.Jp(vpm,vpm,this.projectionMatrix),gl_matrix_mat4__WEBPACK_IMPORTED_MODULE_7__.Jp(vpm,vpm,this.viewMatrix),this.viewProjectionMatrix=vpm,this.viewMatrixInverse=gl_matrix_mat4__WEBPACK_IMPORTED_MODULE_7__.U_([],this.viewMatrix)||this.viewMatrix,this.cameraPosition=(0,_utils_math_utils__WEBPACK_IMPORTED_MODULE_1__.Xt)(this.viewMatrixInverse);const viewportMatrix=(0,_utils_math_utils__WEBPACK_IMPORTED_MODULE_1__.bS)(),pixelProjectionMatrix=(0,_utils_math_utils__WEBPACK_IMPORTED_MODULE_1__.bS)();gl_matrix_mat4__WEBPACK_IMPORTED_MODULE_7__.bA(viewportMatrix,viewportMatrix,[this.width/2,-this.height/2,1]),gl_matrix_mat4__WEBPACK_IMPORTED_MODULE_7__.Iu(viewportMatrix,viewportMatrix,[1,-1,0]),gl_matrix_mat4__WEBPACK_IMPORTED_MODULE_7__.Jp(pixelProjectionMatrix,viewportMatrix,this.viewProjectionMatrix),this.pixelProjectionMatrix=pixelProjectionMatrix,this.pixelUnprojectionMatrix=gl_matrix_mat4__WEBPACK_IMPORTED_MODULE_7__.U_((0,_utils_math_utils__WEBPACK_IMPORTED_MODULE_1__.bS)(),this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||_utils_log__WEBPACK_IMPORTED_MODULE_8__.Z.warn("Pixel project matrix not invertible")()}}(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_4__.Z)(Viewport,"displayName","Viewport")},"./node_modules/@deck.gl/core/dist/esm/viewports/web-mercator-viewport.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return WebMercatorViewport}});var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),_viewport__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/viewports/viewport.js"),_math_gl_web_mercator__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@math.gl/web-mercator/dist/esm/index.js"),gl_matrix_vec2__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/gl-matrix/esm/vec2.js"),_math_gl_core__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@math.gl/core/dist/esm/lib/common.js"),_math_gl_core__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@math.gl/core/dist/esm/classes/matrix4.js");class WebMercatorViewport extends _viewport__WEBPACK_IMPORTED_MODULE_1__.Z{constructor(opts={}){const{latitude:latitude=0,longitude:longitude=0,zoom:zoom=0,pitch:pitch=0,bearing:bearing=0,nearZMultiplier:nearZMultiplier=.1,farZMultiplier:farZMultiplier=1.01,nearZ:nearZ,farZ:farZ,orthographic:orthographic=!1,projectionMatrix:projectionMatrix,repeat:repeat=!1,worldOffset:worldOffset=0,position:position,padding:padding,legacyMeterSizes:legacyMeterSizes=!1}=opts;let{width:width,height:height,altitude:altitude=1.5}=opts;const scale=Math.pow(2,zoom);let fovy;width=width||1,height=height||1;let projectionParameters=null;if(projectionMatrix)altitude=projectionMatrix[5]/2,fovy=(0,_math_gl_web_mercator__WEBPACK_IMPORTED_MODULE_0__.Lu)(altitude);else{let offset;if(opts.fovy?(fovy=opts.fovy,altitude=(0,_math_gl_web_mercator__WEBPACK_IMPORTED_MODULE_0__.sj)(fovy)):fovy=(0,_math_gl_web_mercator__WEBPACK_IMPORTED_MODULE_0__.Lu)(altitude),padding){const{top:top=0,bottom:bottom=0}=padding;offset=[0,(0,_math_gl_core__WEBPACK_IMPORTED_MODULE_2__.uZ)((top+height-bottom)/2,0,height)-height/2]}projectionParameters=(0,_math_gl_web_mercator__WEBPACK_IMPORTED_MODULE_0__.wl)({width:width,height:height,scale:scale,center:position&&[0,0,position[2]*(0,_math_gl_web_mercator__WEBPACK_IMPORTED_MODULE_0__.NC)(latitude)],offset:offset,pitch:pitch,fovy:fovy,nearZMultiplier:nearZMultiplier,farZMultiplier:farZMultiplier}),Number.isFinite(nearZ)&&(projectionParameters.near=nearZ),Number.isFinite(farZ)&&(projectionParameters.far=farZ)}let viewMatrixUncentered=(0,_math_gl_web_mercator__WEBPACK_IMPORTED_MODULE_0__.lf)({height:height,pitch:pitch,bearing:bearing,scale:scale,altitude:altitude});if(worldOffset){viewMatrixUncentered=(new _math_gl_core__WEBPACK_IMPORTED_MODULE_3__.Z).translate([512*worldOffset,0,0]).multiplyLeft(viewMatrixUncentered)}super({...opts,width:width,height:height,viewMatrix:viewMatrixUncentered,longitude:longitude,latitude:latitude,zoom:zoom,...projectionParameters,fovy:fovy,focalDistance:altitude}),(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_4__.Z)(this,"longitude",void 0),(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_4__.Z)(this,"latitude",void 0),(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_4__.Z)(this,"pitch",void 0),(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_4__.Z)(this,"bearing",void 0),(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_4__.Z)(this,"altitude",void 0),(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_4__.Z)(this,"fovy",void 0),(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_4__.Z)(this,"orthographic",void 0),(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_4__.Z)(this,"_subViewports",void 0),(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_4__.Z)(this,"_pseudoMeters",void 0),this.latitude=latitude,this.longitude=longitude,this.zoom=zoom,this.pitch=pitch,this.bearing=bearing,this.altitude=altitude,this.fovy=fovy,this.orthographic=orthographic,this._subViewports=repeat?[]:null,this._pseudoMeters=legacyMeterSizes,Object.freeze(this)}get subViewports(){if(this._subViewports&&!this._subViewports.length){const bounds=this.getBounds(),minOffset=Math.floor((bounds[0]+180)/360),maxOffset=Math.ceil((bounds[2]-180)/360);for(let x=minOffset;x<=maxOffset;x++){const offsetViewport=x?new WebMercatorViewport({...this,worldOffset:x}):this;this._subViewports.push(offsetViewport)}}return this._subViewports}projectPosition(xyz){if(this._pseudoMeters)return super.projectPosition(xyz);const[X,Y]=this.projectFlat(xyz);return[X,Y,(xyz[2]||0)*(0,_math_gl_web_mercator__WEBPACK_IMPORTED_MODULE_0__.NC)(xyz[1])]}unprojectPosition(xyz){if(this._pseudoMeters)return super.unprojectPosition(xyz);const[X,Y]=this.unprojectFlat(xyz);return[X,Y,(xyz[2]||0)/(0,_math_gl_web_mercator__WEBPACK_IMPORTED_MODULE_0__.NC)(Y)]}addMetersToLngLat(lngLatZ,xyz){return(0,_math_gl_web_mercator__WEBPACK_IMPORTED_MODULE_0__.eG)(lngLatZ,xyz)}panByPosition(coords,pixel){const fromLocation=(0,_math_gl_web_mercator__WEBPACK_IMPORTED_MODULE_0__.CT)(pixel,this.pixelUnprojectionMatrix),toLocation=this.projectFlat(coords),translate=gl_matrix_vec2__WEBPACK_IMPORTED_MODULE_5__.IH([],toLocation,gl_matrix_vec2__WEBPACK_IMPORTED_MODULE_5__.tk([],fromLocation)),newCenter=gl_matrix_vec2__WEBPACK_IMPORTED_MODULE_5__.IH([],this.center,translate),[longitude,latitude]=this.unprojectFlat(newCenter);return{longitude:longitude,latitude:latitude}}getBounds(options={}){const corners=(0,_math_gl_web_mercator__WEBPACK_IMPORTED_MODULE_0__.zX)(this,options.z||0);return[Math.min(corners[0][0],corners[1][0],corners[2][0],corners[3][0]),Math.min(corners[0][1],corners[1][1],corners[2][1],corners[3][1]),Math.max(corners[0][0],corners[1][0],corners[2][0],corners[3][0]),Math.max(corners[0][1],corners[1][1],corners[2][1],corners[3][1])]}fitBounds(bounds,options={}){const{width:width,height:height}=this,{longitude:longitude,latitude:latitude,zoom:zoom}=(0,_math_gl_web_mercator__WEBPACK_IMPORTED_MODULE_0__.Xg)({width:width,height:height,bounds:bounds,...options});return new WebMercatorViewport({width:width,height:height,longitude:longitude,latitude:latitude,zoom:zoom})}}(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_4__.Z)(WebMercatorViewport,"displayName","WebMercatorViewport")},"./node_modules/@deck.gl/core/dist/esm/views/map-view.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return MapView}});var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),_view__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/views/view.js"),_viewports_web_mercator_viewport__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/viewports/web-mercator-viewport.js"),_controllers_map_controller__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/controllers/map-controller.js");class MapView extends _view__WEBPACK_IMPORTED_MODULE_0__.Z{get ViewportType(){return _viewports_web_mercator_viewport__WEBPACK_IMPORTED_MODULE_1__.Z}get ControllerType(){return _controllers_map_controller__WEBPACK_IMPORTED_MODULE_2__.Z}}(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_3__.Z)(MapView,"displayName","MapView")},"./node_modules/@deck.gl/core/dist/esm/views/orthographic-view.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return OrthographicView}});var _babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),_view__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/views/view.js"),_viewports_orthographic_viewport__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/viewports/orthographic-viewport.js"),_controllers_orthographic_controller__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/controllers/orthographic-controller.js");class OrthographicView extends _view__WEBPACK_IMPORTED_MODULE_0__.Z{get ViewportType(){return _viewports_orthographic_viewport__WEBPACK_IMPORTED_MODULE_1__.Z}get ControllerType(){return _controllers_orthographic_controller__WEBPACK_IMPORTED_MODULE_2__.Z}}(0,_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_3__.Z)(OrthographicView,"displayName","OrthographicView")},"./node_modules/@deck.gl/core/dist/esm/views/view.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return View}});var defineProperty=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),viewport=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/viewports/viewport.js");const PERCENT_OR_PIXELS_REGEX=/([0-9]+\.?[0-9]*)(%|px)/;function parsePosition(value){switch(typeof value){case"number":return{position:value,relative:!1};case"string":const match=PERCENT_OR_PIXELS_REGEX.exec(value);if(match&&match.length>=3){const relative="%"===match[2],position=parseFloat(match[1]);return{position:relative?position/100:position,relative:relative}}default:throw new Error("Could not parse position string ".concat(value))}}function getPosition(position,extent){return position.relative?Math.round(position.position*extent):position.position}var deep_equal=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/utils/deep-equal.js"),assert=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/utils/assert.js");class View{constructor(props){(0,defineProperty.Z)(this,"id",void 0),(0,defineProperty.Z)(this,"viewportInstance",void 0),(0,defineProperty.Z)(this,"_x",void 0),(0,defineProperty.Z)(this,"_y",void 0),(0,defineProperty.Z)(this,"_width",void 0),(0,defineProperty.Z)(this,"_height",void 0),(0,defineProperty.Z)(this,"_padding",void 0),(0,defineProperty.Z)(this,"props",void 0);const{id:id,x:x=0,y:y=0,width:width="100%",height:height="100%",padding:padding=null,viewportInstance:viewportInstance}=props||{};(0,assert.Z)(!viewportInstance||viewportInstance instanceof viewport.Z),this.viewportInstance=viewportInstance,this.id=id||this.constructor.displayName||"view",this.props={...props,id:this.id},this._x=parsePosition(x),this._y=parsePosition(y),this._width=parsePosition(width),this._height=parsePosition(height),this._padding=padding&&{left:parsePosition(padding.left||0),right:parsePosition(padding.right||0),top:parsePosition(padding.top||0),bottom:parsePosition(padding.bottom||0)},this.equals=this.equals.bind(this),Object.seal(this)}equals(view){return this===view||(this.viewportInstance?!!view.viewportInstance&&this.viewportInstance.equals(view.viewportInstance):this.ViewportType===view.ViewportType&&(0,deep_equal.v)(this.props,view.props,2))}makeViewport({width:width,height:height,viewState:viewState}){if(this.viewportInstance)return this.viewportInstance;viewState=this.filterViewState(viewState);const viewportDimensions=this.getDimensions({width:width,height:height});return viewportDimensions.height&&viewportDimensions.width?new this.ViewportType({...viewState,...this.props,...viewportDimensions}):null}getViewStateId(){const{viewState:viewState}=this.props;return"string"==typeof viewState?viewState:(null==viewState?void 0:viewState.id)||this.id}filterViewState(viewState){if(this.props.viewState&&"object"==typeof this.props.viewState){if(!this.props.viewState.id)return this.props.viewState;const newViewState={...viewState};for(const key in this.props.viewState)"id"!==key&&(newViewState[key]=this.props.viewState[key]);return newViewState}return viewState}getDimensions({width:width,height:height}){const dimensions={x:getPosition(this._x,width),y:getPosition(this._y,height),width:getPosition(this._width,width),height:getPosition(this._height,height)};return this._padding&&(dimensions.padding={left:getPosition(this._padding.left,width),top:getPosition(this._padding.top,height),right:getPosition(this._padding.right,width),bottom:getPosition(this._padding.bottom,height)}),dimensions}get controller(){const opts=this.props.controller;return opts?!0===opts?{type:this.ControllerType}:"function"==typeof opts?{type:opts}:{type:this.ControllerType,...opts}:null}}},"./node_modules/@deck.gl/layers/dist/esm/icon-layer/icon-layer.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return IconLayer}});var defineProperty=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),lib_layer=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/lib/layer.js"),project32=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/shaderlib/project32/project32.js"),picking=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/shaderlib/picking/picking.js"),constants=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/lib/constants.js"),log=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/utils/log.js"),model=__webpack_require__("./node_modules/@luma.gl/engine/dist/esm/lib/model.js"),geometry=__webpack_require__("./node_modules/@luma.gl/engine/dist/esm/geometry/geometry.js"),texture_2d=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/classes/texture-2d.js"),copy_and_blit=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/classes/copy-and-blit.js"),load=__webpack_require__("./node_modules/@loaders.gl/core/dist/esm/lib/api/load.js"),iterable_utils=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/utils/iterable-utils.js");const noop=()=>{},DEFAULT_TEXTURE_PARAMETERS={10241:9987,10240:9729,10242:33071,10243:33071};function resizeImage(ctx,imageData,maxWidth,maxHeight){const resizeRatio=Math.min(maxWidth/imageData.width,maxHeight/imageData.height),width=Math.floor(imageData.width*resizeRatio),height=Math.floor(imageData.height*resizeRatio);return 1===resizeRatio?{data:imageData,width:width,height:height}:(ctx.canvas.height=height,ctx.canvas.width=width,ctx.clearRect(0,0,width,height),ctx.drawImage(imageData,0,0,imageData.width,imageData.height,0,0,width,height),{data:ctx.canvas,width:width,height:height})}function getIconId(icon){return icon&&(icon.id||icon.url)}function buildRowMapping(mapping,columns,yOffset){for(let i=0;i<columns.length;i++){const{icon:icon,xOffset:xOffset}=columns[i];mapping[getIconId(icon)]={...icon,x:xOffset,y:yOffset}}}class IconManager{constructor(gl,{onUpdate:onUpdate=noop,onError:onError=noop}){(0,defineProperty.Z)(this,"gl",void 0),(0,defineProperty.Z)(this,"onUpdate",void 0),(0,defineProperty.Z)(this,"onError",void 0),(0,defineProperty.Z)(this,"_loadOptions",null),(0,defineProperty.Z)(this,"_texture",null),(0,defineProperty.Z)(this,"_externalTexture",null),(0,defineProperty.Z)(this,"_mapping",{}),(0,defineProperty.Z)(this,"_textureParameters",null),(0,defineProperty.Z)(this,"_pendingCount",0),(0,defineProperty.Z)(this,"_autoPacking",!1),(0,defineProperty.Z)(this,"_xOffset",0),(0,defineProperty.Z)(this,"_yOffset",0),(0,defineProperty.Z)(this,"_rowHeight",0),(0,defineProperty.Z)(this,"_buffer",4),(0,defineProperty.Z)(this,"_canvasWidth",1024),(0,defineProperty.Z)(this,"_canvasHeight",0),(0,defineProperty.Z)(this,"_canvas",null),this.gl=gl,this.onUpdate=onUpdate,this.onError=onError}finalize(){var _this$_texture;null===(_this$_texture=this._texture)||void 0===_this$_texture||_this$_texture.delete()}getTexture(){return this._texture||this._externalTexture}getIconMapping(icon){const id=this._autoPacking?getIconId(icon):icon;return this._mapping[id]||{}}setProps({loadOptions:loadOptions,autoPacking:autoPacking,iconAtlas:iconAtlas,iconMapping:iconMapping,textureParameters:textureParameters}){var _this$_texture2;(loadOptions&&(this._loadOptions=loadOptions),void 0!==autoPacking&&(this._autoPacking=autoPacking),iconMapping&&(this._mapping=iconMapping),iconAtlas)&&(null===(_this$_texture2=this._texture)||void 0===_this$_texture2||_this$_texture2.delete(),this._texture=null,this._externalTexture=iconAtlas);textureParameters&&(this._textureParameters=textureParameters)}get isLoaded(){return 0===this._pendingCount}packIcons(data,getIcon){if(!this._autoPacking||"undefined"==typeof document)return;const icons=Object.values(function getDiffIcons(data,getIcon,cachedIcons){if(!data||!getIcon)return null;cachedIcons=cachedIcons||{};const icons={},{iterable:iterable,objectInfo:objectInfo}=(0,iterable_utils.jB)(data);for(const object of iterable){objectInfo.index++;const icon=getIcon(object,objectInfo),id=getIconId(icon);if(!icon)throw new Error("Icon is missing.");if(!icon.url)throw new Error("Icon url is missing.");icons[id]||cachedIcons[id]&&icon.url===cachedIcons[id].url||(icons[id]={...icon,source:object,sourceIndex:objectInfo.index})}return icons}(data,getIcon,this._mapping)||{});if(icons.length>0){const{mapping:mapping,xOffset:xOffset,yOffset:yOffset,rowHeight:rowHeight,canvasHeight:canvasHeight}=function buildMapping({icons:icons,buffer:buffer,mapping:mapping={},xOffset:xOffset=0,yOffset:yOffset=0,rowHeight:rowHeight=0,canvasWidth:canvasWidth}){let columns=[];for(let i=0;i<icons.length;i++){const icon=icons[i];if(!mapping[getIconId(icon)]){const{height:height,width:width}=icon;xOffset+width+buffer>canvasWidth&&(buildRowMapping(mapping,columns,yOffset),xOffset=0,yOffset=rowHeight+yOffset+buffer,rowHeight=0,columns=[]),columns.push({icon:icon,xOffset:xOffset}),xOffset=xOffset+width+buffer,rowHeight=Math.max(rowHeight,height)}}return columns.length>0&&buildRowMapping(mapping,columns,yOffset),{mapping:mapping,rowHeight:rowHeight,xOffset:xOffset,yOffset:yOffset,canvasWidth:canvasWidth,canvasHeight:(number=rowHeight+yOffset+buffer,Math.pow(2,Math.ceil(Math.log2(number))))};var number}({icons:icons,buffer:this._buffer,canvasWidth:this._canvasWidth,mapping:this._mapping,rowHeight:this._rowHeight,xOffset:this._xOffset,yOffset:this._yOffset});this._rowHeight=rowHeight,this._mapping=mapping,this._xOffset=xOffset,this._yOffset=yOffset,this._canvasHeight=canvasHeight,this._texture||(this._texture=new texture_2d.Z(this.gl,{width:this._canvasWidth,height:this._canvasHeight,parameters:this._textureParameters||DEFAULT_TEXTURE_PARAMETERS})),this._texture.height!==this._canvasHeight&&(this._texture=function resizeTexture(texture,width,height,parameters){const oldWidth=texture.width,oldHeight=texture.height,newTexture=new texture_2d.Z(texture.gl,{width:width,height:height,parameters:parameters});return(0,copy_and_blit.Lv)(texture,newTexture,{targetY:0,width:oldWidth,height:oldHeight}),texture.delete(),newTexture}(this._texture,this._canvasWidth,this._canvasHeight,this._textureParameters||DEFAULT_TEXTURE_PARAMETERS)),this.onUpdate(),this._canvas=this._canvas||document.createElement("canvas"),this._loadIcons(icons)}}_loadIcons(icons){const ctx=this._canvas.getContext("2d",{willReadFrequently:!0});for(const icon of icons)this._pendingCount++,(0,load.z)(icon.url,this._loadOptions).then((imageData=>{const id=getIconId(icon),iconDef=this._mapping[id],{x:x,y:y,width:maxWidth,height:maxHeight}=iconDef,{data:data,width:width,height:height}=resizeImage(ctx,imageData,maxWidth,maxHeight);this._texture.setSubImageData({data:data,x:x+(maxWidth-width)/2,y:y+(maxHeight-height)/2,width:width,height:height}),iconDef.width=width,iconDef.height=height,this._texture.generateMipmap(),this.onUpdate()})).catch((error=>{this.onError({url:icon.url,source:icon.source,sourceIndex:icon.sourceIndex,loadOptions:this._loadOptions,error:error})})).finally((()=>{this._pendingCount--}))}}const DEFAULT_COLOR=[0,0,0,255],defaultProps={iconAtlas:{type:"image",value:null,async:!0},iconMapping:{type:"object",value:{},async:!0},sizeScale:{type:"number",value:1,min:0},billboard:!0,sizeUnits:"pixels",sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},alphaCutoff:{type:"number",value:.05,min:0,max:1},getPosition:{type:"accessor",value:x=>x.position},getIcon:{type:"accessor",value:x=>x.icon},getColor:{type:"accessor",value:DEFAULT_COLOR},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},onIconError:{type:"function",value:null,optional:!0},textureParameters:{type:"object",ignore:!0}};class IconLayer extends lib_layer.Z{constructor(...args){super(...args),(0,defineProperty.Z)(this,"state",void 0)}getShaders(){return super.getShaders({vs:"#define SHADER_NAME icon-layer-vertex-shader\n\nattribute vec2 positions;\n\nattribute vec3 instancePositions;\nattribute vec3 instancePositions64Low;\nattribute float instanceSizes;\nattribute float instanceAngles;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\nattribute vec4 instanceIconFrames;\nattribute float instanceColorModes;\nattribute vec2 instanceOffsets;\nattribute vec2 instancePixelOffset;\n\nuniform float sizeScale;\nuniform vec2 iconsTextureDim;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform bool billboard;\nuniform int sizeUnits;\n\nvarying float vColorMode;\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvec2 rotate_by_angle(vec2 vertex, float angle) {\n  float angle_radian = angle * PI / 180.0;\n  float cos_angle = cos(angle_radian);\n  float sin_angle = sin(angle_radian);\n  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\n  return rotationMatrix * vertex;\n}\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = positions;\n  geometry.pickingColor = instancePickingColors;\n  uv = positions;\n\n  vec2 iconSize = instanceIconFrames.zw;\n  float sizePixels = clamp(\n    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits), \n    sizeMinPixels, sizeMaxPixels\n  );\n  float instanceScale = iconSize.y == 0.0 ? 0.0 : sizePixels / iconSize.y;\n  vec2 pixelOffset = positions / 2.0 * iconSize + instanceOffsets;\n  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles) * instanceScale;\n  pixelOffset += instancePixelOffset;\n  pixelOffset.y *= -1.0;\n\n  if (billboard)  {\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n    vec3 offset = vec3(pixelOffset, 0.0);\n    DECKGL_FILTER_SIZE(offset, geometry);\n    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n\n  } else {\n    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);\n    DECKGL_FILTER_SIZE(offset_common, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position); \n    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  }\n\n  vTextureCoords = mix(\n    instanceIconFrames.xy,\n    instanceIconFrames.xy + iconSize,\n    (positions.xy + 1.0) / 2.0\n  ) / iconsTextureDim;\n\n  vColor = instanceColors;\n  DECKGL_FILTER_COLOR(vColor, geometry);\n\n  vColorMode = instanceColorModes;\n}\n",fs:"#define SHADER_NAME icon-layer-fragment-shader\n\nprecision highp float;\n\nuniform float opacity;\nuniform sampler2D iconsTexture;\nuniform float alphaCutoff;\n\nvarying float vColorMode;\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  vec4 texColor = texture2D(iconsTexture, vTextureCoords);\n  vec3 color = mix(texColor.rgb, vColor.rgb, vColorMode);\n  float a = texColor.a * opacity * vColor.a;\n\n  if (a < alphaCutoff) {\n    discard;\n  }\n\n  gl_FragColor = vec4(color, a);\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[project32.Z,picking.Z]})}initializeState(){this.state={iconManager:new IconManager(this.context.gl,{onUpdate:this._onUpdate.bind(this),onError:this._onError.bind(this)})};this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceOffsets:{size:2,accessor:"getIcon",transform:this.getInstanceOffset},instanceIconFrames:{size:4,accessor:"getIcon",transform:this.getInstanceIconFrame},instanceColorModes:{size:1,type:5121,accessor:"getIcon",transform:this.getInstanceColorMode},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:DEFAULT_COLOR},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instancePixelOffset:{size:2,transition:!0,accessor:"getPixelOffset"}})}updateState(params){super.updateState(params);const{props:props,oldProps:oldProps,changeFlags:changeFlags}=params,attributeManager=this.getAttributeManager(),{iconAtlas:iconAtlas,iconMapping:iconMapping,data:data,getIcon:getIcon,textureParameters:textureParameters}=props,{iconManager:iconManager}=this.state,prePacked=iconAtlas||this.internalState.isAsyncPropLoading("iconAtlas");if(iconManager.setProps({loadOptions:props.loadOptions,autoPacking:!prePacked,iconAtlas:iconAtlas,iconMapping:prePacked?iconMapping:null,textureParameters:textureParameters}),prePacked?oldProps.iconMapping!==props.iconMapping&&attributeManager.invalidate("getIcon"):(changeFlags.dataChanged||changeFlags.updateTriggersChanged&&(changeFlags.updateTriggersChanged.all||changeFlags.updateTriggersChanged.getIcon))&&iconManager.packIcons(data,getIcon),changeFlags.extensionsChanged){var _this$state$model;const{gl:gl}=this.context;null===(_this$state$model=this.state.model)||void 0===_this$state$model||_this$state$model.delete(),this.state.model=this._getModel(gl),attributeManager.invalidateAll()}}get isLoaded(){return super.isLoaded&&this.state.iconManager.isLoaded}finalizeState(context){super.finalizeState(context),this.state.iconManager.finalize()}draw({uniforms:uniforms}){const{sizeScale:sizeScale,sizeMinPixels:sizeMinPixels,sizeMaxPixels:sizeMaxPixels,sizeUnits:sizeUnits,billboard:billboard,alphaCutoff:alphaCutoff}=this.props,{iconManager:iconManager}=this.state,iconsTexture=iconManager.getTexture();iconsTexture&&this.state.model.setUniforms(uniforms).setUniforms({iconsTexture:iconsTexture,iconsTextureDim:[iconsTexture.width,iconsTexture.height],sizeUnits:constants.iI[sizeUnits],sizeScale:sizeScale,sizeMinPixels:sizeMinPixels,sizeMaxPixels:sizeMaxPixels,billboard:billboard,alphaCutoff:alphaCutoff}).draw()}_getModel(gl){return new model.Z(gl,{...this.getShaders(),id:this.props.id,geometry:new geometry.Z({drawMode:6,attributes:{positions:{size:2,value:new Float32Array([-1,-1,-1,1,1,1,1,-1])}}}),isInstanced:!0})}_onUpdate(){this.setNeedsRedraw()}_onError(evt){var _this$getCurrentLayer;const onIconError=null===(_this$getCurrentLayer=this.getCurrentLayer())||void 0===_this$getCurrentLayer?void 0:_this$getCurrentLayer.props.onIconError;onIconError?onIconError(evt):log.Z.error(evt.error.message)()}getInstanceOffset(icon){const{width:width,height:height,anchorX:anchorX=width/2,anchorY:anchorY=height/2}=this.state.iconManager.getIconMapping(icon);return[width/2-anchorX,height/2-anchorY]}getInstanceColorMode(icon){return this.state.iconManager.getIconMapping(icon).mask?1:0}getInstanceIconFrame(icon){const{x:x,y:y,width:width,height:height}=this.state.iconManager.getIconMapping(icon);return[x,y,width,height]}}(0,defineProperty.Z)(IconLayer,"defaultProps",defaultProps),(0,defineProperty.Z)(IconLayer,"layerName","IconLayer")},"./node_modules/@deck.gl/layers/dist/esm/text-layer/multi-icon-layer/multi-icon-layer.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return MultiIconLayer}});var defineProperty=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),log=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/utils/log.js"),icon_layer=__webpack_require__("./node_modules/@deck.gl/layers/dist/esm/icon-layer/icon-layer.js");const EMPTY_ARRAY=[];class MultiIconLayer extends icon_layer.Z{constructor(...args){super(...args),(0,defineProperty.Z)(this,"state",void 0)}getShaders(){return{...super.getShaders(),fs:"#define SHADER_NAME multi-icon-layer-fragment-shader\n\nprecision highp float;\n\nuniform float opacity;\nuniform sampler2D iconsTexture;\nuniform float gamma;\nuniform bool sdf;\nuniform float alphaCutoff;\nuniform float sdfBuffer;\nuniform float outlineBuffer;\nuniform vec4 outlineColor;\n\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  if (!picking_uActive) {\n    float alpha = texture2D(iconsTexture, vTextureCoords).a;\n    vec4 color = vColor;\n    if (sdf) {\n      float distance = alpha;\n      alpha = smoothstep(sdfBuffer - gamma, sdfBuffer + gamma, distance);\n\n      if (outlineBuffer > 0.0) {\n        float inFill = alpha;\n        float inBorder = smoothstep(outlineBuffer - gamma, outlineBuffer + gamma, distance);\n        color = mix(outlineColor, vColor, inFill);\n        alpha = inBorder;\n      }\n    }\n    float a = alpha * color.a;\n    \n    if (a < alphaCutoff) {\n      discard;\n    }\n\n    gl_FragColor = vec4(color.rgb, a * opacity);\n  }\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n"}}initializeState(){super.initializeState();this.getAttributeManager().addInstanced({instanceOffsets:{size:2,accessor:"getIconOffsets"},instancePickingColors:{type:5121,size:3,accessor:(object,{index:index,target:value})=>this.encodePickingColor(index,value)}})}updateState(params){super.updateState(params);const{props:props,oldProps:oldProps}=params;let{outlineColor:outlineColor}=props;outlineColor!==oldProps.outlineColor&&(outlineColor=outlineColor.map((x=>x/255)),outlineColor[3]=Number.isFinite(outlineColor[3])?outlineColor[3]:1,this.setState({outlineColor:outlineColor})),!props.sdf&&props.outlineWidth&&log.Z.warn("".concat(this.id,": fontSettings.sdf is required to render outline"))()}draw(params){const{sdf:sdf,smoothing:smoothing,outlineWidth:outlineWidth}=this.props,{outlineColor:outlineColor}=this.state,outlineBuffer=outlineWidth?Math.max(smoothing,.75*(1-outlineWidth)):-1;if(params.uniforms={...params.uniforms,sdfBuffer:.75,outlineBuffer:outlineBuffer,gamma:smoothing,sdf:Boolean(sdf),outlineColor:outlineColor},super.draw(params),sdf&&outlineWidth){const{iconManager:iconManager}=this.state;iconManager.getTexture()&&this.state.model.draw({uniforms:{outlineBuffer:.75}})}}getInstanceOffset(icons){return icons?Array.from(icons).flatMap((icon=>super.getInstanceOffset(icon))):EMPTY_ARRAY}getInstanceColorMode(icons){return 1}getInstanceIconFrame(icons){return icons?Array.from(icons).flatMap((icon=>super.getInstanceIconFrame(icon))):EMPTY_ARRAY}}(0,defineProperty.Z)(MultiIconLayer,"defaultProps",{getIconOffsets:{type:"accessor",value:x=>x.offsets},alphaCutoff:.001,smoothing:.1,outlineWidth:0,outlineColor:{type:"color",value:[0,0,0,255]}}),(0,defineProperty.Z)(MultiIconLayer,"layerName","MultiIconLayer")},"./node_modules/@deck.gl/layers/dist/esm/text-layer/text-background-layer/text-background-layer.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return TextBackgroundLayer}});var defineProperty=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),lib_layer=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/lib/layer.js"),project32=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/shaderlib/project32/project32.js"),picking=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/shaderlib/picking/picking.js"),constants=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/lib/constants.js"),model=__webpack_require__("./node_modules/@luma.gl/engine/dist/esm/lib/model.js"),geometry=__webpack_require__("./node_modules/@luma.gl/engine/dist/esm/geometry/geometry.js");const defaultProps={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,padding:{type:"array",value:[0,0,0,0]},getPosition:{type:"accessor",value:x=>x.position},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},getBoundingRect:{type:"accessor",value:[0,0,0,0]},getFillColor:{type:"accessor",value:[0,0,0,255]},getLineColor:{type:"accessor",value:[0,0,0,255]},getLineWidth:{type:"accessor",value:1}};class TextBackgroundLayer extends lib_layer.Z{constructor(...args){super(...args),(0,defineProperty.Z)(this,"state",void 0)}getShaders(){return super.getShaders({vs:"#define SHADER_NAME text-background-layer-vertex-shader\n\nattribute vec2 positions;\n\nattribute vec3 instancePositions;\nattribute vec3 instancePositions64Low;\nattribute vec4 instanceRects;\nattribute float instanceSizes;\nattribute float instanceAngles;\nattribute vec2 instancePixelOffsets;\nattribute float instanceLineWidths;\nattribute vec4 instanceFillColors;\nattribute vec4 instanceLineColors;\nattribute vec3 instancePickingColors;\n\nuniform bool billboard;\nuniform float opacity;\nuniform float sizeScale;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform vec4 padding;\nuniform int sizeUnits;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying float vLineWidth;\nvarying vec2 uv;\nvarying vec2 dimensions;\n\nvec2 rotate_by_angle(vec2 vertex, float angle) {\n  float angle_radian = radians(angle);\n  float cos_angle = cos(angle_radian);\n  float sin_angle = sin(angle_radian);\n  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\n  return rotationMatrix * vertex;\n}\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = positions;\n  geometry.pickingColor = instancePickingColors;\n  uv = positions;\n  vLineWidth = instanceLineWidths;\n  float sizePixels = clamp(\n    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits),\n    sizeMinPixels, sizeMaxPixels\n  );\n\n  dimensions = instanceRects.zw * sizePixels + padding.xy + padding.zw;\n\n  vec2 pixelOffset = (positions * instanceRects.zw + instanceRects.xy) * sizePixels + mix(-padding.xy, padding.zw, positions);\n  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles);\n  pixelOffset += instancePixelOffsets;\n  pixelOffset.y *= -1.0;\n\n  if (billboard)  {\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n    vec3 offset = vec3(pixelOffset, 0.0);\n    DECKGL_FILTER_SIZE(offset, geometry);\n    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n  } else {\n    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);\n    DECKGL_FILTER_SIZE(offset_common, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position);\n    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  }\n  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);\n  DECKGL_FILTER_COLOR(vFillColor, geometry);\n  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);\n  DECKGL_FILTER_COLOR(vLineColor, geometry);\n}\n",fs:"#define SHADER_NAME text-background-layer-fragment-shader\n\nprecision highp float;\n\nuniform bool stroked;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying float vLineWidth;\nvarying vec2 uv;\nvarying vec2 dimensions;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  vec2 pixelPosition = uv * dimensions;\n  if (stroked) {\n    float distToEdge = min(\n      min(pixelPosition.x, dimensions.x - pixelPosition.x),\n      min(pixelPosition.y, dimensions.y - pixelPosition.y)\n    );\n    float isBorder = smoothedge(distToEdge, vLineWidth);\n    gl_FragColor = mix(vFillColor, vLineColor, isBorder);\n  } else {\n    gl_FragColor = vFillColor;\n  }\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[project32.Z,picking.Z]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instanceRects:{size:4,accessor:"getBoundingRect"},instancePixelOffsets:{size:2,transition:!0,accessor:"getPixelOffset"},instanceFillColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(params){super.updateState(params);const{changeFlags:changeFlags}=params;if(changeFlags.extensionsChanged){var _this$state$model;const{gl:gl}=this.context;null===(_this$state$model=this.state.model)||void 0===_this$state$model||_this$state$model.delete(),this.state.model=this._getModel(gl),this.getAttributeManager().invalidateAll()}}draw({uniforms:uniforms}){const{billboard:billboard,sizeScale:sizeScale,sizeUnits:sizeUnits,sizeMinPixels:sizeMinPixels,sizeMaxPixels:sizeMaxPixels,getLineWidth:getLineWidth}=this.props;let{padding:padding}=this.props;padding.length<4&&(padding=[padding[0],padding[1],padding[0],padding[1]]),this.state.model.setUniforms(uniforms).setUniforms({billboard:billboard,stroked:Boolean(getLineWidth),padding:padding,sizeUnits:constants.iI[sizeUnits],sizeScale:sizeScale,sizeMinPixels:sizeMinPixels,sizeMaxPixels:sizeMaxPixels}).draw()}_getModel(gl){return new model.Z(gl,{...this.getShaders(),id:this.props.id,geometry:new geometry.Z({drawMode:6,vertexCount:4,attributes:{positions:{size:2,value:new Float32Array([0,0,1,0,1,1,0,1])}}}),isInstanced:!0})}}(0,defineProperty.Z)(TextBackgroundLayer,"defaultProps",defaultProps),(0,defineProperty.Z)(TextBackgroundLayer,"layerName","TextBackgroundLayer")},"./node_modules/@deck.gl/layers/dist/esm/text-layer/text-layer.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return TextLayer}});var defineProperty=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),composite_layer=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/lib/composite-layer.js"),log=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/utils/log.js"),iterable_utils=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/utils/iterable-utils.js"),multi_icon_layer=__webpack_require__("./node_modules/@deck.gl/layers/dist/esm/text-layer/multi-icon-layer/multi-icon-layer.js");const INF=1e20;class TinySDF{constructor({fontSize:fontSize=24,buffer:buffer=3,radius:radius=8,cutoff:cutoff=.25,fontFamily:fontFamily="sans-serif",fontWeight:fontWeight="normal",fontStyle:fontStyle="normal"}={}){this.buffer=buffer,this.cutoff=cutoff,this.radius=radius;const size=this.size=fontSize+4*buffer,canvas=this._createCanvas(size),ctx=this.ctx=canvas.getContext("2d",{willReadFrequently:!0});ctx.font=`${fontStyle} ${fontWeight} ${fontSize}px ${fontFamily}`,ctx.textBaseline="alphabetic",ctx.textAlign="left",ctx.fillStyle="black",this.gridOuter=new Float64Array(size*size),this.gridInner=new Float64Array(size*size),this.f=new Float64Array(size),this.z=new Float64Array(size+1),this.v=new Uint16Array(size)}_createCanvas(size){const canvas=document.createElement("canvas");return canvas.width=canvas.height=size,canvas}draw(char){const{width:glyphAdvance,actualBoundingBoxAscent:actualBoundingBoxAscent,actualBoundingBoxDescent:actualBoundingBoxDescent,actualBoundingBoxLeft:actualBoundingBoxLeft,actualBoundingBoxRight:actualBoundingBoxRight}=this.ctx.measureText(char),glyphTop=Math.ceil(actualBoundingBoxAscent),glyphWidth=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(actualBoundingBoxRight-actualBoundingBoxLeft))),glyphHeight=Math.min(this.size-this.buffer,glyphTop+Math.ceil(actualBoundingBoxDescent)),width=glyphWidth+2*this.buffer,height=glyphHeight+2*this.buffer,len=Math.max(width*height,0),data=new Uint8ClampedArray(len),glyph={data:data,width:width,height:height,glyphWidth:glyphWidth,glyphHeight:glyphHeight,glyphTop:glyphTop,glyphLeft:0,glyphAdvance:glyphAdvance};if(0===glyphWidth||0===glyphHeight)return glyph;const{ctx:ctx,buffer:buffer,gridInner:gridInner,gridOuter:gridOuter}=this;ctx.clearRect(buffer,buffer,glyphWidth,glyphHeight),ctx.fillText(char,buffer,buffer+glyphTop);const imgData=ctx.getImageData(buffer,buffer,glyphWidth,glyphHeight);gridOuter.fill(INF,0,len),gridInner.fill(0,0,len);for(let y=0;y<glyphHeight;y++)for(let x=0;x<glyphWidth;x++){const a=imgData.data[4*(y*glyphWidth+x)+3]/255;if(0===a)continue;const j=(y+buffer)*width+x+buffer;if(1===a)gridOuter[j]=0,gridInner[j]=INF;else{const d=.5-a;gridOuter[j]=d>0?d*d:0,gridInner[j]=d<0?d*d:0}}edt(gridOuter,0,0,width,height,width,this.f,this.v,this.z),edt(gridInner,buffer,buffer,glyphWidth,glyphHeight,width,this.f,this.v,this.z);for(let i=0;i<len;i++){const d=Math.sqrt(gridOuter[i])-Math.sqrt(gridInner[i]);data[i]=Math.round(255-255*(d/this.radius+this.cutoff))}return glyph}}function edt(data,x0,y0,width,height,gridSize,f,v,z){for(let x=x0;x<x0+width;x++)edt1d(data,y0*gridSize+x,gridSize,height,f,v,z);for(let y=y0;y<y0+height;y++)edt1d(data,y*gridSize+x0,1,width,f,v,z)}function edt1d(grid,offset,stride,length,f,v,z){v[0]=0,z[0]=-INF,z[1]=INF,f[0]=grid[offset];for(let q=1,k=0,s=0;q<length;q++){f[q]=grid[offset+q*stride];const q2=q*q;do{const r=v[k];s=(f[q]-f[r]+q2-r*r)/(q-r)/2}while(s<=z[k]&&--k>-1);k++,v[k]=q,z[k]=s,z[k+1]=INF}for(let q=0,k=0;q<length;q++){for(;z[k+1]<q;)k++;const r=v[k],qr=q-r;grid[offset+q*stride]=f[r]+qr*qr}}const MISSING_CHAR_WIDTH=32,SINGLE_LINE=[];function getTextWidth(text,startIndex,endIndex,mapping){let width=0;for(let i=startIndex;i<endIndex;i++){var _mapping$character;width+=(null===(_mapping$character=mapping[text[i]])||void 0===_mapping$character?void 0:_mapping$character.layoutWidth)||0}return width}function breakAll(text,startIndex,endIndex,maxWidth,iconMapping,target){let rowStartCharIndex=startIndex,rowOffsetLeft=0;for(let i=startIndex;i<endIndex;i++){const textWidth=getTextWidth(text,i,i+1,iconMapping);rowOffsetLeft+textWidth>maxWidth&&(rowStartCharIndex<i&&target.push(i),rowStartCharIndex=i,rowOffsetLeft=0),rowOffsetLeft+=textWidth}return rowOffsetLeft}function autoWrapping(text,wordBreak,maxWidth,iconMapping,startIndex=0,endIndex){void 0===endIndex&&(endIndex=text.length);const result=[];return"break-all"===wordBreak?breakAll(text,startIndex,endIndex,maxWidth,iconMapping,result):function breakWord(text,startIndex,endIndex,maxWidth,iconMapping,target){let rowStartCharIndex=startIndex,groupStartCharIndex=startIndex,groupEndCharIndex=startIndex,rowOffsetLeft=0;for(let i=startIndex;i<endIndex;i++)if(" "===text[i]?groupEndCharIndex=i+1:" "!==text[i+1]&&i+1!==endIndex||(groupEndCharIndex=i+1),groupEndCharIndex>groupStartCharIndex){let groupWidth=getTextWidth(text,groupStartCharIndex,groupEndCharIndex,iconMapping);rowOffsetLeft+groupWidth>maxWidth&&(rowStartCharIndex<groupStartCharIndex&&(target.push(groupStartCharIndex),rowStartCharIndex=groupStartCharIndex,rowOffsetLeft=0),groupWidth>maxWidth&&(groupWidth=breakAll(text,groupStartCharIndex,groupEndCharIndex,maxWidth,iconMapping,target),rowStartCharIndex=target[target.length-1])),groupStartCharIndex=groupEndCharIndex,rowOffsetLeft+=groupWidth}return rowOffsetLeft}(text,startIndex,endIndex,maxWidth,iconMapping,result),result}function transformRow(line,startIndex,endIndex,iconMapping,leftOffsets,rowSize){let x=0,rowHeight=0;for(let i=startIndex;i<endIndex;i++){const character=line[i],frame=iconMapping[character];frame?(rowHeight||(rowHeight=frame.layoutHeight),leftOffsets[i]=x+frame.layoutWidth/2,x+=frame.layoutWidth):(log.Z.warn("Missing character: ".concat(character," (").concat(character.codePointAt(0),")"))(),leftOffsets[i]=x,x+=MISSING_CHAR_WIDTH)}rowSize[0]=x,rowSize[1]=rowHeight}class LRUCache{constructor(limit=5){(0,defineProperty.Z)(this,"limit",void 0),(0,defineProperty.Z)(this,"_cache",{}),(0,defineProperty.Z)(this,"_order",[]),this.limit=limit}get(key){const value=this._cache[key];return value&&(this._deleteOrder(key),this._appendOrder(key)),value}set(key,value){this._cache[key]?(this.delete(key),this._cache[key]=value,this._appendOrder(key)):(Object.keys(this._cache).length===this.limit&&this.delete(this._order[0]),this._cache[key]=value,this._appendOrder(key))}delete(key){this._cache[key]&&(delete this._cache[key],this._deleteOrder(key))}_deleteOrder(key){const index=this._order.indexOf(key);index>=0&&this._order.splice(index,1)}_appendOrder(key){this._order.push(key)}}const DEFAULT_FONT_SETTINGS={fontFamily:"Monaco, monospace",fontWeight:"normal",characterSet:function getDefaultCharacterSet(){const charSet=[];for(let i=32;i<128;i++)charSet.push(String.fromCharCode(i));return charSet}(),fontSize:64,buffer:4,sdf:!1,cutoff:.25,radius:12,smoothing:.1};let cache=new LRUCache(3);function populateAlphaChannel(alphaChannel,imageData){for(let i=0;i<alphaChannel.length;i++)imageData.data[4*i+3]=alphaChannel[i]}function setTextStyle(ctx,fontFamily,fontSize,fontWeight){ctx.font="".concat(fontWeight," ").concat(fontSize,"px ").concat(fontFamily),ctx.fillStyle="#000",ctx.textBaseline="alphabetic",ctx.textAlign="left"}class FontAtlasManager{constructor(){(0,defineProperty.Z)(this,"props",{...DEFAULT_FONT_SETTINGS}),(0,defineProperty.Z)(this,"_key",void 0),(0,defineProperty.Z)(this,"_atlas",void 0)}get texture(){return this._atlas}get mapping(){return this._atlas&&this._atlas.mapping}get scale(){const{fontSize:fontSize,buffer:buffer}=this.props;return(1.2*fontSize+2*buffer)/fontSize}setProps(props={}){Object.assign(this.props,props),this._key=this._getKey();const charSet=function getNewChars(cacheKey,characterSet){let newCharSet;newCharSet="string"==typeof characterSet?new Set(Array.from(characterSet)):new Set(characterSet);const cachedFontAtlas=cache.get(cacheKey);if(!cachedFontAtlas)return newCharSet;for(const char in cachedFontAtlas.mapping)newCharSet.has(char)&&newCharSet.delete(char);return newCharSet}(this._key,this.props.characterSet),cachedFontAtlas=cache.get(this._key);if(cachedFontAtlas&&0===charSet.size)return void(this._atlas!==cachedFontAtlas&&(this._atlas=cachedFontAtlas));const fontAtlas=this._generateFontAtlas(charSet,cachedFontAtlas);this._atlas=fontAtlas,cache.set(this._key,fontAtlas)}_generateFontAtlas(characterSet,cachedFontAtlas){const{fontFamily:fontFamily,fontWeight:fontWeight,fontSize:fontSize,buffer:buffer,sdf:sdf,radius:radius,cutoff:cutoff}=this.props;let canvas=cachedFontAtlas&&cachedFontAtlas.data;canvas||(canvas=document.createElement("canvas"),canvas.width=1024);const ctx=canvas.getContext("2d",{willReadFrequently:!0});setTextStyle(ctx,fontFamily,fontSize,fontWeight);const{mapping:mapping,canvasHeight:canvasHeight,xOffset:xOffset,yOffset:yOffset}=function buildMapping({characterSet:characterSet,getFontWidth:getFontWidth,fontHeight:fontHeight,buffer:buffer,maxCanvasWidth:maxCanvasWidth,mapping:mapping={},xOffset:xOffset=0,yOffset:yOffset=0}){let row=0,x=xOffset;const rowHeight=fontHeight+2*buffer;for(const char of characterSet)if(!mapping[char]){const width=getFontWidth(char);x+width+2*buffer>maxCanvasWidth&&(x=0,row++),mapping[char]={x:x+buffer,y:yOffset+row*rowHeight+buffer,width:width,height:rowHeight,layoutWidth:width,layoutHeight:fontHeight},x+=width+2*buffer}return{mapping:mapping,xOffset:x,yOffset:yOffset+row*rowHeight,canvasHeight:(number=yOffset+(row+1)*rowHeight,Math.pow(2,Math.ceil(Math.log2(number))))};var number}({getFontWidth:char=>ctx.measureText(char).width,fontHeight:1.2*fontSize,buffer:buffer,characterSet:characterSet,maxCanvasWidth:1024,...cachedFontAtlas&&{mapping:cachedFontAtlas.mapping,xOffset:cachedFontAtlas.xOffset,yOffset:cachedFontAtlas.yOffset}});if(canvas.height!==canvasHeight){const imageData=ctx.getImageData(0,0,canvas.width,canvas.height);canvas.height=canvasHeight,ctx.putImageData(imageData,0,0)}if(setTextStyle(ctx,fontFamily,fontSize,fontWeight),sdf){const tinySDF=new TinySDF({fontSize:fontSize,buffer:buffer,radius:radius,cutoff:cutoff,fontFamily:fontFamily,fontWeight:"".concat(fontWeight)});for(const char of characterSet){const{data:data,width:width,height:height,glyphTop:glyphTop}=tinySDF.draw(char);mapping[char].width=width,mapping[char].layoutOffsetY=.9*fontSize-glyphTop;const imageData=ctx.createImageData(width,height);populateAlphaChannel(data,imageData),ctx.putImageData(imageData,mapping[char].x,mapping[char].y)}}else for(const char of characterSet)ctx.fillText(char,mapping[char].x,mapping[char].y+buffer+.9*fontSize);return{xOffset:xOffset,yOffset:yOffset,mapping:mapping,data:canvas,width:canvas.width,height:canvas.height}}_getKey(){const{fontFamily:fontFamily,fontWeight:fontWeight,fontSize:fontSize,buffer:buffer,sdf:sdf,radius:radius,cutoff:cutoff}=this.props;return sdf?"".concat(fontFamily," ").concat(fontWeight," ").concat(fontSize," ").concat(buffer," ").concat(radius," ").concat(cutoff):"".concat(fontFamily," ").concat(fontWeight," ").concat(fontSize," ").concat(buffer)}}var text_background_layer=__webpack_require__("./node_modules/@deck.gl/layers/dist/esm/text-layer/text-background-layer/text-background-layer.js");const TEXT_ANCHOR={start:1,middle:0,end:-1},ALIGNMENT_BASELINE={top:1,center:0,bottom:-1},DEFAULT_COLOR=[0,0,0,255],defaultProps={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,background:!1,getBackgroundColor:{type:"accessor",value:[255,255,255,255]},getBorderColor:{type:"accessor",value:DEFAULT_COLOR},getBorderWidth:{type:"accessor",value:0},backgroundPadding:{type:"array",value:[0,0,0,0]},characterSet:{type:"object",value:DEFAULT_FONT_SETTINGS.characterSet},fontFamily:DEFAULT_FONT_SETTINGS.fontFamily,fontWeight:DEFAULT_FONT_SETTINGS.fontWeight,lineHeight:1,outlineWidth:{type:"number",value:0,min:0},outlineColor:{type:"color",value:DEFAULT_COLOR},fontSettings:{type:"object",value:{},compare:1},wordBreak:"break-word",maxWidth:{type:"number",value:-1},getText:{type:"accessor",value:x=>x.text},getPosition:{type:"accessor",value:x=>x.position},getColor:{type:"accessor",value:DEFAULT_COLOR},getSize:{type:"accessor",value:32},getAngle:{type:"accessor",value:0},getTextAnchor:{type:"accessor",value:"middle"},getAlignmentBaseline:{type:"accessor",value:"center"},getPixelOffset:{type:"accessor",value:[0,0]},backgroundColor:{deprecatedFor:["background","getBackgroundColor"]}};class TextLayer extends composite_layer.Z{constructor(...args){super(...args),(0,defineProperty.Z)(this,"state",void 0),(0,defineProperty.Z)(this,"getBoundingRect",((object,objectInfo)=>{let{size:[width,height]}=this.transformParagraph(object,objectInfo);const{fontSize:fontSize}=this.state.fontAtlasManager.props;width/=fontSize,height/=fontSize;const{getTextAnchor:getTextAnchor,getAlignmentBaseline:getAlignmentBaseline}=this.props;return[(TEXT_ANCHOR["function"==typeof getTextAnchor?getTextAnchor(object,objectInfo):getTextAnchor]-1)*width/2,(ALIGNMENT_BASELINE["function"==typeof getAlignmentBaseline?getAlignmentBaseline(object,objectInfo):getAlignmentBaseline]-1)*height/2,width,height]})),(0,defineProperty.Z)(this,"getIconOffsets",((object,objectInfo)=>{const{getTextAnchor:getTextAnchor,getAlignmentBaseline:getAlignmentBaseline}=this.props,{x:x,y:y,rowWidth:rowWidth,size:[width,height]}=this.transformParagraph(object,objectInfo),anchorX=TEXT_ANCHOR["function"==typeof getTextAnchor?getTextAnchor(object,objectInfo):getTextAnchor],anchorY=ALIGNMENT_BASELINE["function"==typeof getAlignmentBaseline?getAlignmentBaseline(object,objectInfo):getAlignmentBaseline],numCharacters=x.length,offsets=new Array(2*numCharacters);let index=0;for(let i=0;i<numCharacters;i++){const rowOffset=(1-anchorX)*(width-rowWidth[i])/2;offsets[index++]=(anchorX-1)*width/2+rowOffset+x[i],offsets[index++]=(anchorY-1)*height/2+y[i]}return offsets}))}initializeState(){this.state={styleVersion:0,fontAtlasManager:new FontAtlasManager},this.props.maxWidth>0&&log.Z.warn("v8.9 breaking change: TextLayer maxWidth is now relative to text size")()}updateState(params){const{props:props,oldProps:oldProps,changeFlags:changeFlags}=params;(changeFlags.dataChanged||changeFlags.updateTriggersChanged&&(changeFlags.updateTriggersChanged.all||changeFlags.updateTriggersChanged.getText))&&this._updateText();(this._updateFontAtlas()||props.lineHeight!==oldProps.lineHeight||props.wordBreak!==oldProps.wordBreak||props.maxWidth!==oldProps.maxWidth)&&this.setState({styleVersion:this.state.styleVersion+1})}getPickingInfo({info:info}){return info.object=info.index>=0?this.props.data[info.index]:null,info}_updateFontAtlas(){const{fontSettings:fontSettings,fontFamily:fontFamily,fontWeight:fontWeight}=this.props,{fontAtlasManager:fontAtlasManager,characterSet:characterSet}=this.state,fontProps={...fontSettings,characterSet:characterSet,fontFamily:fontFamily,fontWeight:fontWeight};if(!fontAtlasManager.mapping)return fontAtlasManager.setProps(fontProps),!0;for(const key in fontProps)if(fontProps[key]!==fontAtlasManager.props[key])return fontAtlasManager.setProps(fontProps),!0;return!1}_updateText(){var _attributes;const{data:data,characterSet:characterSet}=this.props,textBuffer=null===(_attributes=data.attributes)||void 0===_attributes?void 0:_attributes.getText;let numInstances,{getText:getText}=this.props,startIndices=data.startIndices;const autoCharacterSet="auto"===characterSet&&new Set;if(textBuffer&&startIndices){const{texts:texts,characterCount:characterCount}=function getTextFromBuffer({value:value,length:length,stride:stride,offset:offset,startIndices:startIndices,characterSet:characterSet}){const bytesPerElement=value.BYTES_PER_ELEMENT,elementStride=stride?stride/bytesPerElement:1,elementOffset=offset?offset/bytesPerElement:0,characterCount=startIndices[length]||Math.ceil((value.length-elementOffset)/elementStride),autoCharacterSet=characterSet&&new Set,texts=new Array(length);let codes=value;if(elementStride>1||elementOffset>0){codes=new(0,value.constructor)(characterCount);for(let i=0;i<characterCount;i++)codes[i]=value[i*elementStride+elementOffset]}for(let index=0;index<length;index++){const startIndex=startIndices[index],endIndex=startIndices[index+1]||characterCount,codesAtIndex=codes.subarray(startIndex,endIndex);texts[index]=String.fromCodePoint.apply(null,codesAtIndex),autoCharacterSet&&codesAtIndex.forEach(autoCharacterSet.add,autoCharacterSet)}if(autoCharacterSet)for(const charCode of autoCharacterSet)characterSet.add(String.fromCodePoint(charCode));return{texts:texts,characterCount:characterCount}}({...ArrayBuffer.isView(textBuffer)?{value:textBuffer}:textBuffer,length:data.length,startIndices:startIndices,characterSet:autoCharacterSet});numInstances=characterCount,getText=(_,{index:index})=>texts[index]}else{const{iterable:iterable,objectInfo:objectInfo}=(0,iterable_utils.jB)(data);startIndices=[0],numInstances=0;for(const object of iterable){objectInfo.index++;const text=Array.from(getText(object,objectInfo)||"");autoCharacterSet&&text.forEach(autoCharacterSet.add,autoCharacterSet),numInstances+=text.length,startIndices.push(numInstances)}}this.setState({getText:getText,startIndices:startIndices,numInstances:numInstances,characterSet:autoCharacterSet||characterSet})}transformParagraph(object,objectInfo){const{fontAtlasManager:fontAtlasManager}=this.state,iconMapping=fontAtlasManager.mapping,getText=this.state.getText,{wordBreak:wordBreak,lineHeight:lineHeight,maxWidth:maxWidth}=this.props;return function transformParagraph(paragraph,lineHeight,wordBreak,maxWidth,iconMapping){const characters=Array.from(paragraph),numCharacters=characters.length,x=new Array(numCharacters),y=new Array(numCharacters),rowWidth=new Array(numCharacters),autoWrappingEnabled=("break-word"===wordBreak||"break-all"===wordBreak)&&isFinite(maxWidth)&&maxWidth>0,size=[0,0],rowSize=[0,0];let rowOffsetTop=0,lineStartIndex=0,lineEndIndex=0;for(let i=0;i<=numCharacters;i++){const char=characters[i];if("\n"!==char&&i!==numCharacters||(lineEndIndex=i),lineEndIndex>lineStartIndex){const rows=autoWrappingEnabled?autoWrapping(characters,wordBreak,maxWidth,iconMapping,lineStartIndex,lineEndIndex):SINGLE_LINE;for(let rowIndex=0;rowIndex<=rows.length;rowIndex++){const rowStart=0===rowIndex?lineStartIndex:rows[rowIndex-1],rowEnd=rowIndex<rows.length?rows[rowIndex]:lineEndIndex;transformRow(characters,rowStart,rowEnd,iconMapping,x,rowSize);for(let j=rowStart;j<rowEnd;j++){var _iconMapping$char;const layoutOffsetY=(null===(_iconMapping$char=iconMapping[characters[j]])||void 0===_iconMapping$char?void 0:_iconMapping$char.layoutOffsetY)||0;y[j]=rowOffsetTop+rowSize[1]/2+layoutOffsetY,rowWidth[j]=rowSize[0]}rowOffsetTop+=rowSize[1]*lineHeight,size[0]=Math.max(size[0],rowSize[0])}lineStartIndex=lineEndIndex}"\n"===char&&(x[lineStartIndex]=0,y[lineStartIndex]=0,rowWidth[lineStartIndex]=0,lineStartIndex++)}return size[1]=rowOffsetTop,{x:x,y:y,rowWidth:rowWidth,size:size}}(getText(object,objectInfo)||"",lineHeight,wordBreak,maxWidth*fontAtlasManager.props.fontSize,iconMapping)}renderLayers(){const{startIndices:startIndices,numInstances:numInstances,getText:getText,fontAtlasManager:{scale:scale,texture:texture,mapping:mapping},styleVersion:styleVersion}=this.state,{data:data,_dataDiff:_dataDiff,getPosition:getPosition,getColor:getColor,getSize:getSize,getAngle:getAngle,getPixelOffset:getPixelOffset,getBackgroundColor:getBackgroundColor,getBorderColor:getBorderColor,getBorderWidth:getBorderWidth,backgroundPadding:backgroundPadding,background:background,billboard:billboard,fontSettings:fontSettings,outlineWidth:outlineWidth,outlineColor:outlineColor,sizeScale:sizeScale,sizeUnits:sizeUnits,sizeMinPixels:sizeMinPixels,sizeMaxPixels:sizeMaxPixels,transitions:transitions,updateTriggers:updateTriggers}=this.props,CharactersLayerClass=this.getSubLayerClass("characters",multi_icon_layer.Z),BackgroundLayerClass=this.getSubLayerClass("background",text_background_layer.Z);return[background&&new BackgroundLayerClass({getFillColor:getBackgroundColor,getLineColor:getBorderColor,getLineWidth:getBorderWidth,padding:backgroundPadding,getPosition:getPosition,getSize:getSize,getAngle:getAngle,getPixelOffset:getPixelOffset,billboard:billboard,sizeScale:sizeScale,sizeUnits:sizeUnits,sizeMinPixels:sizeMinPixels,sizeMaxPixels:sizeMaxPixels,transitions:transitions&&{getPosition:transitions.getPosition,getAngle:transitions.getAngle,getSize:transitions.getSize,getFillColor:transitions.getBackgroundColor,getLineColor:transitions.getBorderColor,getLineWidth:transitions.getBorderWidth,getPixelOffset:transitions.getPixelOffset}},this.getSubLayerProps({id:"background",updateTriggers:{getPosition:updateTriggers.getPosition,getAngle:updateTriggers.getAngle,getSize:updateTriggers.getSize,getFillColor:updateTriggers.getBackgroundColor,getLineColor:updateTriggers.getBorderColor,getLineWidth:updateTriggers.getBorderWidth,getPixelOffset:updateTriggers.getPixelOffset,getBoundingRect:{getText:updateTriggers.getText,getTextAnchor:updateTriggers.getTextAnchor,getAlignmentBaseline:updateTriggers.getAlignmentBaseline,styleVersion:styleVersion}}}),{data:data.attributes&&data.attributes.background?{length:data.length,attributes:data.attributes.background}:data,_dataDiff:_dataDiff,autoHighlight:!1,getBoundingRect:this.getBoundingRect}),new CharactersLayerClass({sdf:fontSettings.sdf,smoothing:Number.isFinite(fontSettings.smoothing)?fontSettings.smoothing:DEFAULT_FONT_SETTINGS.smoothing,outlineWidth:outlineWidth/(fontSettings.radius||DEFAULT_FONT_SETTINGS.radius),outlineColor:outlineColor,iconAtlas:texture,iconMapping:mapping,getPosition:getPosition,getColor:getColor,getSize:getSize,getAngle:getAngle,getPixelOffset:getPixelOffset,billboard:billboard,sizeScale:sizeScale*scale,sizeUnits:sizeUnits,sizeMinPixels:sizeMinPixels*scale,sizeMaxPixels:sizeMaxPixels*scale,transitions:transitions&&{getPosition:transitions.getPosition,getAngle:transitions.getAngle,getColor:transitions.getColor,getSize:transitions.getSize,getPixelOffset:transitions.getPixelOffset}},this.getSubLayerProps({id:"characters",updateTriggers:{all:updateTriggers.getText,getPosition:updateTriggers.getPosition,getAngle:updateTriggers.getAngle,getColor:updateTriggers.getColor,getSize:updateTriggers.getSize,getPixelOffset:updateTriggers.getPixelOffset,getIconOffsets:{getTextAnchor:updateTriggers.getTextAnchor,getAlignmentBaseline:updateTriggers.getAlignmentBaseline,styleVersion:styleVersion}}}),{data:data,_dataDiff:_dataDiff,startIndices:startIndices,numInstances:numInstances,getIconOffsets:this.getIconOffsets,getIcon:getText})]}static set fontAtlasCacheLimit(limit){!function setFontAtlasCacheLimit(limit){log.Z.assert(Number.isFinite(limit)&&limit>=3,"Invalid cache limit"),cache=new LRUCache(limit)}(limit)}}(0,defineProperty.Z)(TextLayer,"defaultProps",defaultProps),(0,defineProperty.Z)(TextLayer,"layerName","TextLayer")},"./node_modules/@deck.gl/react/dist/esm/deckgl.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return deckgl}});var react=__webpack_require__("./node_modules/react/index.js"),deck=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/lib/deck.js");var use_isomorphic_layout_effect="undefined"!=typeof window?react.useLayoutEffect:react.useEffect;function inheritsFrom(Type,ParentType){for(;Type;){if(Type===ParentType)return!0;Type=Object.getPrototypeOf(Type)}return!1}var view=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/views/view.js"),lib_layer=__webpack_require__("./node_modules/@deck.gl/core/dist/esm/lib/layer.js");const MAP_STYLE={position:"absolute",zIndex:-1};function evaluateChildren(children,childProps){if("function"==typeof children)return children(childProps);if(Array.isArray(children))return children.map((child=>evaluateChildren(child,childProps)));if(isComponent(children)){if(function isReactMap(child){var _child$props;return null===(_child$props=child.props)||void 0===_child$props?void 0:_child$props.mapStyle}(children))return childProps.style=MAP_STYLE,(0,react.cloneElement)(children,childProps);if(function needsDeckGLViewProps(child){const componentClass=child.type;return componentClass&&componentClass.deckGLViewProps}(children))return(0,react.cloneElement)(children,childProps)}return children}function isComponent(child){return child&&"object"==typeof child&&"type"in child||!1}function wrapInView(node){if("function"==typeof node)return(0,react.createElement)(view.Z,{},node);if(Array.isArray(node))return node.map(wrapInView);if(isComponent(node)){if(node.type===react.Fragment)return wrapInView(node.props.children);if(inheritsFrom(node.type,view.Z))return node}return node}const CANVAS_ONLY_STYLES={mixBlendMode:null};function redrawDeck(thisRef){thisRef.redrawReason&&(thisRef.deck._drawLayers(thisRef.redrawReason),thisRef.redrawReason=null)}const DeckGL=(0,react.forwardRef)(((props,ref)=>{const[version,setVersion]=(0,react.useState)(0),thisRef=(0,react.useRef)({control:null,version:version,forceUpdate:()=>setVersion((v=>v+1))}).current,containerRef=(0,react.useRef)(null),canvasRef=(0,react.useRef)(null),jsxProps=(0,react.useMemo)((()=>function extractJSXLayers({children:children,layers:layers=[],views:views=null}){const reactChildren=[],jsxLayers=[],jsxViews={};return react.Children.forEach(wrapInView(children),(reactElement=>{if(isComponent(reactElement)){const ElementType=reactElement.type;if(inheritsFrom(ElementType,lib_layer.Z)){const layer=function createLayer(LayerType,reactProps){const props={},defaultProps=LayerType.defaultProps||{};for(const key in reactProps)defaultProps[key]!==reactProps[key]&&(props[key]=reactProps[key]);return new LayerType(props)}(ElementType,reactElement.props);jsxLayers.push(layer)}else reactChildren.push(reactElement);if(inheritsFrom(ElementType,view.Z)&&ElementType!==view.Z&&reactElement.props.id){const view=new ElementType(reactElement.props);jsxViews[view.id]=view}}else reactElement&&reactChildren.push(reactElement)})),Object.keys(jsxViews).length>0&&(Array.isArray(views)?views.forEach((view=>{jsxViews[view.id]=view})):views&&(jsxViews[views.id]=views),views=Object.values(jsxViews)),{layers:layers=jsxLayers.length>0?[...jsxLayers,...layers]:layers,children:reactChildren,views:views}}(props)),[props.layers,props.views,props.children]);let inRender=!0;const handleViewStateChange=params=>{var _props$onViewStateCha;return inRender&&props.viewState?(thisRef.viewStateUpdateRequested=params,null):(thisRef.viewStateUpdateRequested=null,null===(_props$onViewStateCha=props.onViewStateChange)||void 0===_props$onViewStateCha?void 0:_props$onViewStateCha.call(props,params))},handleInteractionStateChange=params=>{var _props$onInteractionS;inRender?thisRef.interactionStateUpdateRequested=params:(thisRef.interactionStateUpdateRequested=null,null===(_props$onInteractionS=props.onInteractionStateChange)||void 0===_props$onInteractionS||_props$onInteractionS.call(props,params))},deckProps=(0,react.useMemo)((()=>{const forwardProps={...props,style:null,width:"100%",height:"100%",parent:containerRef.current,canvas:canvasRef.current,layers:jsxProps.layers,views:jsxProps.views,onViewStateChange:handleViewStateChange,onInteractionStateChange:handleInteractionStateChange};return delete forwardProps._customRender,thisRef.deck&&thisRef.deck.setProps(forwardProps),forwardProps}),[props]);(0,react.useEffect)((()=>{const DeckClass=props.Deck||deck.Z;return thisRef.deck=function createDeckInstance(thisRef,DeckClass,props){const deck=new DeckClass({...props,_customRender:redrawReason=>{thisRef.redrawReason=redrawReason;const viewports=deck.getViewports();thisRef.lastRenderedViewports!==viewports?thisRef.forceUpdate():redrawDeck(thisRef)}});return deck}(thisRef,DeckClass,{...deckProps,parent:containerRef.current,canvas:canvasRef.current}),()=>{var _thisRef$deck;return null===(_thisRef$deck=thisRef.deck)||void 0===_thisRef$deck?void 0:_thisRef$deck.finalize()}}),[]),use_isomorphic_layout_effect((()=>{redrawDeck(thisRef);const{viewStateUpdateRequested:viewStateUpdateRequested,interactionStateUpdateRequested:interactionStateUpdateRequested}=thisRef;viewStateUpdateRequested&&handleViewStateChange(viewStateUpdateRequested),interactionStateUpdateRequested&&handleInteractionStateChange(interactionStateUpdateRequested)})),(0,react.useImperativeHandle)(ref,(()=>function getRefHandles(thisRef){return{get deck(){return thisRef.deck},pickObject:opts=>thisRef.deck.pickObject(opts),pickMultipleObjects:opts=>thisRef.deck.pickMultipleObjects(opts),pickObjects:opts=>thisRef.deck.pickObjects(opts)}}(thisRef)),[]);const currentViewports=thisRef.deck&&thisRef.deck.isInitialized?thisRef.deck.getViewports():void 0,{ContextProvider:ContextProvider,width:width,height:height,id:id,style:style}=props,{containerStyle:containerStyle,canvasStyle:canvasStyle}=(0,react.useMemo)((()=>function extractStyles({width:width,height:height,style:style}){const containerStyle={position:"absolute",zIndex:0,left:0,top:0,width:width,height:height},canvasStyle={left:0,top:0};if(style)for(const key in style)key in CANVAS_ONLY_STYLES?canvasStyle[key]=style[key]:containerStyle[key]=style[key];return{containerStyle:containerStyle,canvasStyle:canvasStyle}}({width:width,height:height,style:style})),[width,height,style]);if(!thisRef.viewStateUpdateRequested&&thisRef.lastRenderedViewports===currentViewports||thisRef.version!==version){thisRef.lastRenderedViewports=currentViewports,thisRef.version=version;const childrenUnderViews=function positionChildrenUnderViews({children:children,deck:deck,ContextProvider:ContextProvider}){const{viewManager:viewManager}=deck||{};if(!viewManager||!viewManager.views.length)return[];const views={},defaultViewId=viewManager.views[0].id;for(const child of children){let viewId=defaultViewId,viewChildren=child;isComponent(child)&&inheritsFrom(child.type,view.Z)&&(viewId=child.props.id||defaultViewId,viewChildren=child.props.children);const viewport=viewManager.getViewport(viewId),viewState=viewManager.getViewState(viewId);if(viewport){viewState.padding=viewport.padding;const{x:x,y:y,width:width,height:height}=viewport;viewChildren=evaluateChildren(viewChildren,{x:x,y:y,width:width,height:height,viewport:viewport,viewState:viewState}),views[viewId]||(views[viewId]={viewport:viewport,children:[]}),views[viewId].children.push(viewChildren)}}return Object.keys(views).map((viewId=>{const{viewport:viewport,children:viewChildren}=views[viewId],{x:x,y:y,width:width,height:height}=viewport,style={position:"absolute",left:x,top:y,width:width,height:height},key="view-".concat(viewId),viewElement=(0,react.createElement)("div",{key:key,id:key,style:style},...viewChildren);if(ContextProvider){const contextValue={viewport:viewport,container:deck.canvas.offsetParent,eventManager:deck.eventManager,onViewStateChange:params=>{params.viewId=viewId,deck._onViewStateChange(params)}};return(0,react.createElement)(ContextProvider,{key:key,value:contextValue},viewElement)}return viewElement}))}({children:jsxProps.children,deck:thisRef.deck,ContextProvider:ContextProvider}),canvas=(0,react.createElement)("canvas",{key:"canvas",id:id||"deckgl-overlay",ref:canvasRef,style:canvasStyle});thisRef.control=(0,react.createElement)("div",{id:"".concat(id||"deckgl","-wrapper"),ref:containerRef,style:containerStyle},[canvas,childrenUnderViews])}return inRender=!1,thisRef.control}));DeckGL.defaultProps=deck.Z.defaultProps;var deckgl=DeckGL},"./node_modules/@loaders.gl/core/dist/esm/javascript-utils/is-type.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{D0:function(){return isAsyncIterable},Ew:function(){return isResponse},Kn:function(){return isObject},Lj:function(){return isBlob},Os:function(){return isReadableStream},Ss:function(){return isPureObject},TW:function(){return isIterable},zH:function(){return isBuffer}});const isBoolean=x=>"boolean"==typeof x,isFunction=x=>"function"==typeof x,isObject=x=>null!==x&&"object"==typeof x,isPureObject=x=>isObject(x)&&x.constructor==={}.constructor,isIterable=x=>x&&"function"==typeof x[Symbol.iterator],isAsyncIterable=x=>x&&"function"==typeof x[Symbol.asyncIterator],isResponse=x=>"undefined"!=typeof Response&&x instanceof Response||x&&x.arrayBuffer&&x.text&&x.json,isBlob=x=>"undefined"!=typeof Blob&&x instanceof Blob,isBuffer=x=>x&&"object"==typeof x&&x.isBuffer,isReadableStream=x=>(x=>"undefined"!=typeof ReadableStream&&x instanceof ReadableStream||isObject(x)&&isFunction(x.tee)&&isFunction(x.cancel)&&isFunction(x.getReader))(x)||(x=>isObject(x)&&isFunction(x.read)&&isFunction(x.pipe)&&isBoolean(x.readable))(x)},"./node_modules/@loaders.gl/core/dist/esm/lib/api/load.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{z:function(){return load}});var is_type=__webpack_require__("./node_modules/@loaders.gl/core/dist/esm/javascript-utils/is-type.js"),normalize_loader=__webpack_require__("./node_modules/@loaders.gl/core/dist/esm/lib/loader-utils/normalize-loader.js");let pathPrefix="";const fileAliases={};const DATA_URL_PATTERN=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,MIME_TYPE_PATTERN=/^([-\w.]+\/[-\w.+]+)/;function parseMIMETypeFromURL(url){const matches=DATA_URL_PATTERN.exec(url);return matches?matches[1]:""}const QUERY_STRING_PATTERN=/\?.*/;function stripQueryString(url){return url.replace(QUERY_STRING_PATTERN,"")}function getResourceUrl(resource){if((0,is_type.Ew)(resource)){return resource.url}if((0,is_type.Lj)(resource)){return resource.name||""}return"string"==typeof resource?resource:""}function getResourceMIMEType(resource){if((0,is_type.Ew)(resource)){const response=resource,contentTypeHeader=response.headers.get("content-type")||"",noQueryUrl=stripQueryString(response.url);return function parseMIMEType(mimeString){const matches=MIME_TYPE_PATTERN.exec(mimeString);return matches?matches[1]:mimeString}(contentTypeHeader)||parseMIMETypeFromURL(noQueryUrl)}if((0,is_type.Lj)(resource)){return resource.type||""}return"string"==typeof resource?parseMIMETypeFromURL(resource):""}async function response_utils_makeResponse(resource){if((0,is_type.Ew)(resource))return resource;const headers={},contentLength=function getResourceContentLength(resource){if((0,is_type.Ew)(resource))return resource.headers["content-length"]||-1;if((0,is_type.Lj)(resource))return resource.size;return"string"==typeof resource?resource.length:resource instanceof ArrayBuffer||ArrayBuffer.isView(resource)?resource.byteLength:-1}(resource);contentLength>=0&&(headers["content-length"]=String(contentLength));const url=getResourceUrl(resource),type=getResourceMIMEType(resource);type&&(headers["content-type"]=type);const initialDataUrl=await async function getInitialDataUrl(resource){const INITIAL_DATA_LENGTH=5;if("string"==typeof resource)return"data:,".concat(resource.slice(0,INITIAL_DATA_LENGTH));if(resource instanceof Blob){const blobSlice=resource.slice(0,5);return await new Promise((resolve=>{const reader=new FileReader;reader.onload=event=>{var _event$target;return resolve(null==event||null===(_event$target=event.target)||void 0===_event$target?void 0:_event$target.result)},reader.readAsDataURL(blobSlice)}))}if(resource instanceof ArrayBuffer){const base64=function arrayBufferToBase64(buffer){let binary="";const bytes=new Uint8Array(buffer);for(let i=0;i<bytes.byteLength;i++)binary+=String.fromCharCode(bytes[i]);return btoa(binary)}(resource.slice(0,INITIAL_DATA_LENGTH));return"data:base64,".concat(base64)}return null}(resource);initialDataUrl&&(headers["x-first-bytes"]=initialDataUrl),"string"==typeof resource&&(resource=(new TextEncoder).encode(resource));const response=new Response(resource,{headers:headers});return Object.defineProperty(response,"url",{value:url}),response}async function fetchFile(url,options){if("string"==typeof url){url=function resolvePath(filename){for(const alias in fileAliases)if(filename.startsWith(alias)){const replacement=fileAliases[alias];filename=filename.replace(alias,replacement)}return filename.startsWith("http://")||filename.startsWith("https://")||(filename="".concat(pathPrefix).concat(filename)),filename}(url);let fetchOptions=options;return null!=options&&options.fetch&&"function"!=typeof(null==options?void 0:options.fetch)&&(fetchOptions=options.fetch),await fetch(url,fetchOptions)}return await response_utils_makeResponse(url)}var option_utils=__webpack_require__("./node_modules/@loaders.gl/core/dist/esm/lib/loader-utils/option-utils.js");function getFetchFunction(options,context){const globalOptions=(0,option_utils.pm)(),fetchOptions=options||globalOptions;return"function"==typeof fetchOptions.fetch?fetchOptions.fetch:(0,is_type.Kn)(fetchOptions.fetch)?url=>fetchFile(url,fetchOptions):null!=context&&context.fetch?null==context?void 0:context.fetch:fetchFile}var assert=__webpack_require__("./node_modules/@loaders.gl/worker-utils/dist/esm/lib/env-utils/assert.js");const VERSION="3.4.14";var globals=__webpack_require__("./node_modules/@loaders.gl/worker-utils/dist/esm/lib/env-utils/globals.js"),defineProperty=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js");class worker_threads_browser_Worker{terminate(){}}const workerURLCache=new Map;function getLoadableWorkerURL(props){(0,assert.h)(props.source&&!props.url||!props.source&&props.url);let workerURL=workerURLCache.get(props.source||props.url);return workerURL||(props.url&&(workerURL=function getLoadableWorkerURLFromURL(url){if(!url.startsWith("http"))return url;return getLoadableWorkerURLFromSource(function buildScriptSource(workerUrl){return"try {\n  importScripts('".concat(workerUrl,"');\n} catch (error) {\n  console.error(error);\n  throw error;\n}")}(url))}(props.url),workerURLCache.set(props.url,workerURL)),props.source&&(workerURL=getLoadableWorkerURLFromSource(props.source),workerURLCache.set(props.source,workerURL))),(0,assert.h)(workerURL),workerURL}function getLoadableWorkerURLFromSource(workerSource){const blob=new Blob([workerSource],{type:"application/javascript"});return URL.createObjectURL(blob)}function getTransferList(object){let recursive=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],transfers=arguments.length>2?arguments[2]:void 0;const transfersSet=transfers||new Set;if(object){if(isTransferable(object))transfersSet.add(object);else if(isTransferable(object.buffer))transfersSet.add(object.buffer);else if(ArrayBuffer.isView(object));else if(recursive&&"object"==typeof object)for(const key in object)getTransferList(object[key],recursive,transfersSet)}else;return void 0===transfers?Array.from(transfersSet):[]}function isTransferable(object){return!!object&&(object instanceof ArrayBuffer||("undefined"!=typeof MessagePort&&object instanceof MessagePort||("undefined"!=typeof ImageBitmap&&object instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&object instanceof OffscreenCanvas)))}const NOOP=()=>{};class WorkerThread{static isSupported(){return"undefined"!=typeof Worker&&globals.jU||void 0!==worker_threads_browser_Worker&&!globals.jU}constructor(props){(0,defineProperty.Z)(this,"name",void 0),(0,defineProperty.Z)(this,"source",void 0),(0,defineProperty.Z)(this,"url",void 0),(0,defineProperty.Z)(this,"terminated",!1),(0,defineProperty.Z)(this,"worker",void 0),(0,defineProperty.Z)(this,"onMessage",void 0),(0,defineProperty.Z)(this,"onError",void 0),(0,defineProperty.Z)(this,"_loadableURL","");const{name:name,source:source,url:url}=props;(0,assert.h)(source||url),this.name=name,this.source=source,this.url=url,this.onMessage=NOOP,this.onError=error=>console.log(error),this.worker=globals.jU?this._createBrowserWorker():this._createNodeWorker()}destroy(){this.onMessage=NOOP,this.onError=NOOP,this.worker.terminate(),this.terminated=!0}get isRunning(){return Boolean(this.onMessage)}postMessage(data,transferList){transferList=transferList||getTransferList(data),this.worker.postMessage(data,transferList)}_getErrorFromErrorEvent(event){let message="Failed to load ";return message+="worker ".concat(this.name," from ").concat(this.url,". "),event.message&&(message+="".concat(event.message," in ")),event.lineno&&(message+=":".concat(event.lineno,":").concat(event.colno)),new Error(message)}_createBrowserWorker(){this._loadableURL=getLoadableWorkerURL({source:this.source,url:this.url});const worker=new Worker(this._loadableURL,{name:this.name});return worker.onmessage=event=>{event.data?this.onMessage(event.data):this.onError(new Error("No data received"))},worker.onerror=error=>{this.onError(this._getErrorFromErrorEvent(error)),this.terminated=!0},worker.onmessageerror=event=>console.error(event),worker}_createNodeWorker(){let worker;if(this.url){const url=this.url.includes(":/")||this.url.startsWith("/")?this.url:"./".concat(this.url);worker=new worker_threads_browser_Worker(url,{eval:!1})}else{if(!this.source)throw new Error("no worker");worker=new worker_threads_browser_Worker(this.source,{eval:!0})}return worker.on("message",(data=>{this.onMessage(data)})),worker.on("error",(error=>{this.onError(error)})),worker.on("exit",(code=>{})),worker}}class WorkerJob{constructor(jobName,workerThread){(0,defineProperty.Z)(this,"name",void 0),(0,defineProperty.Z)(this,"workerThread",void 0),(0,defineProperty.Z)(this,"isRunning",!0),(0,defineProperty.Z)(this,"result",void 0),(0,defineProperty.Z)(this,"_resolve",(()=>{})),(0,defineProperty.Z)(this,"_reject",(()=>{})),this.name=jobName,this.workerThread=workerThread,this.result=new Promise(((resolve,reject)=>{this._resolve=resolve,this._reject=reject}))}postMessage(type,payload){this.workerThread.postMessage({source:"loaders.gl",type:type,payload:payload})}done(value){(0,assert.h)(this.isRunning),this.isRunning=!1,this._resolve(value)}error(error){(0,assert.h)(this.isRunning),this.isRunning=!1,this._reject(error)}}class WorkerPool{static isSupported(){return WorkerThread.isSupported()}constructor(props){(0,defineProperty.Z)(this,"name","unnamed"),(0,defineProperty.Z)(this,"source",void 0),(0,defineProperty.Z)(this,"url",void 0),(0,defineProperty.Z)(this,"maxConcurrency",1),(0,defineProperty.Z)(this,"maxMobileConcurrency",1),(0,defineProperty.Z)(this,"onDebug",(()=>{})),(0,defineProperty.Z)(this,"reuseWorkers",!0),(0,defineProperty.Z)(this,"props",{}),(0,defineProperty.Z)(this,"jobQueue",[]),(0,defineProperty.Z)(this,"idleQueue",[]),(0,defineProperty.Z)(this,"count",0),(0,defineProperty.Z)(this,"isDestroyed",!1),this.source=props.source,this.url=props.url,this.setProps(props)}destroy(){this.idleQueue.forEach((worker=>worker.destroy())),this.isDestroyed=!0}setProps(props){this.props={...this.props,...props},void 0!==props.name&&(this.name=props.name),void 0!==props.maxConcurrency&&(this.maxConcurrency=props.maxConcurrency),void 0!==props.maxMobileConcurrency&&(this.maxMobileConcurrency=props.maxMobileConcurrency),void 0!==props.reuseWorkers&&(this.reuseWorkers=props.reuseWorkers),void 0!==props.onDebug&&(this.onDebug=props.onDebug)}async startJob(name){let onMessage=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(job,type,data)=>job.done(data),onError=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(job,error)=>job.error(error);const startPromise=new Promise((onStart=>(this.jobQueue.push({name:name,onMessage:onMessage,onError:onError,onStart:onStart}),this)));return this._startQueuedJob(),await startPromise}async _startQueuedJob(){if(!this.jobQueue.length)return;const workerThread=this._getAvailableWorker();if(!workerThread)return;const queuedJob=this.jobQueue.shift();if(queuedJob){this.onDebug({message:"Starting job",name:queuedJob.name,workerThread:workerThread,backlog:this.jobQueue.length});const job=new WorkerJob(queuedJob.name,workerThread);workerThread.onMessage=data=>queuedJob.onMessage(job,data.type,data.payload),workerThread.onError=error=>queuedJob.onError(job,error),queuedJob.onStart(job);try{await job.result}finally{this.returnWorkerToQueue(workerThread)}}}returnWorkerToQueue(worker){this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(worker.destroy(),this.count--):this.idleQueue.push(worker),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;const name="".concat(this.name.toLowerCase()," (#").concat(this.count," of ").concat(this.maxConcurrency,")");return new WorkerThread({name:name,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return globals.tq?this.maxMobileConcurrency:this.maxConcurrency}}const DEFAULT_PROPS={maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,onDebug:()=>{}};class WorkerFarm{static isSupported(){return WorkerThread.isSupported()}static getWorkerFarm(){let props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return WorkerFarm._workerFarm=WorkerFarm._workerFarm||new WorkerFarm({}),WorkerFarm._workerFarm.setProps(props),WorkerFarm._workerFarm}constructor(props){(0,defineProperty.Z)(this,"props",void 0),(0,defineProperty.Z)(this,"workerPools",new Map),this.props={...DEFAULT_PROPS},this.setProps(props),this.workerPools=new Map}destroy(){for(const workerPool of this.workerPools.values())workerPool.destroy();this.workerPools=new Map}setProps(props){this.props={...this.props,...props};for(const workerPool of this.workerPools.values())workerPool.setProps(this._getWorkerPoolProps())}getWorkerPool(options){const{name:name,source:source,url:url}=options;let workerPool=this.workerPools.get(name);return workerPool||(workerPool=new WorkerPool({name:name,source:source,url:url}),workerPool.setProps(this._getWorkerPoolProps()),this.workerPools.set(name,workerPool)),workerPool}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}}(0,defineProperty.Z)(WorkerFarm,"_workerFarm",void 0);const NPM_TAG="latest";async function parseWithWorker(loader,data,options,context,parseOnMainThread){const name=loader.id,url=function getWorkerURL(worker){let options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const workerOptions=options[worker.id]||{},workerFile="".concat(worker.id,"-worker.js");let url=workerOptions.workerUrl;if(url||"compression"!==worker.id||(url=options.workerUrl),"test"===options._workerType&&(url="modules/".concat(worker.module,"/dist/").concat(workerFile)),!url){let version=worker.version;"latest"===version&&(version=NPM_TAG);const versionTag=version?"@".concat(version):"";url="https://unpkg.com/@loaders.gl/".concat(worker.module).concat(versionTag,"/dist/").concat(workerFile)}return(0,assert.h)(url),url}(loader,options),workerPool=WorkerFarm.getWorkerFarm(options).getWorkerPool({name:name,url:url});options=JSON.parse(JSON.stringify(options)),context=JSON.parse(JSON.stringify(context||{}));const job=await workerPool.startJob("process-on-worker",onMessage.bind(null,parseOnMainThread));job.postMessage("process",{input:data,options:options,context:context});const result=await job.result;return await result.result}async function onMessage(parseOnMainThread,job,type,payload){switch(type){case"done":job.done(payload);break;case"error":job.error(new Error(payload.error));break;case"process":const{id:id,input:input,options:options}=payload;try{const result=await parseOnMainThread(input,options);job.postMessage("done",{id:id,result:result})}catch(error){const message=error instanceof Error?error.message:"unknown error";job.postMessage("error",{id:id,error:message})}break;default:console.warn("parse-with-worker unknown message ".concat(type))}}var array_buffer_utils=__webpack_require__("./node_modules/@loaders.gl/loader-utils/dist/esm/lib/binary-utils/array-buffer-utils.js");const DEFAULT_CHUNK_SIZE=262144;const make_array_buffer_iterator_DEFAULT_CHUNK_SIZE=262144;const make_blob_iterator_DEFAULT_CHUNK_SIZE=1048576;var env_utils_globals=__webpack_require__("./node_modules/@loaders.gl/loader-utils/dist/esm/lib/env-utils/globals.js");function memory_conversion_utils_toArrayBuffer(data){if(function isBuffer(value){return value&&"object"==typeof value&&value.isBuffer}(data))return data;if(data instanceof ArrayBuffer)return data;if(ArrayBuffer.isView(data))return 0===data.byteOffset&&data.byteLength===data.buffer.byteLength?data.buffer:data.buffer.slice(data.byteOffset,data.byteOffset+data.byteLength);if("string"==typeof data){const text=data;return(new TextEncoder).encode(text).buffer}if(data&&"object"==typeof data&&data._toArrayBuffer)return data._toArrayBuffer();throw new Error("toArrayBuffer")}function makeStreamIterator(stream,options){return env_utils_globals.jU?async function*makeBrowserStreamIterator(stream,options){const reader=stream.getReader();let nextBatchPromise;try{for(;;){const currentBatchPromise=nextBatchPromise||reader.read();null!=options&&options._streamReadAhead&&(nextBatchPromise=reader.read());const{done:done,value:value}=await currentBatchPromise;if(done)return;yield memory_conversion_utils_toArrayBuffer(value)}}catch(error){reader.releaseLock()}}(stream,options):async function*makeNodeStreamIterator(stream,options){for await(const chunk of stream)yield memory_conversion_utils_toArrayBuffer(chunk)}(stream)}function make_iterator_makeIterator(data,options){if("string"==typeof data)return function*makeStringIterator(string,options){const chunkSize=(null==options?void 0:options.chunkSize)||DEFAULT_CHUNK_SIZE;let offset=0;const textEncoder=new TextEncoder;for(;offset<string.length;){const chunkLength=Math.min(string.length-offset,chunkSize),chunk=string.slice(offset,offset+chunkLength);offset+=chunkLength,yield textEncoder.encode(chunk)}}(data,options);if(data instanceof ArrayBuffer)return function makeArrayBufferIterator(arrayBuffer){let options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function*(){const{chunkSize:chunkSize=make_array_buffer_iterator_DEFAULT_CHUNK_SIZE}=options;let byteOffset=0;for(;byteOffset<arrayBuffer.byteLength;){const chunkByteLength=Math.min(arrayBuffer.byteLength-byteOffset,chunkSize),chunk=new ArrayBuffer(chunkByteLength),sourceArray=new Uint8Array(arrayBuffer,byteOffset,chunkByteLength);new Uint8Array(chunk).set(sourceArray),byteOffset+=chunkByteLength,yield chunk}}()}(data,options);if((0,is_type.Lj)(data))return async function*makeBlobIterator(blob,options){const chunkSize=(null==options?void 0:options.chunkSize)||make_blob_iterator_DEFAULT_CHUNK_SIZE;let offset=0;for(;offset<blob.size;){const end=offset+chunkSize,chunk=await blob.slice(offset,end).arrayBuffer();offset=end,yield chunk}}(data,options);if((0,is_type.Os)(data))return makeStreamIterator(data,options);if((0,is_type.Ew)(data)){return makeStreamIterator(data.body,options)}throw new Error("makeIterator")}const ERR_DATA="Cannot convert supplied data type";async function getArrayBufferOrStringFromData(data,loader,options){const isArrayBuffer=data instanceof ArrayBuffer||ArrayBuffer.isView(data);if("string"==typeof data||isArrayBuffer)return function getArrayBufferOrStringFromDataSync(data,loader,options){if(loader.text&&"string"==typeof data)return data;if((0,is_type.zH)(data)&&(data=data.buffer),data instanceof ArrayBuffer){const arrayBuffer=data;return loader.text&&!loader.binary?new TextDecoder("utf8").decode(arrayBuffer):arrayBuffer}if(ArrayBuffer.isView(data)){if(loader.text&&!loader.binary)return new TextDecoder("utf8").decode(data);let arrayBuffer=data.buffer;const byteLength=data.byteLength||data.length;return 0===data.byteOffset&&byteLength===arrayBuffer.byteLength||(arrayBuffer=arrayBuffer.slice(data.byteOffset,data.byteOffset+byteLength)),arrayBuffer}throw new Error(ERR_DATA)}(data,loader);if((0,is_type.Lj)(data)&&(data=await response_utils_makeResponse(data)),(0,is_type.Ew)(data)){const response=data;return await async function response_utils_checkResponse(response){if(!response.ok){const message=await async function getResponseError(response){let message="Failed to fetch resource ".concat(response.url," (").concat(response.status,"): ");try{const contentType=response.headers.get("Content-Type");let text=response.statusText;contentType.includes("application/json")&&(text+=" ".concat(await response.text())),message+=text,message=message.length>60?"".concat(message.slice(0,60),"..."):message}catch(error){}return message}(response);throw new Error(message)}}(response),loader.binary?await response.arrayBuffer():await response.text()}if((0,is_type.Os)(data)&&(data=make_iterator_makeIterator(data,options)),(0,is_type.TW)(data)||(0,is_type.D0)(data))return async function concatenateArrayBuffersAsync(asyncIterator){const arrayBuffers=[];for await(const chunk of asyncIterator)arrayBuffers.push(chunk);return(0,array_buffer_utils.JY)(...arrayBuffers)}(data);throw new Error(ERR_DATA)}var path=__webpack_require__("./node_modules/@loaders.gl/loader-utils/dist/esm/lib/path-utils/path.js");function getLoaderContext(context,options,parentContext){if(parentContext)return parentContext;const newContext={fetch:getFetchFunction(options,context),...context};if(newContext.url){const baseUrl=stripQueryString(newContext.url);newContext.baseUrl=baseUrl,newContext.queryString=function extractQueryString(url){const matches=url.match(QUERY_STRING_PATTERN);return matches&&matches[0]}(newContext.url),newContext.filename=path.vB(baseUrl),newContext.baseUrl=path.XX(baseUrl)}return Array.isArray(newContext.loaders)||(newContext.loaders=null),newContext}const log_log=new(__webpack_require__("./node_modules/@loaders.gl/core/node_modules/@probe.gl/log/dist/log.js").Z)({id:"loaders.gl"});var register_loaders=__webpack_require__("./node_modules/@loaders.gl/core/dist/esm/lib/api/register-loaders.js");const EXT_PATTERN=/\.([^.]+)$/;function selectLoaderSync(data){let loaders=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],options=arguments.length>2?arguments[2]:void 0,context=arguments.length>3?arguments[3]:void 0;if(!validHTTPResponse(data))return null;if(loaders&&!Array.isArray(loaders))return(0,normalize_loader.T)(loaders);let candidateLoaders=[];loaders&&(candidateLoaders=candidateLoaders.concat(loaders)),null!=options&&options.ignoreRegisteredLoaders||candidateLoaders.push(...(0,register_loaders.kO)()),function normalizeLoaders(loaders){for(const loader of loaders)(0,normalize_loader.T)(loader)}(candidateLoaders);const loader=function selectLoaderInternal(data,loaders,options,context){const url=getResourceUrl(data),type=getResourceMIMEType(data),testUrl=stripQueryString(url)||(null==context?void 0:context.url);let loader=null,reason="";null!=options&&options.mimeType&&(loader=findLoaderByMIMEType(loaders,null==options?void 0:options.mimeType),reason="match forced by supplied MIME type ".concat(null==options?void 0:options.mimeType));var _loader;loader=loader||function findLoaderByUrl(loaders,url){const match=url&&EXT_PATTERN.exec(url),extension=match&&match[1];return extension?function findLoaderByExtension(loaders,extension){extension=extension.toLowerCase();for(const loader of loaders)for(const loaderExtension of loader.extensions)if(loaderExtension.toLowerCase()===extension)return loader;return null}(loaders,extension):null}(loaders,testUrl),reason=reason||(loader?"matched url ".concat(testUrl):""),loader=loader||findLoaderByMIMEType(loaders,type),reason=reason||(loader?"matched MIME type ".concat(type):""),loader=loader||function findLoaderByInitialBytes(loaders,data){if(!data)return null;for(const loader of loaders)if("string"==typeof data){if(testDataAgainstText(data,loader))return loader}else if(ArrayBuffer.isView(data)){if(testDataAgainstBinary(data.buffer,data.byteOffset,loader))return loader}else if(data instanceof ArrayBuffer){if(testDataAgainstBinary(data,0,loader))return loader}return null}(loaders,data),reason=reason||(loader?"matched initial data ".concat(getFirstCharacters(data)):""),loader=loader||findLoaderByMIMEType(loaders,null==options?void 0:options.fallbackMimeType),reason=reason||(loader?"matched fallback MIME type ".concat(type):""),reason&&log_log.log(1,"selectLoader selected ".concat(null===(_loader=loader)||void 0===_loader?void 0:_loader.name,": ").concat(reason,"."));return loader}(data,candidateLoaders,options,context);if(!(loader||null!=options&&options.nothrow))throw new Error(getNoValidLoaderMessage(data));return loader}function validHTTPResponse(data){return!(data instanceof Response&&204===data.status)}function getNoValidLoaderMessage(data){const url=getResourceUrl(data),type=getResourceMIMEType(data);let message="No valid loader found (";message+=url?"".concat(path.vB(url),", "):"no url provided, ",message+="MIME type: ".concat(type?'"'.concat(type,'"'):"not provided",", ");const firstCharacters=data?getFirstCharacters(data):"";return message+=firstCharacters?' first bytes: "'.concat(firstCharacters,'"'):"first bytes: not available",message+=")",message}function findLoaderByMIMEType(loaders,mimeType){for(const loader of loaders){if(loader.mimeTypes&&loader.mimeTypes.includes(mimeType))return loader;if(mimeType==="application/x.".concat(loader.id))return loader}return null}function testDataAgainstText(data,loader){if(loader.testText)return loader.testText(data);return(Array.isArray(loader.tests)?loader.tests:[loader.tests]).some((test=>data.startsWith(test)))}function testDataAgainstBinary(data,byteOffset,loader){return(Array.isArray(loader.tests)?loader.tests:[loader.tests]).some((test=>function testBinary(data,byteOffset,loader,test){if(test instanceof ArrayBuffer)return(0,array_buffer_utils.Xq)(test,data,test.byteLength);switch(typeof test){case"function":return test(data,loader);case"string":return test===getMagicString(data,byteOffset,test.length);default:return!1}}(data,byteOffset,loader,test)))}function getFirstCharacters(data){let length=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;if("string"==typeof data)return data.slice(0,length);if(ArrayBuffer.isView(data))return getMagicString(data.buffer,data.byteOffset,length);if(data instanceof ArrayBuffer){return getMagicString(data,0,length)}return""}function getMagicString(arrayBuffer,byteOffset,length){if(arrayBuffer.byteLength<byteOffset+length)return"";const dataView=new DataView(arrayBuffer);let magic="";for(let i=0;i<length;i++)magic+=String.fromCharCode(dataView.getUint8(byteOffset+i));return magic}async function parse(data,loaders,options,context){(0,assert.h)(!context||"object"==typeof context),!loaders||Array.isArray(loaders)||(0,normalize_loader.C)(loaders)||(context=void 0,options=loaders,loaders=void 0),options=options||{};const url=getResourceUrl(data=await data),candidateLoaders=function getLoadersFromContext(loaders,context){if(!context&&loaders&&!Array.isArray(loaders))return loaders;let candidateLoaders;if(loaders&&(candidateLoaders=Array.isArray(loaders)?loaders:[loaders]),context&&context.loaders){const contextLoaders=Array.isArray(context.loaders)?context.loaders:[context.loaders];candidateLoaders=candidateLoaders?[...candidateLoaders,...contextLoaders]:contextLoaders}return candidateLoaders&&candidateLoaders.length?candidateLoaders:null}(loaders,context),loader=await async function selectLoader(data){let loaders=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],options=arguments.length>2?arguments[2]:void 0,context=arguments.length>3?arguments[3]:void 0;if(!validHTTPResponse(data))return null;let loader=selectLoaderSync(data,loaders,{...options,nothrow:!0},context);if(loader)return loader;if((0,is_type.Lj)(data)&&(loader=selectLoaderSync(data=await data.slice(0,10).arrayBuffer(),loaders,options,context)),!(loader||null!=options&&options.nothrow))throw new Error(getNoValidLoaderMessage(data));return loader}(data,candidateLoaders,options);return loader?(context=getLoaderContext({url:url,parse:parse,loaders:candidateLoaders},options=(0,option_utils.GR)(options,loader,candidateLoaders,url),context||null),await async function parseWithLoader(loader,data,options,context){if(function validateWorkerVersion(worker){let coreVersion=arguments.length>1&&void 0!==arguments[1]?arguments[1]:VERSION;(0,assert.h)(worker,"no worker provided");const workerVersion=worker.version;return!(!coreVersion||!workerVersion)}(loader),(0,is_type.Ew)(data)){const response=data,{ok:ok,redirected:redirected,status:status,statusText:statusText,type:type,url:url}=response,headers=Object.fromEntries(response.headers.entries());context.response={headers:headers,ok:ok,redirected:redirected,status:status,statusText:statusText,type:type,url:url}}if(data=await getArrayBufferOrStringFromData(data,loader,options),loader.parseTextSync&&"string"==typeof data)return options.dataType="text",loader.parseTextSync(data,options,context,loader);if(function canParseWithWorker(loader,options){return!!WorkerFarm.isSupported()&&!!(globals.jU||null!=options&&options._nodeWorkers)&&loader.worker&&(null==options?void 0:options.worker)}(loader,options))return await parseWithWorker(loader,data,options,context,parse);if(loader.parseText&&"string"==typeof data)return await loader.parseText(data,options,context,loader);if(loader.parse)return await loader.parse(data,options,context,loader);throw(0,assert.h)(!loader.parseSync),new Error("".concat(loader.id," loader - no parser found and worker is disabled"))}(loader,data,options,context)):null}async function load(url,loaders,options,context){Array.isArray(loaders)||(0,normalize_loader.C)(loaders)||(void 0,options=loaders,loaders=void 0);const fetch=getFetchFunction(options);let data=url;return"string"==typeof url&&(data=await fetch(url)),(0,is_type.Lj)(url)&&(data=await fetch(url)),await parse(data,loaders,options)}},"./node_modules/@loaders.gl/core/dist/esm/lib/api/register-loaders.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{fh:function(){return registerLoaders},kO:function(){return getRegisteredLoaders}});var _loader_utils_normalize_loader__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@loaders.gl/core/dist/esm/lib/loader-utils/normalize-loader.js"),_loader_utils_option_utils__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@loaders.gl/core/dist/esm/lib/loader-utils/option-utils.js");const getGlobalLoaderRegistry=()=>{const state=(0,_loader_utils_option_utils__WEBPACK_IMPORTED_MODULE_0__.rx)();return state.loaderRegistry=state.loaderRegistry||[],state.loaderRegistry};function registerLoaders(loaders){const loaderRegistry=getGlobalLoaderRegistry();loaders=Array.isArray(loaders)?loaders:[loaders];for(const loader of loaders){const normalizedLoader=(0,_loader_utils_normalize_loader__WEBPACK_IMPORTED_MODULE_1__.T)(loader);loaderRegistry.find((registeredLoader=>normalizedLoader===registeredLoader))||loaderRegistry.unshift(normalizedLoader)}}function getRegisteredLoaders(){return getGlobalLoaderRegistry()}},"./node_modules/@loaders.gl/core/dist/esm/lib/loader-utils/normalize-loader.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{C:function(){return isLoaderObject},T:function(){return normalizeLoader}});var _loaders_gl_loader_utils__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@loaders.gl/loader-utils/dist/esm/lib/env-utils/assert.js");function isLoaderObject(loader){var _loader;if(!loader)return!1;Array.isArray(loader)&&(loader=loader[0]);return Array.isArray(null===(_loader=loader)||void 0===_loader?void 0:_loader.extensions)}function normalizeLoader(loader){var _loader2,_loader3;let options;return(0,_loaders_gl_loader_utils__WEBPACK_IMPORTED_MODULE_0__.h)(loader,"null loader"),(0,_loaders_gl_loader_utils__WEBPACK_IMPORTED_MODULE_0__.h)(isLoaderObject(loader),"invalid loader"),Array.isArray(loader)&&(options=loader[1],loader=loader[0],loader={...loader,options:{...loader.options,...options}}),(null!==(_loader2=loader)&&void 0!==_loader2&&_loader2.parseTextSync||null!==(_loader3=loader)&&void 0!==_loader3&&_loader3.parseText)&&(loader.text=!0),loader.text||(loader.binary=!0),loader}},"./node_modules/@loaders.gl/core/dist/esm/lib/loader-utils/option-utils.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{pm:function(){return getGlobalLoaderOptions},rx:function(){return getGlobalLoaderState},GR:function(){return normalizeOptions}});var is_type=__webpack_require__("./node_modules/@loaders.gl/core/dist/esm/javascript-utils/is-type.js"),defineProperty=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js");const probeLog=new(__webpack_require__("./node_modules/@loaders.gl/core/node_modules/@probe.gl/log/dist/log.js").Z)({id:"loaders.gl"});class NullLog{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}}var globals=__webpack_require__("./node_modules/@loaders.gl/loader-utils/dist/esm/lib/env-utils/globals.js");const DEFAULT_LOADER_OPTIONS={fetch:null,mimeType:void 0,nothrow:!1,log:new class ConsoleLog{constructor(){(0,defineProperty.Z)(this,"console",void 0),this.console=console}log(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return this.console.log.bind(this.console,...args)}info(){for(var _len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++)args[_key2]=arguments[_key2];return this.console.info.bind(this.console,...args)}warn(){for(var _len3=arguments.length,args=new Array(_len3),_key3=0;_key3<_len3;_key3++)args[_key3]=arguments[_key3];return this.console.warn.bind(this.console,...args)}error(){for(var _len4=arguments.length,args=new Array(_len4),_key4=0;_key4<_len4;_key4++)args[_key4]=arguments[_key4];return this.console.error.bind(this.console,...args)}},CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:globals.jU,_nodeWorkers:!1,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]},REMOVED_LOADER_OPTIONS={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function getGlobalLoaderState(){globalThis.loaders=globalThis.loaders||{};const{loaders:loaders}=globalThis;return loaders._state=loaders._state||{},loaders._state}const getGlobalLoaderOptions=()=>{const state=getGlobalLoaderState();return state.globalOptions=state.globalOptions||{...DEFAULT_LOADER_OPTIONS},state.globalOptions};function normalizeOptions(options,loader,loaders,url){return loaders=loaders||[],function validateOptions(options,loaders){validateOptionsObject(options,null,DEFAULT_LOADER_OPTIONS,REMOVED_LOADER_OPTIONS,loaders);for(const loader of loaders){const idOptions=options&&options[loader.id]||{},loaderOptions=loader.options&&loader.options[loader.id]||{},deprecatedOptions=loader.deprecatedOptions&&loader.deprecatedOptions[loader.id]||{};validateOptionsObject(idOptions,loader.id,loaderOptions,deprecatedOptions,loaders)}}(options,loaders=Array.isArray(loaders)?loaders:[loaders]),normalizeOptionsInternal(loader,options,url)}function validateOptionsObject(options,id,defaultOptions,deprecatedOptions,loaders){const loaderName=id||"Top level",prefix=id?"".concat(id,"."):"";for(const key in options){const isSubOptions=!id&&(0,is_type.Kn)(options[key]);if(!(key in defaultOptions)&&!("baseUri"===key&&!id)&&!("workerUrl"===key&&id))if(key in deprecatedOptions)probeLog.warn("".concat(loaderName," loader option '").concat(prefix).concat(key,"' no longer supported, use '").concat(deprecatedOptions[key],"'"))();else if(!isSubOptions){const suggestion=findSimilarOption(key,loaders);probeLog.warn("".concat(loaderName," loader option '").concat(prefix).concat(key,"' not recognized. ").concat(suggestion))()}}}function findSimilarOption(optionKey,loaders){const lowerCaseOptionKey=optionKey.toLowerCase();let bestSuggestion="";for(const loader of loaders)for(const key in loader.options){if(optionKey===key)return"Did you mean '".concat(loader.id,".").concat(key,"'?");const lowerCaseKey=key.toLowerCase();(lowerCaseOptionKey.startsWith(lowerCaseKey)||lowerCaseKey.startsWith(lowerCaseOptionKey))&&(bestSuggestion=bestSuggestion||"Did you mean '".concat(loader.id,".").concat(key,"'?"))}return bestSuggestion}function normalizeOptionsInternal(loader,options,url){const mergedOptions={...loader.options||{}};return function addUrlOptions(options,url){url&&!("baseUri"in options)&&(options.baseUri=url)}(mergedOptions,url),null===mergedOptions.log&&(mergedOptions.log=new NullLog),mergeNestedFields(mergedOptions,getGlobalLoaderOptions()),mergeNestedFields(mergedOptions,options),mergedOptions}function mergeNestedFields(mergedOptions,options){for(const key in options)if(key in options){const value=options[key];(0,is_type.Ss)(value)&&(0,is_type.Ss)(mergedOptions[key])?mergedOptions[key]={...mergedOptions[key],...options[key]}:mergedOptions[key]=options[key]}}},"./node_modules/@loaders.gl/core/node_modules/@probe.gl/log/dist/log.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return Log}});var process=__webpack_require__("./node_modules/process/browser.js");var is_browser_process=__webpack_require__("./node_modules/process/browser.js");function isBrowser(){return!("object"==typeof is_browser_process&&"[object process]"===String(is_browser_process)&&!is_browser_process.browser)||function isElectron(mockUserAgent){if("undefined"!=typeof window&&"object"==typeof window.process&&"renderer"===window.process.type)return!0;if(void 0!==process&&"object"==typeof process.versions&&Boolean(process.versions.electron))return!0;const realUserAgent="object"==typeof navigator&&"string"==typeof navigator.userAgent&&navigator.userAgent,userAgent=mockUserAgent||realUserAgent;return!!(userAgent&&userAgent.indexOf("Electron")>=0)}()}const VERSION="undefined"!=typeof __VERSION__?__VERSION__:"untranspiled source";isBrowser();class LocalStorage{constructor(id,defaultConfig){let type=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sessionStorage";this.storage=void 0,this.id=void 0,this.config=void 0,this.storage=function getStorage(type){try{const storage=window[type],x="__storage_test__";return storage.setItem(x,x),storage.removeItem(x),storage}catch(e){return null}}(type),this.id=id,this.config=defaultConfig,this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(configuration){if(Object.assign(this.config,configuration),this.storage){const serialized=JSON.stringify(this.config);this.storage.setItem(this.id,serialized)}}_loadConfiguration(){let configuration={};if(this.storage){const serializedConfiguration=this.storage.getItem(this.id);configuration=serializedConfiguration?JSON.parse(serializedConfiguration):{}}return Object.assign(this.config,configuration),this}}function formatImage(image,message,scale){let maxWidth=arguments.length>3&&void 0!==arguments[3]?arguments[3]:600;const imageUrl=image.src.replace(/\(/g,"%28").replace(/\)/g,"%29");image.width>maxWidth&&(scale=Math.min(scale,maxWidth/image.width));const width=image.width*scale,height=image.height*scale,style=["font-size:1px;","padding:".concat(Math.floor(height/2),"px ").concat(Math.floor(width/2),"px;"),"line-height:".concat(height,"px;"),"background:url(".concat(imageUrl,");"),"background-size:".concat(width,"px ").concat(height,"px;"),"color:transparent;"].join("");return["".concat(message," %c+"),style]}let COLOR;!function(COLOR){COLOR[COLOR.BLACK=30]="BLACK",COLOR[COLOR.RED=31]="RED",COLOR[COLOR.GREEN=32]="GREEN",COLOR[COLOR.YELLOW=33]="YELLOW",COLOR[COLOR.BLUE=34]="BLUE",COLOR[COLOR.MAGENTA=35]="MAGENTA",COLOR[COLOR.CYAN=36]="CYAN",COLOR[COLOR.WHITE=37]="WHITE",COLOR[COLOR.BRIGHT_BLACK=90]="BRIGHT_BLACK",COLOR[COLOR.BRIGHT_RED=91]="BRIGHT_RED",COLOR[COLOR.BRIGHT_GREEN=92]="BRIGHT_GREEN",COLOR[COLOR.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",COLOR[COLOR.BRIGHT_BLUE=94]="BRIGHT_BLUE",COLOR[COLOR.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",COLOR[COLOR.BRIGHT_CYAN=96]="BRIGHT_CYAN",COLOR[COLOR.BRIGHT_WHITE=97]="BRIGHT_WHITE"}(COLOR||(COLOR={}));const BACKGROUND_INCREMENT=10;function getColor(color){return"string"!=typeof color?color:(color=color.toUpperCase(),COLOR[color]||COLOR.WHITE)}function assert(condition,message){if(!condition)throw new Error(message||"Assertion failed")}globalThis.self||globalThis.window||globalThis.global;const window_=globalThis.window||globalThis.self||globalThis.global,process_=(globalThis.document,globalThis.process||{});globalThis.console,globalThis.navigator;function getHiResTimestamp(){let timestamp;var _window$performance,_window$performance$n;if(isBrowser()&&window_.performance)timestamp=null==window_||null===(_window$performance=window_.performance)||void 0===_window$performance||null===(_window$performance$n=_window$performance.now)||void 0===_window$performance$n?void 0:_window$performance$n.call(_window$performance);else if("hrtime"in process_){var _process$hrtime;const timeParts=null==process_||null===(_process$hrtime=process_.hrtime)||void 0===_process$hrtime?void 0:_process$hrtime.call(process_);timestamp=1e3*timeParts[0]+timeParts[1]/1e6}else timestamp=Date.now();return timestamp}const originalConsole={debug:isBrowser()&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},DEFAULT_LOG_CONFIGURATION={enabled:!0,level:0};function noop(){}const cache={},ONCE={once:!0};class Log{constructor(){let{id:id}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:""};this.id=void 0,this.VERSION=VERSION,this._startTs=getHiResTimestamp(),this._deltaTs=getHiResTimestamp(),this._storage=void 0,this.userData={},this.LOG_THROTTLE_TIMEOUT=0,this.id=id,this.userData={},this._storage=new LocalStorage("__probe-".concat(this.id,"__"),DEFAULT_LOG_CONFIGURATION),this.timeStamp("".concat(this.id," started")),function autobind(obj){let predefined=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["constructor"];const proto=Object.getPrototypeOf(obj),propNames=Object.getOwnPropertyNames(proto),object=obj;for(const key of propNames){const value=object[key];"function"==typeof value&&(predefined.find((name=>key===name))||(object[key]=value.bind(obj)))}}(this),Object.seal(this)}set level(newLevel){this.setLevel(newLevel)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((getHiResTimestamp()-this._startTs).toPrecision(10))}getDelta(){return Number((getHiResTimestamp()-this._deltaTs).toPrecision(10))}set priority(newPriority){this.level=newPriority}get priority(){return this.level}getPriority(){return this.level}enable(){let enabled=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._storage.setConfiguration({enabled:enabled}),this}setLevel(level){return this._storage.setConfiguration({level:level}),this}get(setting){return this._storage.config[setting]}set(setting,value){this._storage.setConfiguration({[setting]:value})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(condition,message){assert(condition,message)}warn(message){return this._getLogFunction(0,message,originalConsole.warn,arguments,ONCE)}error(message){return this._getLogFunction(0,message,originalConsole.error,arguments)}deprecated(oldUsage,newUsage){return this.warn("`".concat(oldUsage,"` is deprecated and will be removed in a later version. Use `").concat(newUsage,"` instead"))}removed(oldUsage,newUsage){return this.error("`".concat(oldUsage,"` has been removed. Use `").concat(newUsage,"` instead"))}probe(logLevel,message){return this._getLogFunction(logLevel,message,originalConsole.log,arguments,{time:!0,once:!0})}log(logLevel,message){return this._getLogFunction(logLevel,message,originalConsole.debug,arguments)}info(logLevel,message){return this._getLogFunction(logLevel,message,console.info,arguments)}once(logLevel,message){return this._getLogFunction(logLevel,message,originalConsole.debug||originalConsole.info,arguments,ONCE)}table(logLevel,table,columns){return table?this._getLogFunction(logLevel,table,console.table||noop,columns&&[columns],{tag:getTableHeader(table)}):noop}image(_ref){let{logLevel:logLevel,priority:priority,image:image,message:message="",scale:scale=1}=_ref;return this._shouldLog(logLevel||priority)?isBrowser()?function logImageInBrowser(_ref3){let{image:image,message:message="",scale:scale=1}=_ref3;if("string"==typeof image){const img=new Image;return img.onload=()=>{const args=formatImage(img,message,scale);console.log(...args)},img.src=image,noop}const element=image.nodeName||"";if("img"===element.toLowerCase())return console.log(...formatImage(image,message,scale)),noop;if("canvas"===element.toLowerCase()){const img=new Image;return img.onload=()=>console.log(...formatImage(img,message,scale)),img.src=image.toDataURL(),noop}return noop}({image:image,message:message,scale:scale}):function logImageInNode(_ref2){let{image:image,message:message="",scale:scale=1}=_ref2;return console.warn("removed"),noop}({image:image,message:message,scale:scale}):noop}time(logLevel,message){return this._getLogFunction(logLevel,message,console.time?console.time:console.info)}timeEnd(logLevel,message){return this._getLogFunction(logLevel,message,console.timeEnd?console.timeEnd:console.info)}timeStamp(logLevel,message){return this._getLogFunction(logLevel,message,console.timeStamp||noop)}group(logLevel,message){let opts=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{collapsed:!1};const options=normalizeArguments({logLevel:logLevel,message:message,opts:opts}),{collapsed:collapsed}=opts;return options.method=(collapsed?console.groupCollapsed:console.group)||console.info,this._getLogFunction(options)}groupCollapsed(logLevel,message){let opts=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.group(logLevel,message,Object.assign({},opts,{collapsed:!0}))}groupEnd(logLevel){return this._getLogFunction(logLevel,"",console.groupEnd||noop)}withGroup(logLevel,message,func){this.group(logLevel,message)();try{func()}finally{this.groupEnd(logLevel)()}}trace(){console.trace&&console.trace()}_shouldLog(logLevel){return this.isEnabled()&&this.getLevel()>=normalizeLogLevel(logLevel)}_getLogFunction(logLevel,message,method,args,opts){if(this._shouldLog(logLevel)){opts=normalizeArguments({logLevel:logLevel,message:message,args:args,opts:opts}),assert(method=method||opts.method),opts.total=this.getTotal(),opts.delta=this.getDelta(),this._deltaTs=getHiResTimestamp();const tag=opts.tag||opts.message;if(opts.once&&tag){if(cache[tag])return noop;cache[tag]=getHiResTimestamp()}return message=function decorateMessage(id,message,opts){if("string"==typeof message){const time=opts.time?function leftPad(string){let length=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8;const padLength=Math.max(length-string.length,0);return"".concat(" ".repeat(padLength)).concat(string)}(function formatTime(ms){let formatted;return formatted=ms<10?"".concat(ms.toFixed(2),"ms"):ms<100?"".concat(ms.toFixed(1),"ms"):ms<1e3?"".concat(ms.toFixed(0),"ms"):"".concat((ms/1e3).toFixed(2),"s"),formatted}(opts.total)):"";message=function addColor(string,color,background){if(!isBrowser&&"string"==typeof string){if(color){const colorCode=getColor(color);string="[".concat(colorCode,"m").concat(string,"[39m")}if(background){const colorCode=getColor(background);string="[".concat(colorCode+BACKGROUND_INCREMENT,"m").concat(string,"[49m")}}return string}(message=opts.time?"".concat(id,": ").concat(time,"  ").concat(message):"".concat(id,": ").concat(message),opts.color,opts.background)}return message}(this.id,opts.message,opts),method.bind(console,message,...opts.args)}return noop}}function normalizeLogLevel(logLevel){if(!logLevel)return 0;let resolvedLevel;switch(typeof logLevel){case"number":resolvedLevel=logLevel;break;case"object":resolvedLevel=logLevel.logLevel||logLevel.priority||0;break;default:return 0}return assert(Number.isFinite(resolvedLevel)&&resolvedLevel>=0),resolvedLevel}function normalizeArguments(opts){const{logLevel:logLevel,message:message}=opts;opts.logLevel=normalizeLogLevel(logLevel);const args=opts.args?Array.from(opts.args):[];for(;args.length&&args.shift()!==message;);switch(typeof logLevel){case"string":case"function":void 0!==message&&args.unshift(message),opts.message=logLevel;break;case"object":Object.assign(opts,logLevel)}"function"==typeof opts.message&&(opts.message=opts.message());const messageType=typeof opts.message;return assert("string"===messageType||"object"===messageType),Object.assign(opts,{args:args},opts.opts)}function getTableHeader(table){for(const key in table)for(const title in table[key])return title||"untitled";return"empty"}Log.VERSION=VERSION},"./node_modules/@loaders.gl/images/dist/esm/image-loader.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{S:function(){return ImageLoader}});var assert=__webpack_require__("./node_modules/@loaders.gl/loader-utils/dist/esm/lib/env-utils/assert.js"),globals=__webpack_require__("./node_modules/@loaders.gl/loader-utils/dist/esm/lib/env-utils/globals.js");const{_parseImageNode:_parseImageNode}=globalThis,IMAGE_SUPPORTED="undefined"!=typeof Image,IMAGE_BITMAP_SUPPORTED="undefined"!=typeof ImageBitmap,NODE_IMAGE_SUPPORTED=Boolean(_parseImageNode),DATA_SUPPORTED=!!globals.jU||NODE_IMAGE_SUPPORTED;function getImageType(image){const format=getImageTypeOrNull(image);if(!format)throw new Error("Not an image");return format}function getImageData(image){switch(getImageType(image)){case"data":return image;case"image":case"imagebitmap":const canvas=document.createElement("canvas"),context=canvas.getContext("2d");if(!context)throw new Error("getImageData");return canvas.width=image.width,canvas.height=image.height,context.drawImage(image,0,0),context.getImageData(0,0,image.width,image.height);default:throw new Error("getImageData")}}function getImageTypeOrNull(image){return"undefined"!=typeof ImageBitmap&&image instanceof ImageBitmap?"imagebitmap":"undefined"!=typeof Image&&image instanceof Image?"image":image&&"object"==typeof image&&image.data&&image.width&&image.height?"data":null}const SVG_DATA_URL_PATTERN=/^data:image\/svg\+xml/,SVG_URL_PATTERN=/\.svg((\?|#).*)?$/;function isSVG(url){return url&&(SVG_DATA_URL_PATTERN.test(url)||SVG_URL_PATTERN.test(url))}function getBlob(arrayBuffer,url){if(isSVG(url))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(arrayBuffer)])}async function parseToImage(arrayBuffer,options,url){const blobOrDataUrl=function getBlobOrSVGDataUrl(arrayBuffer,url){if(isSVG(url)){let xmlText=(new TextDecoder).decode(arrayBuffer);try{"function"==typeof unescape&&"function"==typeof encodeURIComponent&&(xmlText=unescape(encodeURIComponent(xmlText)))}catch(error){throw new Error(error.message)}return"data:image/svg+xml;base64,".concat(btoa(xmlText))}return getBlob(arrayBuffer,url)}(arrayBuffer,url),URL=self.URL||self.webkitURL,objectUrl="string"!=typeof blobOrDataUrl&&URL.createObjectURL(blobOrDataUrl);try{return await async function loadToImage(url,options){const image=new Image;if(image.src=url,options.image&&options.image.decode&&image.decode)return await image.decode(),image;return await new Promise(((resolve,reject)=>{try{image.onload=()=>resolve(image),image.onerror=err=>reject(new Error("Could not load image ".concat(url,": ").concat(err)))}catch(error){reject(error)}}))}(objectUrl||blobOrDataUrl,options)}finally{objectUrl&&URL.revokeObjectURL(objectUrl)}}const EMPTY_OBJECT={};let imagebitmapOptionsSupported=!0;async function parseToImageBitmap(arrayBuffer,options,url){let blob;if(isSVG(url)){blob=await parseToImage(arrayBuffer,options,url)}else blob=getBlob(arrayBuffer,url);const imagebitmapOptions=options&&options.imagebitmap;return await async function safeCreateImageBitmap(blob){let imagebitmapOptions=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;!function isEmptyObject(object){for(const key in object||EMPTY_OBJECT)return!1;return!0}(imagebitmapOptions)&&imagebitmapOptionsSupported||(imagebitmapOptions=null);if(imagebitmapOptions)try{return await createImageBitmap(blob,imagebitmapOptions)}catch(error){console.warn(error),imagebitmapOptionsSupported=!1}return await createImageBitmap(blob)}(blob,imagebitmapOptions)}var binary_image_api=__webpack_require__("./node_modules/@loaders.gl/images/dist/esm/lib/category-api/binary-image-api.js");const ImageLoader={id:"image",module:"images",name:"Images",version:"3.4.14",mimeTypes:["image/png","image/jpeg","image/gif","image/webp","image/avif","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],extensions:["png","jpg","jpeg","gif","webp","bmp","ico","svg","avif"],parse:async function parseImage(arrayBuffer,options,context){const imageType=((options=options||{}).image||{}).type||"auto",{url:url}=context||{};let image;switch(function getLoadableImageType(type){switch(type){case"auto":case"data":return function getDefaultImageType(){if(IMAGE_BITMAP_SUPPORTED)return"imagebitmap";if(IMAGE_SUPPORTED)return"image";if(DATA_SUPPORTED)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}();default:return function isImageTypeSupported(type){switch(type){case"auto":return IMAGE_BITMAP_SUPPORTED||IMAGE_SUPPORTED||DATA_SUPPORTED;case"imagebitmap":return IMAGE_BITMAP_SUPPORTED;case"image":return IMAGE_SUPPORTED;case"data":return DATA_SUPPORTED;default:throw new Error("@loaders.gl/images: image ".concat(type," not supported in this environment"))}}(type),type}}(imageType)){case"imagebitmap":image=await parseToImageBitmap(arrayBuffer,options,url);break;case"image":image=await parseToImage(arrayBuffer,options,url);break;case"data":image=await async function parseToNodeImage(arrayBuffer,options){const{mimeType:mimeType}=(0,binary_image_api.I)(arrayBuffer)||{},_parseImageNode=globalThis._parseImageNode;return(0,assert.h)(_parseImageNode),await _parseImageNode(arrayBuffer,mimeType)}(arrayBuffer);break;default:(0,assert.h)(!1)}return"data"===imageType&&(image=getImageData(image)),image},tests:[arrayBuffer=>Boolean((0,binary_image_api.I)(new DataView(arrayBuffer)))],options:{image:{type:"auto",decode:!0}}}},"./node_modules/@loaders.gl/images/dist/esm/lib/category-api/binary-image-api.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";function getISOBMFFMediaType(buffer){return function checkString(buffer,header){let offset=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const headerBytes=function stringToBytes(string){return[...string].map((character=>character.charCodeAt(0)))}(header);for(let i=0;i<headerBytes.length;++i)if(headerBytes[i]!==buffer[i+offset])return!1;return!0}(buffer,"ftyp",4)?0==(96&buffer[8])?null:function decodeMajorBrand(buffer){switch(function getUTF8String(array,start,end){return String.fromCharCode(...array.slice(start,end))}(buffer,8,12).replace("\0"," ").trim()){case"avif":case"avis":return{extension:"avif",mimeType:"image/avif"};default:return null}}(buffer):null}__webpack_require__.d(__webpack_exports__,{I:function(){return getBinaryImageMetadata}});const BIG_ENDIAN=!1,LITTLE_ENDIAN=!0;function getBinaryImageMetadata(binaryData){const dataView=toDataView(binaryData);return function getPngMetadata(binaryData){const dataView=toDataView(binaryData),isPng=dataView.byteLength>=24&&2303741511===dataView.getUint32(0,BIG_ENDIAN);if(!isPng)return null;return{mimeType:"image/png",width:dataView.getUint32(16,BIG_ENDIAN),height:dataView.getUint32(20,BIG_ENDIAN)}}(dataView)||function getJpegMetadata(binaryData){const dataView=toDataView(binaryData),isJpeg=dataView.byteLength>=3&&65496===dataView.getUint16(0,BIG_ENDIAN)&&255===dataView.getUint8(2);if(!isJpeg)return null;const{tableMarkers:tableMarkers,sofMarkers:sofMarkers}=function getJpegMarkers(){const tableMarkers=new Set([65499,65476,65484,65501,65534]);for(let i=65504;i<65520;++i)tableMarkers.add(i);const sofMarkers=new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502]);return{tableMarkers:tableMarkers,sofMarkers:sofMarkers}}();let i=2;for(;i+9<dataView.byteLength;){const marker=dataView.getUint16(i,BIG_ENDIAN);if(sofMarkers.has(marker))return{mimeType:"image/jpeg",height:dataView.getUint16(i+5,BIG_ENDIAN),width:dataView.getUint16(i+7,BIG_ENDIAN)};if(!tableMarkers.has(marker))return null;i+=2,i+=dataView.getUint16(i,BIG_ENDIAN)}return null}(dataView)||function getGifMetadata(binaryData){const dataView=toDataView(binaryData),isGif=dataView.byteLength>=10&&1195984440===dataView.getUint32(0,BIG_ENDIAN);if(!isGif)return null;return{mimeType:"image/gif",width:dataView.getUint16(6,LITTLE_ENDIAN),height:dataView.getUint16(8,LITTLE_ENDIAN)}}(dataView)||function getBmpMetadata(binaryData){const dataView=toDataView(binaryData),isBmp=dataView.byteLength>=14&&16973===dataView.getUint16(0,BIG_ENDIAN)&&dataView.getUint32(2,LITTLE_ENDIAN)===dataView.byteLength;if(!isBmp)return null;return{mimeType:"image/bmp",width:dataView.getUint32(18,LITTLE_ENDIAN),height:dataView.getUint32(22,LITTLE_ENDIAN)}}(dataView)||function getISOBMFFMetadata(binaryData){const buffer=new Uint8Array(binaryData instanceof DataView?binaryData.buffer:binaryData),mediaType=getISOBMFFMediaType(buffer);if(!mediaType)return null;return{mimeType:mediaType.mimeType,width:0,height:0}}(dataView)}function toDataView(data){if(data instanceof DataView)return data;if(ArrayBuffer.isView(data))return new DataView(data.buffer);if(data instanceof ArrayBuffer)return new DataView(data);throw new Error("toDataView")}},"./node_modules/@loaders.gl/loader-utils/dist/esm/lib/binary-utils/array-buffer-utils.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";function compareArrayBuffers(arrayBuffer1,arrayBuffer2,byteLength){if(byteLength=byteLength||arrayBuffer1.byteLength,arrayBuffer1.byteLength<byteLength||arrayBuffer2.byteLength<byteLength)return!1;const array1=new Uint8Array(arrayBuffer1),array2=new Uint8Array(arrayBuffer2);for(let i=0;i<array1.length;++i)if(array1[i]!==array2[i])return!1;return!0}function concatenateArrayBuffers(){for(var _len=arguments.length,sources=new Array(_len),_key=0;_key<_len;_key++)sources[_key]=arguments[_key];const sourceArrays=sources.map((source2=>source2 instanceof ArrayBuffer?new Uint8Array(source2):source2)),byteLength=sourceArrays.reduce(((length,typedArray)=>length+typedArray.byteLength),0),result=new Uint8Array(byteLength);let offset=0;for(const sourceArray of sourceArrays)result.set(sourceArray,offset),offset+=sourceArray.byteLength;return result.buffer}function concatenateTypedArrays(){for(var _len2=arguments.length,typedArrays=new Array(_len2),_key2=0;_key2<_len2;_key2++)typedArrays[_key2]=arguments[_key2];const arrays=typedArrays,TypedArrayConstructor=arrays&&arrays.length>1&&arrays[0].constructor||null;if(!TypedArrayConstructor)throw new Error('"concatenateTypedArrays" - incorrect quantity of arguments or arguments have incompatible data types');const result=new TypedArrayConstructor(arrays.reduce(((acc,value)=>acc+value.length),0));let offset=0;for(const array of arrays)result.set(array,offset),offset+=array.length;return result}function sliceArrayBuffer(arrayBuffer,byteOffset,byteLength){const subArray=void 0!==byteLength?new Uint8Array(arrayBuffer).subarray(byteOffset,byteOffset+byteLength):new Uint8Array(arrayBuffer).subarray(byteOffset);return new Uint8Array(subArray).buffer}__webpack_require__.d(__webpack_exports__,{JY:function(){return concatenateArrayBuffers},Xq:function(){return compareArrayBuffers},eV:function(){return concatenateTypedArrays},qv:function(){return sliceArrayBuffer}})},"./node_modules/@loaders.gl/loader-utils/dist/esm/lib/env-utils/assert.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";function assert(condition,message){if(!condition)throw new Error(message||"loader assertion failed.")}__webpack_require__.d(__webpack_exports__,{h:function(){return assert}})},"./node_modules/@loaders.gl/loader-utils/dist/esm/lib/env-utils/globals.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{jU:function(){return isBrowser}});var process=__webpack_require__("./node_modules/process/browser.js");"undefined"!=typeof self&&self,"undefined"!=typeof window&&window,void 0!==__webpack_require__.g&&__webpack_require__.g,"undefined"!=typeof document&&document;const isBrowser=Boolean("object"!=typeof process||"[object process]"!==String(process)||process.browser),matches=void 0!==process&&process.version&&/v([0-9]*)/.exec(process.version);matches&&parseFloat(matches[1])},"./node_modules/@loaders.gl/loader-utils/dist/esm/lib/path-utils/path.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";function filename(url){const slashIndex=url?url.lastIndexOf("/"):-1;return slashIndex>=0?url.substr(slashIndex+1):""}function dirname(url){const slashIndex=url?url.lastIndexOf("/"):-1;return slashIndex>=0?url.substr(0,slashIndex):""}__webpack_require__.d(__webpack_exports__,{XX:function(){return dirname},vB:function(){return filename}})},"./node_modules/@loaders.gl/worker-utils/dist/esm/lib/env-utils/assert.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";function assert(condition,message){if(!condition)throw new Error(message||"loaders.gl assertion failed.")}__webpack_require__.d(__webpack_exports__,{h:function(){return assert}})},"./node_modules/@loaders.gl/worker-utils/dist/esm/lib/env-utils/globals.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{CO:function(){return global_},hJ:function(){return isWorker},jU:function(){return isBrowser},tq:function(){return isMobile}});var process=__webpack_require__("./node_modules/process/browser.js");const globals={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==__webpack_require__.g&&__webpack_require__.g,document:"undefined"!=typeof document&&document},global_=globals.global||globals.self||globals.window||{},isBrowser="object"!=typeof process||"[object process]"!==String(process)||process.browser,isWorker="function"==typeof importScripts,isMobile="undefined"!=typeof window&&void 0!==window.orientation,matches=void 0!==process&&process.version&&/v([0-9]*)/.exec(process.version);matches&&parseFloat(matches[1])},"./node_modules/@luma.gl/constants/dist/esm/index.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_exports__.default={DEPTH_BUFFER_BIT:256,STENCIL_BUFFER_BIT:1024,COLOR_BUFFER_BIT:16384,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,ZERO:0,ONE:1,SRC_COLOR:768,ONE_MINUS_SRC_COLOR:769,SRC_ALPHA:770,ONE_MINUS_SRC_ALPHA:771,DST_ALPHA:772,ONE_MINUS_DST_ALPHA:773,DST_COLOR:774,ONE_MINUS_DST_COLOR:775,SRC_ALPHA_SATURATE:776,CONSTANT_COLOR:32769,ONE_MINUS_CONSTANT_COLOR:32770,CONSTANT_ALPHA:32771,ONE_MINUS_CONSTANT_ALPHA:32772,FUNC_ADD:32774,FUNC_SUBTRACT:32778,FUNC_REVERSE_SUBTRACT:32779,BLEND_EQUATION:32777,BLEND_EQUATION_RGB:32777,BLEND_EQUATION_ALPHA:34877,BLEND_DST_RGB:32968,BLEND_SRC_RGB:32969,BLEND_DST_ALPHA:32970,BLEND_SRC_ALPHA:32971,BLEND_COLOR:32773,ARRAY_BUFFER_BINDING:34964,ELEMENT_ARRAY_BUFFER_BINDING:34965,LINE_WIDTH:2849,ALIASED_POINT_SIZE_RANGE:33901,ALIASED_LINE_WIDTH_RANGE:33902,CULL_FACE_MODE:2885,FRONT_FACE:2886,DEPTH_RANGE:2928,DEPTH_WRITEMASK:2930,DEPTH_CLEAR_VALUE:2931,DEPTH_FUNC:2932,STENCIL_CLEAR_VALUE:2961,STENCIL_FUNC:2962,STENCIL_FAIL:2964,STENCIL_PASS_DEPTH_FAIL:2965,STENCIL_PASS_DEPTH_PASS:2966,STENCIL_REF:2967,STENCIL_VALUE_MASK:2963,STENCIL_WRITEMASK:2968,STENCIL_BACK_FUNC:34816,STENCIL_BACK_FAIL:34817,STENCIL_BACK_PASS_DEPTH_FAIL:34818,STENCIL_BACK_PASS_DEPTH_PASS:34819,STENCIL_BACK_REF:36003,STENCIL_BACK_VALUE_MASK:36004,STENCIL_BACK_WRITEMASK:36005,VIEWPORT:2978,SCISSOR_BOX:3088,COLOR_CLEAR_VALUE:3106,COLOR_WRITEMASK:3107,UNPACK_ALIGNMENT:3317,PACK_ALIGNMENT:3333,MAX_TEXTURE_SIZE:3379,MAX_VIEWPORT_DIMS:3386,SUBPIXEL_BITS:3408,RED_BITS:3410,GREEN_BITS:3411,BLUE_BITS:3412,ALPHA_BITS:3413,DEPTH_BITS:3414,STENCIL_BITS:3415,POLYGON_OFFSET_UNITS:10752,POLYGON_OFFSET_FACTOR:32824,TEXTURE_BINDING_2D:32873,SAMPLE_BUFFERS:32936,SAMPLES:32937,SAMPLE_COVERAGE_VALUE:32938,SAMPLE_COVERAGE_INVERT:32939,COMPRESSED_TEXTURE_FORMATS:34467,VENDOR:7936,RENDERER:7937,VERSION:7938,IMPLEMENTATION_COLOR_READ_TYPE:35738,IMPLEMENTATION_COLOR_READ_FORMAT:35739,BROWSER_DEFAULT_WEBGL:37444,STATIC_DRAW:35044,STREAM_DRAW:35040,DYNAMIC_DRAW:35048,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,BUFFER_SIZE:34660,BUFFER_USAGE:34661,CURRENT_VERTEX_ATTRIB:34342,VERTEX_ATTRIB_ARRAY_ENABLED:34338,VERTEX_ATTRIB_ARRAY_SIZE:34339,VERTEX_ATTRIB_ARRAY_STRIDE:34340,VERTEX_ATTRIB_ARRAY_TYPE:34341,VERTEX_ATTRIB_ARRAY_NORMALIZED:34922,VERTEX_ATTRIB_ARRAY_POINTER:34373,VERTEX_ATTRIB_ARRAY_BUFFER_BINDING:34975,CULL_FACE:2884,FRONT:1028,BACK:1029,FRONT_AND_BACK:1032,BLEND:3042,DEPTH_TEST:2929,DITHER:3024,POLYGON_OFFSET_FILL:32823,SAMPLE_ALPHA_TO_COVERAGE:32926,SAMPLE_COVERAGE:32928,SCISSOR_TEST:3089,STENCIL_TEST:2960,NO_ERROR:0,INVALID_ENUM:1280,INVALID_VALUE:1281,INVALID_OPERATION:1282,OUT_OF_MEMORY:1285,CONTEXT_LOST_WEBGL:37442,CW:2304,CCW:2305,DONT_CARE:4352,FASTEST:4353,NICEST:4354,GENERATE_MIPMAP_HINT:33170,BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,DOUBLE:5130,DEPTH_COMPONENT:6402,ALPHA:6406,RGB:6407,RGBA:6408,LUMINANCE:6409,LUMINANCE_ALPHA:6410,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,FRAGMENT_SHADER:35632,VERTEX_SHADER:35633,COMPILE_STATUS:35713,DELETE_STATUS:35712,LINK_STATUS:35714,VALIDATE_STATUS:35715,ATTACHED_SHADERS:35717,ACTIVE_ATTRIBUTES:35721,ACTIVE_UNIFORMS:35718,MAX_VERTEX_ATTRIBS:34921,MAX_VERTEX_UNIFORM_VECTORS:36347,MAX_VARYING_VECTORS:36348,MAX_COMBINED_TEXTURE_IMAGE_UNITS:35661,MAX_VERTEX_TEXTURE_IMAGE_UNITS:35660,MAX_TEXTURE_IMAGE_UNITS:34930,MAX_FRAGMENT_UNIFORM_VECTORS:36349,SHADER_TYPE:35663,SHADING_LANGUAGE_VERSION:35724,CURRENT_PROGRAM:35725,NEVER:512,ALWAYS:519,LESS:513,EQUAL:514,LEQUAL:515,GREATER:516,GEQUAL:518,NOTEQUAL:517,KEEP:7680,REPLACE:7681,INCR:7682,DECR:7683,INVERT:5386,INCR_WRAP:34055,DECR_WRAP:34056,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,TEXTURE_2D:3553,TEXTURE:5890,TEXTURE_CUBE_MAP:34067,TEXTURE_BINDING_CUBE_MAP:34068,TEXTURE_CUBE_MAP_POSITIVE_X:34069,TEXTURE_CUBE_MAP_NEGATIVE_X:34070,TEXTURE_CUBE_MAP_POSITIVE_Y:34071,TEXTURE_CUBE_MAP_NEGATIVE_Y:34072,TEXTURE_CUBE_MAP_POSITIVE_Z:34073,TEXTURE_CUBE_MAP_NEGATIVE_Z:34074,MAX_CUBE_MAP_TEXTURE_SIZE:34076,TEXTURE0:33984,ACTIVE_TEXTURE:34016,REPEAT:10497,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,TEXTURE_WIDTH:4096,TEXTURE_HEIGHT:4097,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,INT_VEC2:35667,INT_VEC3:35668,INT_VEC4:35669,BOOL:35670,BOOL_VEC2:35671,BOOL_VEC3:35672,BOOL_VEC4:35673,FLOAT_MAT2:35674,FLOAT_MAT3:35675,FLOAT_MAT4:35676,SAMPLER_2D:35678,SAMPLER_CUBE:35680,LOW_FLOAT:36336,MEDIUM_FLOAT:36337,HIGH_FLOAT:36338,LOW_INT:36339,MEDIUM_INT:36340,HIGH_INT:36341,FRAMEBUFFER:36160,RENDERBUFFER:36161,RGBA4:32854,RGB5_A1:32855,RGB565:36194,DEPTH_COMPONENT16:33189,STENCIL_INDEX:6401,STENCIL_INDEX8:36168,DEPTH_STENCIL:34041,RENDERBUFFER_WIDTH:36162,RENDERBUFFER_HEIGHT:36163,RENDERBUFFER_INTERNAL_FORMAT:36164,RENDERBUFFER_RED_SIZE:36176,RENDERBUFFER_GREEN_SIZE:36177,RENDERBUFFER_BLUE_SIZE:36178,RENDERBUFFER_ALPHA_SIZE:36179,RENDERBUFFER_DEPTH_SIZE:36180,RENDERBUFFER_STENCIL_SIZE:36181,FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE:36048,FRAMEBUFFER_ATTACHMENT_OBJECT_NAME:36049,FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL:36050,FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE:36051,COLOR_ATTACHMENT0:36064,DEPTH_ATTACHMENT:36096,STENCIL_ATTACHMENT:36128,DEPTH_STENCIL_ATTACHMENT:33306,NONE:0,FRAMEBUFFER_COMPLETE:36053,FRAMEBUFFER_INCOMPLETE_ATTACHMENT:36054,FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:36055,FRAMEBUFFER_INCOMPLETE_DIMENSIONS:36057,FRAMEBUFFER_UNSUPPORTED:36061,FRAMEBUFFER_BINDING:36006,RENDERBUFFER_BINDING:36007,READ_FRAMEBUFFER:36008,DRAW_FRAMEBUFFER:36009,MAX_RENDERBUFFER_SIZE:34024,INVALID_FRAMEBUFFER_OPERATION:1286,UNPACK_FLIP_Y_WEBGL:37440,UNPACK_PREMULTIPLY_ALPHA_WEBGL:37441,UNPACK_COLORSPACE_CONVERSION_WEBGL:37443,READ_BUFFER:3074,UNPACK_ROW_LENGTH:3314,UNPACK_SKIP_ROWS:3315,UNPACK_SKIP_PIXELS:3316,PACK_ROW_LENGTH:3330,PACK_SKIP_ROWS:3331,PACK_SKIP_PIXELS:3332,TEXTURE_BINDING_3D:32874,UNPACK_SKIP_IMAGES:32877,UNPACK_IMAGE_HEIGHT:32878,MAX_3D_TEXTURE_SIZE:32883,MAX_ELEMENTS_VERTICES:33e3,MAX_ELEMENTS_INDICES:33001,MAX_TEXTURE_LOD_BIAS:34045,MAX_FRAGMENT_UNIFORM_COMPONENTS:35657,MAX_VERTEX_UNIFORM_COMPONENTS:35658,MAX_ARRAY_TEXTURE_LAYERS:35071,MIN_PROGRAM_TEXEL_OFFSET:35076,MAX_PROGRAM_TEXEL_OFFSET:35077,MAX_VARYING_COMPONENTS:35659,FRAGMENT_SHADER_DERIVATIVE_HINT:35723,RASTERIZER_DISCARD:35977,VERTEX_ARRAY_BINDING:34229,MAX_VERTEX_OUTPUT_COMPONENTS:37154,MAX_FRAGMENT_INPUT_COMPONENTS:37157,MAX_SERVER_WAIT_TIMEOUT:37137,MAX_ELEMENT_INDEX:36203,RED:6403,RGB8:32849,RGBA8:32856,RGB10_A2:32857,TEXTURE_3D:32879,TEXTURE_WRAP_R:32882,TEXTURE_MIN_LOD:33082,TEXTURE_MAX_LOD:33083,TEXTURE_BASE_LEVEL:33084,TEXTURE_MAX_LEVEL:33085,TEXTURE_COMPARE_MODE:34892,TEXTURE_COMPARE_FUNC:34893,SRGB:35904,SRGB8:35905,SRGB8_ALPHA8:35907,COMPARE_REF_TO_TEXTURE:34894,RGBA32F:34836,RGB32F:34837,RGBA16F:34842,RGB16F:34843,TEXTURE_2D_ARRAY:35866,TEXTURE_BINDING_2D_ARRAY:35869,R11F_G11F_B10F:35898,RGB9_E5:35901,RGBA32UI:36208,RGB32UI:36209,RGBA16UI:36214,RGB16UI:36215,RGBA8UI:36220,RGB8UI:36221,RGBA32I:36226,RGB32I:36227,RGBA16I:36232,RGB16I:36233,RGBA8I:36238,RGB8I:36239,RED_INTEGER:36244,RGB_INTEGER:36248,RGBA_INTEGER:36249,R8:33321,RG8:33323,R16F:33325,R32F:33326,RG16F:33327,RG32F:33328,R8I:33329,R8UI:33330,R16I:33331,R16UI:33332,R32I:33333,R32UI:33334,RG8I:33335,RG8UI:33336,RG16I:33337,RG16UI:33338,RG32I:33339,RG32UI:33340,R8_SNORM:36756,RG8_SNORM:36757,RGB8_SNORM:36758,RGBA8_SNORM:36759,RGB10_A2UI:36975,TEXTURE_IMMUTABLE_FORMAT:37167,TEXTURE_IMMUTABLE_LEVELS:33503,UNSIGNED_INT_2_10_10_10_REV:33640,UNSIGNED_INT_10F_11F_11F_REV:35899,UNSIGNED_INT_5_9_9_9_REV:35902,FLOAT_32_UNSIGNED_INT_24_8_REV:36269,UNSIGNED_INT_24_8:34042,HALF_FLOAT:5131,RG:33319,RG_INTEGER:33320,INT_2_10_10_10_REV:36255,CURRENT_QUERY:34917,QUERY_RESULT:34918,QUERY_RESULT_AVAILABLE:34919,ANY_SAMPLES_PASSED:35887,ANY_SAMPLES_PASSED_CONSERVATIVE:36202,MAX_DRAW_BUFFERS:34852,DRAW_BUFFER0:34853,DRAW_BUFFER1:34854,DRAW_BUFFER2:34855,DRAW_BUFFER3:34856,DRAW_BUFFER4:34857,DRAW_BUFFER5:34858,DRAW_BUFFER6:34859,DRAW_BUFFER7:34860,DRAW_BUFFER8:34861,DRAW_BUFFER9:34862,DRAW_BUFFER10:34863,DRAW_BUFFER11:34864,DRAW_BUFFER12:34865,DRAW_BUFFER13:34866,DRAW_BUFFER14:34867,DRAW_BUFFER15:34868,MAX_COLOR_ATTACHMENTS:36063,COLOR_ATTACHMENT1:36065,COLOR_ATTACHMENT2:36066,COLOR_ATTACHMENT3:36067,COLOR_ATTACHMENT4:36068,COLOR_ATTACHMENT5:36069,COLOR_ATTACHMENT6:36070,COLOR_ATTACHMENT7:36071,COLOR_ATTACHMENT8:36072,COLOR_ATTACHMENT9:36073,COLOR_ATTACHMENT10:36074,COLOR_ATTACHMENT11:36075,COLOR_ATTACHMENT12:36076,COLOR_ATTACHMENT13:36077,COLOR_ATTACHMENT14:36078,COLOR_ATTACHMENT15:36079,SAMPLER_3D:35679,SAMPLER_2D_SHADOW:35682,SAMPLER_2D_ARRAY:36289,SAMPLER_2D_ARRAY_SHADOW:36292,SAMPLER_CUBE_SHADOW:36293,INT_SAMPLER_2D:36298,INT_SAMPLER_3D:36299,INT_SAMPLER_CUBE:36300,INT_SAMPLER_2D_ARRAY:36303,UNSIGNED_INT_SAMPLER_2D:36306,UNSIGNED_INT_SAMPLER_3D:36307,UNSIGNED_INT_SAMPLER_CUBE:36308,UNSIGNED_INT_SAMPLER_2D_ARRAY:36311,MAX_SAMPLES:36183,SAMPLER_BINDING:35097,PIXEL_PACK_BUFFER:35051,PIXEL_UNPACK_BUFFER:35052,PIXEL_PACK_BUFFER_BINDING:35053,PIXEL_UNPACK_BUFFER_BINDING:35055,COPY_READ_BUFFER:36662,COPY_WRITE_BUFFER:36663,COPY_READ_BUFFER_BINDING:36662,COPY_WRITE_BUFFER_BINDING:36663,FLOAT_MAT2x3:35685,FLOAT_MAT2x4:35686,FLOAT_MAT3x2:35687,FLOAT_MAT3x4:35688,FLOAT_MAT4x2:35689,FLOAT_MAT4x3:35690,UNSIGNED_INT_VEC2:36294,UNSIGNED_INT_VEC3:36295,UNSIGNED_INT_VEC4:36296,UNSIGNED_NORMALIZED:35863,SIGNED_NORMALIZED:36764,VERTEX_ATTRIB_ARRAY_INTEGER:35069,VERTEX_ATTRIB_ARRAY_DIVISOR:35070,TRANSFORM_FEEDBACK_BUFFER_MODE:35967,MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS:35968,TRANSFORM_FEEDBACK_VARYINGS:35971,TRANSFORM_FEEDBACK_BUFFER_START:35972,TRANSFORM_FEEDBACK_BUFFER_SIZE:35973,TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN:35976,MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS:35978,MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS:35979,INTERLEAVED_ATTRIBS:35980,SEPARATE_ATTRIBS:35981,TRANSFORM_FEEDBACK_BUFFER:35982,TRANSFORM_FEEDBACK_BUFFER_BINDING:35983,TRANSFORM_FEEDBACK:36386,TRANSFORM_FEEDBACK_PAUSED:36387,TRANSFORM_FEEDBACK_ACTIVE:36388,TRANSFORM_FEEDBACK_BINDING:36389,FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING:33296,FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE:33297,FRAMEBUFFER_ATTACHMENT_RED_SIZE:33298,FRAMEBUFFER_ATTACHMENT_GREEN_SIZE:33299,FRAMEBUFFER_ATTACHMENT_BLUE_SIZE:33300,FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE:33301,FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE:33302,FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE:33303,FRAMEBUFFER_DEFAULT:33304,DEPTH24_STENCIL8:35056,DRAW_FRAMEBUFFER_BINDING:36006,READ_FRAMEBUFFER_BINDING:36010,RENDERBUFFER_SAMPLES:36011,FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER:36052,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE:36182,UNIFORM_BUFFER:35345,UNIFORM_BUFFER_BINDING:35368,UNIFORM_BUFFER_START:35369,UNIFORM_BUFFER_SIZE:35370,MAX_VERTEX_UNIFORM_BLOCKS:35371,MAX_FRAGMENT_UNIFORM_BLOCKS:35373,MAX_COMBINED_UNIFORM_BLOCKS:35374,MAX_UNIFORM_BUFFER_BINDINGS:35375,MAX_UNIFORM_BLOCK_SIZE:35376,MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS:35377,MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS:35379,UNIFORM_BUFFER_OFFSET_ALIGNMENT:35380,ACTIVE_UNIFORM_BLOCKS:35382,UNIFORM_TYPE:35383,UNIFORM_SIZE:35384,UNIFORM_BLOCK_INDEX:35386,UNIFORM_OFFSET:35387,UNIFORM_ARRAY_STRIDE:35388,UNIFORM_MATRIX_STRIDE:35389,UNIFORM_IS_ROW_MAJOR:35390,UNIFORM_BLOCK_BINDING:35391,UNIFORM_BLOCK_DATA_SIZE:35392,UNIFORM_BLOCK_ACTIVE_UNIFORMS:35394,UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES:35395,UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER:35396,UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER:35398,OBJECT_TYPE:37138,SYNC_CONDITION:37139,SYNC_STATUS:37140,SYNC_FLAGS:37141,SYNC_FENCE:37142,SYNC_GPU_COMMANDS_COMPLETE:37143,UNSIGNALED:37144,SIGNALED:37145,ALREADY_SIGNALED:37146,TIMEOUT_EXPIRED:37147,CONDITION_SATISFIED:37148,WAIT_FAILED:37149,SYNC_FLUSH_COMMANDS_BIT:1,COLOR:6144,DEPTH:6145,STENCIL:6146,MIN:32775,MAX:32776,DEPTH_COMPONENT24:33190,STREAM_READ:35041,STREAM_COPY:35042,STATIC_READ:35045,STATIC_COPY:35046,DYNAMIC_READ:35049,DYNAMIC_COPY:35050,DEPTH_COMPONENT32F:36012,DEPTH32F_STENCIL8:36013,INVALID_INDEX:4294967295,TIMEOUT_IGNORED:-1,MAX_CLIENT_WAIT_TIMEOUT_WEBGL:37447,VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE:35070,UNMASKED_VENDOR_WEBGL:37445,UNMASKED_RENDERER_WEBGL:37446,MAX_TEXTURE_MAX_ANISOTROPY_EXT:34047,TEXTURE_MAX_ANISOTROPY_EXT:34046,COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_EXT:33778,COMPRESSED_RGBA_S3TC_DXT5_EXT:33779,COMPRESSED_R11_EAC:37488,COMPRESSED_SIGNED_R11_EAC:37489,COMPRESSED_RG11_EAC:37490,COMPRESSED_SIGNED_RG11_EAC:37491,COMPRESSED_RGB8_ETC2:37492,COMPRESSED_RGBA8_ETC2_EAC:37493,COMPRESSED_SRGB8_ETC2:37494,COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:37495,COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:37496,COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:37497,COMPRESSED_RGB_PVRTC_4BPPV1_IMG:35840,COMPRESSED_RGBA_PVRTC_4BPPV1_IMG:35842,COMPRESSED_RGB_PVRTC_2BPPV1_IMG:35841,COMPRESSED_RGBA_PVRTC_2BPPV1_IMG:35843,COMPRESSED_RGB_ETC1_WEBGL:36196,COMPRESSED_RGB_ATC_WEBGL:35986,COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL:35986,COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL:34798,UNSIGNED_INT_24_8_WEBGL:34042,HALF_FLOAT_OES:36193,RGBA32F_EXT:34836,RGB32F_EXT:34837,FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT:33297,UNSIGNED_NORMALIZED_EXT:35863,MIN_EXT:32775,MAX_EXT:32776,SRGB_EXT:35904,SRGB_ALPHA_EXT:35906,SRGB8_ALPHA8_EXT:35907,FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT:33296,FRAGMENT_SHADER_DERIVATIVE_HINT_OES:35723,COLOR_ATTACHMENT0_WEBGL:36064,COLOR_ATTACHMENT1_WEBGL:36065,COLOR_ATTACHMENT2_WEBGL:36066,COLOR_ATTACHMENT3_WEBGL:36067,COLOR_ATTACHMENT4_WEBGL:36068,COLOR_ATTACHMENT5_WEBGL:36069,COLOR_ATTACHMENT6_WEBGL:36070,COLOR_ATTACHMENT7_WEBGL:36071,COLOR_ATTACHMENT8_WEBGL:36072,COLOR_ATTACHMENT9_WEBGL:36073,COLOR_ATTACHMENT10_WEBGL:36074,COLOR_ATTACHMENT11_WEBGL:36075,COLOR_ATTACHMENT12_WEBGL:36076,COLOR_ATTACHMENT13_WEBGL:36077,COLOR_ATTACHMENT14_WEBGL:36078,COLOR_ATTACHMENT15_WEBGL:36079,DRAW_BUFFER0_WEBGL:34853,DRAW_BUFFER1_WEBGL:34854,DRAW_BUFFER2_WEBGL:34855,DRAW_BUFFER3_WEBGL:34856,DRAW_BUFFER4_WEBGL:34857,DRAW_BUFFER5_WEBGL:34858,DRAW_BUFFER6_WEBGL:34859,DRAW_BUFFER7_WEBGL:34860,DRAW_BUFFER8_WEBGL:34861,DRAW_BUFFER9_WEBGL:34862,DRAW_BUFFER10_WEBGL:34863,DRAW_BUFFER11_WEBGL:34864,DRAW_BUFFER12_WEBGL:34865,DRAW_BUFFER13_WEBGL:34866,DRAW_BUFFER14_WEBGL:34867,DRAW_BUFFER15_WEBGL:34868,MAX_COLOR_ATTACHMENTS_WEBGL:36063,MAX_DRAW_BUFFERS_WEBGL:34852,VERTEX_ARRAY_BINDING_OES:34229,QUERY_COUNTER_BITS_EXT:34916,CURRENT_QUERY_EXT:34917,QUERY_RESULT_EXT:34918,QUERY_RESULT_AVAILABLE_EXT:34919,TIME_ELAPSED_EXT:35007,TIMESTAMP_EXT:36392,GPU_DISJOINT_EXT:36795}},"./node_modules/@luma.gl/engine/dist/esm/animation/timeline.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{T:function(){return Timeline}});let channelHandles=1,animationHandles=1;class Timeline{constructor(){this.time=0,this.channels=new Map,this.animations=new Map,this.playing=!1,this.lastEngineTime=-1}addChannel(props){const{delay:delay=0,duration:duration=Number.POSITIVE_INFINITY,rate:rate=1,repeat:repeat=1}=props,handle=channelHandles++,channel={time:0,delay:delay,duration:duration,rate:rate,repeat:repeat};return this._setChannelTime(channel,this.time),this.channels.set(handle,channel),handle}removeChannel(handle){this.channels.delete(handle);for(const[animationHandle,animation]of this.animations)animation.channel===handle&&this.detachAnimation(animationHandle)}isFinished(handle){const channel=this.channels.get(handle);return void 0!==channel&&this.time>=channel.delay+channel.duration*channel.repeat}getTime(handle){if(void 0===handle)return this.time;const channel=this.channels.get(handle);return void 0===channel?-1:channel.time}setTime(time){this.time=Math.max(0,time);const channels=this.channels.values();for(const channel of channels)this._setChannelTime(channel,this.time);const animations=this.animations.values();for(const animationData of animations){const{animation:animation,channel:channel}=animationData;animation.setTime(this.getTime(channel))}}play(){this.playing=!0}pause(){this.playing=!1,this.lastEngineTime=-1}reset(){this.setTime(0)}attachAnimation(animation,channelHandle){const animationHandle=animationHandles++;return this.animations.set(animationHandle,{animation:animation,channel:channelHandle}),animation.setTime(this.getTime(channelHandle)),animationHandle}detachAnimation(handle){this.animations.delete(handle)}update(engineTime){this.playing&&(-1===this.lastEngineTime&&(this.lastEngineTime=engineTime),this.setTime(this.time+(engineTime-this.lastEngineTime)),this.lastEngineTime=engineTime)}_setChannelTime(channel,time){const offsetTime=time-channel.delay;offsetTime>=channel.duration*channel.repeat?channel.time=channel.duration*channel.rate:(channel.time=Math.max(0,offsetTime)%channel.duration,channel.time*=channel.rate)}}},"./node_modules/@luma.gl/engine/dist/esm/geometry/geometry.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return Geometry}});var _luma_gl_webgl__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/utils/utils.js"),_luma_gl_webgl__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/utils/assert.js");const DRAW_MODE={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6};class Geometry{static get DRAW_MODE(){return DRAW_MODE}constructor(){let props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:id=(0,_luma_gl_webgl__WEBPACK_IMPORTED_MODULE_0__.hQ)("geometry"),drawMode:drawMode=DRAW_MODE.TRIANGLES,attributes:attributes={},indices:indices=null,vertexCount:vertexCount=null}=props;this.id=id,this.drawMode=0|drawMode,this.attributes={},this.userData={},this._setAttributes(attributes,indices),this.vertexCount=vertexCount||this._calculateVertexCount(this.attributes,this.indices)}get mode(){return this.drawMode}getVertexCount(){return this.vertexCount}getAttributes(){return this.indices?{indices:this.indices,...this.attributes}:this.attributes}_print(attributeName){return"Geometry ".concat(this.id," attribute ").concat(attributeName)}_setAttributes(attributes,indices){indices&&(this.indices=ArrayBuffer.isView(indices)?{value:indices,size:1}:indices);for(const attributeName in attributes){let attribute=attributes[attributeName];attribute=ArrayBuffer.isView(attribute)?{value:attribute}:attribute,(0,_luma_gl_webgl__WEBPACK_IMPORTED_MODULE_1__.h)(ArrayBuffer.isView(attribute.value),"".concat(this._print(attributeName),": must be typed array or object with value as typed array")),"POSITION"!==attributeName&&"positions"!==attributeName||attribute.size||(attribute.size=3),"indices"===attributeName?((0,_luma_gl_webgl__WEBPACK_IMPORTED_MODULE_1__.h)(!this.indices),this.indices=attribute):this.attributes[attributeName]=attribute}return this.indices&&void 0!==this.indices.isIndexed&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this}_calculateVertexCount(attributes,indices){if(indices)return indices.value.length;let vertexCount=1/0;for(const attributeName in attributes){const attribute=attributes[attributeName],{value:value,size:size,constant:constant}=attribute;!constant&&value&&size>=1&&(vertexCount=Math.min(vertexCount,value.length/size))}return(0,_luma_gl_webgl__WEBPACK_IMPORTED_MODULE_1__.h)(Number.isFinite(vertexCount)),vertexCount}}},"./node_modules/@luma.gl/engine/dist/esm/lib/animation-loop.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return AnimationLoop}});var esm=__webpack_require__("./node_modules/@luma.gl/gltools/dist/esm/index.js"),init=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/init.js"),assert=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/utils/assert.js"),resource=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/classes/resource.js"),features=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/features/features.js"),webgl_features_table=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/features/webgl-features-table.js");class Query extends resource.Z{get[Symbol.toStringTag](){return"Query"}static isSupported(gl){let opts=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const webgl2=(0,esm.D0)(gl),hasTimerQuery=(0,features.ag)(gl,webgl_features_table.h.TIMER_QUERY);let supported=webgl2||hasTimerQuery;for(const key of opts)switch(key){case"queries":supported=supported&&webgl2;break;case"timers":supported=supported&&hasTimerQuery;break;default:(0,assert.h)(!1)}return supported}constructor(gl){super(gl,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),this.target=null,this._queryPending=!1,this._pollingPromise=null,Object.seal(this)}beginTimeElapsedQuery(){return this.begin(35007)}beginOcclusionQuery(){let{conservative:conservative=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.begin(conservative?36202:35887)}beginTransformFeedbackQuery(){return this.begin(35976)}begin(target){return this._queryPending||(this.target=target,this.gl2.beginQuery(this.target,this.handle)),this}end(){return this._queryPending||this.target&&(this.gl2.endQuery(this.target),this.target=null,this._queryPending=!0),this}isResultAvailable(){if(!this._queryPending)return!1;const resultAvailable=this.gl2.getQueryParameter(this.handle,34919);return resultAvailable&&(this._queryPending=!1),resultAvailable}isTimerDisjoint(){return this.gl2.getParameter(36795)}getResult(){return this.gl2.getQueryParameter(this.handle,34918)}getTimerMilliseconds(){return this.getResult()/1e6}createPoll(){let limit=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY;if(this._pollingPromise)return this._pollingPromise;let counter=0;return this._pollingPromise=new Promise(((resolve,reject)=>{const poll=()=>{this.isResultAvailable()?(resolve(this.getResult()),this._pollingPromise=null):counter++>limit?(reject("Timed out"),this._pollingPromise=null):requestAnimationFrame(poll)};requestAnimationFrame(poll)})),this._pollingPromise}_createHandle(){return Query.isSupported(this.gl)?this.gl2.createQuery():null}_deleteHandle(){this.gl2.deleteQuery(this.handle)}}var framebuffer=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/classes/framebuffer.js");const isPage=(0,__webpack_require__("./node_modules/@probe.gl/env/dist/esm/lib/is-browser.js").Z)()&&"undefined"!=typeof document;let statIdCounter=0;class AnimationLoop{constructor(){let props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{onCreateContext:onCreateContext=(opts=>(0,esm.s9)(opts)),onAddHTML:onAddHTML=null,onInitialize:onInitialize=(()=>{}),onRender:onRender=(()=>{}),onFinalize:onFinalize=(()=>{}),onError:onError,gl:gl=null,glOptions:glOptions={},debug:debug=!1,createFramebuffer:createFramebuffer=!1,autoResizeViewport:autoResizeViewport=!0,autoResizeDrawingBuffer:autoResizeDrawingBuffer=!0,stats:stats=init.lR.get("animation-loop-".concat(statIdCounter++))}=props;let{useDevicePixels:useDevicePixels=!0}=props;"useDevicePixelRatio"in props&&(esm.cM.deprecated("useDevicePixelRatio","useDevicePixels")(),useDevicePixels=props.useDevicePixelRatio),this.props={onCreateContext:onCreateContext,onAddHTML:onAddHTML,onInitialize:onInitialize,onRender:onRender,onFinalize:onFinalize,onError:onError,gl:gl,glOptions:glOptions,debug:debug,createFramebuffer:createFramebuffer},this.gl=gl,this.needsRedraw=null,this.timeline=null,this.stats=stats,this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this._initialized=!1,this._running=!1,this._animationFrameId=null,this._nextFramePromise=null,this._resolveNextFrame=null,this._cpuStartTime=0,this.setProps({autoResizeViewport:autoResizeViewport,autoResizeDrawingBuffer:autoResizeDrawingBuffer,useDevicePixels:useDevicePixels}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._pageLoadPromise=null,this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}delete(){this.stop(),this._setDisplay(null)}setNeedsRedraw(reason){return(0,assert.h)("string"==typeof reason),this.needsRedraw=this.needsRedraw||reason,this}setProps(props){return"autoResizeViewport"in props&&(this.autoResizeViewport=props.autoResizeViewport),"autoResizeDrawingBuffer"in props&&(this.autoResizeDrawingBuffer=props.autoResizeDrawingBuffer),"useDevicePixels"in props&&(this.useDevicePixels=props.useDevicePixels),this}start(){let opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._running)return this;this._running=!0;const startPromise=this._getPageLoadPromise().then((()=>!this._running||this._initialized?null:(this._createWebGLContext(opts),this._createFramebuffer(),this._startEventHandling(),this._initializeCallbackData(),this._updateCallbackData(),this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._gpuTimeQuery=Query.isSupported(this.gl,["timers"])?new Query(this.gl):null,this._initialized=!0,this.onInitialize(this.animationProps)))).then((appContext=>{this._running&&(this._addCallbackData(appContext||{}),!1!==appContext&&this._startLoop())}));return this.props.onError&&startPromise.catch(this.props.onError),this}redraw(){return this.isContextLost()||(this._beginTimers(),this._setupFrame(),this._updateCallbackData(),this._renderFrame(this.animationProps),this._clearNeedsRedraw(),this.offScreen&&this.gl.commit&&this.gl.commit(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endTimers()),this}stop(){return this._running&&(this._finalizeCallbackData(),this._cancelAnimationFrame(this._animationFrameId),this._nextFramePromise=null,this._resolveNextFrame=null,this._animationFrameId=null,this._running=!1),this}attachTimeline(timeline){return this.timeline=timeline,this.timeline}detachTimeline(){this.timeline=null}waitForRender(){return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise((resolve=>{this._resolveNextFrame=resolve}))),this._nextFramePromise}async toDataURL(){return this.setNeedsRedraw("toDataURL"),await this.waitForRender(),this.gl.canvas.toDataURL()}isContextLost(){return this.gl.isContextLost()}onCreateContext(){return this.props.onCreateContext(...arguments)}onInitialize(){return this.props.onInitialize(...arguments)}onRender(){return this.props.onRender(...arguments)}onFinalize(){return this.props.onFinalize(...arguments)}getHTMLControlValue(id){let defaultValue=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const element=document.getElementById(id);return element?Number(element.value):defaultValue}setViewParameters(){return esm.cM.removed("AnimationLoop.setViewParameters","AnimationLoop.setProps")(),this}_startLoop(){const renderFrame=()=>{this._running&&(this.redraw(),this._animationFrameId=this._requestAnimationFrame(renderFrame))};this._cancelAnimationFrame(this._animationFrameId),this._animationFrameId=this._requestAnimationFrame(renderFrame)}_getPageLoadPromise(){return this._pageLoadPromise||(this._pageLoadPromise=isPage?new Promise(((resolve,reject)=>{isPage&&"complete"===document.readyState?resolve(document):window.addEventListener("load",(()=>{resolve(document)}))})):Promise.resolve({})),this._pageLoadPromise}_setDisplay(display){this.display&&(this.display.delete(),this.display.animationLoop=null),display&&(display.animationLoop=this),this.display=display}_cancelAnimationFrame(animationFrameId){return this.display&&this.display.cancelAnimationFrame?this.display.cancelAnimationFrame(animationFrameId):function cancelAnimationFrame(timerId){return"undefined"!=typeof window&&window.cancelAnimationFrame?window.cancelAnimationFrame(timerId):clearTimeout(timerId)}(animationFrameId)}_requestAnimationFrame(renderFrameCallback){if(this._running)return this.display&&this.display.requestAnimationFrame?this.display.requestAnimationFrame(renderFrameCallback):function request_animation_frame_requestAnimationFrame(callback){return"undefined"!=typeof window&&window.requestAnimationFrame?window.requestAnimationFrame(callback):setTimeout(callback,1e3/60)}(renderFrameCallback)}_renderFrame(){this.display?this.display._renderFrame(...arguments):this.onRender(...arguments)}_clearNeedsRedraw(){this.needsRedraw=null}_setupFrame(){this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._resizeFramebuffer()}_initializeCallbackData(){this.animationProps={gl:this.gl,stop:this.stop,canvas:this.gl.canvas,framebuffer:this.framebuffer,useDevicePixels:this.useDevicePixels,needsRedraw:null,startTime:Date.now(),engineTime:0,tick:0,tock:0,time:0,_timeline:this.timeline,_loop:this,_animationLoop:this,_mousePosition:null}}_updateCallbackData(){const{width:width,height:height,aspect:aspect}=this._getSizeAndAspect();width===this.animationProps.width&&height===this.animationProps.height||this.setNeedsRedraw("drawing buffer resized"),aspect!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=width,this.animationProps.height=height,this.animationProps.aspect=aspect,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime,this.animationProps._offScreen=this.offScreen}_finalizeCallbackData(){this.onFinalize(this.animationProps)}_addCallbackData(appContext){"object"==typeof appContext&&null!==appContext&&(this.animationProps=Object.assign({},this.animationProps,appContext))}_createWebGLContext(opts){if(this.offScreen=opts.canvas&&"undefined"!=typeof OffscreenCanvas&&opts.canvas instanceof OffscreenCanvas,opts=Object.assign({},opts,this.props.glOptions),this.gl=this.props.gl?(0,esm.yW)(this.props.gl,opts):this.onCreateContext(opts),!(0,esm.UF)(this.gl))throw new Error("AnimationLoop.onCreateContext - illegal context returned");(0,esm.kL)(this.gl),this._createInfoDiv()}_createInfoDiv(){if(this.gl.canvas&&this.props.onAddHTML){const wrapperDiv=document.createElement("div");document.body.appendChild(wrapperDiv),wrapperDiv.style.position="relative";const div=document.createElement("div");div.style.position="absolute",div.style.left="10px",div.style.bottom="10px",div.style.width="300px",div.style.background="white",wrapperDiv.appendChild(this.gl.canvas),wrapperDiv.appendChild(div);const html=this.props.onAddHTML(div);html&&(div.innerHTML=html)}}_getSizeAndAspect(){const width=this.gl.drawingBufferWidth,height=this.gl.drawingBufferHeight;let aspect=1;const{canvas:canvas}=this.gl;return canvas&&canvas.clientHeight?aspect=canvas.clientWidth/canvas.clientHeight:width>0&&height>0&&(aspect=width/height),{width:width,height:height,aspect:aspect}}_resizeViewport(){this.autoResizeViewport&&this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}_resizeCanvasDrawingBuffer(){this.autoResizeDrawingBuffer&&(0,esm.aQ)(this.gl,{useDevicePixels:this.useDevicePixels})}_createFramebuffer(){this.props.createFramebuffer&&(this.framebuffer=new framebuffer.Z(this.gl))}_resizeFramebuffer(){this.framebuffer&&this.framebuffer.resize({width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight})}_beginTimers(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this._gpuTimeQuery&&this._gpuTimeQuery.isResultAvailable()&&!this._gpuTimeQuery.isTimerDisjoint()&&this.stats.get("GPU Time").addTime(this._gpuTimeQuery.getTimerMilliseconds()),this._gpuTimeQuery&&this._gpuTimeQuery.beginTimeElapsedQuery(),this.cpuTime.timeStart()}_endTimers(){this.cpuTime.timeEnd(),this._gpuTimeQuery&&this._gpuTimeQuery.end()}_startEventHandling(){const{canvas:canvas}=this.gl;canvas&&(canvas.addEventListener("mousemove",this._onMousemove),canvas.addEventListener("mouseleave",this._onMouseleave))}_onMousemove(e){this.animationProps._mousePosition=[e.offsetX,e.offsetY]}_onMouseleave(e){this.animationProps._mousePosition=null}}},"./node_modules/@luma.gl/engine/dist/esm/lib/model.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return Model}});var esm=__webpack_require__("./node_modules/@luma.gl/gltools/dist/esm/index.js"),program_manager=__webpack_require__("./node_modules/@luma.gl/engine/dist/esm/lib/program-manager.js"),utils=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/utils/utils.js"),assert=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/utils/assert.js"),clear=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/classes/clear.js"),classes_program=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/classes/program.js"),classes_accessor=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/classes/accessor.js"),classes_buffer=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/classes/buffer.js"),resource=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/classes/resource.js");let arrayBuffer=null;function getScratchArray(Type,length){return new Type(function getScratchArrayBuffer(byteLength){return(!arrayBuffer||arrayBuffer.byteLength<byteLength)&&(arrayBuffer=new ArrayBuffer(byteLength)),arrayBuffer}(Type.BYTES_PER_ELEMENT*length),0,length)}var get_browser=__webpack_require__("./node_modules/@probe.gl/env/dist/esm/lib/get-browser.js");class VertexArrayObject extends resource.Z{get[Symbol.toStringTag](){return"VertexArrayObject"}static isSupported(gl){return!(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).constantAttributeZero||((0,esm.D0)(gl)||"Chrome"===(0,get_browser.Z)())}static getDefaultArray(gl){return gl.luma=gl.luma||{},gl.luma.defaultVertexArray||(gl.luma.defaultVertexArray=new VertexArrayObject(gl,{handle:null,isDefaultArray:!0})),gl.luma.defaultVertexArray}static getMaxAttributes(gl){return VertexArrayObject.MAX_ATTRIBUTES=VertexArrayObject.MAX_ATTRIBUTES||gl.getParameter(34921),VertexArrayObject.MAX_ATTRIBUTES}static setConstant(gl,location,array){switch(array.constructor){case Float32Array:VertexArrayObject._setConstantFloatArray(gl,location,array);break;case Int32Array:VertexArrayObject._setConstantIntArray(gl,location,array);break;case Uint32Array:VertexArrayObject._setConstantUintArray(gl,location,array);break;default:(0,assert.h)(!1)}}constructor(gl){let opts=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const id=opts.id||opts.program&&opts.program.id;super(gl,Object.assign({},opts,{id:id})),this.buffer=null,this.bufferValue=null,this.isDefaultArray=opts.isDefaultArray||!1,this.gl2=gl,this.initialize(opts),Object.seal(this)}delete(){return super.delete(),this.buffer&&this.buffer.delete(),this}get MAX_ATTRIBUTES(){return VertexArrayObject.getMaxAttributes(this.gl)}initialize(){let props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.setProps(props)}setProps(props){return this}setElementBuffer(){let elementBuffer=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return(0,assert.h)(!elementBuffer||34963===elementBuffer.target,"elements must be GL.ELEMENT_ARRAY_BUFFER"),this.bind((()=>{this.gl.bindBuffer(34963,elementBuffer?elementBuffer.handle:null)})),this}setBuffer(location,buffer,accessor){if(34963===buffer.target)return this.setElementBuffer(buffer,accessor);const{size:size,type:type,stride:stride,offset:offset,normalized:normalized,integer:integer,divisor:divisor}=accessor,{gl:gl,gl2:gl2}=this;return location=Number(location),this.bind((()=>{gl.bindBuffer(34962,buffer.handle),integer?((0,assert.h)((0,esm.D0)(gl)),gl2.vertexAttribIPointer(location,size,type,stride,offset)):gl.vertexAttribPointer(location,size,type,normalized,stride,offset),gl.enableVertexAttribArray(location),gl2.vertexAttribDivisor(location,divisor||0)})),this}enable(location){let enable=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return!enable&&0===location&&!VertexArrayObject.isSupported(this.gl,{constantAttributeZero:!0})||(location=Number(location),this.bind((()=>enable?this.gl.enableVertexAttribArray(location):this.gl.disableVertexAttribArray(location)))),this}getConstantBuffer(elementCount,value){const constantValue=this._normalizeConstantArrayValue(value),byteLength=constantValue.byteLength*elementCount,length=constantValue.length*elementCount;let updateNeeded=!this.buffer;if(this.buffer=this.buffer||new classes_buffer.Z(this.gl,byteLength),updateNeeded=updateNeeded||this.buffer.reallocate(byteLength),updateNeeded=updateNeeded||!this._compareConstantArrayValues(constantValue,this.bufferValue),updateNeeded){const typedArray=getScratchArray(value.constructor,length);!function fillArray(_ref){let{target:target,source:source,start:start=0,count:count=1}=_ref;const length=source.length,total=count*length;let copied=0;for(let i=start;copied<length;copied++)target[i++]=source[copied];for(;copied<total;)copied<total-copied?(target.copyWithin(start+copied,start,start+copied),copied*=2):(target.copyWithin(start+copied,start,start+total-copied),copied=total);return target}({target:typedArray,source:constantValue,start:0,count:length}),this.buffer.subData(typedArray),this.bufferValue=value}return this.buffer}_normalizeConstantArrayValue(arrayValue){return Array.isArray(arrayValue)?new Float32Array(arrayValue):arrayValue}_compareConstantArrayValues(v1,v2){if(!v1||!v2||v1.length!==v2.length||v1.constructor!==v2.constructor)return!1;for(let i=0;i<v1.length;++i)if(v1[i]!==v2[i])return!1;return!0}static _setConstantFloatArray(gl,location,array){switch(array.length){case 1:gl.vertexAttrib1fv(location,array);break;case 2:gl.vertexAttrib2fv(location,array);break;case 3:gl.vertexAttrib3fv(location,array);break;case 4:gl.vertexAttrib4fv(location,array);break;default:(0,assert.h)(!1)}}static _setConstantIntArray(gl,location,array){switch((0,assert.h)((0,esm.D0)(gl)),array.length){case 1:gl.vertexAttribI1iv(location,array);break;case 2:gl.vertexAttribI2iv(location,array);break;case 3:gl.vertexAttribI3iv(location,array);break;case 4:gl.vertexAttribI4iv(location,array);break;default:(0,assert.h)(!1)}}static _setConstantUintArray(gl,location,array){switch((0,assert.h)((0,esm.D0)(gl)),array.length){case 1:gl.vertexAttribI1uiv(location,array);break;case 2:gl.vertexAttribI2uiv(location,array);break;case 3:gl.vertexAttribI3uiv(location,array);break;case 4:gl.vertexAttribI4uiv(location,array);break;default:(0,assert.h)(!1)}}_createHandle(){return this.gl.createVertexArray()}_deleteHandle(handle){return this.gl2.deleteVertexArray(handle),[this.elements]}_bindHandle(handle){this.gl2.bindVertexArray(handle)}_getParameter(pname,_ref){let{location:location}=_ref;return(0,assert.h)(Number.isFinite(location)),this.bind((()=>34373===pname?this.gl.getVertexAttribOffset(location,pname):this.gl.getVertexAttrib(location,pname)))}}var stub_methods=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/utils/stub-methods.js");const MULTI_LOCATION_ATTRIBUTE_REGEXP=/^(.+)__LOCATION_([0-9]+)$/,DEPRECATIONS_V6=["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"];class VertexArray{constructor(gl){let opts=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const id=opts.id||opts.program&&opts.program.id;this.id=id,this.gl=gl,this.configuration=null,this.elements=null,this.elementsAccessor=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.attributes={},this.vertexArrayObject=new VertexArrayObject(gl),(0,stub_methods.F)(this,"VertexArray","v6.0",DEPRECATIONS_V6),this.initialize(opts),Object.seal(this)}delete(){this.buffer&&this.buffer.delete(),this.vertexArrayObject.delete()}initialize(){let props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(props)}reset(){this.elements=null,this.elementsAccessor=null;const{MAX_ATTRIBUTES:MAX_ATTRIBUTES}=this.vertexArrayObject;return this.values=new Array(MAX_ATTRIBUTES).fill(null),this.accessors=new Array(MAX_ATTRIBUTES).fill(null),this.unused={},this.drawParams=null,this}setProps(props){return"program"in props&&(this.configuration=props.program&&props.program.configuration),"configuration"in props&&(this.configuration=props.configuration),"attributes"in props&&this.setAttributes(props.attributes),"elements"in props&&this.setElementBuffer(props.elements),"bindOnUse"in props&&(props=props.bindOnUse),this}clearDrawParams(){this.drawParams=null}getDrawParams(){return this.drawParams=this.drawParams||this._updateDrawParams(),this.drawParams}setAttributes(attributes){return Object.assign(this.attributes,attributes),this.vertexArrayObject.bind((()=>{for(const locationOrName in attributes){const value=attributes[locationOrName];this._setAttribute(locationOrName,value)}this.gl.bindBuffer(34962,null)})),this}setElementBuffer(){let elementBuffer=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,accessor=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.elements=elementBuffer,this.elementsAccessor=accessor,this.clearDrawParams(),this.vertexArrayObject.setElementBuffer(elementBuffer,accessor),this}setBuffer(locationOrName,buffer){let appAccessor=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(34963===buffer.target)return this.setElementBuffer(buffer,appAccessor);const{location:location,accessor:accessor}=this._resolveLocationAndAccessor(locationOrName,buffer,buffer.accessor,appAccessor);return location>=0&&(this.values[location]=buffer,this.accessors[location]=accessor,this.clearDrawParams(),this.vertexArrayObject.setBuffer(location,buffer,accessor)),this}setConstant(locationOrName,arrayValue){let appAccessor=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{location:location,accessor:accessor}=this._resolveLocationAndAccessor(locationOrName,arrayValue,Object.assign({size:arrayValue.length},appAccessor));return location>=0&&(arrayValue=this.vertexArrayObject._normalizeConstantArrayValue(arrayValue),this.values[location]=arrayValue,this.accessors[location]=accessor,this.clearDrawParams(),this.vertexArrayObject.enable(location,!1)),this}unbindBuffers(){return this.vertexArrayObject.bind((()=>{this.elements&&this.vertexArrayObject.setElementBuffer(null),this.buffer=this.buffer||new classes_buffer.Z(this.gl,{accessor:{size:4}});for(let location=0;location<this.vertexArrayObject.MAX_ATTRIBUTES;location++)this.values[location]instanceof classes_buffer.Z&&(this.gl.disableVertexAttribArray(location),this.gl.bindBuffer(34962,this.buffer.handle),this.gl.vertexAttribPointer(location,1,5126,!1,0,0))})),this}bindBuffers(){return this.vertexArrayObject.bind((()=>{this.elements&&this.setElementBuffer(this.elements);for(let location=0;location<this.vertexArrayObject.MAX_ATTRIBUTES;location++){const buffer=this.values[location];buffer instanceof classes_buffer.Z&&this.setBuffer(location,buffer)}})),this}bindForDraw(vertexCount,instanceCount,func){let value;return this.vertexArrayObject.bind((()=>{this._setConstantAttributes(vertexCount,instanceCount),value=func()})),value}_resolveLocationAndAccessor(locationOrName,value,valueAccessor,appAccessor){const INVALID_RESULT={location:-1,accessor:null},{location:location,name:name}=this._getAttributeIndex(locationOrName);if(!Number.isFinite(location)||location<0)return this.unused[locationOrName]=value,esm.cM.once(3,(()=>"unused value ".concat(locationOrName," in ").concat(this.id)))(),INVALID_RESULT;const accessInfo=this._getAttributeInfo(name||location);if(!accessInfo)return INVALID_RESULT;const currentAccessor=this.accessors[location]||{},accessor=classes_accessor.Z.resolve(accessInfo.accessor,currentAccessor,valueAccessor,appAccessor),{size:size,type:type}=accessor;return(0,assert.h)(Number.isFinite(size)&&Number.isFinite(type)),{location:location,accessor:accessor}}_getAttributeInfo(attributeName){return this.configuration&&this.configuration.getAttributeInfo(attributeName)}_getAttributeIndex(locationOrName){const location=Number(locationOrName);if(Number.isFinite(location))return{location:location};const multiLocation=MULTI_LOCATION_ATTRIBUTE_REGEXP.exec(locationOrName),name=multiLocation?multiLocation[1]:locationOrName,locationOffset=multiLocation?Number(multiLocation[2]):0;return this.configuration?{location:this.configuration.getAttributeLocation(name)+locationOffset,name:name}:{location:-1}}_setAttribute(locationOrName,value){if(value instanceof classes_buffer.Z)this.setBuffer(locationOrName,value);else if(Array.isArray(value)&&value.length&&value[0]instanceof classes_buffer.Z){const buffer=value[0],accessor=value[1];this.setBuffer(locationOrName,buffer,accessor)}else if(ArrayBuffer.isView(value)||Array.isArray(value)){const constant=value;this.setConstant(locationOrName,constant)}else{if(!(value.buffer instanceof classes_buffer.Z))throw new Error("VertexArray: attributes must be Buffers or constants (i.e. typed array)");{const accessor=value;this.setBuffer(locationOrName,accessor.buffer,accessor)}}}_setConstantAttributes(vertexCount,instanceCount){const elementCount=Math.max(0|vertexCount,0|instanceCount);let constant=this.values[0];ArrayBuffer.isView(constant)&&this._setConstantAttributeZero(constant,elementCount);for(let location=1;location<this.vertexArrayObject.MAX_ATTRIBUTES;location++)constant=this.values[location],ArrayBuffer.isView(constant)&&this._setConstantAttribute(location,constant)}_setConstantAttributeZero(constant,elementCount){if(VertexArrayObject.isSupported(this.gl,{constantAttributeZero:!0}))return void this._setConstantAttribute(0,constant);const buffer=this.vertexArrayObject.getConstantBuffer(elementCount,constant);this.vertexArrayObject.setBuffer(0,buffer,this.accessors[0])}_setConstantAttribute(location,constant){VertexArrayObject.setConstant(this.gl,location,constant)}_updateDrawParams(){const drawParams={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0};for(let location=0;location<this.vertexArrayObject.MAX_ATTRIBUTES;location++)this._updateDrawParamsForLocation(drawParams,location);return this.elements&&(drawParams.elementCount=this.elements.getElementCount(this.elements.accessor),drawParams.isIndexed=!0,drawParams.indexType=this.elementsAccessor.type||this.elements.accessor.type,drawParams.indexOffset=this.elementsAccessor.offset||0),drawParams.indexCount===1/0&&(drawParams.indexCount=0),drawParams.vertexCount===1/0&&(drawParams.vertexCount=0),drawParams.instanceCount===1/0&&(drawParams.instanceCount=0),drawParams}_updateDrawParamsForLocation(drawParams,location){const value=this.values[location],accessor=this.accessors[location];if(!value)return;const{divisor:divisor}=accessor,isInstanced=divisor>0;if(drawParams.isInstanced=drawParams.isInstanced||isInstanced,value instanceof classes_buffer.Z){const buffer=value;if(isInstanced){const instanceCount=buffer.getVertexCount(accessor);drawParams.instanceCount=Math.min(drawParams.instanceCount,instanceCount)}else{const vertexCount=buffer.getVertexCount(accessor);drawParams.vertexCount=Math.min(drawParams.vertexCount,vertexCount)}}}setElements(){let elementBuffer=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,accessor=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return esm.cM.deprecated("setElements","setElementBuffer")(),this.setElementBuffer(elementBuffer,accessor)}}var transform_feedback=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/classes/transform-feedback.js"),constants_to_keys=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/webgl-utils/constants-to-keys.js"),attribute_utils=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/webgl-utils/attribute-utils.js");function formatValue(v){let opts=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{isInteger:isInteger=!1}=opts;if(Array.isArray(v)||ArrayBuffer.isView(v))return function formatArrayValue(v,opts){const{maxElts:maxElts=16,size:size=1}=opts;let string="[";for(let i=0;i<v.length&&i<maxElts;++i)i>0&&(string+=",".concat(i%size==0?" ":"")),string+=formatValue(v[i],opts);const terminator=v.length>maxElts?"...":"]";return"".concat(string).concat(terminator)}(v,opts);if(!Number.isFinite(v))return String(v);if(Math.abs(v)<1e-16)return isInteger?"0":"0.";if(isInteger)return v.toFixed(0);if(Math.abs(v)>100&&Math.abs(v)<1e4)return v.toFixed(0);const string=v.toPrecision(2);return string.indexOf(".0")===string.length-2?string.slice(0,-1):string}function getDebugTableRow(vertexArray,attribute,accessor,header){const{gl:gl}=vertexArray;if(!attribute)return{[header]:"null","Format ":"N/A"};let isInteger,marker,value,type="NOT PROVIDED",size=1,verts=0,bytes=0;if(accessor&&(type=accessor.type,size=accessor.size,type=String(type).replace("Array",""),isInteger=-1!==type.indexOf("nt")),attribute instanceof classes_buffer.Z){const buffer=attribute,{data:data,changed:changed}=buffer.getDebugData();let format;if(marker=changed?"*":"",value=data,bytes=buffer.byteLength,verts=bytes/data.BYTES_PER_ELEMENT/size,accessor){const instanced=accessor.divisor>0;format="".concat(instanced?"I ":"P "," ").concat(verts," (x").concat(size,"=").concat(bytes," bytes ").concat((0,constants_to_keys.km)(gl,type),")")}else isInteger=!0,format="".concat(bytes," bytes");return{[header]:"".concat(marker).concat(formatValue(value,{size:size,isInteger:isInteger})),"Format ":format}}return value=attribute,size=attribute.length,type=String(attribute.constructor.name).replace("Array",""),isInteger=-1!==type.indexOf("nt"),{[header]:"".concat(formatValue(value,{size:size,isInteger:isInteger})," (constant)"),"Format ":"".concat(size,"x").concat(type," (constant)")}}function getGLSLDeclaration(name,accessor){const{type:type,size:size}=accessor,typeAndName=(0,attribute_utils.jG)(type,size);return typeAndName?"".concat(name," (").concat(typeAndName.name,")"):name}function getDebugTableForUniforms(_ref){let{header:header="Uniforms",program:program,uniforms:uniforms,undefinedOnly:undefinedOnly=!1}=_ref;(0,assert.h)(program);const uniformLocations=program._uniformSetters,table={},uniformNames=Object.keys(uniformLocations).sort();let count=0;for(const uniformName of uniformNames)uniformName.match(".*_.*")||uniformName.match(".*Matrix")||addUniformToTable({table:table,header:header,uniforms:uniforms,uniformName:uniformName,undefinedOnly:undefinedOnly})&&count++;for(const uniformName of uniformNames)uniformName.match(".*Matrix")&&addUniformToTable({table:table,header:header,uniforms:uniforms,uniformName:uniformName,undefinedOnly:undefinedOnly})&&count++;for(const uniformName of uniformNames)table[uniformName]||addUniformToTable({table:table,header:header,uniforms:uniforms,uniformName:uniformName,undefinedOnly:undefinedOnly})&&count++;let unusedCount=0;const unusedTable={};if(!undefinedOnly)for(const uniformName in uniforms){const uniform=uniforms[uniformName];table[uniformName]||(unusedCount++,unusedTable[uniformName]={Type:"NOT USED: ".concat(uniform),[header]:formatValue(uniform)})}return{table:table,count:count,unusedTable:unusedTable,unusedCount:unusedCount}}function addUniformToTable(_ref2){let{table:table,header:header,uniforms:uniforms,uniformName:uniformName,undefinedOnly:undefinedOnly}=_ref2;const value=uniforms[uniformName],isDefined=function isUniformDefined(value){return null!=value}(value);return(!undefinedOnly||!isDefined)&&(table[uniformName]={[header]:isDefined?formatValue(value):"N/A","Uniform Type":isDefined?value:"NOT PROVIDED"},!0)}function debug_program_configuration_getGLSLDeclaration(attributeInfo){const{type:type,size:size}=attributeInfo.accessor,typeAndName=(0,attribute_utils.jG)(type,size);return typeAndName?"".concat(typeAndName.name," ").concat(attributeInfo.name):attributeInfo.name}const GLTF_TO_LUMA_ATTRIBUTE_MAP={POSITION:"positions",NORMAL:"normals",COLOR_0:"colors",TEXCOORD_0:"texCoords",TEXCOORD_1:"texCoords1",TEXCOORD_2:"texCoords2"};function mapAttributeName(name,options){const{attributeMap:attributeMap=GLTF_TO_LUMA_ATTRIBUTE_MAP}=options||{};return attributeMap&&attributeMap[name]||name}function inferAttributeAccessor(attributeName,attribute){let category;switch(attributeName){case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":category="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":category="vectors"}switch(category){case"vectors":attribute.size=attribute.size||3;break;case"uvs":attribute.size=attribute.size||2}(0,assert.h)(Number.isFinite(attribute.size),"attribute ".concat(attributeName," needs size"))}const NOOP=()=>{},DRAW_PARAMS={};class Model{constructor(gl){let props=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{id:id=(0,utils.hQ)("model")}=props;(0,assert.h)((0,esm.UF)(gl)),this.id=id,this.gl=gl,this.id=props.id||(0,utils.hQ)("Model"),this.lastLogTime=0,this.animated=!1,this.initialize(props)}initialize(props){this.props={},this.programManager=props.programManager||program_manager.Z.getDefaultProgramManager(this.gl),this._programManagerState=-1,this._managedProgram=!1;const{program:program=null,vs:vs,fs:fs,modules:modules,defines:defines,inject:inject,varyings:varyings,bufferMode:bufferMode,transpileToGLSL100:transpileToGLSL100}=props;this.programProps={program:program,vs:vs,fs:fs,modules:modules,defines:defines,inject:inject,varyings:varyings,bufferMode:bufferMode,transpileToGLSL100:transpileToGLSL100},this.program=null,this.vertexArray=null,this._programDirty=!0,this.userData={},this.needsRedraw=!0,this._attributes={},this.attributes={},this.uniforms={},this.pickable=!0,this._checkProgram(),this.setUniforms(Object.assign({},this.getModuleUniforms(props.moduleSettings))),this.drawMode=void 0!==props.drawMode?props.drawMode:4,this.vertexCount=props.vertexCount||0,this.geometryBuffers={},this.isInstanced=props.isInstanced||props.instanced||props.instanceCount>0,this._setModelProps(props),this.geometry={},(0,assert.h)(void 0!==this.drawMode&&Number.isFinite(this.vertexCount),"Model needs drawMode and vertexCount")}setProps(props){this._setModelProps(props)}delete(){for(const key in this._attributes)this._attributes[key]!==this.attributes[key]&&this._attributes[key].delete();this._managedProgram&&(this.programManager.release(this.program),this._managedProgram=!1),this.vertexArray.delete(),this._deleteGeometryBuffers()}getDrawMode(){return this.drawMode}getVertexCount(){return this.vertexCount}getInstanceCount(){return this.instanceCount}getAttributes(){return this.attributes}getProgram(){return this.program}setProgram(props){const{program:program,vs:vs,fs:fs,modules:modules,defines:defines,inject:inject,varyings:varyings,bufferMode:bufferMode,transpileToGLSL100:transpileToGLSL100}=props;this.programProps={program:program,vs:vs,fs:fs,modules:modules,defines:defines,inject:inject,varyings:varyings,bufferMode:bufferMode,transpileToGLSL100:transpileToGLSL100},this._programDirty=!0}getUniforms(){return this.uniforms}setDrawMode(drawMode){return this.drawMode=drawMode,this}setVertexCount(vertexCount){return(0,assert.h)(Number.isFinite(vertexCount)),this.vertexCount=vertexCount,this}setInstanceCount(instanceCount){return(0,assert.h)(Number.isFinite(instanceCount)),this.instanceCount=instanceCount,this}setGeometry(geometry){return this.drawMode=geometry.drawMode,this.vertexCount=geometry.getVertexCount(),this._deleteGeometryBuffers(),this.geometryBuffers=function getBuffersFromGeometry(gl,geometry,options){const buffers={};let indices=geometry.indices;for(const name in geometry.attributes){const attribute=geometry.attributes[name],remappedName=mapAttributeName(name,options);if("indices"===name)indices=attribute;else if(attribute.constant)buffers[remappedName]=attribute.value;else{const typedArray=attribute.value,accessor={...attribute};delete accessor.value,buffers[remappedName]=[new classes_buffer.Z(gl,typedArray),accessor],inferAttributeAccessor(name,accessor)}}if(indices){const data=indices.value||indices;(0,assert.h)(data instanceof Uint16Array||data instanceof Uint32Array,'attribute array for "indices" must be of integer type');const accessor={size:1,isIndexed:void 0===indices.isIndexed||indices.isIndexed};buffers.indices=[new classes_buffer.Z(gl,{data:data,target:34963}),accessor]}return buffers}(this.gl,geometry),this.vertexArray.setAttributes(this.geometryBuffers),this}setAttributes(){let attributes=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if((0,utils.nK)(attributes))return this;const normalizedAttributes={};for(const name in attributes){const attribute=attributes[name];normalizedAttributes[name]=attribute.getValue?attribute.getValue():attribute}return this.vertexArray.setAttributes(normalizedAttributes),this}setUniforms(){let uniforms=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign(this.uniforms,uniforms),this}getModuleUniforms(opts){this._checkProgram();const getUniforms=this.programManager.getUniforms(this.program);return getUniforms?getUniforms(opts):{}}updateModuleSettings(opts){const uniforms=this.getModuleUniforms(opts||{});return this.setUniforms(uniforms)}clear(opts){return(0,clear.Z)(this.program.gl,opts),this}draw(){let opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._checkProgram();const{moduleSettings:moduleSettings=null,framebuffer:framebuffer,uniforms:uniforms={},attributes:attributes={},transformFeedback:transformFeedback=this.transformFeedback,parameters:parameters={},vertexArray:vertexArray=this.vertexArray}=opts;let logPriority;this.setAttributes(attributes),this.updateModuleSettings(moduleSettings),this.setUniforms(uniforms),esm.cM.priority>=2&&(logPriority=this._logDrawCallStart(2));const drawParams=this.vertexArray.getDrawParams(),{isIndexed:isIndexed=drawParams.isIndexed,indexType:indexType=drawParams.indexType,indexOffset:indexOffset=drawParams.indexOffset,vertexArrayInstanced:vertexArrayInstanced=drawParams.isInstanced}=this.props;vertexArrayInstanced&&!this.isInstanced&&esm.cM.warn("Found instanced attributes on non-instanced model",this.id)();const{isInstanced:isInstanced,instanceCount:instanceCount}=this,{onBeforeRender:onBeforeRender=NOOP,onAfterRender:onAfterRender=NOOP}=this.props;onBeforeRender(),this.program.setUniforms(this.uniforms);const didDraw=this.program.draw(Object.assign(DRAW_PARAMS,opts,{logPriority:logPriority,uniforms:null,framebuffer:framebuffer,parameters:parameters,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:vertexArray,transformFeedback:transformFeedback,isIndexed:isIndexed,indexType:indexType,isInstanced:isInstanced,instanceCount:instanceCount,offset:isIndexed?indexOffset:0}));return onAfterRender(),esm.cM.priority>=2&&this._logDrawCallEnd(logPriority,vertexArray,framebuffer),didDraw}transform(){let opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{discard:discard=!0,feedbackBuffers:feedbackBuffers,unbindModels:unbindModels=[]}=opts;let{parameters:parameters}=opts;feedbackBuffers&&this._setFeedbackBuffers(feedbackBuffers),discard&&(parameters=Object.assign({},parameters,{35977:discard})),unbindModels.forEach((model=>model.vertexArray.unbindBuffers()));try{this.draw(Object.assign({},opts,{parameters:parameters}))}finally{unbindModels.forEach((model=>model.vertexArray.bindBuffers()))}return this}render(){let uniforms=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return esm.cM.warn("Model.render() is deprecated. Use Model.setUniforms() and Model.draw()")(),this.setUniforms(uniforms).draw()}_setModelProps(props){Object.assign(this.props,props),"uniforms"in props&&this.setUniforms(props.uniforms),"pickable"in props&&(this.pickable=props.pickable),"instanceCount"in props&&(this.instanceCount=props.instanceCount),"geometry"in props&&this.setGeometry(props.geometry),"attributes"in props&&this.setAttributes(props.attributes),"_feedbackBuffers"in props&&this._setFeedbackBuffers(props._feedbackBuffers)}_checkProgram(){if(!(this._programDirty||this.programManager.stateHash!==this._programManagerState))return;let{program:program}=this.programProps;if(program)this._managedProgram=!1;else{const{vs:vs,fs:fs,modules:modules,inject:inject,defines:defines,varyings:varyings,bufferMode:bufferMode,transpileToGLSL100:transpileToGLSL100}=this.programProps;program=this.programManager.get({vs:vs,fs:fs,modules:modules,inject:inject,defines:defines,varyings:varyings,bufferMode:bufferMode,transpileToGLSL100:transpileToGLSL100}),this.program&&this._managedProgram&&this.programManager.release(this.program),this._programManagerState=this.programManager.stateHash,this._managedProgram=!0}(0,assert.h)(program instanceof classes_program.Z,"Model needs a program"),this._programDirty=!1,program!==this.program&&(this.program=program,this.vertexArray?this.vertexArray.setProps({program:this.program,attributes:this.vertexArray.attributes}):this.vertexArray=new VertexArray(this.gl,{program:this.program}),this.setUniforms(Object.assign({},this.getModuleUniforms())))}_deleteGeometryBuffers(){for(const name in this.geometryBuffers){const buffer=this.geometryBuffers[name][0]||this.geometryBuffers[name];buffer instanceof classes_buffer.Z&&buffer.delete()}}_setAnimationProps(animationProps){this.animated&&(0,assert.h)(animationProps,"Model.draw(): animated uniforms but no animationProps")}_setFeedbackBuffers(){let feedbackBuffers=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if((0,utils.nK)(feedbackBuffers))return this;const{gl:gl}=this.program;return this.transformFeedback=this.transformFeedback||new transform_feedback.Z(gl,{program:this.program}),this.transformFeedback.setBuffers(feedbackBuffers),this}_logDrawCallStart(logLevel){const logDrawTimeout=logLevel>3?0:1e4;if(!(Date.now()-this.lastLogTime<logDrawTimeout))return this.lastLogTime=Date.now(),esm.cM.group(2,">>> DRAWING MODEL ".concat(this.id),{collapsed:esm.cM.level<=2})(),logLevel}_logDrawCallEnd(logLevel,vertexArray,uniforms,framebuffer){if(void 0===logLevel)return;const attributeTable=function getDebugTableForVertexArray(_ref){let{vertexArray:vertexArray,header:header="Attributes"}=_ref;if(!vertexArray.configuration)return{};const table={};vertexArray.elements&&(table.ELEMENT_ARRAY_BUFFER=getDebugTableRow(vertexArray,vertexArray.elements,null,header));const attributes=vertexArray.values;for(const attributeLocation in attributes){const info=vertexArray._getAttributeInfo(attributeLocation);if(info){let rowHeader="".concat(attributeLocation,": ").concat(info.name);const accessor=vertexArray.accessors[info.location];accessor&&(rowHeader="".concat(attributeLocation,": ").concat(getGLSLDeclaration(info.name,accessor))),table[rowHeader]=getDebugTableRow(vertexArray,attributes[attributeLocation],accessor,header)}}return table}({vertexArray:vertexArray,header:"".concat(this.id," attributes"),attributes:this._attributes}),{table:uniformTable,unusedTable:unusedTable,unusedCount:unusedCount}=getDebugTableForUniforms({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,uniforms)}),{table:missingTable,count:missingCount}=getDebugTableForUniforms({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,uniforms),undefinedOnly:!0});missingCount>0&&esm.cM.log("MISSING UNIFORMS",Object.keys(missingTable))(),unusedCount>0&&esm.cM.log("UNUSED UNIFORMS",Object.keys(unusedTable))();const configTable=function getDebugTableForProgramConfiguration(config){const table={},header="Accessors for ".concat(config.id);for(const attributeInfo of config.attributeInfos)if(attributeInfo){const glslDeclaration=debug_program_configuration_getGLSLDeclaration(attributeInfo);table["in ".concat(glslDeclaration)]={[header]:JSON.stringify(attributeInfo.accessor)}}for(const varyingInfo of config.varyingInfos)if(varyingInfo){const glslDeclaration=debug_program_configuration_getGLSLDeclaration(varyingInfo);table["out ".concat(glslDeclaration)]={[header]:JSON.stringify(varyingInfo.accessor)}}return table}(this.vertexArray.configuration);esm.cM.table(logLevel,attributeTable)(),esm.cM.table(logLevel,uniformTable)(),esm.cM.table(logLevel+1,configTable)(),framebuffer&&framebuffer.log({logLevel:2,message:"Rendered to ".concat(framebuffer.id)}),esm.cM.groupEnd(2)()}}},"./node_modules/@luma.gl/engine/dist/esm/lib/program-manager.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return ProgramManager}});var constants=__webpack_require__("./node_modules/@luma.gl/shadertools/dist/esm/lib/constants.js"),shader_module=__webpack_require__("./node_modules/@luma.gl/shadertools/dist/esm/lib/shader-module.js"),assert=__webpack_require__("./node_modules/@luma.gl/shadertools/dist/esm/utils/assert.js");function resolveModules(modules){return getShaderDependencies(instantiateModules(modules))}function getShaderDependencies(modules){const moduleMap={},moduleDepth={};return getDependencyGraph({modules:modules,level:0,moduleMap:moduleMap,moduleDepth:moduleDepth}),Object.keys(moduleDepth).sort(((a,b)=>moduleDepth[b]-moduleDepth[a])).map((name=>moduleMap[name]))}function getDependencyGraph(_ref){let{modules:modules,level:level,moduleMap:moduleMap,moduleDepth:moduleDepth}=_ref;if(level>=5)throw new Error("Possible loop in shader dependency graph");for(const module of modules)moduleMap[module.name]=module,(void 0===moduleDepth[module.name]||moduleDepth[module.name]<level)&&(moduleDepth[module.name]=level);for(const module of modules)module.dependencies&&getDependencyGraph({modules:module.dependencies,level:level+1,moduleMap:moduleMap,moduleDepth:moduleDepth})}function instantiateModules(modules,seen){return modules.map((module=>(module instanceof shader_module.Z||((0,assert.Z)("string"!=typeof module,"Shader module use by name is deprecated. Import shader module '".concat(module,"' and use it directly.")),(0,assert.Z)(module.name,"shader module has no name"),(module=new shader_module.Z(module)).dependencies=instantiateModules(module.dependencies)),module)))}const GL_VENDOR=7936,GL_RENDERER=7937,GL_VERSION=7938,GL_SHADING_LANGUAGE_VERSION=35724,WEBGL_FEATURES={GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},FEATURES={};Object.keys(WEBGL_FEATURES).forEach((key=>{FEATURES[key]=key}));const compiledGlslExtensions={};function canCompileGLGSExtension(gl,cap){let opts=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const feature=WEBGL_FEATURES[cap];if((0,assert.Z)(feature,cap),!function isOldIE(){let opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const navigator="undefined"!=typeof window&&window.navigator||{},userAgent=opts.userAgent||navigator.userAgent||"",isMSIE=-1!==userAgent.indexOf("MSIE "),isTrident=-1!==userAgent.indexOf("Trident/");return isMSIE||isTrident}(opts))return!0;if(cap in compiledGlslExtensions)return compiledGlslExtensions[cap];const extensionName=feature[0],behavior=opts.behavior||"enable",source="#extension GL_".concat(extensionName," : ").concat(behavior,"\nvoid main(void) {}"),shader=gl.createShader(35633);gl.shaderSource(shader,source),gl.compileShader(shader);const canCompile=gl.getShaderParameter(shader,35713);return gl.deleteShader(shader),compiledGlslExtensions[cap]=canCompile,canCompile}function getFeature(gl,cap){const feature=WEBGL_FEATURES[cap];(0,assert.Z)(feature,cap);const extensionName=function isWebGL2(gl){return"undefined"!=typeof WebGL2RenderingContext&&gl instanceof WebGL2RenderingContext||Boolean(gl&&2===gl._version)}(gl)&&feature[1]||feature[0],value="string"==typeof extensionName?Boolean(gl.getExtension(extensionName)):extensionName;return(0,assert.Z)(!1===value||!0===value),value}function hasFeatures(gl,features){return(features=Array.isArray(features)?features:[features]).every((feature=>getFeature(gl,feature)))}function getPlatformShaderDefines(gl){const debugInfo=function getContextInfo(gl){const info=gl.getExtension("WEBGL_debug_renderer_info"),vendor=gl.getParameter(info&&info.UNMASKED_VENDOR_WEBGL||GL_VENDOR),renderer=gl.getParameter(info&&info.UNMASKED_RENDERER_WEBGL||GL_RENDERER);return{gpuVendor:function identifyGPUVendor(vendor,renderer){return vendor.match(/NVIDIA/i)||renderer.match(/NVIDIA/i)?"NVIDIA":vendor.match(/INTEL/i)||renderer.match(/INTEL/i)?"INTEL":vendor.match(/AMD/i)||renderer.match(/AMD/i)||vendor.match(/ATI/i)||renderer.match(/ATI/i)?"AMD":"UNKNOWN GPU"}(vendor,renderer),vendor:vendor,renderer:renderer,version:gl.getParameter(GL_VERSION),shadingLanguageVersion:gl.getParameter(GL_SHADING_LANGUAGE_VERSION)}}(gl);switch(debugInfo.gpuVendor.toLowerCase()){case"nvidia":return"#define NVIDIA_GPU\n// Nvidia optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n";case"intel":return"#define INTEL_GPU\n// Intel optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n";case"amd":return"#define AMD_GPU\n";default:return"#define DEFAULT_GPU\n// Prevent driver from optimizing away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n"}}var inject_shader=__webpack_require__("./node_modules/@luma.gl/shadertools/dist/esm/lib/inject-shader.js");function testVariable(qualifier){return new RegExp("\\b".concat(qualifier,"[ \\t]+(\\w+[ \\t]+\\w+(\\[\\w+\\])?;)"),"g")}const ES300_REPLACEMENTS=[[/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,"#version 300 es\n"],[/\btexture(2D|2DProj|Cube)Lod(EXT)?\(/g,"textureLod("],[/\btexture(2D|2DProj|Cube)(EXT)?\(/g,"texture("]],ES300_VERTEX_REPLACEMENTS=[...ES300_REPLACEMENTS,[testVariable("attribute"),"in $1"],[testVariable("varying"),"out $1"]],ES300_FRAGMENT_REPLACEMENTS=[...ES300_REPLACEMENTS,[testVariable("varying"),"in $1"]],ES100_REPLACEMENTS=[[/^#version[ \t]+300[ \t]+es/,"#version 100"],[/\btexture(2D|2DProj|Cube)Lod\(/g,"texture$1LodEXT("],[/\btexture\(/g,"texture2D("],[/\btextureLod\(/g,"texture2DLodEXT("]],ES100_VERTEX_REPLACEMENTS=[...ES100_REPLACEMENTS,[testVariable("in"),"attribute $1"],[testVariable("out"),"varying $1"]],ES100_FRAGMENT_REPLACEMENTS=[...ES100_REPLACEMENTS,[testVariable("in"),"varying $1"]],ES100_FRAGMENT_OUTPUT_NAME="gl_FragColor",ES300_FRAGMENT_OUTPUT_REGEX=/\bout[ \t]+vec4[ \t]+(\w+)[ \t]*;\n?/,REGEX_START_OF_MAIN=/void\s+main\s*\([^)]*\)\s*\{\n?/;function transpileShader(source,targetGLSLVersion,isVertex){switch(targetGLSLVersion){case 300:return isVertex?convertShader(source,ES300_VERTEX_REPLACEMENTS):function convertFragmentShaderTo300(source){source=convertShader(source,ES300_FRAGMENT_REPLACEMENTS);const outputMatch=source.match(ES300_FRAGMENT_OUTPUT_REGEX);if(outputMatch){const outputName=outputMatch[1];source=source.replace(new RegExp("\\b".concat(ES100_FRAGMENT_OUTPUT_NAME,"\\b"),"g"),outputName)}else{const outputName="fragmentColor";source=source.replace(REGEX_START_OF_MAIN,(match=>"out vec4 ".concat(outputName,";\n").concat(match))).replace(new RegExp("\\b".concat(ES100_FRAGMENT_OUTPUT_NAME,"\\b"),"g"),outputName)}return source}(source);case 100:return isVertex?convertShader(source,ES100_VERTEX_REPLACEMENTS):function convertFragmentShaderTo100(source){source=convertShader(source,ES100_FRAGMENT_REPLACEMENTS);const outputMatch=source.match(ES300_FRAGMENT_OUTPUT_REGEX);if(outputMatch){const outputName=outputMatch[1];source=source.replace(ES300_FRAGMENT_OUTPUT_REGEX,"").replace(new RegExp("\\b".concat(outputName,"\\b"),"g"),ES100_FRAGMENT_OUTPUT_NAME)}return source}(source);default:throw new Error("unknown GLSL version ".concat(targetGLSLVersion))}}function convertShader(source,replacements){for(const[pattern,replacement]of replacements)source=source.replace(pattern,replacement);return source}const INJECT_SHADER_DECLARATIONS="\n\n".concat(inject_shader.O_,"\n\n"),SHADER_TYPE={[constants.H]:"vertex",[constants.Y]:"fragment"},FRAGMENT_SHADER_PROLOGUE="precision highp float;\n\n";function assembleShader(gl,_ref){let{id:id,source:source,type:type,modules:modules,defines:defines={},hookFunctions:hookFunctions=[],inject:inject={},transpileToGLSL100:transpileToGLSL100=!1,prologue:prologue=!0,log:log}=_ref;(0,assert.Z)("string"==typeof source,"shader source must be a string");const isVertex=type===constants.H,sourceLines=source.split("\n");let glslVersion=100,versionLine="",coreSource=source;0===sourceLines[0].indexOf("#version ")?(glslVersion=300,versionLine=sourceLines[0],coreSource=sourceLines.slice(1).join("\n")):versionLine="#version ".concat(glslVersion);const allDefines={};modules.forEach((module=>{Object.assign(allDefines,module.getDefines())})),Object.assign(allDefines,defines);let assembledSource=prologue?"".concat(versionLine,"\n").concat(function getShaderName(_ref3){let{id:id,source:source,type:type}=_ref3;const injectShaderName=id&&"string"==typeof id&&-1===source.indexOf("SHADER_NAME");return injectShaderName?"\n#define SHADER_NAME ".concat(id,"_").concat(SHADER_TYPE[type],"\n\n"):""}({id:id,source:source,type:type}),"\n").concat(function getShaderType(_ref2){let{type:type}=_ref2;return"\n#define SHADER_TYPE_".concat(SHADER_TYPE[type].toUpperCase(),"\n")}({type:type}),"\n").concat(getPlatformShaderDefines(gl),"\n").concat(function getVersionDefines(gl,glslVersion,isFragment){let versionDefines="#if (__VERSION__ > 120)\n\n# define FEATURE_GLSL_DERIVATIVES\n# define FEATURE_GLSL_DRAW_BUFFERS\n# define FEATURE_GLSL_FRAG_DEPTH\n# define FEATURE_GLSL_TEXTURE_LOD\n\n// DEPRECATED FLAGS, remove in v9\n# define FRAG_DEPTH\n# define DERIVATIVES\n# define DRAW_BUFFERS\n# define TEXTURE_LOD\n\n#endif // __VERSION\n";return hasFeatures(gl,FEATURES.GLSL_FRAG_DEPTH)&&(versionDefines+="\n// FRAG_DEPTH => gl_FragDepth is available\n#ifdef GL_EXT_frag_depth\n#extension GL_EXT_frag_depth : enable\n# define FEATURE_GLSL_FRAG_DEPTH\n# define FRAG_DEPTH\n# define gl_FragDepth gl_FragDepthEXT\n#endif\n"),hasFeatures(gl,FEATURES.GLSL_DERIVATIVES)&&canCompileGLGSExtension(gl,FEATURES.GLSL_DERIVATIVES)&&(versionDefines+="\n// DERIVATIVES => dxdF, dxdY and fwidth are available\n#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives : enable\n# define FEATURE_GLSL_DERIVATIVES\n# define DERIVATIVES\n#endif\n"),hasFeatures(gl,FEATURES.GLSL_FRAG_DATA)&&canCompileGLGSExtension(gl,FEATURES.GLSL_FRAG_DATA,{behavior:"require"})&&(versionDefines+="\n// DRAW_BUFFERS => gl_FragData[] is available\n#ifdef GL_EXT_draw_buffers\n#extension GL_EXT_draw_buffers : require\n#define FEATURE_GLSL_DRAW_BUFFERS\n#define DRAW_BUFFERS\n#endif\n"),hasFeatures(gl,FEATURES.GLSL_TEXTURE_LOD)&&(versionDefines+="// TEXTURE_LOD => texture2DLod etc are available\n#ifdef GL_EXT_shader_texture_lod\n#extension GL_EXT_shader_texture_lod : enable\n\n# define FEATURE_GLSL_TEXTURE_LOD\n# define TEXTURE_LOD\n\n#endif\n"),versionDefines}(gl),"\n").concat(function getApplicationDefines(){let defines=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},count=0,sourceText="";for(const define in defines){0===count&&(sourceText+="\n// APPLICATION DEFINES\n"),count++;const value=defines[define];(value||Number.isFinite(value))&&(sourceText+="#define ".concat(define.toUpperCase()," ").concat(defines[define],"\n"))}0===count&&(sourceText+="\n");return sourceText}(allDefines),"\n").concat(isVertex?"":FRAGMENT_SHADER_PROLOGUE,"\n"):"".concat(versionLine,"\n");const hookFunctionMap=function normalizeHookFunctions(hookFunctions){const result={vs:{},fs:{}};return hookFunctions.forEach((hook=>{let opts;"string"!=typeof hook?(opts=hook,hook=opts.hook):opts={},hook=hook.trim();const[stage,signature]=hook.split(":"),name=hook.replace(/\(.+/,"");result[stage][name]=Object.assign(opts,{signature:signature})})),result}(hookFunctions),hookInjections={},declInjections={},mainInjections={};for(const key in inject){const injection="string"==typeof inject[key]?{injection:inject[key],order:0}:inject[key],match=key.match(/^(v|f)s:(#)?([\w-]+)$/);if(match){const hash=match[2],name=match[3];hash?"decl"===name?declInjections[key]=[injection]:mainInjections[key]=[injection]:hookInjections[key]=[injection]}else mainInjections[key]=[injection]}for(const module of modules){log&&module.checkDeprecations(coreSource,log);assembledSource+=module.getModuleSource(type,glslVersion);const injections=module.injections[type];for(const key in injections){const match=key.match(/^(v|f)s:#([\w-]+)$/);if(match){const injectionType="decl"===match[2]?declInjections:mainInjections;injectionType[key]=injectionType[key]||[],injectionType[key].push(injections[key])}else hookInjections[key]=hookInjections[key]||[],hookInjections[key].push(injections[key])}}return assembledSource+=INJECT_SHADER_DECLARATIONS,assembledSource=(0,inject_shader.ZP)(assembledSource,type,declInjections),assembledSource+=function getHookFunctions(hookFunctions,hookInjections){let result="";for(const hookName in hookFunctions){const hookFunction=hookFunctions[hookName];if(result+="void ".concat(hookFunction.signature," {\n"),hookFunction.header&&(result+="  ".concat(hookFunction.header)),hookInjections[hookName]){const injections=hookInjections[hookName];injections.sort(((a,b)=>a.order-b.order));for(const injection of injections)result+="  ".concat(injection.injection,"\n")}hookFunction.footer&&(result+="  ".concat(hookFunction.footer)),result+="}\n"}return result}(hookFunctionMap[type],hookInjections),assembledSource+=coreSource,assembledSource=(0,inject_shader.ZP)(assembledSource,type,mainInjections),assembledSource=transpileShader(assembledSource,transpileToGLSL100?100:glslVersion,isVertex),assembledSource}function assembleGetUniforms(modules){return function getUniforms(opts){const uniforms={};for(const module of modules){const moduleUniforms=module.getUniforms(opts,uniforms);Object.assign(uniforms,moduleUniforms)}return uniforms}}var program=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/classes/program.js");class ProgramManager{static getDefaultProgramManager(gl){return gl.luma=gl.luma||{},gl.luma.defaultProgramManager=gl.luma.defaultProgramManager||new ProgramManager(gl),gl.luma.defaultProgramManager}constructor(gl){this.gl=gl,this._programCache={},this._getUniforms={},this._registeredModules={},this._hookFunctions=[],this._defaultModules=[],this._hashes={},this._hashCounter=0,this.stateHash=0,this._useCounts={}}addDefaultModule(module){this._defaultModules.find((m=>m.name===module.name))||this._defaultModules.push(module),this.stateHash++}removeDefaultModule(module){const moduleName="string"==typeof module?module:module.name;this._defaultModules=this._defaultModules.filter((m=>m.name!==moduleName)),this.stateHash++}addShaderHook(hook,opts){opts&&(hook=Object.assign(opts,{hook:hook})),this._hookFunctions.push(hook),this.stateHash++}get(){let props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{vs:vs="",fs:fs="",defines:defines={},inject:inject={},varyings:varyings=[],bufferMode:bufferMode=35981,transpileToGLSL100:transpileToGLSL100=!1}=props,modules=this._getModuleList(props.modules),vsHash=this._getHash(vs),fsHash=this._getHash(fs),moduleHashes=modules.map((m=>this._getHash(m.name))).sort(),varyingHashes=varyings.map((v=>this._getHash(v))),defineKeys=Object.keys(defines).sort(),injectKeys=Object.keys(inject).sort(),defineHashes=[],injectHashes=[];for(const key of defineKeys)defineHashes.push(this._getHash(key)),defineHashes.push(this._getHash(defines[key]));for(const key of injectKeys)injectHashes.push(this._getHash(key)),injectHashes.push(this._getHash(inject[key]));const hash="".concat(vsHash,"/").concat(fsHash,"D").concat(defineHashes.join("/"),"M").concat(moduleHashes.join("/"),"I").concat(injectHashes.join("/"),"V").concat(varyingHashes.join("/"),"H").concat(this.stateHash,"B").concat(bufferMode).concat(transpileToGLSL100?"T":"");if(!this._programCache[hash]){const assembled=function assembleShaders(gl,opts){const{vs:vs,fs:fs}=opts,modules=resolveModules(opts.modules||[]);return{gl:gl,vs:assembleShader(gl,Object.assign({},opts,{source:vs,type:constants.H,modules:modules})),fs:assembleShader(gl,Object.assign({},opts,{source:fs,type:constants.Y,modules:modules})),getUniforms:assembleGetUniforms(modules)}}(this.gl,{vs:vs,fs:fs,modules:modules,inject:inject,defines:defines,hookFunctions:this._hookFunctions,transpileToGLSL100:transpileToGLSL100});this._programCache[hash]=new program.Z(this.gl,{hash:hash,vs:assembled.vs,fs:assembled.fs,varyings:varyings,bufferMode:bufferMode}),this._getUniforms[hash]=assembled.getUniforms||(x=>{}),this._useCounts[hash]=0}return this._useCounts[hash]++,this._programCache[hash]}getUniforms(program){return this._getUniforms[program.hash]||null}release(program){const hash=program.hash;this._useCounts[hash]--,0===this._useCounts[hash]&&(this._programCache[hash].delete(),delete this._programCache[hash],delete this._getUniforms[hash],delete this._useCounts[hash])}_getHash(key){return void 0===this._hashes[key]&&(this._hashes[key]=this._hashCounter++),this._hashes[key]}_getModuleList(){let appModules=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const modules=new Array(this._defaultModules.length+appModules.length),seen={};let count=0;for(let i=0,len=this._defaultModules.length;i<len;++i){const module=this._defaultModules[i],name=module.name;modules[count++]=module,seen[name]=!0}for(let i=0,len=appModules.length;i<len;++i){const module=appModules[i],name=module.name;seen[name]||(modules[count++]=module,seen[name]=!0)}return modules.length=count,modules}}},"./node_modules/@luma.gl/engine/dist/esm/transform/transform.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return Transform}});var assert=__webpack_require__("./node_modules/@luma.gl/shadertools/dist/esm/utils/assert.js");const FS_GLES="out vec4 transform_output;\nvoid main() {\n  transform_output = vec4(0);\n}",FS300="#version 300 es\n".concat(FS_GLES);function getQualifierDetails(line,qualifiers){qualifiers=Array.isArray(qualifiers)?qualifiers:[qualifiers];const words=line.replace(/^\s+/,"").split(/\s+/),[qualifier,type,definition]=words;if(!qualifiers.includes(qualifier)||!type||!definition)return null;return{qualifier:qualifier,type:type,name:definition.split(";")[0]}}function getPassthroughFS(){let options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{version:version=100,input:input,inputType:inputType,output:output}=options;if(!input)return 300===version?FS300:version>300?"#version ".concat(version,"\n").concat(FS_GLES):"void main() {gl_FragColor = vec4(0);}";const outputValue=function convertToVec4(variable,type){switch(type){case"float":return"vec4(".concat(variable,", 0.0, 0.0, 1.0)");case"vec2":return"vec4(".concat(variable,", 0.0, 1.0)");case"vec3":return"vec4(".concat(variable,", 1.0)");case"vec4":return variable;default:return(0,assert.Z)(!1),null}}(input,inputType);return version>=300?"#version ".concat(version," ").concat(300===version?"es":"","\nin ").concat(inputType," ").concat(input,";\nout vec4 ").concat(output,";\nvoid main() {\n  ").concat(output," = ").concat(outputValue,";\n}"):"varying ".concat(inputType," ").concat(input,";\nvoid main() {\n  gl_FragColor = ").concat(outputValue,";\n}")}var esm=__webpack_require__("./node_modules/@luma.gl/gltools/dist/esm/index.js"),classes_buffer=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/classes/buffer.js"),transform_feedback=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/classes/transform-feedback.js"),utils_assert=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/utils/assert.js");class BufferTransform{constructor(gl){let props=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=gl,this.currentIndex=0,this.feedbackMap={},this.varyings=null,this.bindings=[],this.resources={},this._initialize(props),Object.seal(this)}setupResources(opts){for(const binding of this.bindings)this._setupTransformFeedback(binding,opts)}updateModelProps(){let props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{varyings:varyings}=this;return varyings.length>0&&(props=Object.assign({},props,{varyings:varyings})),props}getDrawOptions(){let opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const binding=this.bindings[this.currentIndex],{sourceBuffers:sourceBuffers,transformFeedback:transformFeedback}=binding;return{attributes:Object.assign({},sourceBuffers,opts.attributes),transformFeedback:transformFeedback}}swap(){return!!this.feedbackMap&&(this.currentIndex=this._getNextIndex(),!0)}update(){let opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setupBuffers(opts)}getBuffer(varyingName){const{feedbackBuffers:feedbackBuffers}=this.bindings[this.currentIndex],bufferOrParams=varyingName?feedbackBuffers[varyingName]:null;return bufferOrParams?bufferOrParams instanceof classes_buffer.Z?bufferOrParams:bufferOrParams.buffer:null}getData(){let options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{varyingName:varyingName}=options,buffer=this.getBuffer(varyingName);return buffer?buffer.getData():null}delete(){for(const name in this.resources)this.resources[name].delete()}_initialize(){let props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setupBuffers(props),this.varyings=props.varyings||Object.keys(this.bindings[this.currentIndex].feedbackBuffers),this.varyings.length>0&&(0,utils_assert.h)((0,esm.D0)(this.gl))}_getFeedbackBuffers(props){const{sourceBuffers:sourceBuffers={}}=props,feedbackBuffers={};if(this.bindings[this.currentIndex]&&Object.assign(feedbackBuffers,this.bindings[this.currentIndex].feedbackBuffers),this.feedbackMap)for(const sourceName in this.feedbackMap){const feedbackName=this.feedbackMap[sourceName];sourceName in sourceBuffers&&(feedbackBuffers[feedbackName]=sourceName)}Object.assign(feedbackBuffers,props.feedbackBuffers);for(const bufferName in feedbackBuffers){const bufferOrRef=feedbackBuffers[bufferName];if("string"==typeof bufferOrRef){const sourceBuffer=sourceBuffers[bufferOrRef],{byteLength:byteLength,usage:usage,accessor:accessor}=sourceBuffer;feedbackBuffers[bufferName]=this._createNewBuffer(bufferName,{byteLength:byteLength,usage:usage,accessor:accessor})}}return feedbackBuffers}_setupBuffers(){let props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceBuffers:sourceBuffers=null}=props;Object.assign(this.feedbackMap,props.feedbackMap);const feedbackBuffers=this._getFeedbackBuffers(props);this._updateBindings({sourceBuffers:sourceBuffers,feedbackBuffers:feedbackBuffers})}_setupTransformFeedback(binding,_ref){let{model:model}=_ref;const{program:program}=model;binding.transformFeedback=new transform_feedback.Z(this.gl,{program:program,buffers:binding.feedbackBuffers})}_updateBindings(opts){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],opts),this.feedbackMap){const{sourceBuffers:sourceBuffers,feedbackBuffers:feedbackBuffers}=this._swapBuffers(this.bindings[this.currentIndex]),nextIndex=this._getNextIndex();this.bindings[nextIndex]=this._updateBinding(this.bindings[nextIndex],{sourceBuffers:sourceBuffers,feedbackBuffers:feedbackBuffers})}}_updateBinding(binding,opts){return binding?(Object.assign(binding.sourceBuffers,opts.sourceBuffers),Object.assign(binding.feedbackBuffers,opts.feedbackBuffers),binding.transformFeedback&&binding.transformFeedback.setBuffers(binding.feedbackBuffers),binding):{sourceBuffers:Object.assign({},opts.sourceBuffers),feedbackBuffers:Object.assign({},opts.feedbackBuffers)}}_swapBuffers(opts){if(!this.feedbackMap)return null;const sourceBuffers=Object.assign({},opts.sourceBuffers),feedbackBuffers=Object.assign({},opts.feedbackBuffers);for(const srcName in this.feedbackMap){const dstName=this.feedbackMap[srcName];sourceBuffers[srcName]=opts.feedbackBuffers[dstName],feedbackBuffers[dstName]=opts.sourceBuffers[srcName],(0,utils_assert.h)(feedbackBuffers[dstName]instanceof classes_buffer.Z)}return{sourceBuffers:sourceBuffers,feedbackBuffers:feedbackBuffers}}_createNewBuffer(name,opts){const buffer=new classes_buffer.Z(this.gl,opts);return this.resources[name]&&this.resources[name].delete(),this.resources[name]=buffer,buffer}_getNextIndex(){return(this.currentIndex+1)%2}}var copy_and_blit=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/classes/copy-and-blit.js"),texture_2d=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/classes/texture-2d.js"),classes_framebuffer=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/classes/framebuffer.js"),texture_utils=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/webgl-utils/texture-utils.js");function getShaderVersion(source){let version=100;const words=source.match(/[^\s]+/g);if(words.length>=2&&"#version"===words[0]){const v=parseInt(words[1],10);Number.isFinite(v)&&(version=v)}return version}var inject_shader=__webpack_require__("./node_modules/@luma.gl/shadertools/dist/esm/lib/inject-shader.js");const transform={name:"transform",vs:"attribute float transform_elementID;\nvec2 transform_getPixelSizeHalf(vec2 size) {\n  return vec2(1.) / (2. * size);\n}\n\nvec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {\n  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);\n  float xIndex = transform_elementID - (yIndex * texSize[0]);\n  return vec2(xIndex, yIndex);\n}\nvec2 transform_getTexCoord(vec2 size) {\n  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);\n  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);\n  vec2 coord = indices / size + pixelSizeHalf;\n  return coord;\n}\nvec2 transform_getPos(vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);\n  return pos;\n}\nvec4 transform_getInput(sampler2D texSampler, vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec4 textureColor = texture2D(texSampler, texCoord);\n  return textureColor;\n}\n",fs:null},SAMPLER_UNIFORM_PREFIX="transform_uSampler_",SIZE_UNIFORM_PREFIX="transform_uSize_";function updateForTextures(_ref){let{vs:vs,sourceTextureMap:sourceTextureMap,targetTextureVarying:targetTextureVarying,targetTexture:targetTexture}=_ref;let sourceCount=Object.keys(sourceTextureMap).length,targetTextureType=null;const samplerTextureMap={};let updatedVs=vs,finalInject={};if(sourceCount>0||targetTextureVarying){const vsLines=updatedVs.split("\n"),updateVsLines=vsLines.slice();if(vsLines.forEach(((line,index,lines)=>{if(sourceCount>0){const updated=function processAttributeDefinition(line,textureMap){const samplerTextureMap={},attributeData=function getAttributeDefinition(line){return getQualifierDetails(line,["attribute","in"])}(line);if(!attributeData)return null;const{type:type,name:name}=attributeData;if(name&&textureMap[name]){const updatedLine="// ".concat(line," => Replaced by Transform with a sampler"),{samplerName:samplerName,sizeName:sizeName,uniformDeclerations:uniformDeclerations}=function getSamplerDeclerations(textureName){const samplerName="".concat(SAMPLER_UNIFORM_PREFIX).concat(textureName),sizeName="".concat(SIZE_UNIFORM_PREFIX).concat(textureName),uniformDeclerations="  uniform sampler2D ".concat(samplerName,";\n  uniform vec2 ").concat(sizeName,";");return{samplerName:samplerName,sizeName:sizeName,uniformDeclerations:uniformDeclerations}}(name),channels=function typeToChannelSuffix(type){switch(type){case"float":return"x";case"vec2":return"xy";case"vec3":return"xyz";case"vec4":return"xyzw";default:return(0,assert.Z)(!1),null}}(type),sampleInstruction="  ".concat(type," ").concat(name," = transform_getInput(").concat(samplerName,", ").concat(sizeName,").").concat(channels,";\n");samplerTextureMap[samplerName]=name;return{updatedLine:updatedLine,inject:{"vs:#decl":uniformDeclerations,"vs:#main-start":sampleInstruction},samplerTextureMap:samplerTextureMap}}return null}(line,sourceTextureMap);if(updated){const{updatedLine:updatedLine,inject:inject}=updated;updateVsLines[index]=updatedLine,finalInject=(0,inject_shader.Lm)([finalInject,inject]),Object.assign(samplerTextureMap,updated.samplerTextureMap),sourceCount--}}targetTextureVarying&&!targetTextureType&&(targetTextureType=function getVaryingType(line,varying){const qualaiferDetails=getQualifierDetails(line,["varying","out"]);if(!qualaiferDetails)return null;return qualaiferDetails.name===varying?qualaiferDetails.type:null}(line,targetTextureVarying))})),targetTextureVarying){(0,utils_assert.h)(targetTexture);const sizeName="".concat(SIZE_UNIFORM_PREFIX).concat(targetTextureVarying),inject={"vs:#decl":"uniform vec2 ".concat(sizeName,";\n"),"vs:#main-start":"     vec2 ".concat("transform_position"," = transform_getPos(").concat(sizeName,");\n     gl_Position = vec4(").concat("transform_position",", 0, 1.);\n")};finalInject=(0,inject_shader.Lm)([finalInject,inject])}updatedVs=updateVsLines.join("\n")}return{vs:updatedVs,targetTextureType:targetTextureType,inject:finalInject,samplerTextureMap:samplerTextureMap}}const SRC_TEX_PARAMETER_OVERRIDES={10241:9728,10240:9728,10242:33071,10243:33071};class TextureTransform{constructor(gl){let props=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=gl,this.id=this.currentIndex=0,this._swapTexture=null,this.targetTextureVarying=null,this.targetTextureType=null,this.samplerTextureMap=null,this.bindings=[],this.resources={},this._initialize(props),Object.seal(this)}updateModelProps(){let props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const updatedModelProps=this._processVertexShader(props);return Object.assign({},props,updatedModelProps)}getDrawOptions(){let opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceBuffers:sourceBuffers,sourceTextures:sourceTextures,framebuffer:framebuffer,targetTexture:targetTexture}=this.bindings[this.currentIndex],attributes=Object.assign({},sourceBuffers,opts.attributes),uniforms=Object.assign({},opts.uniforms),parameters=Object.assign({},opts.parameters);let discard=opts.discard;if(this.hasSourceTextures||this.hasTargetTexture){attributes.transform_elementID=this.elementIDBuffer;for(const sampler in this.samplerTextureMap){const textureName=this.samplerTextureMap[sampler];uniforms[sampler]=sourceTextures[textureName]}this._setSourceTextureParameters();const sizeUniforms=function getSizeUniforms(_ref2){let{sourceTextureMap:sourceTextureMap,targetTextureVarying:targetTextureVarying,targetTexture:targetTexture}=_ref2;const uniforms={};let width,height;targetTextureVarying&&(({width:width,height:height}=targetTexture),uniforms["".concat(SIZE_UNIFORM_PREFIX).concat(targetTextureVarying)]=[width,height]);for(const textureName in sourceTextureMap)({width:width,height:height}=sourceTextureMap[textureName]),uniforms["".concat(SIZE_UNIFORM_PREFIX).concat(textureName)]=[width,height];return uniforms}({sourceTextureMap:sourceTextures,targetTextureVarying:this.targetTextureVarying,targetTexture:targetTexture});Object.assign(uniforms,sizeUniforms)}return this.hasTargetTexture&&(discard=!1,parameters.viewport=[0,0,framebuffer.width,framebuffer.height]),{attributes:attributes,framebuffer:framebuffer,uniforms:uniforms,discard:discard,parameters:parameters}}swap(){return!!this._swapTexture&&(this.currentIndex=this._getNextIndex(),!0)}update(){let opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setupTextures(opts)}getTargetTexture(){const{targetTexture:targetTexture}=this.bindings[this.currentIndex];return targetTexture}getData(){let{packed:packed=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{framebuffer:framebuffer}=this.bindings[this.currentIndex],pixels=(0,copy_and_blit.z6)(framebuffer);if(!packed)return pixels;const ArrayType=pixels.constructor,channelCount=function typeToChannelCount(type){switch(type){case"float":return 1;case"vec2":return 2;case"vec3":return 3;case"vec4":return 4;default:return(0,assert.Z)(!1),null}}(this.targetTextureType),packedPixels=new ArrayType(pixels.length*channelCount/4);let packCount=0;for(let i=0;i<pixels.length;i+=4)for(let j=0;j<channelCount;j++)packedPixels[packCount++]=pixels[i+j];return packedPixels}getFramebuffer(){return this.bindings[this.currentIndex].framebuffer}delete(){this.ownTexture&&this.ownTexture.delete(),this.elementIDBuffer&&this.elementIDBuffer.delete()}_initialize(){let props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{_targetTextureVarying:_targetTextureVarying,_swapTexture:_swapTexture}=props;this._swapTexture=_swapTexture,this.targetTextureVarying=_targetTextureVarying,this.hasTargetTexture=_targetTextureVarying,this._setupTextures(props)}_createTargetTexture(props){const{sourceTextures:sourceTextures,textureOrReference:textureOrReference}=props;if(textureOrReference instanceof texture_2d.Z)return textureOrReference;const refTexture=sourceTextures[textureOrReference];return refTexture?(this._targetRefTexName=textureOrReference,this._createNewTexture(refTexture)):null}_setupTextures(){let props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceBuffers:sourceBuffers,_sourceTextures:_sourceTextures={},_targetTexture:_targetTexture}=props,targetTexture=this._createTargetTexture({sourceTextures:_sourceTextures,textureOrReference:_targetTexture});this.hasSourceTextures=this.hasSourceTextures||_sourceTextures&&Object.keys(_sourceTextures).length>0,this._updateBindings({sourceBuffers:sourceBuffers,sourceTextures:_sourceTextures,targetTexture:targetTexture}),"elementCount"in props&&this._updateElementIDBuffer(props.elementCount)}_updateElementIDBuffer(elementCount){if("number"!=typeof elementCount||this.elementCount>=elementCount)return;const elementIds=new Float32Array(elementCount);elementIds.forEach(((_,index,array)=>{array[index]=index})),this.elementIDBuffer?this.elementIDBuffer.setData({data:elementIds}):this.elementIDBuffer=new classes_buffer.Z(this.gl,{data:elementIds,accessor:{size:1}}),this.elementCount=elementCount}_updateBindings(opts){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],opts),this._swapTexture){const{sourceTextures:sourceTextures,targetTexture:targetTexture}=this._swapTextures(this.bindings[this.currentIndex]),nextIndex=this._getNextIndex();this.bindings[nextIndex]=this._updateBinding(this.bindings[nextIndex],{sourceTextures:sourceTextures,targetTexture:targetTexture})}}_updateBinding(binding,opts){const{sourceBuffers:sourceBuffers,sourceTextures:sourceTextures,targetTexture:targetTexture}=opts;if(binding||(binding={sourceBuffers:{},sourceTextures:{},targetTexture:null}),Object.assign(binding.sourceTextures,sourceTextures),Object.assign(binding.sourceBuffers,sourceBuffers),targetTexture){binding.targetTexture=targetTexture;const{width:width,height:height}=targetTexture,{framebuffer:framebuffer}=binding;framebuffer?(framebuffer.update({attachments:{36064:targetTexture},resizeAttachments:!1}),framebuffer.resize({width:width,height:height})):binding.framebuffer=new classes_framebuffer.Z(this.gl,{id:"transform-framebuffer",width:width,height:height,attachments:{36064:targetTexture}})}return binding}_setSourceTextureParameters(){const index=this.currentIndex,{sourceTextures:sourceTextures}=this.bindings[index];for(const name in sourceTextures)sourceTextures[name].setParameters(SRC_TEX_PARAMETER_OVERRIDES)}_swapTextures(opts){if(!this._swapTexture)return null;const sourceTextures=Object.assign({},opts.sourceTextures);sourceTextures[this._swapTexture]=opts.targetTexture;return{sourceTextures:sourceTextures,targetTexture:opts.sourceTextures[this._swapTexture]}}_createNewTexture(refTexture){const texture=(0,texture_utils.h)(refTexture,{parameters:{10241:9728,10240:9728,10242:33071,10243:33071},pixelStore:{37440:!1}});return this.ownTexture&&this.ownTexture.delete(),this.ownTexture=texture,texture}_getNextIndex(){return(this.currentIndex+1)%2}_processVertexShader(){let props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceTextures:sourceTextures,targetTexture:targetTexture}=this.bindings[this.currentIndex],{vs:vs,uniforms:uniforms,targetTextureType:targetTextureType,inject:inject,samplerTextureMap:samplerTextureMap}=updateForTextures({vs:props.vs,sourceTextureMap:sourceTextures,targetTextureVarying:this.targetTextureVarying,targetTexture:targetTexture}),combinedInject=(0,inject_shader.Lm)([props.inject||{},inject]);this.targetTextureType=targetTextureType,this.samplerTextureMap=samplerTextureMap;return{vs:vs,fs:props._fs||getPassthroughFS({version:getShaderVersion(vs),input:this.targetTextureVarying,inputType:targetTextureType,output:"transform_output"}),modules:this.hasSourceTextures||this.targetTextureVarying?[transform].concat(props.modules||[]):props.modules,uniforms:uniforms,inject:combinedInject}}}var utils=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/utils/utils.js"),model=__webpack_require__("./node_modules/@luma.gl/engine/dist/esm/lib/model.js");class Transform{static isSupported(gl){return(0,esm.D0)(gl)}constructor(gl){let props=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=gl,this.model=null,this.elementCount=0,this.bufferTransform=null,this.textureTransform=null,this.elementIDBuffer=null,this._initialize(props),Object.seal(this)}delete(){const{model:model,bufferTransform:bufferTransform,textureTransform:textureTransform}=this;model&&model.delete(),bufferTransform&&bufferTransform.delete(),textureTransform&&textureTransform.delete()}run(){let opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{clearRenderTarget:clearRenderTarget=!0}=opts,updatedOpts=this._updateDrawOptions(opts);clearRenderTarget&&updatedOpts.framebuffer&&updatedOpts.framebuffer.clear({color:!0}),this.model.transform(updatedOpts)}swap(){let swapped=!1;const resourceTransforms=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const resourceTransform of resourceTransforms)swapped=swapped||resourceTransform.swap();(0,utils_assert.h)(swapped,"Nothing to swap")}getBuffer(){let varyingName=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.bufferTransform&&this.bufferTransform.getBuffer(varyingName)}getData(){let opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const resourceTransforms=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const resourceTransform of resourceTransforms){const data=resourceTransform.getData(opts);if(data)return data}return null}getFramebuffer(){return this.textureTransform&&this.textureTransform.getFramebuffer()}update(){let opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"elementCount"in opts&&this.model.setVertexCount(opts.elementCount);const resourceTransforms=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const resourceTransform of resourceTransforms)resourceTransform.update(opts)}_initialize(){let props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{gl:gl}=this;this._buildResourceTransforms(gl,props),props=this._updateModelProps(props),this.model=new model.Z(gl,Object.assign({},props,{fs:props.fs||getPassthroughFS({version:getShaderVersion(props.vs)}),id:props.id||"transform-model",drawMode:props.drawMode||0,vertexCount:props.elementCount})),this.bufferTransform&&this.bufferTransform.setupResources({model:this.model})}_updateModelProps(props){let updatedProps=Object.assign({},props);const resourceTransforms=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const resourceTransform of resourceTransforms)updatedProps=resourceTransform.updateModelProps(updatedProps);return updatedProps}_buildResourceTransforms(gl,props){(function canCreateBufferTransform(props){if(!(0,utils.nK)(props.feedbackBuffers)||!(0,utils.nK)(props.feedbackMap)||props.varyings&&props.varyings.length>0)return!0;return!1})(props)&&(this.bufferTransform=new BufferTransform(gl,props)),function canCreateTextureTransform(props){if(!(0,utils.nK)(props._sourceTextures)||props._targetTexture||props._targetTextureVarying)return!0;return!1}(props)&&(this.textureTransform=new TextureTransform(gl,props)),(0,utils_assert.h)(this.bufferTransform||this.textureTransform,"must provide source/feedback buffers or source/target textures")}_updateDrawOptions(opts){let updatedOpts=Object.assign({},opts);const resourceTransforms=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const resourceTransform of resourceTransforms)updatedOpts=Object.assign(updatedOpts,resourceTransform.getDrawOptions(updatedOpts));return updatedOpts}}},"./node_modules/@luma.gl/gltools/dist/esm/index.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{KQ:function(){return assertWebGL2Context},JD:function(){return assertWebGLContext},s9:function(){return createGLContext},JY:function(){return cssToDevicePixels},w:function(){return cssToDeviceRatio},ZS:function(){return getParameters},vd:function(){return getWebGL2Context},yW:function(){return instrumentGLContext},UF:function(){return isWebGL},D0:function(){return isWebGL2},cM:function(){return log_log},kL:function(){return resetParameters},aQ:function(){return resizeGLContext},dR:function(){return setParameters},s8:function(){return withParameters}});const log_log=new(__webpack_require__("./node_modules/@probe.gl/log/dist/esm/log.js").Z)({id:"luma.gl"});function assert(condition,message){if(!condition)throw new Error(message||"luma.gl: assertion failed.")}const ERR_CONTEXT="Invalid WebGLRenderingContext",ERR_WEBGL2="Requires WebGL2";function isWebGL(gl){return"undefined"!=typeof WebGLRenderingContext&&gl instanceof WebGLRenderingContext||("undefined"!=typeof WebGL2RenderingContext&&gl instanceof WebGL2RenderingContext||Boolean(gl&&Number.isFinite(gl._version)))}function isWebGL2(gl){return"undefined"!=typeof WebGL2RenderingContext&&gl instanceof WebGL2RenderingContext||Boolean(gl&&2===gl._version)}function getWebGL2Context(gl){return isWebGL2(gl)?gl:null}function assertWebGLContext(gl){return assert(isWebGL(gl),ERR_CONTEXT),gl}function assertWebGL2Context(gl){return assert(isWebGL2(gl),ERR_WEBGL2),gl}const glErrorShadow={};function synthesizeGLError(err,opt_msg){glErrorShadow[err]=!0,void 0!==opt_msg&&function error(msg){globalThis.console&&globalThis.console.error&&globalThis.console.error(msg)}(opt_msg)}const WebGLVertexArrayObjectOES=function WebGLVertexArrayObjectOES(ext){const gl=ext.gl;this.ext=ext,this.isAlive=!0,this.hasBeenBound=!1,this.elementArrayBuffer=null,this.attribs=new Array(ext.maxVertexAttribs);for(let n=0;n<this.attribs.length;n++){const attrib=new WebGLVertexArrayObjectOES.VertexAttrib(gl);this.attribs[n]=attrib}this.maxAttrib=0};(WebGLVertexArrayObjectOES.VertexAttrib=function VertexAttrib(gl){this.enabled=!1,this.buffer=null,this.size=4,this.type=5126,this.normalized=!1,this.stride=16,this.offset=0,this.cached="",this.recache()}).prototype.recache=function recache(){this.cached=[this.size,this.type,this.normalized,this.stride,this.offset].join(":")};const OESVertexArrayObject=function OESVertexArrayObject(gl){const self=this;this.gl=gl,function wrapGLError(gl){const f=gl.getError;gl.getError=function getError(){let err;do{err=f.apply(gl),0!==err&&(glErrorShadow[err]=!0)}while(0!==err);for(err in glErrorShadow)if(glErrorShadow[err])return delete glErrorShadow[err],parseInt(err,10);return 0}}(gl);const original=this.original={getParameter:gl.getParameter,enableVertexAttribArray:gl.enableVertexAttribArray,disableVertexAttribArray:gl.disableVertexAttribArray,bindBuffer:gl.bindBuffer,getVertexAttrib:gl.getVertexAttrib,vertexAttribPointer:gl.vertexAttribPointer};gl.getParameter=function getParameter(pname){return pname===self.VERTEX_ARRAY_BINDING_OES?self.currentVertexArrayObject===self.defaultVertexArrayObject?null:self.currentVertexArrayObject:original.getParameter.apply(this,arguments)},gl.enableVertexAttribArray=function enableVertexAttribArray(index){const vao=self.currentVertexArrayObject;vao.maxAttrib=Math.max(vao.maxAttrib,index);return vao.attribs[index].enabled=!0,original.enableVertexAttribArray.apply(this,arguments)},gl.disableVertexAttribArray=function disableVertexAttribArray(index){const vao=self.currentVertexArrayObject;vao.maxAttrib=Math.max(vao.maxAttrib,index);return vao.attribs[index].enabled=!1,original.disableVertexAttribArray.apply(this,arguments)},gl.bindBuffer=function bindBuffer(target,buffer){switch(target){case 34962:self.currentArrayBuffer=buffer;break;case 34963:self.currentVertexArrayObject.elementArrayBuffer=buffer}return original.bindBuffer.apply(this,arguments)},gl.getVertexAttrib=function getVertexAttrib(index,pname){const attrib=self.currentVertexArrayObject.attribs[index];switch(pname){case 34975:return attrib.buffer;case 34338:return attrib.enabled;case 34339:return attrib.size;case 34340:return attrib.stride;case 34341:return attrib.type;case 34922:return attrib.normalized;default:return original.getVertexAttrib.apply(this,arguments)}},gl.vertexAttribPointer=function vertexAttribPointer(indx,size,type,normalized,stride,offset){const vao=self.currentVertexArrayObject;vao.maxAttrib=Math.max(vao.maxAttrib,indx);const attrib=vao.attribs[indx];return attrib.buffer=self.currentArrayBuffer,attrib.size=size,attrib.type=type,attrib.normalized=normalized,attrib.stride=stride,attrib.offset=offset,attrib.recache(),original.vertexAttribPointer.apply(this,arguments)},gl.instrumentExtension&&gl.instrumentExtension(this,"OES_vertex_array_object"),gl.canvas&&gl.canvas.addEventListener("webglcontextrestored",(()=>{!function polyfill_vertex_array_object_log(msg){globalThis.console&&globalThis.console.log&&globalThis.console.log(msg)}("OESVertexArrayObject emulation library context restored"),self.reset_()}),!0),this.reset_()};OESVertexArrayObject.prototype.VERTEX_ARRAY_BINDING_OES=34229,OESVertexArrayObject.prototype.reset_=function reset_(){if(void 0!==this.vertexArrayObjects)for(let ii=0;ii<this.vertexArrayObjects.length;++ii)this.vertexArrayObjects.isAlive=!1;const gl=this.gl;this.maxVertexAttribs=gl.getParameter(34921),this.defaultVertexArrayObject=new WebGLVertexArrayObjectOES(this),this.currentVertexArrayObject=null,this.currentArrayBuffer=null,this.vertexArrayObjects=[this.defaultVertexArrayObject],this.bindVertexArrayOES(null)},OESVertexArrayObject.prototype.createVertexArrayOES=function createVertexArrayOES(){const arrayObject=new WebGLVertexArrayObjectOES(this);return this.vertexArrayObjects.push(arrayObject),arrayObject},OESVertexArrayObject.prototype.deleteVertexArrayOES=function deleteVertexArrayOES(arrayObject){arrayObject.isAlive=!1,this.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(arrayObject),1),this.currentVertexArrayObject===arrayObject&&this.bindVertexArrayOES(null)},OESVertexArrayObject.prototype.isVertexArrayOES=function isVertexArrayOES(arrayObject){return!!(arrayObject&&arrayObject instanceof WebGLVertexArrayObjectOES&&arrayObject.hasBeenBound&&arrayObject.ext===this)},OESVertexArrayObject.prototype.bindVertexArrayOES=function bindVertexArrayOES(arrayObject){const gl=this.gl;if(arrayObject&&!arrayObject.isAlive)return void synthesizeGLError(1282,"bindVertexArrayOES: attempt to bind deleted arrayObject");const original=this.original,oldVAO=this.currentVertexArrayObject;this.currentVertexArrayObject=arrayObject||this.defaultVertexArrayObject,this.currentVertexArrayObject.hasBeenBound=!0;const newVAO=this.currentVertexArrayObject;if(oldVAO===newVAO)return;oldVAO&&newVAO.elementArrayBuffer===oldVAO.elementArrayBuffer||original.bindBuffer.call(gl,34963,newVAO.elementArrayBuffer);let currentBinding=this.currentArrayBuffer;const maxAttrib=Math.max(oldVAO?oldVAO.maxAttrib:0,newVAO.maxAttrib);for(let n=0;n<=maxAttrib;n++){const attrib=newVAO.attribs[n],oldAttrib=oldVAO?oldVAO.attribs[n]:null;if(oldVAO&&attrib.enabled===oldAttrib.enabled||(attrib.enabled?original.enableVertexAttribArray.call(gl,n):original.disableVertexAttribArray.call(gl,n)),attrib.enabled){let bufferChanged=!1;oldVAO&&attrib.buffer===oldAttrib.buffer||(currentBinding!==attrib.buffer&&(original.bindBuffer.call(gl,34962,attrib.buffer),currentBinding=attrib.buffer),bufferChanged=!0),(bufferChanged||attrib.cached!==oldAttrib.cached)&&original.vertexAttribPointer.call(gl,n,attrib.size,attrib.type,attrib.normalized,attrib.stride,attrib.offset)}}this.currentArrayBuffer!==currentBinding&&original.bindBuffer.call(gl,34962,this.currentArrayBuffer)};const getWebGL2ValueOrZero=gl=>isWebGL2(gl)?void 0:0,WEBGL_PARAMETERS={3074:gl=>isWebGL2(gl)?void 0:36064,35723:gl=>isWebGL2(gl)?void 0:4352,35977:getWebGL2ValueOrZero,32937:getWebGL2ValueOrZero,36795:(gl,getParameter)=>{const ext=isWebGL2(gl)?gl.getExtension("EXT_disjoint_timer_query_webgl2"):gl.getExtension("EXT_disjoint_timer_query");return ext&&ext.GPU_DISJOINT_EXT?getParameter(ext.GPU_DISJOINT_EXT):0},37445:(gl,getParameter)=>{const ext=gl.getExtension("WEBGL_debug_renderer_info");return getParameter(ext&&ext.UNMASKED_VENDOR_WEBGL||7936)},37446:(gl,getParameter)=>{const ext=gl.getExtension("WEBGL_debug_renderer_info");return getParameter(ext&&ext.UNMASKED_RENDERER_WEBGL||7937)},34047:(gl,getParameter)=>{const ext=gl.luma.extensions.EXT_texture_filter_anisotropic;return ext?getParameter(ext.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1},32883:getWebGL2ValueOrZero,35071:getWebGL2ValueOrZero,37447:getWebGL2ValueOrZero,36063:(gl,getParameter)=>{if(!isWebGL2(gl)){const ext=gl.getExtension("WEBGL_draw_buffers");return ext?getParameter(ext.MAX_COLOR_ATTACHMENTS_WEBGL):0}},35379:getWebGL2ValueOrZero,35374:getWebGL2ValueOrZero,35377:getWebGL2ValueOrZero,34852:gl=>{if(!isWebGL2(gl)){const ext=gl.getExtension("WEBGL_draw_buffers");return ext?ext.MAX_DRAW_BUFFERS_WEBGL:0}},36203:gl=>gl.getExtension("OES_element_index")?2147483647:65535,33001:gl=>gl.getExtension("OES_element_index")?16777216:65535,33e3:gl=>16777216,37157:getWebGL2ValueOrZero,35373:getWebGL2ValueOrZero,35657:getWebGL2ValueOrZero,36183:getWebGL2ValueOrZero,37137:getWebGL2ValueOrZero,34045:getWebGL2ValueOrZero,35978:getWebGL2ValueOrZero,35979:getWebGL2ValueOrZero,35968:getWebGL2ValueOrZero,35376:getWebGL2ValueOrZero,35375:getWebGL2ValueOrZero,35659:getWebGL2ValueOrZero,37154:getWebGL2ValueOrZero,35371:getWebGL2ValueOrZero,35658:getWebGL2ValueOrZero,35076:getWebGL2ValueOrZero,35077:getWebGL2ValueOrZero,35380:getWebGL2ValueOrZero};const WEBGL2_CONTEXT_POLYFILLS={OES_vertex_array_object:{meta:{suffix:"OES"},createVertexArray:()=>{assert(!1,"VertexArray requires WebGL2 or OES_vertex_array_object extension")},deleteVertexArray:()=>{},bindVertexArray:()=>{},isVertexArray:()=>!1},ANGLE_instanced_arrays:{meta:{suffix:"ANGLE"},vertexAttribDivisor(location,divisor){assert(0===divisor,"WebGL instanced rendering not supported")},drawElementsInstanced:()=>{},drawArraysInstanced:()=>{}},WEBGL_draw_buffers:{meta:{suffix:"WEBGL"},drawBuffers:()=>{assert(!1)}},EXT_disjoint_timer_query:{meta:{suffix:"EXT"},createQuery:()=>{assert(!1)},deleteQuery:()=>{assert(!1)},beginQuery:()=>{assert(!1)},endQuery:()=>{},getQuery(handle,pname){return this.getQueryObject(handle,pname)},getQueryParameter(handle,pname){return this.getQueryObject(handle,pname)},getQueryObject:()=>{}}},WEBGL2_CONTEXT_OVERRIDES={readBuffer:(gl,originalFunc,attachment)=>{isWebGL2(gl)&&originalFunc(attachment)},getVertexAttrib:(gl,originalFunc,location,pname)=>{const{webgl2:webgl2,ext:ext}=function getExtensionData(gl,extension){return{webgl2:isWebGL2(gl),ext:gl.getExtension(extension)}}(gl,"ANGLE_instanced_arrays");let result;switch(pname){case 35069:result=!!webgl2&&void 0;break;case 35070:result=webgl2||ext?void 0:0}return void 0!==result?result:originalFunc(location,pname)},getProgramParameter:(gl,originalFunc,program,pname)=>{if(!isWebGL2(gl))switch(pname){case 35967:return 35981;case 35971:case 35382:return 0}return originalFunc(program,pname)},getInternalformatParameter:(gl,originalFunc,target,format,pname)=>isWebGL2(gl)||32937!==pname?gl.getInternalformatParameter(target,format,pname):new Int32Array([0]),getTexParameter(gl,originalFunc,target,pname){if(34046===pname){const{extensions:extensions}=gl.luma,ext=extensions.EXT_texture_filter_anisotropic;pname=ext&&ext.TEXTURE_MAX_ANISOTROPY_EXT||34046}return originalFunc(target,pname)},getParameter:function getParameterPolyfill(gl,originalGetParameter,pname){const limit=WEBGL_PARAMETERS[pname],value="function"==typeof limit?limit(gl,originalGetParameter,pname):limit;return void 0!==value?value:originalGetParameter(pname)},hint(gl,originalFunc,pname,value){return originalFunc(pname,value)}};function polyfillExtension(gl,_ref2){let{extension:extension,target:target,target2:target2}=_ref2;const defaults=WEBGL2_CONTEXT_POLYFILLS[extension];assert(defaults);const{meta:meta={}}=defaults,{suffix:suffix=""}=meta,ext=gl.getExtension(extension);for(const key of Object.keys(defaults)){const extKey="".concat(key).concat(suffix);let polyfill=null;"meta"===key||"function"==typeof gl[key]||(ext&&"function"==typeof ext[extKey]?polyfill=function(){return ext[extKey](...arguments)}:"function"==typeof defaults[key]&&(polyfill=defaults[key].bind(target))),polyfill&&(target[key]=polyfill,target2[key]=polyfill)}}globalThis.polyfillContext=function polyfillContext(gl){gl.luma=gl.luma||{};const{luma:luma}=gl;return luma.polyfilled||(!function polyfillVertexArrayObject(gl){if("function"==typeof gl.createVertexArray)return;const original_getSupportedExtensions=gl.getSupportedExtensions;gl.getSupportedExtensions=function getSupportedExtensions(){const list=original_getSupportedExtensions.call(this)||[];return list.indexOf("OES_vertex_array_object")<0&&list.push("OES_vertex_array_object"),list};const original_getExtension=gl.getExtension;gl.getExtension=function getExtension(name){return original_getExtension.call(this,name)||("OES_vertex_array_object"!==name?null:(gl.__OESVertexArrayObject||(this.__OESVertexArrayObject=new OESVertexArrayObject(this)),this.__OESVertexArrayObject))}}(gl),function initializeExtensions(gl){gl.luma.extensions={};const EXTENSIONS=gl.getSupportedExtensions()||[];for(const extension of EXTENSIONS)gl.luma[extension]=gl.getExtension(extension)}(gl),function installPolyfills(gl,polyfills){for(const extension of Object.getOwnPropertyNames(polyfills))"overrides"!==extension&&polyfillExtension(gl,{extension:extension,target:gl.luma,target2:gl})}(gl,WEBGL2_CONTEXT_POLYFILLS),function installOverrides(gl,_ref){let{target:target,target2:target2}=_ref;Object.keys(WEBGL2_CONTEXT_OVERRIDES).forEach((key=>{if("function"==typeof WEBGL2_CONTEXT_OVERRIDES[key]){const originalFunc=gl[key]?gl[key].bind(gl):()=>{},polyfill=WEBGL2_CONTEXT_OVERRIDES[key].bind(null,gl,originalFunc);target[key]=polyfill,target2[key]=polyfill}}))}(gl,{target:luma,target2:gl}),luma.polyfilled=!0),gl};const GL_PARAMETER_DEFAULTS={3042:!1,32773:new Float32Array([0,0,0,0]),32777:32774,34877:32774,32969:1,32968:0,32971:1,32970:0,3106:new Float32Array([0,0,0,0]),3107:[!0,!0,!0,!0],2884:!1,2885:1029,2929:!1,2931:1,2932:513,2928:new Float32Array([0,1]),2930:!0,3024:!0,36006:null,2886:2305,33170:4352,2849:1,32823:!1,32824:0,10752:0,32938:1,32939:!1,3089:!1,3088:new Int32Array([0,0,1024,1024]),2960:!1,2961:0,2968:4294967295,36005:4294967295,2962:519,2967:0,2963:4294967295,34816:519,36003:0,36004:4294967295,2964:7680,2965:7680,2966:7680,34817:7680,34818:7680,34819:7680,2978:[0,0,1024,1024],3333:4,3317:4,37440:!1,37441:!1,37443:37444,35723:4352,36010:null,35977:!1,3330:0,3332:0,3331:0,3314:0,32878:0,3316:0,3315:0,32877:0},enable=(gl,value,key)=>value?gl.enable(key):gl.disable(key),hint=(gl,value,key)=>gl.hint(key,value),pixelStorei=(gl,value,key)=>gl.pixelStorei(key,value);function isArray(array){return Array.isArray(array)||ArrayBuffer.isView(array)}const GL_PARAMETER_SETTERS={3042:enable,32773:(gl,value)=>gl.blendColor(...value),32777:"blendEquation",34877:"blendEquation",32969:"blendFunc",32968:"blendFunc",32971:"blendFunc",32970:"blendFunc",3106:(gl,value)=>gl.clearColor(...value),3107:(gl,value)=>gl.colorMask(...value),2884:enable,2885:(gl,value)=>gl.cullFace(value),2929:enable,2931:(gl,value)=>gl.clearDepth(value),2932:(gl,value)=>gl.depthFunc(value),2928:(gl,value)=>gl.depthRange(...value),2930:(gl,value)=>gl.depthMask(value),3024:enable,35723:hint,36006:(gl,value)=>{const target=isWebGL2(gl)?36009:36160;return gl.bindFramebuffer(target,value)},2886:(gl,value)=>gl.frontFace(value),33170:hint,2849:(gl,value)=>gl.lineWidth(value),32823:enable,32824:"polygonOffset",10752:"polygonOffset",35977:enable,32938:"sampleCoverage",32939:"sampleCoverage",3089:enable,3088:(gl,value)=>gl.scissor(...value),2960:enable,2961:(gl,value)=>gl.clearStencil(value),2968:(gl,value)=>gl.stencilMaskSeparate(1028,value),36005:(gl,value)=>gl.stencilMaskSeparate(1029,value),2962:"stencilFuncFront",2967:"stencilFuncFront",2963:"stencilFuncFront",34816:"stencilFuncBack",36003:"stencilFuncBack",36004:"stencilFuncBack",2964:"stencilOpFront",2965:"stencilOpFront",2966:"stencilOpFront",34817:"stencilOpBack",34818:"stencilOpBack",34819:"stencilOpBack",2978:(gl,value)=>gl.viewport(...value),3333:pixelStorei,3317:pixelStorei,37440:pixelStorei,37441:pixelStorei,37443:pixelStorei,3330:pixelStorei,3332:pixelStorei,3331:pixelStorei,36010:(gl,value)=>gl.bindFramebuffer(36008,value),3314:pixelStorei,32878:pixelStorei,3316:pixelStorei,3315:pixelStorei,32877:pixelStorei,framebuffer:(gl,framebuffer)=>{const handle=framebuffer&&"handle"in framebuffer?framebuffer.handle:framebuffer;return gl.bindFramebuffer(36160,handle)},blend:(gl,value)=>value?gl.enable(3042):gl.disable(3042),blendColor:(gl,value)=>gl.blendColor(...value),blendEquation:(gl,args)=>{args=isArray(args)?args:[args,args],gl.blendEquationSeparate(...args)},blendFunc:(gl,args)=>{args=isArray(args)&&2===args.length?[...args,...args]:args,gl.blendFuncSeparate(...args)},clearColor:(gl,value)=>gl.clearColor(...value),clearDepth:(gl,value)=>gl.clearDepth(value),clearStencil:(gl,value)=>gl.clearStencil(value),colorMask:(gl,value)=>gl.colorMask(...value),cull:(gl,value)=>value?gl.enable(2884):gl.disable(2884),cullFace:(gl,value)=>gl.cullFace(value),depthTest:(gl,value)=>value?gl.enable(2929):gl.disable(2929),depthFunc:(gl,value)=>gl.depthFunc(value),depthMask:(gl,value)=>gl.depthMask(value),depthRange:(gl,value)=>gl.depthRange(...value),dither:(gl,value)=>value?gl.enable(3024):gl.disable(3024),derivativeHint:(gl,value)=>{gl.hint(35723,value)},frontFace:(gl,value)=>gl.frontFace(value),mipmapHint:(gl,value)=>gl.hint(33170,value),lineWidth:(gl,value)=>gl.lineWidth(value),polygonOffsetFill:(gl,value)=>value?gl.enable(32823):gl.disable(32823),polygonOffset:(gl,value)=>gl.polygonOffset(...value),sampleCoverage:(gl,value)=>gl.sampleCoverage(...value),scissorTest:(gl,value)=>value?gl.enable(3089):gl.disable(3089),scissor:(gl,value)=>gl.scissor(...value),stencilTest:(gl,value)=>value?gl.enable(2960):gl.disable(2960),stencilMask:(gl,value)=>{value=isArray(value)?value:[value,value];const[mask,backMask]=value;gl.stencilMaskSeparate(1028,mask),gl.stencilMaskSeparate(1029,backMask)},stencilFunc:(gl,args)=>{args=isArray(args)&&3===args.length?[...args,...args]:args;const[func,ref,mask,backFunc,backRef,backMask]=args;gl.stencilFuncSeparate(1028,func,ref,mask),gl.stencilFuncSeparate(1029,backFunc,backRef,backMask)},stencilOp:(gl,args)=>{args=isArray(args)&&3===args.length?[...args,...args]:args;const[sfail,dpfail,dppass,backSfail,backDpfail,backDppass]=args;gl.stencilOpSeparate(1028,sfail,dpfail,dppass),gl.stencilOpSeparate(1029,backSfail,backDpfail,backDppass)},viewport:(gl,value)=>gl.viewport(...value)};function getValue(glEnum,values,cache){return void 0!==values[glEnum]?values[glEnum]:cache[glEnum]}const GL_COMPOSITE_PARAMETER_SETTERS={blendEquation:(gl,values,cache)=>gl.blendEquationSeparate(getValue(32777,values,cache),getValue(34877,values,cache)),blendFunc:(gl,values,cache)=>gl.blendFuncSeparate(getValue(32969,values,cache),getValue(32968,values,cache),getValue(32971,values,cache),getValue(32970,values,cache)),polygonOffset:(gl,values,cache)=>gl.polygonOffset(getValue(32824,values,cache),getValue(10752,values,cache)),sampleCoverage:(gl,values,cache)=>gl.sampleCoverage(getValue(32938,values,cache),getValue(32939,values,cache)),stencilFuncFront:(gl,values,cache)=>gl.stencilFuncSeparate(1028,getValue(2962,values,cache),getValue(2967,values,cache),getValue(2963,values,cache)),stencilFuncBack:(gl,values,cache)=>gl.stencilFuncSeparate(1029,getValue(34816,values,cache),getValue(36003,values,cache),getValue(36004,values,cache)),stencilOpFront:(gl,values,cache)=>gl.stencilOpSeparate(1028,getValue(2964,values,cache),getValue(2965,values,cache),getValue(2966,values,cache)),stencilOpBack:(gl,values,cache)=>gl.stencilOpSeparate(1029,getValue(34817,values,cache),getValue(34818,values,cache),getValue(34819,values,cache))},GL_HOOKED_SETTERS={enable:(update,capability)=>update({[capability]:!0}),disable:(update,capability)=>update({[capability]:!1}),pixelStorei:(update,pname,value)=>update({[pname]:value}),hint:(update,pname,hint)=>update({[pname]:hint}),bindFramebuffer:(update,target,framebuffer)=>{switch(target){case 36160:return update({36006:framebuffer,36010:framebuffer});case 36009:return update({36006:framebuffer});case 36008:return update({36010:framebuffer});default:return null}},blendColor:(update,r,g,b,a)=>update({32773:new Float32Array([r,g,b,a])}),blendEquation:(update,mode)=>update({32777:mode,34877:mode}),blendEquationSeparate:(update,modeRGB,modeAlpha)=>update({32777:modeRGB,34877:modeAlpha}),blendFunc:(update,src,dst)=>update({32969:src,32968:dst,32971:src,32970:dst}),blendFuncSeparate:(update,srcRGB,dstRGB,srcAlpha,dstAlpha)=>update({32969:srcRGB,32968:dstRGB,32971:srcAlpha,32970:dstAlpha}),clearColor:(update,r,g,b,a)=>update({3106:new Float32Array([r,g,b,a])}),clearDepth:(update,depth)=>update({2931:depth}),clearStencil:(update,s)=>update({2961:s}),colorMask:(update,r,g,b,a)=>update({3107:[r,g,b,a]}),cullFace:(update,mode)=>update({2885:mode}),depthFunc:(update,func)=>update({2932:func}),depthRange:(update,zNear,zFar)=>update({2928:new Float32Array([zNear,zFar])}),depthMask:(update,mask)=>update({2930:mask}),frontFace:(update,face)=>update({2886:face}),lineWidth:(update,width)=>update({2849:width}),polygonOffset:(update,factor,units)=>update({32824:factor,10752:units}),sampleCoverage:(update,value,invert)=>update({32938:value,32939:invert}),scissor:(update,x,y,width,height)=>update({3088:new Int32Array([x,y,width,height])}),stencilMask:(update,mask)=>update({2968:mask,36005:mask}),stencilMaskSeparate:(update,face,mask)=>update({[1028===face?2968:36005]:mask}),stencilFunc:(update,func,ref,mask)=>update({2962:func,2967:ref,2963:mask,34816:func,36003:ref,36004:mask}),stencilFuncSeparate:(update,face,func,ref,mask)=>update({[1028===face?2962:34816]:func,[1028===face?2967:36003]:ref,[1028===face?2963:36004]:mask}),stencilOp:(update,fail,zfail,zpass)=>update({2964:fail,2965:zfail,2966:zpass,34817:fail,34818:zfail,34819:zpass}),stencilOpSeparate:(update,face,fail,zfail,zpass)=>update({[1028===face?2964:34817]:fail,[1028===face?2965:34818]:zfail,[1028===face?2966:34819]:zpass}),viewport:(update,x,y,width,height)=>update({2978:[x,y,width,height]})},isEnabled=(gl,key)=>gl.isEnabled(key),GL_PARAMETER_GETTERS={3042:isEnabled,2884:isEnabled,2929:isEnabled,3024:isEnabled,32823:isEnabled,32926:isEnabled,32928:isEnabled,3089:isEnabled,2960:isEnabled,35977:isEnabled};function isObjectEmpty(object){for(const key in object)return!1;return!0}function deepArrayEqual(x,y){if(x===y)return!0;const isArrayX=Array.isArray(x)||ArrayBuffer.isView(x),isArrayY=Array.isArray(y)||ArrayBuffer.isView(y);if(isArrayX&&isArrayY&&x.length===y.length){for(let i=0;i<x.length;++i)if(x[i]!==y[i])return!1;return!0}return!1}function installGetterOverride(gl,functionName){const originalGetterFunc=gl[functionName].bind(gl);gl[functionName]=function get(){const pname=arguments.length<=0?void 0:arguments[0];return pname in gl.state.cache&&gl.state.enable?gl.state.cache[pname]:originalGetterFunc(...arguments)},Object.defineProperty(gl[functionName],"name",{value:"".concat(functionName,"-from-cache"),configurable:!1})}function installSetterSpy(gl,functionName,setter){const originalSetterFunc=gl[functionName].bind(gl);gl[functionName]=function set(){for(var _len=arguments.length,params=new Array(_len),_key=0;_key<_len;_key++)params[_key]=arguments[_key];const{valueChanged:valueChanged,oldValue:oldValue}=setter(gl.state._updateCache,...params);return valueChanged&&originalSetterFunc(...params),oldValue},Object.defineProperty(gl[functionName],"name",{value:"".concat(functionName,"-to-cache"),configurable:!1})}class GLState{constructor(gl){let{copyState:copyState=!1,log:log=(()=>{})}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=gl,this.program=null,this.stateStack=[],this.enable=!0,this.cache=copyState?getParameters(gl):Object.assign({},GL_PARAMETER_DEFAULTS),this.log=log,this._updateCache=this._updateCache.bind(this),Object.seal(this)}push(){this.stateStack.push({})}pop(){assert(this.stateStack.length>0);const oldValues=this.stateStack[this.stateStack.length-1];setParameters(this.gl,oldValues),this.stateStack.pop()}_updateCache(values){let oldValue,valueChanged=!1;const oldValues=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(const key in values){assert(void 0!==key);const value=values[key],cached=this.cache[key];deepArrayEqual(value,cached)||(valueChanged=!0,oldValue=cached,oldValues&&!(key in oldValues)&&(oldValues[key]=cached),this.cache[key]=value)}return{valueChanged:valueChanged,oldValue:oldValue}}}function trackContextState(gl){let options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{enable:enable=!0,copyState:copyState}=options;if(assert(void 0!==copyState),!gl.state){const{polyfillContext:polyfillContext}=globalThis;polyfillContext&&polyfillContext(gl),gl.state=new GLState(gl,{copyState:copyState}),function installProgramSpy(gl){const originalUseProgram=gl.useProgram.bind(gl);gl.useProgram=function useProgramLuma(handle){gl.state.program!==handle&&(originalUseProgram(handle),gl.state.program=handle)}}(gl);for(const key in GL_HOOKED_SETTERS){installSetterSpy(gl,key,GL_HOOKED_SETTERS[key])}installGetterOverride(gl,"getParameter"),installGetterOverride(gl,"isEnabled")}return gl.state.enable=enable,gl}function popContextState(gl){assert(gl.state),gl.state.pop()}function setParameters(gl,values){if(assert(isWebGL(gl),"setParameters requires a WebGL context"),isObjectEmpty(values))return;const compositeSetters={};for(const key in values){const glConstant=Number(key),setter=GL_PARAMETER_SETTERS[key];setter&&("string"==typeof setter?compositeSetters[setter]=!0:setter(gl,values[key],glConstant))}const cache=gl.state&&gl.state.cache;if(cache)for(const key in compositeSetters){(0,GL_COMPOSITE_PARAMETER_SETTERS[key])(gl,values,cache)}}function getParameters(gl,parameters){if("number"==typeof(parameters=parameters||GL_PARAMETER_DEFAULTS)){const key=parameters,getter=GL_PARAMETER_GETTERS[key];return getter?getter(gl,key):gl.getParameter(key)}const parameterKeys=Array.isArray(parameters)?parameters:Object.keys(parameters),state={};for(const key of parameterKeys){const getter=GL_PARAMETER_GETTERS[key];state[key]=getter?getter(gl,Number(key)):gl.getParameter(Number(key))}return state}function resetParameters(gl){setParameters(gl,GL_PARAMETER_DEFAULTS)}function withParameters(gl,parameters,func){if(isObjectEmpty(parameters))return func(gl);const{nocatch:nocatch=!0}=parameters;let value;if(function pushContextState(gl){gl.state||trackContextState(gl,{copyState:!1}),gl.state.push()}(gl),setParameters(gl,parameters),nocatch)value=func(gl),popContextState(gl);else try{value=func(gl)}finally{popContextState(gl)}return value}function cssToDeviceRatio(gl){const{luma:luma}=gl;if(gl.canvas&&luma){const cachedSize=luma.canvasSizeInfo,clientWidth="clientWidth"in cachedSize?cachedSize.clientWidth:gl.canvas.clientWidth;return clientWidth?gl.drawingBufferWidth/clientWidth:1}return 1}function cssToDevicePixels(gl,cssPixel){let yInvert=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return function scalePixels(pixel,ratio,width,height,yInvert){const x=scaleX(pixel[0],ratio,width);let y=scaleY(pixel[1],ratio,height,yInvert),t=scaleX(pixel[0]+1,ratio,width);const xHigh=t===width-1?t:t-1;let yHigh;t=scaleY(pixel[1]+1,ratio,height,yInvert),yInvert?(t=0===t?t:t+1,yHigh=y,y=t):yHigh=t===height-1?t:t-1;return{x:x,y:y,width:Math.max(xHigh-x+1,1),height:Math.max(yHigh-y+1,1)}}(cssPixel,cssToDeviceRatio(gl),gl.drawingBufferWidth,gl.drawingBufferHeight,yInvert)}function scaleX(x,ratio,width){return Math.min(Math.round(x*ratio),width-1)}function scaleY(y,ratio,height,yInvert){return yInvert?Math.max(0,height-1-Math.round(y*ratio)):Math.min(Math.round(y*ratio),height-1)}const isBrowser=(0,__webpack_require__("./node_modules/@probe.gl/env/dist/esm/lib/is-browser.js").Z)(),isPage=isBrowser&&"undefined"!=typeof document,CONTEXT_DEFAULTS={webgl2:!0,webgl1:!0,throwOnError:!0,manageState:!0,canvas:null,debug:!1,width:800,height:600};function createGLContext(){let options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};assert(isBrowser,"createGLContext only available in the browser.\nCreate your own headless context or use 'createHeadlessContext' from @luma.gl/test-utils"),options=Object.assign({},CONTEXT_DEFAULTS,options);const{width:width,height:height}=options;function onError(message){if(options.throwOnError)throw new Error(message);return console.error(message),null}let gl;options.onError=onError;const{canvas:canvas}=options,targetCanvas=function getCanvas(_ref){let targetCanvas,{canvas:canvas,width:width=800,height:height=600,onError:onError}=_ref;if("string"==typeof canvas){isPage&&"complete"===document.readyState||onError("createGLContext called on canvas '".concat(canvas,"' before page was loaded")),targetCanvas=document.getElementById(canvas)}else canvas?targetCanvas=canvas:(targetCanvas=document.createElement("canvas"),targetCanvas.id="lumagl-canvas",targetCanvas.style.width=Number.isFinite(width)?"".concat(width,"px"):"100%",targetCanvas.style.height=Number.isFinite(height)?"".concat(height,"px"):"100%",document.body.insertBefore(targetCanvas,document.body.firstChild));return targetCanvas}({canvas:canvas,width:width,height:height,onError:onError});return gl=function createBrowserContext(canvas,options){const{onError:onError}=options;let errorMessage=null;const onCreateError=error=>errorMessage=error.statusMessage||errorMessage;canvas.addEventListener("webglcontextcreationerror",onCreateError,!1);const{webgl1:webgl1=!0,webgl2:webgl2=!0}=options;let gl=null;webgl2&&(gl=gl||canvas.getContext("webgl2",options),gl=gl||canvas.getContext("experimental-webgl2",options));webgl1&&(gl=gl||canvas.getContext("webgl",options),gl=gl||canvas.getContext("experimental-webgl",options));if(canvas.removeEventListener("webglcontextcreationerror",onCreateError,!1),!gl)return onError("Failed to create ".concat(webgl2&&!webgl1?"WebGL2":"WebGL"," context: ").concat(errorMessage||"Unknown error"));options.onContextLost&&canvas.addEventListener("webglcontextlost",options.onContextLost,!1);options.onContextRestored&&canvas.addEventListener("webglcontextrestored",options.onContextRestored,!1);return gl}(targetCanvas,options),gl?(gl=instrumentGLContext(gl,options),function logInfo(gl){const webGL=isWebGL2(gl)?"WebGL2":"WebGL1",info=function getContextDebugInfo(gl){const vendorMasked=gl.getParameter(7936),rendererMasked=gl.getParameter(7937),ext=gl.getExtension("WEBGL_debug_renderer_info"),vendorUnmasked=ext&&gl.getParameter(ext.UNMASKED_VENDOR_WEBGL||7936),rendererUnmasked=ext&&gl.getParameter(ext.UNMASKED_RENDERER_WEBGL||7937);return{vendor:vendorUnmasked||vendorMasked,renderer:rendererUnmasked||rendererMasked,vendorMasked:vendorMasked,rendererMasked:rendererMasked,version:gl.getParameter(7938),shadingLanguageVersion:gl.getParameter(35724)}}(gl),driver=info?"(".concat(info.vendor,",").concat(info.renderer,")"):"",debug=gl.debug?" debug":"";log_log.info(1,"".concat(webGL).concat(debug," context ").concat(driver))()}(gl),gl):null}function instrumentGLContext(gl){let options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!gl||gl._instrumented)return gl;gl._version=gl._version||function getVersion(gl){if("undefined"!=typeof WebGL2RenderingContext&&gl instanceof WebGL2RenderingContext)return 2;return 1}(gl),gl.luma=gl.luma||{},gl.luma.canvasSizeInfo=gl.luma.canvasSizeInfo||{},options=Object.assign({},CONTEXT_DEFAULTS,options);const{manageState:manageState,debug:debug}=options;return manageState&&trackContextState(gl,{copyState:!1,log:function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return log_log.log(1,...args)()}}),isBrowser&&debug&&(globalThis.makeDebugContext?(gl=globalThis.makeDebugContext(gl,options),log_log.level=Math.max(log_log.level,1)):log_log.warn('WebGL debug mode not activated. import "@luma.gl/debug" to enable.')()),gl._instrumented=!0,gl}function resizeGLContext(gl){let options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(gl.canvas){return void function setDevicePixelRatio(gl,devicePixelRatio,options){let clientWidth="width"in options?options.width:gl.canvas.clientWidth,clientHeight="height"in options?options.height:gl.canvas.clientHeight;clientWidth&&clientHeight||(log_log.log(1,"Canvas clientWidth/clientHeight is 0")(),devicePixelRatio=1,clientWidth=gl.canvas.width||1,clientHeight=gl.canvas.height||1);gl.luma=gl.luma||{},gl.luma.canvasSizeInfo=gl.luma.canvasSizeInfo||{};const cachedSize=gl.luma.canvasSizeInfo;if(cachedSize.clientWidth!==clientWidth||cachedSize.clientHeight!==clientHeight||cachedSize.devicePixelRatio!==devicePixelRatio){let clampedPixelRatio=devicePixelRatio;const canvasWidth=Math.floor(clientWidth*clampedPixelRatio),canvasHeight=Math.floor(clientHeight*clampedPixelRatio);gl.canvas.width=canvasWidth,gl.canvas.height=canvasHeight,gl.drawingBufferWidth===canvasWidth&&gl.drawingBufferHeight===canvasHeight||(log_log.warn("Device pixel ratio clamped")(),clampedPixelRatio=Math.min(gl.drawingBufferWidth/clientWidth,gl.drawingBufferHeight/clientHeight),gl.canvas.width=Math.floor(clientWidth*clampedPixelRatio),gl.canvas.height=Math.floor(clientHeight*clampedPixelRatio)),Object.assign(gl.luma.canvasSizeInfo,{clientWidth:clientWidth,clientHeight:clientHeight,devicePixelRatio:devicePixelRatio})}}(gl,function getDevicePixelRatio(useDevicePixels){const windowRatio="undefined"==typeof window?1:window.devicePixelRatio||1;return Number.isFinite(useDevicePixels)?useDevicePixels<=0?1:useDevicePixels:useDevicePixels?windowRatio:1}(options.useDevicePixels),options)}const ext=gl.getExtension("STACKGL_resize_drawingbuffer");ext&&"width"in options&&"height"in options&&ext.resize(options.width,options.height)}},"./node_modules/@luma.gl/shadertools/dist/esm/lib/constants.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{H:function(){return VERTEX_SHADER},Y:function(){return FRAGMENT_SHADER}});const VERTEX_SHADER="vs",FRAGMENT_SHADER="fs"},"./node_modules/@luma.gl/shadertools/dist/esm/lib/inject-shader.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{O_:function(){return DECLARATION_INJECT_MARKER},Lm:function(){return combineInjects},ZP:function(){return injectShader}});var constants=__webpack_require__("./node_modules/@luma.gl/shadertools/dist/esm/lib/constants.js"),assert=__webpack_require__("./node_modules/@luma.gl/shadertools/dist/esm/utils/assert.js");const MODULE_INJECTORS={[constants.H]:"#ifdef MODULE_LOGDEPTH\n  logdepth_adjustPosition(gl_Position);\n#endif\n",[constants.Y]:"#ifdef MODULE_MATERIAL\n  gl_FragColor = material_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LIGHTING\n  gl_FragColor = lighting_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_FOG\n  gl_FragColor = fog_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_PICKING\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LOGDEPTH\n  logdepth_setFragDepth();\n#endif\n"},DECLARATION_INJECT_MARKER="__LUMA_INJECT_DECLARATIONS__",REGEX_START_OF_MAIN=/void\s+main\s*\([^)]*\)\s*\{\n?/,REGEX_END_OF_MAIN=/}\n?[^{}]*$/,fragments=[];function injectShader(source,type,inject){let injectStandardStubs=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const isVertex=type===constants.H;for(const key in inject){const fragmentData=inject[key];fragmentData.sort(((a,b)=>a.order-b.order)),fragments.length=fragmentData.length;for(let i=0,len=fragmentData.length;i<len;++i)fragments[i]=fragmentData[i].injection;const fragmentString="".concat(fragments.join("\n"),"\n");switch(key){case"vs:#decl":isVertex&&(source=source.replace(DECLARATION_INJECT_MARKER,fragmentString));break;case"vs:#main-start":isVertex&&(source=source.replace(REGEX_START_OF_MAIN,(match=>match+fragmentString)));break;case"vs:#main-end":isVertex&&(source=source.replace(REGEX_END_OF_MAIN,(match=>fragmentString+match)));break;case"fs:#decl":isVertex||(source=source.replace(DECLARATION_INJECT_MARKER,fragmentString));break;case"fs:#main-start":isVertex||(source=source.replace(REGEX_START_OF_MAIN,(match=>match+fragmentString)));break;case"fs:#main-end":isVertex||(source=source.replace(REGEX_END_OF_MAIN,(match=>fragmentString+match)));break;default:source=source.replace(key,(match=>match+fragmentString))}}return source=source.replace(DECLARATION_INJECT_MARKER,""),injectStandardStubs&&(source=source.replace(/\}\s*$/,(match=>match+MODULE_INJECTORS[type]))),source}function combineInjects(injects){const result={};return(0,assert.Z)(Array.isArray(injects)&&injects.length>1),injects.forEach((inject=>{for(const key in inject)result[key]=result[key]?"".concat(result[key],"\n").concat(inject[key]):inject[key]})),result}},"./node_modules/@luma.gl/shadertools/dist/esm/lib/shader-module.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return ShaderModule},v:function(){return normalizeShaderModule}});var assert=__webpack_require__("./node_modules/@luma.gl/shadertools/dist/esm/utils/assert.js");const TYPE_DEFINITIONS={number:{validate(value,propType){return Number.isFinite(value)&&(!("max"in propType)||value<=propType.max)&&(!("min"in propType)||value>=propType.min)}},array:{validate(value,propType){return Array.isArray(value)||ArrayBuffer.isView(value)}}};function parsePropType(propDef){let type=getTypeOf(propDef);return"object"===type?propDef?"type"in propDef?Object.assign({},propDef,TYPE_DEFINITIONS[propDef.type]):"value"in propDef?(type=getTypeOf(propDef.value),Object.assign({type:type},propDef,TYPE_DEFINITIONS[type])):{type:"object",value:propDef}:{type:"object",value:null}:Object.assign({type:type,value:propDef},TYPE_DEFINITIONS[type])}function getTypeOf(value){return Array.isArray(value)||ArrayBuffer.isView(value)?"array":typeof value}class ShaderModule{constructor(_ref){let{name:name,vs:vs,fs:fs,dependencies:dependencies=[],uniforms:uniforms,getUniforms:getUniforms,deprecations:deprecations=[],defines:defines={},inject:inject={},vertexShader:vertexShader,fragmentShader:fragmentShader}=_ref;(0,assert.Z)("string"==typeof name),this.name=name,this.vs=vs||vertexShader,this.fs=fs||fragmentShader,this.getModuleUniforms=getUniforms,this.dependencies=dependencies,this.deprecations=this._parseDeprecationDefinitions(deprecations),this.defines=defines,this.injections=function normalizeInjections(injections){const result={vs:{},fs:{}};for(const hook in injections){let injection=injections[hook];"string"==typeof injection&&(injection={order:0,injection:injection}),result[hook.slice(0,2)][hook]=injection}return result}(inject),uniforms&&(this.uniforms=function parsePropTypes(propDefs){const propTypes={};for(const propName in propDefs){const propType=parsePropType(propDefs[propName]);propTypes[propName]=propType}return propTypes}(uniforms))}getModuleSource(type){let moduleSource;switch(type){case"vs":moduleSource=this.vs||"";break;case"fs":moduleSource=this.fs||"";break;default:(0,assert.Z)(!1)}return"#define MODULE_".concat(this.name.toUpperCase().replace(/[^0-9a-z]/gi,"_"),"\n").concat(moduleSource,"// END MODULE_").concat(this.name,"\n\n")}getUniforms(opts,uniforms){return this.getModuleUniforms?this.getModuleUniforms(opts,uniforms):this.uniforms?this._defaultGetUniforms(opts):{}}getDefines(){return this.defines}checkDeprecations(shaderSource,log){this.deprecations.forEach((def=>{def.regex.test(shaderSource)&&(def.deprecated?log.deprecated(def.old,def.new)():log.removed(def.old,def.new)())}))}_parseDeprecationDefinitions(deprecations){return deprecations.forEach((def=>{if("function"===def.type)def.regex=new RegExp("\\b".concat(def.old,"\\("));else def.regex=new RegExp("".concat(def.type," ").concat(def.old,";"))})),deprecations}_defaultGetUniforms(){let opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const uniforms={},propTypes=this.uniforms;for(const key in propTypes){const propDef=propTypes[key];key in opts&&!propDef.private?(propDef.validate&&(0,assert.Z)(propDef.validate(opts[key],propDef),"".concat(this.name,": invalid ").concat(key)),uniforms[key]=opts[key]):uniforms[key]=propDef.value}return uniforms}}function normalizeShaderModule(module){if(!module.normalized&&(module.normalized=!0,module.uniforms&&!module.getUniforms)){const shaderModule=new ShaderModule(module);module.getUniforms=shaderModule.getUniforms.bind(shaderModule)}return module}},"./node_modules/@luma.gl/shadertools/dist/esm/modules/fp32/fp32.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{O:function(){return fp32}});const fp32={name:"fp32",vs:"#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\nconst float TWO_PI = 6.2831854820251465;\nconst float PI_2 = 1.5707963705062866;\nconst float PI_16 = 0.1963495463132858;\n\nconst float SIN_TABLE_0 = 0.19509032368659973;\nconst float SIN_TABLE_1 = 0.3826834261417389;\nconst float SIN_TABLE_2 = 0.5555702447891235;\nconst float SIN_TABLE_3 = 0.7071067690849304;\n\nconst float COS_TABLE_0 = 0.9807852506637573;\nconst float COS_TABLE_1 = 0.9238795042037964;\nconst float COS_TABLE_2 = 0.8314695954322815;\nconst float COS_TABLE_3 = 0.7071067690849304;\n\nconst float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;\nconst float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;\nconst float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;\nconst float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;\n\nfloat sin_taylor_fp32(float a) {\n  float r, s, t, x;\n\n  if (a == 0.0) {\n    return 0.0;\n  }\n\n  x = -a * a;\n  s = a;\n  r = a;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_3;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_5;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_7;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_9;\n  s = s + t;\n\n  return s;\n}\n\nvoid sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {\n  if (a == 0.0) {\n    sin_t = 0.0;\n    cos_t = 1.0;\n  }\n  sin_t = sin_taylor_fp32(a);\n  cos_t = sqrt(1.0 - sin_t * sin_t);\n}\n\nfloat tan_taylor_fp32(float a) {\n    float sin_a;\n    float cos_a;\n\n    if (a == 0.0) {\n        return 0.0;\n    }\n    float z = floor(a / TWO_PI);\n    float r = a - TWO_PI * z;\n\n    float t;\n    float q = floor(r / PI_2 + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return 1.0 / 0.0;\n    }\n\n    t = r - PI_2 * q;\n\n    q = floor(t / PI_16 + 0.5);\n    int k = int(q);\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return 1.0 / 0.0;\n    } else {\n        t = t - PI_16 * q;\n    }\n\n    float u = 0.0;\n    float v = 0.0;\n\n    float sin_t, cos_t;\n    float s, c;\n    sincos_taylor_fp32(t, sin_t, cos_t);\n\n    if (k == 0) {\n        s = sin_t;\n        c = cos_t;\n    } else {\n        if (abs(float(abs_k) - 1.0) < 0.5) {\n            u = COS_TABLE_0;\n            v = SIN_TABLE_0;\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\n            u = COS_TABLE_1;\n            v = SIN_TABLE_1;\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\n            u = COS_TABLE_2;\n            v = SIN_TABLE_2;\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\n            u = COS_TABLE_3;\n            v = SIN_TABLE_3;\n        }\n        if (k > 0) {\n            s = u * sin_t + v * cos_t;\n            c = u * cos_t - v * sin_t;\n        } else {\n            s = u * sin_t - v * cos_t;\n            c = u * cos_t + v * sin_t;\n        }\n    }\n\n    if (j == 0) {\n        sin_a = s;\n        cos_a = c;\n    } else if (j == 1) {\n        sin_a = c;\n        cos_a = -s;\n    } else if (j == -1) {\n        sin_a = -c;\n        cos_a = s;\n    } else {\n        sin_a = -s;\n        cos_a = -c;\n    }\n    return sin_a / cos_a;\n}\n#endif\n\nfloat tan_fp32(float a) {\n#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\n  return tan_taylor_fp32(a);\n#else\n  return tan(a);\n#endif\n}\n",fs:null}},"./node_modules/@luma.gl/shadertools/dist/esm/modules/picking/picking.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{q:function(){return picking}});const DEFAULT_MODULE_OPTIONS={pickingSelectedColor:null,pickingHighlightColor:new Uint8Array([0,255,255,255]),pickingActive:!1,pickingAttribute:!1};const picking={name:"picking",vs:"uniform bool picking_uActive;\nuniform bool picking_uAttribute;\nuniform vec3 picking_uSelectedColor;\nuniform bool picking_uSelectedColorValid;\n\nout vec4 picking_vRGBcolor_Avalid;\n\nconst float COLOR_SCALE = 1. / 255.;\n\nbool picking_isColorValid(vec3 color) {\n  return dot(color, vec3(1.0)) > 0.001;\n}\n\nbool isVertexPicked(vec3 vertexColor) {\n  return\n    picking_uSelectedColorValid &&\n    !picking_isColorValid(abs(vertexColor - picking_uSelectedColor));\n}\n\nvoid picking_setPickingColor(vec3 pickingColor) {\n  if (picking_uActive) {\n    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));\n\n    if (!picking_uAttribute) {\n      picking_vRGBcolor_Avalid.rgb = pickingColor * COLOR_SCALE;\n    }\n  } else {\n    picking_vRGBcolor_Avalid.a = float(isVertexPicked(pickingColor));\n  }\n}\n\nvoid picking_setPickingAttribute(float value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.r = value;\n  }\n}\nvoid picking_setPickingAttribute(vec2 value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.rg = value;\n  }\n}\nvoid picking_setPickingAttribute(vec3 value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.rgb = value;\n  }\n}\n",fs:"uniform bool picking_uActive;\nuniform vec3 picking_uSelectedColor;\nuniform vec4 picking_uHighlightColor;\n\nin vec4 picking_vRGBcolor_Avalid;\nvec4 picking_filterHighlightColor(vec4 color) {\n  if (picking_uActive) {\n    return color;\n  }\n  bool selected = bool(picking_vRGBcolor_Avalid.a);\n\n  if (selected) {\n    float highLightAlpha = picking_uHighlightColor.a;\n    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);\n    float highLightRatio = highLightAlpha / blendedAlpha;\n\n    vec3 blendedRGB = mix(color.rgb, picking_uHighlightColor.rgb, highLightRatio);\n    return vec4(blendedRGB, blendedAlpha);\n  } else {\n    return color;\n  }\n}\nvec4 picking_filterPickingColor(vec4 color) {\n  if (picking_uActive) {\n    if (picking_vRGBcolor_Avalid.a == 0.0) {\n      discard;\n    }\n    return picking_vRGBcolor_Avalid;\n  }\n  return color;\n}\nvec4 picking_filterColor(vec4 color) {\n  vec4 highightColor = picking_filterHighlightColor(color);\n  return picking_filterPickingColor(highightColor);\n}\n\n",getUniforms:function getUniforms(){let opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:DEFAULT_MODULE_OPTIONS;const uniforms={};if(void 0!==opts.pickingSelectedColor)if(opts.pickingSelectedColor){const selectedColor=opts.pickingSelectedColor.slice(0,3);uniforms.picking_uSelectedColorValid=1,uniforms.picking_uSelectedColor=selectedColor}else uniforms.picking_uSelectedColorValid=0;if(opts.pickingHighlightColor){const color=Array.from(opts.pickingHighlightColor,(x=>x/255));Number.isFinite(color[3])||(color[3]=1),uniforms.picking_uHighlightColor=color}return void 0!==opts.pickingActive&&(uniforms.picking_uActive=Boolean(opts.pickingActive),uniforms.picking_uAttribute=Boolean(opts.pickingAttribute)),uniforms}}},"./node_modules/@luma.gl/shadertools/dist/esm/utils/assert.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";function assert(condition,message){if(!condition)throw new Error(message||"shadertools: assertion failed.")}__webpack_require__.d(__webpack_exports__,{Z:function(){return assert}})},"./node_modules/@luma.gl/webgl/dist/esm/classes/accessor.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return Accessor}});var _webgl_utils_typed_array_utils__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/webgl-utils/typed-array-utils.js"),_utils_assert__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/utils/assert.js"),_utils_check_props__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/utils/check-props.js");const DEFAULT_ACCESSOR_VALUES={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},PROP_CHECKS={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}};class Accessor{static getBytesPerElement(accessor){return(0,_webgl_utils_typed_array_utils__WEBPACK_IMPORTED_MODULE_0__.vN)(accessor.type||5126).BYTES_PER_ELEMENT}static getBytesPerVertex(accessor){(0,_utils_assert__WEBPACK_IMPORTED_MODULE_1__.h)(accessor.size);return(0,_webgl_utils_typed_array_utils__WEBPACK_IMPORTED_MODULE_0__.vN)(accessor.type||5126).BYTES_PER_ELEMENT*accessor.size}static resolve(){for(var _len=arguments.length,accessors=new Array(_len),_key=0;_key<_len;_key++)accessors[_key]=arguments[_key];return new Accessor(...[DEFAULT_ACCESSOR_VALUES,...accessors])}constructor(){for(var _len2=arguments.length,accessors=new Array(_len2),_key2=0;_key2<_len2;_key2++)accessors[_key2]=arguments[_key2];accessors.forEach((accessor=>this._assign(accessor))),Object.freeze(this)}toString(){return JSON.stringify(this)}get BYTES_PER_ELEMENT(){return Accessor.getBytesPerElement(this)}get BYTES_PER_VERTEX(){return Accessor.getBytesPerVertex(this)}_assign(){let props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return props=(0,_utils_check_props__WEBPACK_IMPORTED_MODULE_2__.k)("Accessor",props,PROP_CHECKS),void 0!==props.type&&(this.type=props.type,5124!==props.type&&5125!==props.type||(this.integer=!0)),void 0!==props.size&&(this.size=props.size),void 0!==props.offset&&(this.offset=props.offset),void 0!==props.stride&&(this.stride=props.stride),void 0!==props.normalized&&(this.normalized=props.normalized),void 0!==props.integer&&(this.integer=props.integer),void 0!==props.divisor&&(this.divisor=props.divisor),void 0!==props.buffer&&(this.buffer=props.buffer),void 0!==props.index&&("boolean"==typeof props.index?this.index=props.index?1:0:this.index=props.index),void 0!==props.instanced&&(this.divisor=props.instanced?1:0),void 0!==props.isInstanced&&(this.divisor=props.isInstanced?1:0),this}}},"./node_modules/@luma.gl/webgl/dist/esm/classes/buffer.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return Buffer}});var _resource__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/classes/resource.js"),_accessor__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/classes/accessor.js"),_webgl_utils_typed_array_utils__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/webgl-utils/typed-array-utils.js"),_luma_gl_gltools__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@luma.gl/gltools/dist/esm/index.js"),_utils_assert__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/utils/assert.js"),_utils_check_props__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/utils/check-props.js");const DEPRECATED_PROPS={offset:"accessor.offset",stride:"accessor.stride",type:"accessor.type",size:"accessor.size",divisor:"accessor.divisor",normalized:"accessor.normalized",integer:"accessor.integer",instanced:"accessor.divisor",isInstanced:"accessor.divisor"},PROP_CHECKS_INITIALIZE={removedProps:{},replacedProps:{bytes:"byteLength"},deprecatedProps:DEPRECATED_PROPS},PROP_CHECKS_SET_PROPS={removedProps:DEPRECATED_PROPS};class Buffer extends _resource__WEBPACK_IMPORTED_MODULE_1__.Z{get[Symbol.toStringTag](){return"Buffer"}constructor(gl){let props=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(gl,props),this.stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),this.target=props.target||(this.gl.webgl2?36662:34962),this.initialize(props),Object.seal(this)}getElementCount(){let accessor=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor;return Math.round(this.byteLength/_accessor__WEBPACK_IMPORTED_MODULE_2__.Z.getBytesPerElement(accessor))}getVertexCount(){let accessor=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor;return Math.round(this.byteLength/_accessor__WEBPACK_IMPORTED_MODULE_2__.Z.getBytesPerVertex(accessor))}initialize(){let props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ArrayBuffer.isView(props)&&(props={data:props}),Number.isFinite(props)&&(props={byteLength:props}),props=(0,_utils_check_props__WEBPACK_IMPORTED_MODULE_3__.k)("Buffer",props,PROP_CHECKS_INITIALIZE),this.usage=props.usage||35044,this.debugData=null,this.setAccessor(Object.assign({},props,props.accessor)),props.data?this._setData(props.data,props.offset,props.byteLength):this._setByteLength(props.byteLength||0),this}setProps(props){return"accessor"in(props=(0,_utils_check_props__WEBPACK_IMPORTED_MODULE_3__.k)("Buffer",props,PROP_CHECKS_SET_PROPS))&&this.setAccessor(props.accessor),this}setAccessor(accessor){return delete(accessor=Object.assign({},accessor)).buffer,this.accessor=new _accessor__WEBPACK_IMPORTED_MODULE_2__.Z(accessor),this}reallocate(byteLength){return byteLength>this.byteLength?(this._setByteLength(byteLength),!0):(this.bytesUsed=byteLength,!1)}setData(props){return this.initialize(props)}subData(props){ArrayBuffer.isView(props)&&(props={data:props});const{data:data,offset:offset=0,srcOffset:srcOffset=0}=props,byteLength=props.byteLength||props.length;(0,_utils_assert__WEBPACK_IMPORTED_MODULE_4__.h)(data);const target=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(target,this.handle),0!==srcOffset||void 0!==byteLength?((0,_luma_gl_gltools__WEBPACK_IMPORTED_MODULE_0__.KQ)(this.gl),this.gl.bufferSubData(this.target,offset,data,srcOffset,byteLength)):this.gl.bufferSubData(target,offset,data),this.gl.bindBuffer(target,null),this.debugData=null,this._inferType(data),this}copyData(_ref){let{sourceBuffer:sourceBuffer,readOffset:readOffset=0,writeOffset:writeOffset=0,size:size}=_ref;const{gl:gl}=this;return(0,_luma_gl_gltools__WEBPACK_IMPORTED_MODULE_0__.KQ)(gl),gl.bindBuffer(36662,sourceBuffer.handle),gl.bindBuffer(36663,this.handle),gl.copyBufferSubData(36662,36663,readOffset,writeOffset,size),gl.bindBuffer(36662,null),gl.bindBuffer(36663,null),this.debugData=null,this}getData(){let{dstData:dstData=null,srcByteOffset:srcByteOffset=0,dstOffset:dstOffset=0,length:length=0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,_luma_gl_gltools__WEBPACK_IMPORTED_MODULE_0__.KQ)(this.gl);const ArrayType=(0,_webgl_utils_typed_array_utils__WEBPACK_IMPORTED_MODULE_5__.vN)(this.accessor.type||5126,{clamped:!1}),sourceAvailableElementCount=this._getAvailableElementCount(srcByteOffset),dstElementOffset=dstOffset;let dstAvailableElementCount,dstElementCount;dstData?(dstElementCount=dstData.length,dstAvailableElementCount=dstElementCount-dstElementOffset):(dstAvailableElementCount=Math.min(sourceAvailableElementCount,length||sourceAvailableElementCount),dstElementCount=dstElementOffset+dstAvailableElementCount);const copyElementCount=Math.min(sourceAvailableElementCount,dstAvailableElementCount);return length=length||copyElementCount,(0,_utils_assert__WEBPACK_IMPORTED_MODULE_4__.h)(length<=copyElementCount),dstData=dstData||new ArrayType(dstElementCount),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,srcByteOffset,dstData,dstOffset,length),this.gl.bindBuffer(36662,null),dstData}bind(){let{target:target=this.target,index:index=this.accessor&&this.accessor.index,offset:offset=0,size:size}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return 35345===target||35982===target?void 0!==size?this.gl.bindBufferRange(target,index,this.handle,offset,size):((0,_utils_assert__WEBPACK_IMPORTED_MODULE_4__.h)(0===offset),this.gl.bindBufferBase(target,index,this.handle)):this.gl.bindBuffer(target,this.handle),this}unbind(){let{target:target=this.target,index:index=this.accessor&&this.accessor.index}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return 35345===target||35982===target?this.gl.bindBufferBase(target,index,null):this.gl.bindBuffer(target,null),this}getDebugData(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:Math.min(10,this.byteLength)}),{data:this.debugData,changed:!0})}invalidateDebugData(){this.debugData=null}_setData(data){let offset=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,byteLength=arguments.length>2&&void 0!==arguments[2]?arguments[2]:data.byteLength+offset;(0,_utils_assert__WEBPACK_IMPORTED_MODULE_4__.h)(ArrayBuffer.isView(data)),this._trackDeallocatedMemory();const target=this._getTarget();this.gl.bindBuffer(target,this.handle),this.gl.bufferData(target,byteLength,this.usage),this.gl.bufferSubData(target,offset,data),this.gl.bindBuffer(target,null),this.debugData=data.slice(0,10),this.bytesUsed=byteLength,this._trackAllocatedMemory(byteLength);const type=(0,_webgl_utils_typed_array_utils__WEBPACK_IMPORTED_MODULE_5__.O)(data);return(0,_utils_assert__WEBPACK_IMPORTED_MODULE_4__.h)(type),this.setAccessor(new _accessor__WEBPACK_IMPORTED_MODULE_2__.Z(this.accessor,{type:type})),this}_setByteLength(byteLength){let usage=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.usage;(0,_utils_assert__WEBPACK_IMPORTED_MODULE_4__.h)(byteLength>=0),this._trackDeallocatedMemory();let data=byteLength;0===byteLength&&(data=new Float32Array(0));const target=this._getTarget();return this.gl.bindBuffer(target,this.handle),this.gl.bufferData(target,data,usage),this.gl.bindBuffer(target,null),this.usage=usage,this.debugData=null,this.bytesUsed=byteLength,this._trackAllocatedMemory(byteLength),this}_getTarget(){return this.gl.webgl2?36663:this.target}_getAvailableElementCount(srcByteOffset){const sourceElementOffset=srcByteOffset/(0,_webgl_utils_typed_array_utils__WEBPACK_IMPORTED_MODULE_5__.vN)(this.accessor.type||5126,{clamped:!1}).BYTES_PER_ELEMENT;return this.getElementCount()-sourceElementOffset}_inferType(data){this.accessor.type||this.setAccessor(new _accessor__WEBPACK_IMPORTED_MODULE_2__.Z(this.accessor,{type:(0,_webgl_utils_typed_array_utils__WEBPACK_IMPORTED_MODULE_5__.O)(data)}))}_createHandle(){return this.gl.createBuffer()}_deleteHandle(){this.gl.deleteBuffer(this.handle),this._trackDeallocatedMemory()}_getParameter(pname){this.gl.bindBuffer(this.target,this.handle);const value=this.gl.getBufferParameter(this.target,pname);return this.gl.bindBuffer(this.target,null),value}get type(){return _luma_gl_gltools__WEBPACK_IMPORTED_MODULE_0__.cM.deprecated("Buffer.type","Buffer.accessor.type")(),this.accessor.type}get bytes(){return _luma_gl_gltools__WEBPACK_IMPORTED_MODULE_0__.cM.deprecated("Buffer.bytes","Buffer.byteLength")(),this.byteLength}setByteLength(byteLength){return _luma_gl_gltools__WEBPACK_IMPORTED_MODULE_0__.cM.deprecated("setByteLength","reallocate")(),this.reallocate(byteLength)}updateAccessor(opts){return _luma_gl_gltools__WEBPACK_IMPORTED_MODULE_0__.cM.deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)")(),this.accessor=new _accessor__WEBPACK_IMPORTED_MODULE_2__.Z(this.accessor,opts),this}}},"./node_modules/@luma.gl/webgl/dist/esm/classes/clear.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{$:function(){return clearBuffer},Z:function(){return clear}});var _luma_gl_gltools__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@luma.gl/gltools/dist/esm/index.js"),_utils_assert__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/utils/assert.js");const GL_DEPTH_BUFFER_BIT=256,GL_STENCIL_BUFFER_BIT=1024,GL_COLOR_BUFFER_BIT=16384,GL_COLOR=6144,GL_DEPTH=6145,GL_STENCIL=6146,GL_DEPTH_STENCIL=34041,ERR_ARGUMENTS="clear: bad arguments";function clear(gl){let{framebuffer:framebuffer=null,color:color=null,depth:depth=null,stencil:stencil=null}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const parameters={};framebuffer&&(parameters.framebuffer=framebuffer);let clearFlags=0;color&&(clearFlags|=GL_COLOR_BUFFER_BIT,!0!==color&&(parameters.clearColor=color)),depth&&(clearFlags|=GL_DEPTH_BUFFER_BIT,!0!==depth&&(parameters.clearDepth=depth)),stencil&&(clearFlags|=GL_STENCIL_BUFFER_BIT,!0!==depth&&(parameters.clearStencil=depth)),(0,_utils_assert__WEBPACK_IMPORTED_MODULE_1__.h)(0!==clearFlags,ERR_ARGUMENTS),(0,_luma_gl_gltools__WEBPACK_IMPORTED_MODULE_0__.s8)(gl,parameters,(()=>{gl.clear(clearFlags)}))}function clearBuffer(gl){let{framebuffer:framebuffer=null,buffer:buffer=GL_COLOR,drawBuffer:drawBuffer=0,value:value=[0,0,0,0]}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,_luma_gl_gltools__WEBPACK_IMPORTED_MODULE_0__.KQ)(gl),(0,_luma_gl_gltools__WEBPACK_IMPORTED_MODULE_0__.s8)(gl,{framebuffer:framebuffer},(()=>{switch(buffer){case GL_COLOR:switch(value.constructor){case Int32Array:gl.clearBufferiv(buffer,drawBuffer,value);break;case Uint32Array:gl.clearBufferuiv(buffer,drawBuffer,value);break;case Float32Array:default:gl.clearBufferfv(buffer,drawBuffer,value)}break;case GL_DEPTH:gl.clearBufferfv(GL_DEPTH,0,[value]);break;case GL_STENCIL:gl.clearBufferiv(GL_STENCIL,0,[value]);break;case GL_DEPTH_STENCIL:const[depth,stencil]=value;gl.clearBufferfi(GL_DEPTH_STENCIL,0,depth,stencil);break;default:(0,_utils_assert__WEBPACK_IMPORTED_MODULE_1__.h)(!1,ERR_ARGUMENTS)}}))}},"./node_modules/@luma.gl/webgl/dist/esm/classes/copy-and-blit.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Km:function(){return copyToDataUrl},Lv:function(){return copyToTexture},z6:function(){return readPixelsToArray},Jb:function(){return readPixelsToBuffer}});var buffer=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/classes/buffer.js"),framebuffer=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/classes/framebuffer.js"),classes_texture=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/classes/texture.js"),esm=__webpack_require__("./node_modules/@luma.gl/gltools/dist/esm/index.js"),typed_array_utils=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/webgl-utils/typed-array-utils.js"),utils_assert=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/utils/assert.js");function glFormatToComponents(format){switch(format){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return(0,utils_assert.h)(!1),0}}var texture_utils=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/webgl-utils/texture-utils.js");function readPixelsToArray(source){let options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{sourceX:sourceX=0,sourceY:sourceY=0,sourceFormat:sourceFormat=6408}=options;let{sourceAttachment:sourceAttachment=36064,target:target=null,sourceWidth:sourceWidth,sourceHeight:sourceHeight,sourceType:sourceType}=options;const{framebuffer:framebuffer,deleteFramebuffer:deleteFramebuffer}=getFramebuffer(source);(0,utils_assert.h)(framebuffer);const{gl:gl,handle:handle,attachments:attachments}=framebuffer;sourceWidth=sourceWidth||framebuffer.width,sourceHeight=sourceHeight||framebuffer.height,36064===sourceAttachment&&null===handle&&(sourceAttachment=1028),(0,utils_assert.h)(attachments[sourceAttachment]),sourceType=sourceType||attachments[sourceAttachment].type,target=function getPixelArray(pixelArray,type,format,width,height){if(pixelArray)return pixelArray;type=type||5121;const ArrayType=(0,typed_array_utils.vN)(type,{clamped:!1}),components=glFormatToComponents(format);return new ArrayType(width*height*components)}(target,sourceType,sourceFormat,sourceWidth,sourceHeight),sourceType=sourceType||(0,typed_array_utils.O)(target);const prevHandle=gl.bindFramebuffer(36160,handle);return gl.readPixels(sourceX,sourceY,sourceWidth,sourceHeight,sourceFormat,sourceType,target),gl.bindFramebuffer(36160,prevHandle||null),deleteFramebuffer&&framebuffer.delete(),target}function readPixelsToBuffer(source,_ref){let{sourceX:sourceX=0,sourceY:sourceY=0,sourceFormat:sourceFormat=6408,target:target=null,targetByteOffset:targetByteOffset=0,sourceWidth:sourceWidth,sourceHeight:sourceHeight,sourceType:sourceType}=_ref;const{framebuffer:framebuffer,deleteFramebuffer:deleteFramebuffer}=getFramebuffer(source);(0,utils_assert.h)(framebuffer),sourceWidth=sourceWidth||framebuffer.width,sourceHeight=sourceHeight||framebuffer.height;const gl2=(0,esm.KQ)(framebuffer.gl);if(sourceType=sourceType||(target?target.type:5121),!target){const components=glFormatToComponents(sourceFormat),byteCount=function glTypeToBytes(type){switch(type){case 5121:return 1;case 33635:case 32819:case 32820:return 2;case 5126:return 4;default:return(0,utils_assert.h)(!1),0}}(sourceType),byteLength=targetByteOffset+sourceWidth*sourceHeight*components*byteCount;target=new buffer.Z(gl2,{byteLength:byteLength,accessor:{type:sourceType,size:components}})}return target.bind({target:35051}),(0,esm.s8)(gl2,{framebuffer:framebuffer},(()=>{gl2.readPixels(sourceX,sourceY,sourceWidth,sourceHeight,sourceFormat,sourceType,targetByteOffset)})),target.unbind({target:35051}),deleteFramebuffer&&framebuffer.delete(),target}function copyToDataUrl(source){let{sourceAttachment:sourceAttachment=36064,targetMaxHeight:targetMaxHeight=Number.MAX_SAFE_INTEGER}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},data=readPixelsToArray(source,{sourceAttachment:sourceAttachment}),{width:width,height:height}=source;for(;height>targetMaxHeight;)({data:data,width:width,height:height}=(0,typed_array_utils.KS)({data:data,width:width,height:height}));(0,typed_array_utils.c$)({data:data,width:width,height:height});const canvas=document.createElement("canvas");canvas.width=width,canvas.height=height;const context=canvas.getContext("2d"),imageData=context.createImageData(width,height);return imageData.data.set(data),context.putImageData(imageData,0,0),canvas.toDataURL()}function copyToTexture(source,target){let options=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{sourceX:sourceX=0,sourceY:sourceY=0,targetMipmaplevel:targetMipmaplevel=0,targetInternalFormat:targetInternalFormat=6408}=options;let{targetX:targetX,targetY:targetY,targetZ:targetZ,width:width,height:height}=options;const{framebuffer:framebuffer,deleteFramebuffer:deleteFramebuffer}=getFramebuffer(source);(0,utils_assert.h)(framebuffer);const{gl:gl,handle:handle}=framebuffer,isSubCopy=void 0!==targetX||void 0!==targetY||void 0!==targetZ;targetX=targetX||0,targetY=targetY||0,targetZ=targetZ||0;const prevHandle=gl.bindFramebuffer(36160,handle);(0,utils_assert.h)(target);let texture=null;if(target instanceof classes_texture.Z&&(texture=target,width=Number.isFinite(width)?width:texture.width,height=Number.isFinite(height)?height:texture.height,texture.bind(0),target=texture.target),isSubCopy)switch(target){case 3553:case 34067:gl.copyTexSubImage2D(target,targetMipmaplevel,targetX,targetY,sourceX,sourceY,width,height);break;case 35866:case 32879:(0,esm.KQ)(gl).copyTexSubImage3D(target,targetMipmaplevel,targetX,targetY,targetZ,sourceX,sourceY,width,height)}else gl.copyTexImage2D(target,targetMipmaplevel,targetInternalFormat,sourceX,sourceY,width,height,0);return texture&&texture.unbind(),gl.bindFramebuffer(36160,prevHandle||null),deleteFramebuffer&&framebuffer.delete(),texture}function getFramebuffer(source){return source instanceof framebuffer.Z?{framebuffer:source,deleteFramebuffer:!1}:{framebuffer:(0,texture_utils.Y)(source),deleteFramebuffer:!0}}},"./node_modules/@luma.gl/webgl/dist/esm/classes/framebuffer.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return Framebuffer}});var _luma_gl_gltools__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@luma.gl/gltools/dist/esm/index.js"),_resource__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/classes/resource.js"),_texture_2d__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/classes/texture-2d.js"),_renderbuffer__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/classes/renderbuffer.js"),_clear__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/classes/clear.js"),_copy_and_blit_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/classes/copy-and-blit.js"),_features__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/features/features.js"),_webgl_utils_constants_to_keys__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/webgl-utils/constants-to-keys.js"),_utils_assert__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/utils/assert.js");class Framebuffer extends _resource__WEBPACK_IMPORTED_MODULE_1__.Z{get[Symbol.toStringTag](){return"Framebuffer"}static isSupported(gl){let options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{colorBufferFloat:colorBufferFloat,colorBufferHalfFloat:colorBufferHalfFloat}=options;let supported=!0;return colorBufferFloat&&(supported=Boolean(gl.getExtension("EXT_color_buffer_float")||gl.getExtension("WEBGL_color_buffer_float")||gl.getExtension("OES_texture_float"))),colorBufferHalfFloat&&(supported=supported&&Boolean(gl.getExtension("EXT_color_buffer_float")||gl.getExtension("EXT_color_buffer_half_float"))),supported}static getDefaultFramebuffer(gl){return gl.luma=gl.luma||{},gl.luma.defaultFramebuffer=gl.luma.defaultFramebuffer||new Framebuffer(gl,{id:"default-framebuffer",handle:null,attachments:{}}),gl.luma.defaultFramebuffer}get MAX_COLOR_ATTACHMENTS(){const gl2=(0,_luma_gl_gltools__WEBPACK_IMPORTED_MODULE_0__.KQ)(this.gl);return gl2.getParameter(gl2.MAX_COLOR_ATTACHMENTS)}get MAX_DRAW_BUFFERS(){const gl2=(0,_luma_gl_gltools__WEBPACK_IMPORTED_MODULE_0__.KQ)(this.gl);return gl2.getParameter(gl2.MAX_DRAW_BUFFERS)}constructor(gl){let opts=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(gl,opts),this.width=null,this.height=null,this.attachments={},this.readBuffer=36064,this.drawBuffers=[36064],this.ownResources=[],this.initialize(opts),Object.seal(this)}get color(){return this.attachments[36064]||null}get texture(){return this.attachments[36064]||null}get depth(){return this.attachments[36096]||this.attachments[33306]||null}get stencil(){return this.attachments[36128]||this.attachments[33306]||null}initialize(_ref){let{width:width=1,height:height=1,attachments:attachments=null,color:color=!0,depth:depth=!0,stencil:stencil=!1,check:check=!0,readBuffer:readBuffer,drawBuffers:drawBuffers}=_ref;if((0,_utils_assert__WEBPACK_IMPORTED_MODULE_2__.h)(width>=0&&height>=0,"Width and height need to be integers"),this.width=width,this.height=height,attachments)for(const attachment in attachments){const target=attachments[attachment];(Array.isArray(target)?target[0]:target).resize({width:width,height:height})}else attachments=this._createDefaultAttachments(color,depth,stencil,width,height);this.update({clearAttachments:!0,attachments:attachments,readBuffer:readBuffer,drawBuffers:drawBuffers}),attachments&&check&&this.checkStatus()}delete(){for(const resource of this.ownResources)resource.delete();return super.delete(),this}update(_ref2){let{attachments:attachments={},readBuffer:readBuffer,drawBuffers:drawBuffers,clearAttachments:clearAttachments=!1,resizeAttachments:resizeAttachments=!0}=_ref2;this.attach(attachments,{clearAttachments:clearAttachments,resizeAttachments:resizeAttachments});const{gl:gl}=this,prevHandle=gl.bindFramebuffer(36160,this.handle);return readBuffer&&this._setReadBuffer(readBuffer),drawBuffers&&this._setDrawBuffers(drawBuffers),gl.bindFramebuffer(36160,prevHandle||null),this}resize(){let options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{width:width,height:height}=options;if(null===this.handle)return(0,_utils_assert__WEBPACK_IMPORTED_MODULE_2__.h)(void 0===width&&void 0===height),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;void 0===width&&(width=this.gl.drawingBufferWidth),void 0===height&&(height=this.gl.drawingBufferHeight),width!==this.width&&height!==this.height&&_luma_gl_gltools__WEBPACK_IMPORTED_MODULE_0__.cM.log(2,"Resizing framebuffer ".concat(this.id," to ").concat(width,"x").concat(height))();for(const attachmentPoint in this.attachments)this.attachments[attachmentPoint].resize({width:width,height:height});return this.width=width,this.height=height,this}attach(attachments){let{clearAttachments:clearAttachments=!1,resizeAttachments:resizeAttachments=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const newAttachments={};clearAttachments&&Object.keys(this.attachments).forEach((key=>{newAttachments[key]=null})),Object.assign(newAttachments,attachments);const prevHandle=this.gl.bindFramebuffer(36160,this.handle);for(const key in newAttachments){(0,_utils_assert__WEBPACK_IMPORTED_MODULE_2__.h)(void 0!==key,"Misspelled framebuffer binding point?");const attachment=Number(key),descriptor=newAttachments[attachment];let object=descriptor;if(object)if(object instanceof _renderbuffer__WEBPACK_IMPORTED_MODULE_3__.Z)this._attachRenderbuffer({attachment:attachment,renderbuffer:object});else if(Array.isArray(descriptor)){const[texture,layer=0,level=0]=descriptor;object=texture,this._attachTexture({attachment:attachment,texture:texture,layer:layer,level:level})}else this._attachTexture({attachment:attachment,texture:object,layer:0,level:0});else this._unattach(attachment);resizeAttachments&&object&&object.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,prevHandle||null),Object.assign(this.attachments,attachments),Object.keys(this.attachments).filter((key=>!this.attachments[key])).forEach((key=>{delete this.attachments[key]}))}checkStatus(){const{gl:gl}=this,status=this.getStatus();if(36053!==status)throw new Error(function _getFrameBufferStatus(status){return(Framebuffer.STATUS||{})[status]||"Framebuffer error ".concat(status)}(status));return this}getStatus(){const{gl:gl}=this,prevHandle=gl.bindFramebuffer(36160,this.handle),status=gl.checkFramebufferStatus(36160);return gl.bindFramebuffer(36160,prevHandle||null),status}clear(){let options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{color:color,depth:depth,stencil:stencil,drawBuffers:drawBuffers=[]}=options,prevHandle=this.gl.bindFramebuffer(36160,this.handle);return(color||depth||stencil)&&(0,_clear__WEBPACK_IMPORTED_MODULE_4__.Z)(this.gl,{color:color,depth:depth,stencil:stencil}),drawBuffers.forEach(((value,drawBuffer)=>{(0,_clear__WEBPACK_IMPORTED_MODULE_4__.$)(this.gl,{drawBuffer:drawBuffer,value:value})})),this.gl.bindFramebuffer(36160,prevHandle||null),this}readPixels(){return _luma_gl_gltools__WEBPACK_IMPORTED_MODULE_0__.cM.error("Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)")(),null}readPixelsToBuffer(){return _luma_gl_gltools__WEBPACK_IMPORTED_MODULE_0__.cM.error("Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)")(),null}copyToDataUrl(){return _luma_gl_gltools__WEBPACK_IMPORTED_MODULE_0__.cM.error("Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)")(),null}copyToImage(){return _luma_gl_gltools__WEBPACK_IMPORTED_MODULE_0__.cM.error("Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)")(),null}copyToTexture(){return _luma_gl_gltools__WEBPACK_IMPORTED_MODULE_0__.cM.error("Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}blit(){return _luma_gl_gltools__WEBPACK_IMPORTED_MODULE_0__.cM.error("Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)")(),null}invalidate(_ref3){let{attachments:attachments=[],x:x=0,y:y=0,width:width,height:height}=_ref3;const gl2=(0,_luma_gl_gltools__WEBPACK_IMPORTED_MODULE_0__.KQ)(this.gl),prevHandle=gl2.bindFramebuffer(36008,this.handle);return 0===x&&0===y&&void 0===width&&void 0===height?gl2.invalidateFramebuffer(36008,attachments):gl2.invalidateFramebuffer(36008,attachments,x,y,width,height),gl2.bindFramebuffer(36008,prevHandle),this}getAttachmentParameter(attachment,pname,keys){let value=this._getAttachmentParameterFallback(pname);return null===value&&(this.gl.bindFramebuffer(36160,this.handle),value=this.gl.getFramebufferAttachmentParameter(36160,attachment,pname),this.gl.bindFramebuffer(36160,null)),keys&&value>1e3&&(value=(0,_webgl_utils_constants_to_keys__WEBPACK_IMPORTED_MODULE_5__.km)(this.gl,value)),value}getAttachmentParameters(){let attachment=arguments.length>0&&void 0!==arguments[0]?arguments[0]:36064,keys=arguments.length>1?arguments[1]:void 0,parameters=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.constructor.ATTACHMENT_PARAMETERS||[];const values={};for(const pname of parameters){values[keys?(0,_webgl_utils_constants_to_keys__WEBPACK_IMPORTED_MODULE_5__.km)(this.gl,pname):pname]=this.getAttachmentParameter(attachment,pname,keys)}return values}getParameters(){let keys=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const attachments=Object.keys(this.attachments),parameters={};for(const attachmentName of attachments){const attachment=Number(attachmentName);parameters[keys?(0,_webgl_utils_constants_to_keys__WEBPACK_IMPORTED_MODULE_5__.km)(this.gl,attachment):attachment]=this.getAttachmentParameters(attachment,keys)}return parameters}show(){return"undefined"!=typeof window&&window.open((0,_copy_and_blit_js__WEBPACK_IMPORTED_MODULE_6__.Km)(this),"luma-debug-texture"),this}log(){let logLevel=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,message=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(logLevel>_luma_gl_gltools__WEBPACK_IMPORTED_MODULE_0__.cM.level||"undefined"==typeof window)return this;message=message||"Framebuffer ".concat(this.id);const image=(0,_copy_and_blit_js__WEBPACK_IMPORTED_MODULE_6__.Km)(this,{targetMaxHeight:100});return _luma_gl_gltools__WEBPACK_IMPORTED_MODULE_0__.cM.image({logLevel:logLevel,message:message,image:image},message)(),this}bind(){let{target:target=36160}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.gl.bindFramebuffer(target,this.handle),this}unbind(){let{target:target=36160}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.gl.bindFramebuffer(target,null),this}_createDefaultAttachments(color,depth,stencil,width,height){let defaultAttachments=null;return color&&(defaultAttachments=defaultAttachments||{},defaultAttachments[36064]=new _texture_2d__WEBPACK_IMPORTED_MODULE_7__.Z(this.gl,{id:"".concat(this.id,"-color0"),pixels:null,format:6408,type:5121,width:width,height:height,mipmaps:!1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.ownResources.push(defaultAttachments[36064])),depth&&stencil?(defaultAttachments=defaultAttachments||{},defaultAttachments[33306]=new _renderbuffer__WEBPACK_IMPORTED_MODULE_3__.Z(this.gl,{id:"".concat(this.id,"-depth-stencil"),format:35056,width:width,height:111}),this.ownResources.push(defaultAttachments[33306])):depth?(defaultAttachments=defaultAttachments||{},defaultAttachments[36096]=new _renderbuffer__WEBPACK_IMPORTED_MODULE_3__.Z(this.gl,{id:"".concat(this.id,"-depth"),format:33189,width:width,height:height}),this.ownResources.push(defaultAttachments[36096])):stencil&&(0,_utils_assert__WEBPACK_IMPORTED_MODULE_2__.h)(!1),defaultAttachments}_unattach(attachment){const oldAttachment=this.attachments[attachment];oldAttachment&&(oldAttachment instanceof _renderbuffer__WEBPACK_IMPORTED_MODULE_3__.Z?this.gl.framebufferRenderbuffer(36160,attachment,36161,null):this.gl.framebufferTexture2D(36160,attachment,3553,null,0),delete this.attachments[attachment])}_attachRenderbuffer(_ref4){let{attachment:attachment=36064,renderbuffer:renderbuffer}=_ref4;const{gl:gl}=this;gl.framebufferRenderbuffer(36160,attachment,36161,renderbuffer.handle),this.attachments[attachment]=renderbuffer}_attachTexture(_ref5){let{attachment:attachment=36064,texture:texture,layer:layer,level:level}=_ref5;const{gl:gl}=this;switch(gl.bindTexture(texture.target,texture.handle),texture.target){case 35866:case 32879:(0,_luma_gl_gltools__WEBPACK_IMPORTED_MODULE_0__.KQ)(gl).framebufferTextureLayer(36160,attachment,texture.target,level,layer);break;case 34067:const face=function mapIndexToCubeMapFace(layer){return layer<34069?layer+34069:layer}(layer);gl.framebufferTexture2D(36160,attachment,face,texture.handle,level);break;case 3553:gl.framebufferTexture2D(36160,attachment,3553,texture.handle,level);break;default:(0,_utils_assert__WEBPACK_IMPORTED_MODULE_2__.h)(!1,"Illegal texture type")}gl.bindTexture(texture.target,null),this.attachments[attachment]=texture}_setReadBuffer(readBuffer){const gl2=(0,_luma_gl_gltools__WEBPACK_IMPORTED_MODULE_0__.vd)(this.gl);gl2?gl2.readBuffer(readBuffer):(0,_utils_assert__WEBPACK_IMPORTED_MODULE_2__.h)(36064===readBuffer||1029===readBuffer,"Multiple render targets not supported"),this.readBuffer=readBuffer}_setDrawBuffers(drawBuffers){const{gl:gl}=this,gl2=(0,_luma_gl_gltools__WEBPACK_IMPORTED_MODULE_0__.KQ)(gl);if(gl2)gl2.drawBuffers(drawBuffers);else{const ext=gl.getExtension("WEBGL_draw_buffers");ext?ext.drawBuffersWEBGL(drawBuffers):(0,_utils_assert__WEBPACK_IMPORTED_MODULE_2__.h)(1===drawBuffers.length&&(36064===drawBuffers[0]||1029===drawBuffers[0]),"Multiple render targets not supported")}this.drawBuffers=drawBuffers}_getAttachmentParameterFallback(pname){const caps=(0,_features__WEBPACK_IMPORTED_MODULE_8__.N$)(this.gl);switch(pname){case 36052:return caps.WEBGL2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return caps.WEBGL2?null:8;case 33297:return caps.WEBGL2?null:5125;case 33296:return caps.WEBGL2||caps.EXT_sRGB?null:9729;default:return null}}_createHandle(){return this.gl.createFramebuffer()}_deleteHandle(){this.gl.deleteFramebuffer(this.handle)}_bindHandle(handle){return this.gl.bindFramebuffer(36160,handle)}}Framebuffer.ATTACHMENT_PARAMETERS=[36049,36048,33296,33298,33299,33300,33301,33302,33303]},"./node_modules/@luma.gl/webgl/dist/esm/classes/program.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return Program}});var resource=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/classes/resource.js"),texture=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/classes/texture.js"),framebuffer=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/classes/framebuffer.js"),esm=__webpack_require__("./node_modules/@luma.gl/gltools/dist/esm/index.js"),renderbuffer=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/classes/renderbuffer.js"),assert=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/utils/assert.js");const UNIFORM_SETTERS={5126:getArraySetter.bind(null,"uniform1fv",toFloatArray,1,setVectorUniform),35664:getArraySetter.bind(null,"uniform2fv",toFloatArray,2,setVectorUniform),35665:getArraySetter.bind(null,"uniform3fv",toFloatArray,3,setVectorUniform),35666:getArraySetter.bind(null,"uniform4fv",toFloatArray,4,setVectorUniform),5124:getArraySetter.bind(null,"uniform1iv",toIntArray,1,setVectorUniform),35667:getArraySetter.bind(null,"uniform2iv",toIntArray,2,setVectorUniform),35668:getArraySetter.bind(null,"uniform3iv",toIntArray,3,setVectorUniform),35669:getArraySetter.bind(null,"uniform4iv",toIntArray,4,setVectorUniform),35670:getArraySetter.bind(null,"uniform1iv",toIntArray,1,setVectorUniform),35671:getArraySetter.bind(null,"uniform2iv",toIntArray,2,setVectorUniform),35672:getArraySetter.bind(null,"uniform3iv",toIntArray,3,setVectorUniform),35673:getArraySetter.bind(null,"uniform4iv",toIntArray,4,setVectorUniform),35674:getArraySetter.bind(null,"uniformMatrix2fv",toFloatArray,4,setMatrixUniform),35675:getArraySetter.bind(null,"uniformMatrix3fv",toFloatArray,9,setMatrixUniform),35676:getArraySetter.bind(null,"uniformMatrix4fv",toFloatArray,16,setMatrixUniform),35678:getSamplerSetter,35680:getSamplerSetter,5125:getArraySetter.bind(null,"uniform1uiv",toUIntArray,1,setVectorUniform),36294:getArraySetter.bind(null,"uniform2uiv",toUIntArray,2,setVectorUniform),36295:getArraySetter.bind(null,"uniform3uiv",toUIntArray,3,setVectorUniform),36296:getArraySetter.bind(null,"uniform4uiv",toUIntArray,4,setVectorUniform),35685:getArraySetter.bind(null,"uniformMatrix2x3fv",toFloatArray,6,setMatrixUniform),35686:getArraySetter.bind(null,"uniformMatrix2x4fv",toFloatArray,8,setMatrixUniform),35687:getArraySetter.bind(null,"uniformMatrix3x2fv",toFloatArray,6,setMatrixUniform),35688:getArraySetter.bind(null,"uniformMatrix3x4fv",toFloatArray,12,setMatrixUniform),35689:getArraySetter.bind(null,"uniformMatrix4x2fv",toFloatArray,8,setMatrixUniform),35690:getArraySetter.bind(null,"uniformMatrix4x3fv",toFloatArray,12,setMatrixUniform),35678:getSamplerSetter,35680:getSamplerSetter,35679:getSamplerSetter,35682:getSamplerSetter,36289:getSamplerSetter,36292:getSamplerSetter,36293:getSamplerSetter,36298:getSamplerSetter,36299:getSamplerSetter,36300:getSamplerSetter,36303:getSamplerSetter,36306:getSamplerSetter,36307:getSamplerSetter,36308:getSamplerSetter,36311:getSamplerSetter},FLOAT_ARRAY={},INT_ARRAY={},UINT_ARRAY={},array1=[0];function toTypedArray(value,uniformLength,Type,cache){1===uniformLength&&"boolean"==typeof value&&(value=value?1:0),Number.isFinite(value)&&(array1[0]=value,value=array1);const length=value.length;if(length%uniformLength&&esm.cM.warn("Uniform size should be multiples of ".concat(uniformLength),value)(),value instanceof Type)return value;let result=cache[length];result||(result=new Type(length),cache[length]=result);for(let i=0;i<length;i++)result[i]=value[i];return result}function toFloatArray(value,uniformLength){return toTypedArray(value,uniformLength,Float32Array,FLOAT_ARRAY)}function toIntArray(value,uniformLength){return toTypedArray(value,uniformLength,Int32Array,INT_ARRAY)}function toUIntArray(value,uniformLength){return toTypedArray(value,uniformLength,Uint32Array,UINT_ARRAY)}function getUniformSetter(gl,location,info){const setter=UNIFORM_SETTERS[info.type];if(!setter)throw new Error("Unknown GLSL uniform type ".concat(info.type));return setter().bind(null,gl,location)}function parseUniformName(name){if("]"!==name[name.length-1])return{name:name,length:1,isArray:!1};const matches=name.match(/([^[]*)(\[[0-9]+\])?/);if(!matches||matches.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(name));return{name:matches[1],length:matches[2]||1,isArray:Boolean(matches[2])}}function checkUniformValue(value){return Array.isArray(value)||ArrayBuffer.isView(value)?function checkUniformArray(value){if(0===value.length)return!1;const checkLength=Math.min(value.length,16);for(let i=0;i<checkLength;++i)if(!Number.isFinite(value[i]))return!1;return!0}(value):!!isFinite(value)||(!0===value||!1===value||(value instanceof texture.Z||(value instanceof renderbuffer.Z||value instanceof framebuffer.Z&&Boolean(value.texture))))}function copyUniform(uniforms,key,value){if(Array.isArray(value)||ArrayBuffer.isView(value))if(uniforms[key]){const dest=uniforms[key];for(let i=0,len=value.length;i<len;++i)dest[i]=value[i]}else uniforms[key]=value.slice();else uniforms[key]=value}function getSamplerSetter(){let cache=null;return(gl,location,value)=>{const update=cache!==value;return update&&(gl.uniform1i(location,value),cache=value),update}}function getArraySetter(functionName,toArray,size,uniformSetter){let cache=null,cacheLength=null;return(gl,location,value)=>{const arrayValue=toArray(value,size),length=arrayValue.length;let update=!1;if(null===cache)cache=new Float32Array(length),cacheLength=length,update=!0;else{(0,assert.h)(cacheLength===length,"Uniform length cannot change.");for(let i=0;i<length;++i)if(arrayValue[i]!==cache[i]){update=!0;break}}return update&&(uniformSetter(gl,functionName,location,arrayValue),cache.set(arrayValue)),update}}function setVectorUniform(gl,functionName,location,value){gl[functionName](location,value)}function setMatrixUniform(gl,functionName,location,value){gl[functionName](location,!1,value)}var shader=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/classes/shader.js"),classes_accessor=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/classes/accessor.js"),attribute_utils=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/webgl-utils/attribute-utils.js");class ProgramConfiguration{constructor(program){this.id=program.id,this.attributeInfos=[],this.attributeInfosByName={},this.attributeInfosByLocation=[],this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(program),this._readVaryingsFromProgram(program)}getAttributeInfo(locationOrName){const location=Number(locationOrName);return Number.isFinite(location)?this.attributeInfosByLocation[location]:this.attributeInfosByName[locationOrName]||null}getAttributeLocation(locationOrName){const attributeInfo=this.getAttributeInfo(locationOrName);return attributeInfo?attributeInfo.location:-1}getAttributeAccessor(locationOrName){const attributeInfo=this.getAttributeInfo(locationOrName);return attributeInfo?attributeInfo.accessor:null}getVaryingInfo(locationOrName){const location=Number(locationOrName);return Number.isFinite(location)?this.varyingInfos[location]:this.varyingInfosByName[locationOrName]||null}getVaryingIndex(locationOrName){const varying=this.getVaryingInfo();return varying?varying.location:-1}getVaryingAccessor(locationOrName){const varying=this.getVaryingInfo();return varying?varying.accessor:null}_readAttributesFromProgram(program){const{gl:gl}=program,count=gl.getProgramParameter(program.handle,35721);for(let index=0;index<count;index++){const{name:name,type:type,size:size}=gl.getActiveAttrib(program.handle,index),location=gl.getAttribLocation(program.handle,name);location>=0&&this._addAttribute(location,name,type,size)}this.attributeInfos.sort(((a,b)=>a.location-b.location))}_readVaryingsFromProgram(program){const{gl:gl}=program;if(!(0,esm.D0)(gl))return;const count=gl.getProgramParameter(program.handle,35971);for(let location=0;location<count;location++){const{name:name,type:type,size:size}=gl.getTransformFeedbackVarying(program.handle,location);this._addVarying(location,name,type,size)}this.varyingInfos.sort(((a,b)=>a.location-b.location))}_addAttribute(location,name,compositeType,size){const{type:type,components:components}=(0,attribute_utils.hJ)(compositeType),accessor={type:type,size:size*components};this._inferProperties(location,name,accessor);const attributeInfo={location:location,name:name,accessor:new classes_accessor.Z(accessor)};this.attributeInfos.push(attributeInfo),this.attributeInfosByLocation[location]=attributeInfo,this.attributeInfosByName[attributeInfo.name]=attributeInfo}_inferProperties(location,name,accessor){/instance/i.test(name)&&(accessor.divisor=1)}_addVarying(location,name,compositeType,size){const{type:type,components:components}=(0,attribute_utils.hJ)(compositeType),varying={location:location,name:name,accessor:new classes_accessor.Z({type:type,size:size*components})};this.varyingInfos.push(varying),this.varyingInfosByName[varying.name]=varying}}var constants_to_keys=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/webgl-utils/constants-to-keys.js"),utils=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/utils/utils.js");const GL_SEPARATE_ATTRIBS=35981,V6_DEPRECATED_METHODS=["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"];class Program extends resource.Z{get[Symbol.toStringTag](){return"Program"}constructor(gl){let props=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(gl,props),this.stubRemovedMethods("Program","v6.0",V6_DEPRECATED_METHODS),this._isCached=!1,this.initialize(props),Object.seal(this),this._setId(props.id)}initialize(){let props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{hash:hash,vs:vs,fs:fs,varyings:varyings,bufferMode:bufferMode=GL_SEPARATE_ATTRIBS}=props;return this.hash=hash||"",this.vs="string"==typeof vs?new shader.Qh(this.gl,{id:"".concat(props.id,"-vs"),source:vs}):vs,this.fs="string"==typeof fs?new shader.gs(this.gl,{id:"".concat(props.id,"-fs"),source:fs}):fs,(0,assert.h)(this.vs instanceof shader.Qh),(0,assert.h)(this.fs instanceof shader.gs),this.uniforms={},this._textureUniforms={},varyings&&varyings.length>0&&((0,esm.KQ)(this.gl),this.varyings=varyings,this.gl2.transformFeedbackVaryings(this.handle,varyings,bufferMode)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new ProgramConfiguration(this),this.setProps(props)}delete(){let options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._isCached?this:super.delete(options)}setProps(props){return"uniforms"in props&&this.setUniforms(props.uniforms),this}draw(_ref){let{logPriority:logPriority,drawMode:drawMode=4,vertexCount:vertexCount,offset:offset=0,start:start,end:end,isIndexed:isIndexed=!1,indexType:indexType=5123,instanceCount:instanceCount=0,isInstanced:isInstanced=instanceCount>0,vertexArray:vertexArray=null,transformFeedback:transformFeedback,framebuffer:framebuffer,parameters:parameters={},uniforms:uniforms,samplers:samplers}=_ref;if((uniforms||samplers)&&(esm.cM.deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)")(),this.setUniforms(uniforms||{})),esm.cM.priority>=logPriority){const fb=framebuffer?framebuffer.id:"default",message="mode=".concat((0,constants_to_keys.km)(this.gl,drawMode)," verts=").concat(vertexCount," ")+"instances=".concat(instanceCount," indexType=").concat((0,constants_to_keys.km)(this.gl,indexType)," ")+"isInstanced=".concat(isInstanced," isIndexed=").concat(isIndexed," ")+"Framebuffer=".concat(fb);esm.cM.log(logPriority,message)()}return(0,assert.h)(vertexArray),this.gl.useProgram(this.handle),!(!this._areTexturesRenderable()||0===vertexCount||isInstanced&&0===instanceCount)&&(vertexArray.bindForDraw(vertexCount,instanceCount,(()=>{if(void 0!==framebuffer&&(parameters=Object.assign({},parameters,{framebuffer:framebuffer})),transformFeedback){const primitiveMode=(0,attribute_utils.$Z)(drawMode);transformFeedback.begin(primitiveMode)}this._bindTextures(),(0,esm.s8)(this.gl,parameters,(()=>{isIndexed&&isInstanced?this.gl2.drawElementsInstanced(drawMode,vertexCount,indexType,offset,instanceCount):isIndexed&&(0,esm.D0)(this.gl)&&!isNaN(start)&&!isNaN(end)?this.gl2.drawRangeElements(drawMode,start,end,vertexCount,indexType,offset):isIndexed?this.gl.drawElements(drawMode,vertexCount,indexType,offset):isInstanced?this.gl2.drawArraysInstanced(drawMode,offset,vertexCount,instanceCount):this.gl.drawArrays(drawMode,offset,vertexCount)})),transformFeedback&&transformFeedback.end()})),!0)}setUniforms(){let uniforms=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};esm.cM.priority>=2&&function checkUniformValues(uniforms,source,uniformMap){for(const uniformName in uniforms){const value=uniforms[uniformName];if((!uniformMap||Boolean(uniformMap[uniformName]))&&!checkUniformValue(value))throw source=source?"".concat(source," "):"",console.error("".concat(source," Bad uniform ").concat(uniformName),value),new Error("".concat(source," Bad uniform ").concat(uniformName))}return!0}(uniforms,this.id,this._uniformSetters),this.gl.useProgram(this.handle);for(const uniformName in uniforms){const uniform=uniforms[uniformName],uniformSetter=this._uniformSetters[uniformName];if(uniformSetter){let value=uniform,textureUpdate=!1;if(value instanceof framebuffer.Z&&(value=value.texture),value instanceof texture.Z)if(textureUpdate=this.uniforms[uniformName]!==uniform,textureUpdate){void 0===uniformSetter.textureIndex&&(uniformSetter.textureIndex=this._textureIndexCounter++);const texture=value,{textureIndex:textureIndex}=uniformSetter;texture.bind(textureIndex),value=textureIndex,this._textureUniforms[uniformName]=texture}else value=uniformSetter.textureIndex;else this._textureUniforms[uniformName]&&delete this._textureUniforms[uniformName];(uniformSetter(value)||textureUpdate)&&copyUniform(this.uniforms,uniformName,uniform)}}return this}_areTexturesRenderable(){let texturesRenderable=!0;for(const uniformName in this._textureUniforms){const texture=this._textureUniforms[uniformName];texture.update(),texturesRenderable=texturesRenderable&&texture.loaded}return texturesRenderable}_bindTextures(){for(const uniformName in this._textureUniforms){const textureIndex=this._uniformSetters[uniformName].textureIndex;this._textureUniforms[uniformName].bind(textureIndex)}}_createHandle(){return this.gl.createProgram()}_deleteHandle(){this.gl.deleteProgram(this.handle)}_getOptionsFromHandle(handle){const shaderHandles=this.gl.getAttachedShaders(handle),opts={};for(const shaderHandle of shaderHandles){switch(this.gl.getShaderParameter(this.handle,35663)){case 35633:opts.vs=new shader.Qh({handle:shaderHandle});break;case 35632:opts.fs=new shader.gs({handle:shaderHandle})}}return opts}_getParameter(pname){return this.gl.getProgramParameter(this.handle,pname)}_setId(id){if(!id){const programName=this._getName();this.id=(0,utils.hQ)(programName)}}_getName(){let programName=this.vs.getName()||this.fs.getName();return programName=programName.replace(/shader/i,""),programName=programName?"".concat(programName,"-program"):"program",programName}_compileAndLink(){const{gl:gl}=this;if(gl.attachShader(this.handle,this.vs.handle),gl.attachShader(this.handle,this.fs.handle),esm.cM.time(4,"linkProgram for ".concat(this._getName()))(),gl.linkProgram(this.handle),esm.cM.timeEnd(4,"linkProgram for ".concat(this._getName()))(),gl.debug||esm.cM.level>0){if(!gl.getProgramParameter(this.handle,35714))throw new Error("Error linking: ".concat(gl.getProgramInfoLog(this.handle)));gl.validateProgram(this.handle);if(!gl.getProgramParameter(this.handle,35715))throw new Error("Error validating: ".concat(gl.getProgramInfoLog(this.handle)))}}_readUniformLocationsFromLinkedProgram(){const{gl:gl}=this;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(let i=0;i<this._uniformCount;i++){const info=this.gl.getActiveUniform(this.handle,i),{name:name}=parseUniformName(info.name);let location=gl.getUniformLocation(this.handle,name);if(this._uniformSetters[name]=getUniformSetter(gl,location,info),info.size>1)for(let l=0;l<info.size;l++)location=gl.getUniformLocation(this.handle,"".concat(name,"[").concat(l,"]")),this._uniformSetters["".concat(name,"[").concat(l,"]")]=getUniformSetter(gl,location,info)}this._textureIndexCounter=0}getActiveUniforms(uniformIndices,pname){return this.gl2.getActiveUniforms(this.handle,uniformIndices,pname)}getUniformBlockIndex(blockName){return this.gl2.getUniformBlockIndex(this.handle,blockName)}getActiveUniformBlockParameter(blockIndex,pname){return this.gl2.getActiveUniformBlockParameter(this.handle,blockIndex,pname)}uniformBlockBinding(blockIndex,blockBinding){this.gl2.uniformBlockBinding(this.handle,blockIndex,blockBinding)}}},"./node_modules/@luma.gl/webgl/dist/esm/classes/renderbuffer.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return Renderbuffer}});var resource=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/classes/resource.js");const EXT_FLOAT_WEBGL2="EXT_color_buffer_float";var renderbuffer_formats={33189:{bpp:2},33190:{gl2:!0,bpp:3},36012:{gl2:!0,bpp:4},36168:{bpp:1},34041:{bpp:4},35056:{gl2:!0,bpp:4},36013:{gl2:!0,bpp:5},32854:{bpp:2},36194:{bpp:2},32855:{bpp:2},33321:{gl2:!0,bpp:1},33330:{gl2:!0,bpp:1},33329:{gl2:!0,bpp:1},33332:{gl2:!0,bpp:2},33331:{gl2:!0,bpp:2},33334:{gl2:!0,bpp:4},33333:{gl2:!0,bpp:4},33323:{gl2:!0,bpp:2},33336:{gl2:!0,bpp:2},33335:{gl2:!0,bpp:2},33338:{gl2:!0,bpp:4},33337:{gl2:!0,bpp:4},33340:{gl2:!0,bpp:8},33339:{gl2:!0,bpp:8},32849:{gl2:!0,bpp:3},32856:{gl2:!0,bpp:4},32857:{gl2:!0,bpp:4},36220:{gl2:!0,bpp:4},36238:{gl2:!0,bpp:4},36975:{gl2:!0,bpp:4},36214:{gl2:!0,bpp:8},36232:{gl2:!0,bpp:8},36226:{gl2:!0,bpp:16},36208:{gl2:!0,bpp:16},33325:{gl2:EXT_FLOAT_WEBGL2,bpp:2},33327:{gl2:EXT_FLOAT_WEBGL2,bpp:4},34842:{gl2:EXT_FLOAT_WEBGL2,bpp:8},33326:{gl2:EXT_FLOAT_WEBGL2,bpp:4},33328:{gl2:EXT_FLOAT_WEBGL2,bpp:8},34836:{gl2:EXT_FLOAT_WEBGL2,bpp:16},35898:{gl2:EXT_FLOAT_WEBGL2,bpp:4}},esm=__webpack_require__("./node_modules/@luma.gl/gltools/dist/esm/index.js"),assert=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/utils/assert.js");class Renderbuffer extends resource.Z{get[Symbol.toStringTag](){return"Renderbuffer"}static isSupported(gl){let{format:format}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{format:null};return!format||function isFormatSupported(gl,format,formats){const info=formats[format];if(!info)return!1;const value=(0,esm.D0)(gl)&&info.gl2||info.gl1;return"string"==typeof value?gl.getExtension(value):value}(gl,format,renderbuffer_formats)}static getSamplesForFormat(gl,_ref){let{format:format}=_ref;return gl.getInternalformatParameter(36161,format,32937)}constructor(gl){let opts=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(gl,opts),this.initialize(opts),Object.seal(this)}initialize(_ref2){let{format:format,width:width=1,height:height=1,samples:samples=0}=_ref2;return(0,assert.h)(format,"Needs format"),this._trackDeallocatedMemory(),this.gl.bindRenderbuffer(36161,this.handle),0!==samples&&(0,esm.D0)(this.gl)?this.gl.renderbufferStorageMultisample(36161,samples,format,width,height):this.gl.renderbufferStorage(36161,format,width,height),this.format=format,this.width=width,this.height=height,this.samples=samples,this._trackAllocatedMemory(this.width*this.height*(this.samples||1)*renderbuffer_formats[this.format].bpp),this}resize(_ref3){let{width:width,height:height}=_ref3;return width!==this.width||height!==this.height?this.initialize({width:width,height:height,format:this.format,samples:this.samples}):this}_createHandle(){return this.gl.createRenderbuffer()}_deleteHandle(){this.gl.deleteRenderbuffer(this.handle),this._trackDeallocatedMemory()}_bindHandle(handle){this.gl.bindRenderbuffer(36161,handle)}_syncHandle(handle){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}_getParameter(pname){this.gl.bindRenderbuffer(36161,this.handle);return this.gl.getRenderbufferParameter(36161,pname)}}},"./node_modules/@luma.gl/webgl/dist/esm/classes/resource.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return Resource}});var _luma_gl_gltools__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@luma.gl/gltools/dist/esm/index.js"),_init__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/init.js"),_webgl_utils_constants_to_keys__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/webgl-utils/constants-to-keys.js"),_utils_assert__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/utils/assert.js"),_utils_utils__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/utils/utils.js"),_utils_stub_methods__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/utils/stub-methods.js");const ERR_RESOURCE_METHOD_UNDEFINED="Resource subclass must define virtual methods";class Resource{get[Symbol.toStringTag](){return"Resource"}constructor(gl){let opts=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,_luma_gl_gltools__WEBPACK_IMPORTED_MODULE_0__.JD)(gl);const{id:id,userData:userData={}}=opts;this.gl=gl,this.gl2=gl,this.id=id||(0,_utils_utils__WEBPACK_IMPORTED_MODULE_1__.hQ)(this[Symbol.toStringTag]),this.userData=userData,this._bound=!1,this._handle=opts.handle,void 0===this._handle&&(this._handle=this._createHandle()),this.byteLength=0,this._addStats()}toString(){return"".concat(this[Symbol.toStringTag]||this.constructor.name,"(").concat(this.id,")")}get handle(){return this._handle}delete(){let{deleteChildren:deleteChildren=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const children=this._handle&&this._deleteHandle(this._handle);return this._handle&&this._removeStats(),this._handle=null,children&&deleteChildren&&children.filter(Boolean).forEach((child=>child.delete())),this}bind(){let value,funcOrHandle=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.handle;return"function"!=typeof funcOrHandle?(this._bindHandle(funcOrHandle),this):(this._bound?value=funcOrHandle():(this._bindHandle(this.handle),this._bound=!0,value=funcOrHandle(),this._bound=!1,this._bindHandle(null)),value)}unbind(){this.bind(null)}getParameter(pname){let opts=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};pname=(0,_webgl_utils_constants_to_keys__WEBPACK_IMPORTED_MODULE_2__.sF)(this.gl,pname),(0,_utils_assert__WEBPACK_IMPORTED_MODULE_3__.h)(pname);const parameter=(this.constructor.PARAMETERS||{})[pname];if(parameter){const isWebgl2=(0,_luma_gl_gltools__WEBPACK_IMPORTED_MODULE_0__.D0)(this.gl);if(!((!("webgl2"in parameter)||isWebgl2)&&(!("extension"in parameter)||this.gl.getExtension(parameter.extension)))){const webgl1Default=parameter.webgl1,webgl2Default="webgl2"in parameter?parameter.webgl2:parameter.webgl1;return isWebgl2?webgl2Default:webgl1Default}}return this._getParameter(pname,opts)}getParameters(){let options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{parameters:parameters,keys:keys}=options,PARAMETERS=this.constructor.PARAMETERS||{},isWebgl2=(0,_luma_gl_gltools__WEBPACK_IMPORTED_MODULE_0__.D0)(this.gl),values={},parameterKeys=parameters||Object.keys(PARAMETERS);for(const pname of parameterKeys){const parameter=PARAMETERS[pname];if(parameter&&(!("webgl2"in parameter)||isWebgl2)&&(!("extension"in parameter)||this.gl.getExtension(parameter.extension))){const key=keys?(0,_webgl_utils_constants_to_keys__WEBPACK_IMPORTED_MODULE_2__.km)(this.gl,pname):pname;values[key]=this.getParameter(pname,options),keys&&"GLenum"===parameter.type&&(values[key]=(0,_webgl_utils_constants_to_keys__WEBPACK_IMPORTED_MODULE_2__.km)(this.gl,values[key]))}}return values}setParameter(pname,value){pname=(0,_webgl_utils_constants_to_keys__WEBPACK_IMPORTED_MODULE_2__.sF)(this.gl,pname),(0,_utils_assert__WEBPACK_IMPORTED_MODULE_3__.h)(pname);const parameter=(this.constructor.PARAMETERS||{})[pname];if(parameter){const isWebgl2=(0,_luma_gl_gltools__WEBPACK_IMPORTED_MODULE_0__.D0)(this.gl);if(!((!("webgl2"in parameter)||isWebgl2)&&(!("extension"in parameter)||this.gl.getExtension(parameter.extension))))throw new Error("Parameter not available on this platform");"GLenum"===parameter.type&&(value=(0,_webgl_utils_constants_to_keys__WEBPACK_IMPORTED_MODULE_2__.sF)(value))}return this._setParameter(pname,value),this}setParameters(parameters){for(const pname in parameters)this.setParameter(pname,parameters[pname]);return this}stubRemovedMethods(className,version,methodNames){return(0,_utils_stub_methods__WEBPACK_IMPORTED_MODULE_4__.F)(this,className,version,methodNames)}initialize(opts){}_createHandle(){throw new Error(ERR_RESOURCE_METHOD_UNDEFINED)}_deleteHandle(){throw new Error(ERR_RESOURCE_METHOD_UNDEFINED)}_bindHandle(handle){throw new Error(ERR_RESOURCE_METHOD_UNDEFINED)}_getOptsFromHandle(){throw new Error(ERR_RESOURCE_METHOD_UNDEFINED)}_getParameter(pname,opts){throw new Error(ERR_RESOURCE_METHOD_UNDEFINED)}_setParameter(pname,value){throw new Error(ERR_RESOURCE_METHOD_UNDEFINED)}_context(){return this.gl.luma=this.gl.luma||{},this.gl.luma}_addStats(){const name=this[Symbol.toStringTag],stats=_init__WEBPACK_IMPORTED_MODULE_5__.lR.get("Resource Counts");stats.get("Resources Created").incrementCount(),stats.get("".concat(name,"s Created")).incrementCount(),stats.get("".concat(name,"s Active")).incrementCount()}_removeStats(){const name=this[Symbol.toStringTag];_init__WEBPACK_IMPORTED_MODULE_5__.lR.get("Resource Counts").get("".concat(name,"s Active")).decrementCount()}_trackAllocatedMemory(bytes){let name=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this[Symbol.toStringTag];this._trackAllocatedMemoryForContext(bytes,name),this._trackAllocatedMemoryForContext(bytes,name,this.gl.canvas&&this.gl.canvas.id),this.byteLength=bytes}_trackAllocatedMemoryForContext(bytes){let name=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this[Symbol.toStringTag],id=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";const stats=_init__WEBPACK_IMPORTED_MODULE_5__.lR.get("Memory Usage".concat(id));stats.get("GPU Memory").addCount(bytes),stats.get("".concat(name," Memory")).addCount(bytes)}_trackDeallocatedMemory(){let name=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this[Symbol.toStringTag];this._trackDeallocatedMemoryForContext(name),this._trackDeallocatedMemoryForContext(name,this.gl.canvas&&this.gl.canvas.id),this.byteLength=0}_trackDeallocatedMemoryForContext(){let name=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this[Symbol.toStringTag],id=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const stats=_init__WEBPACK_IMPORTED_MODULE_5__.lR.get("Memory Usage".concat(id));stats.get("GPU Memory").subtractCount(this.byteLength),stats.get("".concat(name," Memory")).subtractCount(this.byteLength)}}},"./node_modules/@luma.gl/webgl/dist/esm/classes/shader.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{gs:function(){return FragmentShader},Qh:function(){return VertexShader}});var esm=__webpack_require__("./node_modules/@luma.gl/gltools/dist/esm/index.js");function getShaderName(shader){let defaultName=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unnamed";const match=shader.match(/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/);return match?match[1]:defaultName}const GL_FRAGMENT_SHADER=35632,GL_VERTEX_SHADER=35633;function parseGLSLCompilerError(errLog,src,shaderType,shaderName){const errorStrings=errLog.split(/\r?\n/),errors={},warnings={},name=shaderName||getShaderName(src)||"(unnamed)",shaderDescription="".concat(function getShaderTypeName(type){switch(type){case GL_FRAGMENT_SHADER:return"fragment";case GL_VERTEX_SHADER:return"vertex";default:return"unknown type"}}(shaderType)," shader ").concat(name);for(let i=0;i<errorStrings.length;i++){const errorString=errorStrings[i];if(errorString.length<=1)continue;const segments=errorString.split(":"),type=segments[0],line=parseInt(segments[2],10);if(isNaN(line))throw new Error("GLSL compilation error in ".concat(shaderDescription,": ").concat(errLog));"WARNING"!==type?errors[line]=errorString:warnings[line]=errorString}const lines=function addLineNumbers(string){let start=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,delim=arguments.length>2&&void 0!==arguments[2]?arguments[2]:": ";const lines=string.split(/\r?\n/),maxDigits=String(lines.length+start-1).length;return lines.map(((line,i)=>{const lineNumber=String(i+start),digits=lineNumber.length;return padLeft(lineNumber,maxDigits-digits)+delim+line}))}(src);return{shaderName:shaderDescription,errors:formatErrors(errors,lines),warnings:formatErrors(warnings,lines)}}function formatErrors(errors,lines){let message="";for(let i=0;i<lines.length;i++){const line=lines[i];if((errors[i+3]||errors[i+2]||errors[i+1])&&(message+="".concat(line,"\n"),errors[i+1])){const error=errors[i+1],segments=error.split(":",3),type=segments[0],column=parseInt(segments[1],10)||0,err=error.substring(segments.join(":").length+1).trim();message+=padLeft("^^^ ".concat(type,": ").concat(err,"\n\n"),column)}}return message}function padLeft(string,digits){let result="";for(let i=0;i<digits;++i)result+=" ";return"".concat(result).concat(string)}var assert=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/utils/assert.js"),utils=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/utils/utils.js"),resource=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/classes/resource.js");class Shader extends resource.Z{get[Symbol.toStringTag](){return"Shader"}static getTypeName(shaderType){switch(shaderType){case 35633:return"vertex-shader";case 35632:return"fragment-shader";default:return(0,assert.h)(!1),"unknown"}}constructor(gl,props){(0,esm.JD)(gl),(0,assert.h)("string"==typeof props.source,"Shader: GLSL source code must be a JavaScript string");super(gl,{id:getShaderName(props.source,null)||props.id||(0,utils.hQ)("unnamed ".concat(Shader.getTypeName(props.shaderType)))}),this.shaderType=props.shaderType,this.source=props.source,this.initialize(props)}initialize(_ref){let{source:source}=_ref;const shaderName=getShaderName(source,null);shaderName&&(this.id=(0,utils.hQ)(shaderName)),this._compile(source)}getParameter(pname){return this.gl.getShaderParameter(this.handle,pname)}toString(){return"".concat(Shader.getTypeName(this.shaderType),":").concat(this.id)}getName(){return getShaderName(this.source)||"unnamed-shader"}getSource(){return this.gl.getShaderSource(this.handle)}getTranslatedSource(){const extension=this.gl.getExtension("WEBGL_debug_shaders");return extension?extension.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL_debug_shaders not implemented"}_compile(){let source=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.source;source.startsWith("#version ")||(source="#version 100\n".concat(source)),this.source=source,this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle);if(!this.getParameter(35713)){const infoLog=this.gl.getShaderInfoLog(this.handle),{shaderName:shaderName,errors:errors,warnings:warnings}=parseGLSLCompilerError(infoLog,this.source,this.shaderType,this.id);throw esm.cM.error("GLSL compilation errors in ".concat(shaderName,"\n").concat(errors))(),esm.cM.warn("GLSL compilation warnings in ".concat(shaderName,"\n").concat(warnings))(),new Error("GLSL compilation errors in ".concat(shaderName))}}_deleteHandle(){this.gl.deleteShader(this.handle)}_getOptsFromHandle(){return{type:this.getParameter(35663),source:this.getSource()}}}class VertexShader extends Shader{get[Symbol.toStringTag](){return"VertexShader"}constructor(gl,props){"string"==typeof props&&(props={source:props}),super(gl,Object.assign({},props,{shaderType:35633}))}_createHandle(){return this.gl.createShader(35633)}}class FragmentShader extends Shader{get[Symbol.toStringTag](){return"FragmentShader"}constructor(gl,props){"string"==typeof props&&(props={source:props}),super(gl,Object.assign({},props,{shaderType:35632}))}_createHandle(){return this.gl.createShader(35632)}}},"./node_modules/@luma.gl/webgl/dist/esm/classes/texture-2d.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return Texture2D}});var esm=__webpack_require__("./node_modules/@luma.gl/gltools/dist/esm/index.js"),texture=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/classes/texture.js"),utils_assert=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/utils/assert.js");let pathPrefix="";class Texture2D extends texture.Z{get[Symbol.toStringTag](){return"Texture2D"}static isSupported(gl,opts){return texture.Z.isSupported(gl,opts)}constructor(gl){let props=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var url,opts;(0,esm.JD)(gl),(props instanceof Promise||"string"==typeof props)&&(props={data:props}),"string"==typeof props.data&&(props=Object.assign({},props,{data:(url=props.data,(0,utils_assert.h)("string"==typeof url),url=pathPrefix+url,new Promise(((resolve,reject)=>{try{const image=new Image;image.onload=()=>resolve(image),image.onerror=()=>reject(new Error("Could not load image ".concat(url,"."))),image.crossOrigin=opts&&opts.crossOrigin||"anonymous",image.src=url}catch(error){reject(error)}})))})),super(gl,Object.assign({},props,{target:3553})),this.initialize(props),Object.seal(this)}}},"./node_modules/@luma.gl/webgl/dist/esm/classes/texture-3d.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return Texture3D}});var _luma_gl_gltools__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@luma.gl/gltools/dist/esm/index.js"),_texture__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/classes/texture.js"),_texture_formats__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/classes/texture-formats.js"),_buffer__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/classes/buffer.js");class Texture3D extends _texture__WEBPACK_IMPORTED_MODULE_1__.Z{get[Symbol.toStringTag](){return"Texture3D"}static isSupported(gl){return(0,_luma_gl_gltools__WEBPACK_IMPORTED_MODULE_0__.D0)(gl)}constructor(gl){let props=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,_luma_gl_gltools__WEBPACK_IMPORTED_MODULE_0__.KQ)(gl),props=Object.assign({depth:1},props,{target:32879,unpackFlipY:!1}),super(gl,props),this.initialize(props),Object.seal(this)}setImageData(_ref){let{level:level=0,dataFormat:dataFormat=6408,width:width,height:height,depth:depth=1,border:border=0,format:format,type:type=5121,offset:offset=0,data:data,parameters:parameters={}}=_ref;if(this._trackDeallocatedMemory("Texture"),this.gl.bindTexture(this.target,this.handle),(0,_luma_gl_gltools__WEBPACK_IMPORTED_MODULE_0__.s8)(this.gl,parameters,(()=>{ArrayBuffer.isView(data)&&this.gl.texImage3D(this.target,level,dataFormat,width,height,depth,border,format,type,data),data instanceof _buffer__WEBPACK_IMPORTED_MODULE_2__.Z&&(this.gl.bindBuffer(35052,data.handle),this.gl.texImage3D(this.target,level,dataFormat,width,height,depth,border,format,type,offset))})),data&&data.byteLength)this._trackAllocatedMemory(data.byteLength,"Texture");else{const channels=_texture_formats__WEBPACK_IMPORTED_MODULE_3__.C[this.dataFormat]||4,channelSize=_texture_formats__WEBPACK_IMPORTED_MODULE_3__.pH[this.type]||1;this._trackAllocatedMemory(this.width*this.height*this.depth*channels*channelSize,"Texture")}return this.loaded=!0,this}}},"./node_modules/@luma.gl/webgl/dist/esm/classes/texture-cube.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return TextureCube}});var _luma_gl_gltools__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@luma.gl/gltools/dist/esm/index.js"),_texture__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/classes/texture.js");const FACES=[34069,34070,34071,34072,34073,34074];class TextureCube extends _texture__WEBPACK_IMPORTED_MODULE_1__.Z{get[Symbol.toStringTag](){return"TextureCube"}constructor(gl){let props=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,_luma_gl_gltools__WEBPACK_IMPORTED_MODULE_0__.JD)(gl),super(gl,Object.assign({},props,{target:34067})),this.initialize(props),Object.seal(this)}initialize(){let props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{mipmaps:mipmaps=!0,parameters:parameters={}}=props;return this.opts=props,this.setCubeMapImageData(props).then((()=>{this.loaded=!0,mipmaps&&this.generateMipmap(props),this.setParameters(parameters)})),this}subImage(_ref){let{face:face,data:data,x:x=0,y:y=0,mipmapLevel:mipmapLevel=0}=_ref;return this._subImage({target:face,data:data,x:x,y:y,mipmapLevel:mipmapLevel})}async setCubeMapImageData(_ref2){let{width:width,height:height,pixels:pixels,data:data,border:border=0,format:format=6408,type:type=5121}=_ref2;const{gl:gl}=this,imageDataMap=pixels||data,resolvedFaces=await Promise.all(FACES.map((face=>{const facePixels=imageDataMap[face];return Promise.all(Array.isArray(facePixels)?facePixels:[facePixels])})));this.bind(),FACES.forEach(((face,index)=>{resolvedFaces[index].length>1&&!1!==this.opts.mipmaps&&_luma_gl_gltools__WEBPACK_IMPORTED_MODULE_0__.cM.warn("".concat(this.id," has mipmap and multiple LODs."))(),resolvedFaces[index].forEach(((image,lodLevel)=>{width&&height?gl.texImage2D(face,lodLevel,format,width,height,border,format,type,image):gl.texImage2D(face,lodLevel,format,format,type,image)}))})),this.unbind()}setImageDataForFace(options){const{face:face,width:width,height:height,pixels:pixels,data:data,border:border=0,format:format=6408,type:type=5121}=options,{gl:gl}=this,imageData=pixels||data;return this.bind(),imageData instanceof Promise?imageData.then((resolvedImageData=>this.setImageDataForFace(Object.assign({},options,{face:face,data:resolvedImageData,pixels:resolvedImageData})))):this.width||this.height?gl.texImage2D(face,0,format,width,height,border,format,type,imageData):gl.texImage2D(face,0,format,format,type,imageData),this}}TextureCube.FACES=FACES},"./node_modules/@luma.gl/webgl/dist/esm/classes/texture-formats.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{C:function(){return DATA_FORMAT_CHANNELS},KR:function(){return isLinearFilteringSupported},ae:function(){return TEXTURE_FORMATS},br:function(){return isFormatSupported},pH:function(){return TYPE_SIZES}});var _luma_gl_gltools__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@luma.gl/gltools/dist/esm/index.js");const TEXTURE_FORMATS={6407:{dataFormat:6407,types:[5121,33635]},6408:{dataFormat:6408,types:[5121,32819,32820]},6406:{dataFormat:6406,types:[5121]},6409:{dataFormat:6409,types:[5121]},6410:{dataFormat:6410,types:[5121]},33326:{dataFormat:6403,types:[5126],gl2:!0},33328:{dataFormat:33319,types:[5126],gl2:!0},34837:{dataFormat:6407,types:[5126],gl2:!0},34836:{dataFormat:6408,types:[5126],gl2:!0}},DATA_FORMAT_CHANNELS={6403:1,36244:1,33319:2,33320:2,6407:3,36248:3,6408:4,36249:4,6402:1,34041:1,6406:1,6409:1,6410:2},TYPE_SIZES={5126:4,5125:4,5124:4,5123:2,5122:2,5131:2,5120:1,5121:1};function isFormatSupported(gl,format){const info=TEXTURE_FORMATS[format];if(!info)return!1;if(void 0===info.gl1&&void 0===info.gl2)return!0;const value=(0,_luma_gl_gltools__WEBPACK_IMPORTED_MODULE_0__.D0)(gl)&&info.gl2||info.gl1;return"string"==typeof value?gl.getExtension(value):value}function isLinearFilteringSupported(gl,format){const info=TEXTURE_FORMATS[format];switch(info&&info.types[0]){case 5126:return gl.getExtension("OES_texture_float_linear");case 5131:return gl.getExtension("OES_texture_half_float_linear");default:return!0}}},"./node_modules/@luma.gl/webgl/dist/esm/classes/texture.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return Texture}});var _luma_gl_gltools__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@luma.gl/gltools/dist/esm/index.js"),_resource__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/classes/resource.js"),_buffer__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/classes/buffer.js"),_texture_formats__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/classes/texture-formats.js"),_utils_assert__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/utils/assert.js"),_utils_utils__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/utils/utils.js");const NPOT_MIN_FILTERS=[9729,9728],WebGLBuffer=globalThis.WebGLBuffer||function WebGLBuffer(){};class Texture extends _resource__WEBPACK_IMPORTED_MODULE_1__.Z{get[Symbol.toStringTag](){return"Texture"}static isSupported(gl){let opts=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{format:format,linearFiltering:linearFiltering}=opts;let supported=!0;return format&&(supported=supported&&(0,_texture_formats__WEBPACK_IMPORTED_MODULE_2__.br)(gl,format),supported=supported&&(!linearFiltering||(0,_texture_formats__WEBPACK_IMPORTED_MODULE_2__.KR)(gl,format))),supported}constructor(gl,props){const{id:id=(0,_utils_utils__WEBPACK_IMPORTED_MODULE_3__.hQ)("texture"),handle:handle,target:target}=props;super(gl,{id:id,handle:handle}),this.target=target,this.textureUnit=void 0,this.loaded=!1,this.width=void 0,this.height=void 0,this.depth=void 0,this.format=void 0,this.type=void 0,this.dataFormat=void 0,this.border=void 0,this.textureUnit=void 0,this.mipmaps=void 0}toString(){return"Texture(".concat(this.id,",").concat(this.width,"x").concat(this.height,")")}initialize(){let props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},data=props.data;if(data instanceof Promise)return data.then((resolvedImageData=>this.initialize(Object.assign({},props,{pixels:resolvedImageData,data:resolvedImageData})))),this;const isVideo="undefined"!=typeof HTMLVideoElement&&data instanceof HTMLVideoElement;if(isVideo&&data.readyState<HTMLVideoElement.HAVE_METADATA)return this._video=null,data.addEventListener("loadeddata",(()=>this.initialize(props))),this;const{pixels:pixels=null,format:format=6408,border:border=0,recreate:recreate=!1,parameters:parameters={},pixelStore:pixelStore={},textureUnit:textureUnit}=props;data||(data=pixels);let{width:width,height:height,dataFormat:dataFormat,type:type,compressed:compressed=!1,mipmaps:mipmaps=!0}=props;const{depth:depth=0}=props;return({width:width,height:height,compressed:compressed,dataFormat:dataFormat,type:type}=this._deduceParameters({format:format,type:type,dataFormat:dataFormat,compressed:compressed,data:data,width:width,height:height})),this.width=width,this.height=height,this.depth=depth,this.format=format,this.type=type,this.dataFormat=dataFormat,this.border=border,this.textureUnit=textureUnit,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle)),mipmaps&&this._isNPOT()&&(_luma_gl_gltools__WEBPACK_IMPORTED_MODULE_0__.cM.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),mipmaps=!1,this._updateForNPOT(parameters)),this.mipmaps=mipmaps,this.setImageData({data:data,width:width,height:height,depth:depth,format:format,type:type,dataFormat:dataFormat,border:border,mipmaps:mipmaps,parameters:pixelStore,compressed:compressed}),mipmaps&&this.generateMipmap(),this.setParameters(parameters),recreate&&(this.data=data),isVideo&&(this._video={video:data,parameters:parameters,lastTime:data.readyState>=HTMLVideoElement.HAVE_CURRENT_DATA?data.currentTime:-1}),this}update(){if(this._video){const{video:video,parameters:parameters,lastTime:lastTime}=this._video;if(lastTime===video.currentTime||video.readyState<HTMLVideoElement.HAVE_CURRENT_DATA)return;this.setSubImageData({data:video,parameters:parameters}),this.mipmaps&&this.generateMipmap(),this._video.lastTime=video.currentTime}}resize(_ref){let{height:height,width:width,mipmaps:mipmaps=!1}=_ref;return width!==this.width||height!==this.height?this.initialize({width:width,height:height,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:mipmaps}):this}generateMipmap(){let params=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._isNPOT()?(_luma_gl_gltools__WEBPACK_IMPORTED_MODULE_0__.cM.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),this):(this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),(0,_luma_gl_gltools__WEBPACK_IMPORTED_MODULE_0__.s8)(this.gl,params,(()=>{this.gl.generateMipmap(this.target)})),this.gl.bindTexture(this.target,null),this)}setImageData(options){this._trackDeallocatedMemory("Texture");const{target:target=this.target,pixels:pixels=null,level:level=0,format:format=this.format,border:border=this.border,offset:offset=0,parameters:parameters={}}=options;let{data:data=null,type:type=this.type,width:width=this.width,height:height=this.height,dataFormat:dataFormat=this.dataFormat,compressed:compressed=!1}=options;data||(data=pixels),({type:type,dataFormat:dataFormat,compressed:compressed,width:width,height:height}=this._deduceParameters({format:format,type:type,dataFormat:dataFormat,compressed:compressed,data:data,width:width,height:height}));const{gl:gl}=this;gl.bindTexture(this.target,this.handle);let gl2,dataType=null;({data:data,dataType:dataType}=this._getDataType({data:data,compressed:compressed}));let compressedTextureSize=0;if((0,_luma_gl_gltools__WEBPACK_IMPORTED_MODULE_0__.s8)(this.gl,parameters,(()=>{switch(dataType){case"null":gl.texImage2D(target,level,format,width,height,border,dataFormat,type,data);break;case"typed-array":gl.texImage2D(target,level,format,width,height,border,dataFormat,type,data,offset);break;case"buffer":gl2=(0,_luma_gl_gltools__WEBPACK_IMPORTED_MODULE_0__.KQ)(gl),gl2.bindBuffer(35052,data.handle||data),gl2.texImage2D(target,level,format,width,height,border,dataFormat,type,offset),gl2.bindBuffer(35052,null);break;case"browser-object":(0,_luma_gl_gltools__WEBPACK_IMPORTED_MODULE_0__.D0)(gl)?gl.texImage2D(target,level,format,width,height,border,dataFormat,type,data):gl.texImage2D(target,level,format,dataFormat,type,data);break;case"compressed":for(const[levelIndex,levelData]of data.entries())gl.compressedTexImage2D(target,levelIndex,levelData.format,levelData.width,levelData.height,border,levelData.data),compressedTextureSize+=levelData.levelSize;break;default:(0,_utils_assert__WEBPACK_IMPORTED_MODULE_4__.h)(!1,"Unknown image data type")}})),"compressed"===dataType)this._trackAllocatedMemory(compressedTextureSize,"Texture");else if(data&&data.byteLength)this._trackAllocatedMemory(data.byteLength,"Texture");else{const channels=_texture_formats__WEBPACK_IMPORTED_MODULE_2__.C[this.dataFormat]||4,channelSize=_texture_formats__WEBPACK_IMPORTED_MODULE_2__.pH[this.type]||1;this._trackAllocatedMemory(this.width*this.height*channels*channelSize,"Texture")}return this.loaded=!0,this}setSubImageData(_ref2){let{target:target=this.target,pixels:pixels=null,data:data=null,x:x=0,y:y=0,width:width=this.width,height:height=this.height,level:level=0,format:format=this.format,type:type=this.type,dataFormat:dataFormat=this.dataFormat,compressed:compressed=!1,offset:offset=0,border:border=this.border,parameters:parameters={}}=_ref2;if(({type:type,dataFormat:dataFormat,compressed:compressed,width:width,height:height}=this._deduceParameters({format:format,type:type,dataFormat:dataFormat,compressed:compressed,data:data,width:width,height:height})),(0,_utils_assert__WEBPACK_IMPORTED_MODULE_4__.h)(0===this.depth,"texSubImage not supported for 3D textures"),data||(data=pixels),data&&data.data){const ndarray=data;data=ndarray.data,width=ndarray.shape[0],height=ndarray.shape[1]}data instanceof _buffer__WEBPACK_IMPORTED_MODULE_5__.Z&&(data=data.handle),this.gl.bindTexture(this.target,this.handle),(0,_luma_gl_gltools__WEBPACK_IMPORTED_MODULE_0__.s8)(this.gl,parameters,(()=>{if(compressed)this.gl.compressedTexSubImage2D(target,level,x,y,width,height,format,data);else if(null===data)this.gl.texSubImage2D(target,level,x,y,width,height,dataFormat,type,null);else if(ArrayBuffer.isView(data))this.gl.texSubImage2D(target,level,x,y,width,height,dataFormat,type,data,offset);else if(data instanceof WebGLBuffer){const gl2=(0,_luma_gl_gltools__WEBPACK_IMPORTED_MODULE_0__.KQ)(this.gl);gl2.bindBuffer(35052,data),gl2.texSubImage2D(target,level,x,y,width,height,dataFormat,type,offset),gl2.bindBuffer(35052,null)}else if((0,_luma_gl_gltools__WEBPACK_IMPORTED_MODULE_0__.D0)(this.gl)){(0,_luma_gl_gltools__WEBPACK_IMPORTED_MODULE_0__.KQ)(this.gl).texSubImage2D(target,level,x,y,width,height,dataFormat,type,data)}else this.gl.texSubImage2D(target,level,x,y,dataFormat,type,data)})),this.gl.bindTexture(this.target,null)}copyFramebuffer(){return _luma_gl_gltools__WEBPACK_IMPORTED_MODULE_0__.cM.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}getActiveUnit(){return this.gl.getParameter(34016)-33984}bind(){let textureUnit=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit;const{gl:gl}=this;return void 0!==textureUnit&&(this.textureUnit=textureUnit,gl.activeTexture(33984+textureUnit)),gl.bindTexture(this.target,this.handle),textureUnit}unbind(){let textureUnit=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit;const{gl:gl}=this;return void 0!==textureUnit&&(this.textureUnit=textureUnit,gl.activeTexture(33984+textureUnit)),gl.bindTexture(this.target,null),textureUnit}_getDataType(_ref3){let{data:data,compressed:compressed=!1}=_ref3;return compressed?{data:data,dataType:"compressed"}:null===data?{data:data,dataType:"null"}:ArrayBuffer.isView(data)?{data:data,dataType:"typed-array"}:data instanceof _buffer__WEBPACK_IMPORTED_MODULE_5__.Z?{data:data.handle,dataType:"buffer"}:data instanceof WebGLBuffer?{data:data,dataType:"buffer"}:{data:data,dataType:"browser-object"}}_deduceParameters(opts){const{format:format,data:data}=opts;let{width:width,height:height,dataFormat:dataFormat,type:type,compressed:compressed}=opts;const textureFormat=_texture_formats__WEBPACK_IMPORTED_MODULE_2__.ae[format];return dataFormat=dataFormat||textureFormat&&textureFormat.dataFormat,type=type||textureFormat&&textureFormat.types[0],compressed=compressed||textureFormat&&textureFormat.compressed,({width:width,height:height}=this._deduceImageSize(data,width,height)),{dataFormat:dataFormat,type:type,compressed:compressed,width:width,height:height,format:format,data:data}}_deduceImageSize(data,width,height){let size;return size="undefined"!=typeof ImageData&&data instanceof ImageData?{width:data.width,height:data.height}:"undefined"!=typeof HTMLImageElement&&data instanceof HTMLImageElement?{width:data.naturalWidth,height:data.naturalHeight}:"undefined"!=typeof HTMLCanvasElement&&data instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&data instanceof ImageBitmap?{width:data.width,height:data.height}:"undefined"!=typeof HTMLVideoElement&&data instanceof HTMLVideoElement?{width:data.videoWidth,height:data.videoHeight}:data?{width:width,height:height}:{width:width>=0?width:1,height:height>=0?height:1},(0,_utils_assert__WEBPACK_IMPORTED_MODULE_4__.h)(size,"Could not deduced texture size"),(0,_utils_assert__WEBPACK_IMPORTED_MODULE_4__.h)(void 0===width||size.width===width,"Deduced texture width does not match supplied width"),(0,_utils_assert__WEBPACK_IMPORTED_MODULE_4__.h)(void 0===height||size.height===height,"Deduced texture height does not match supplied height"),size}_createHandle(){return this.gl.createTexture()}_deleteHandle(){this.gl.deleteTexture(this.handle),this._trackDeallocatedMemory("Texture")}_getParameter(pname){switch(pname){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);const value=this.gl.getTexParameter(this.target,pname);return this.gl.bindTexture(this.target,null),value}}_setParameter(pname,param){switch(this.gl.bindTexture(this.target,this.handle),param=this._getNPOTParam(pname,param),pname){case 33082:case 33083:this.gl.texParameterf(this.handle,pname,param);break;case 4096:case 4097:(0,_utils_assert__WEBPACK_IMPORTED_MODULE_4__.h)(!1);break;default:this.gl.texParameteri(this.target,pname,param)}return this.gl.bindTexture(this.target,null),this}_isNPOT(){return!(0,_luma_gl_gltools__WEBPACK_IMPORTED_MODULE_0__.D0)(this.gl)&&(!(!this.width||!this.height)&&(!(0,_utils_utils__WEBPACK_IMPORTED_MODULE_3__.wt)(this.width)||!(0,_utils_utils__WEBPACK_IMPORTED_MODULE_3__.wt)(this.height)))}_updateForNPOT(parameters){void 0===parameters[this.gl.TEXTURE_MIN_FILTER]&&(parameters[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),void 0===parameters[this.gl.TEXTURE_WRAP_S]&&(parameters[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),void 0===parameters[this.gl.TEXTURE_WRAP_T]&&(parameters[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}_getNPOTParam(pname,param){if(this._isNPOT())switch(pname){case 10241:-1===NPOT_MIN_FILTERS.indexOf(param)&&(param=9729);break;case 10242:case 10243:33071!==param&&(param=33071)}return param}}},"./node_modules/@luma.gl/webgl/dist/esm/classes/transform-feedback.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return TransformFeedback}});var _luma_gl_gltools__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@luma.gl/gltools/dist/esm/index.js"),_resource__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/classes/resource.js"),_buffer__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/classes/buffer.js"),_utils_utils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/utils/utils.js");class TransformFeedback extends _resource__WEBPACK_IMPORTED_MODULE_1__.Z{get[Symbol.toStringTag](){return"TransformFeedback"}static isSupported(gl){return(0,_luma_gl_gltools__WEBPACK_IMPORTED_MODULE_0__.D0)(gl)}constructor(gl){let props=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,_luma_gl_gltools__WEBPACK_IMPORTED_MODULE_0__.KQ)(gl),super(gl,props),this.initialize(props),this.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal(this)}initialize(){let props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,(0,_utils_utils__WEBPACK_IMPORTED_MODULE_2__.nK)(this.buffers)||this.bind((()=>this._unbindBuffers())),this.setProps(props),this}setProps(props){"program"in props&&(this.configuration=props.program&&props.program.configuration),"configuration"in props&&(this.configuration=props.configuration),"bindOnUse"in props&&(props=props.bindOnUse),"buffers"in props&&this.setBuffers(props.buffers)}setBuffers(){let buffers=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.bind((()=>{for(const bufferName in buffers)this.setBuffer(bufferName,buffers[bufferName])})),this}setBuffer(locationOrName,bufferOrParams){const location=this._getVaryingIndex(locationOrName),{buffer:buffer,byteSize:byteSize,byteOffset:byteOffset}=this._getBufferParams(bufferOrParams);return location<0?(this.unused[locationOrName]=buffer,_luma_gl_gltools__WEBPACK_IMPORTED_MODULE_0__.cM.warn("".concat(this.id," unused varying buffer ").concat(locationOrName))(),this):(this.buffers[location]=bufferOrParams,this.bindOnUse||this._bindBuffer(location,buffer,byteOffset,byteSize),this)}begin(){let primitiveMode=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(primitiveMode),this}end(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}_getBufferParams(bufferOrParams){let byteOffset,byteSize,buffer;return bufferOrParams instanceof _buffer__WEBPACK_IMPORTED_MODULE_3__.Z==!1?(buffer=bufferOrParams.buffer,byteSize=bufferOrParams.byteSize,byteOffset=bufferOrParams.byteOffset):buffer=bufferOrParams,void 0===byteOffset&&void 0===byteSize||(byteOffset=byteOffset||0,byteSize=byteSize||buffer.byteLength-byteOffset),{buffer:buffer,byteOffset:byteOffset,byteSize:byteSize}}_getVaryingInfo(locationOrName){return this.configuration&&this.configuration.getVaryingInfo(locationOrName)}_getVaryingIndex(locationOrName){if(this.configuration)return this.configuration.getVaryingInfo(locationOrName).location;const location=Number(locationOrName);return Number.isFinite(location)?location:-1}_bindBuffers(){if(this.bindOnUse)for(const bufferIndex in this.buffers){const{buffer:buffer,byteSize:byteSize,byteOffset:byteOffset}=this._getBufferParams(this.buffers[bufferIndex]);this._bindBuffer(bufferIndex,buffer,byteOffset,byteSize)}}_unbindBuffers(){if(this.bindOnUse)for(const bufferIndex in this.buffers)this._bindBuffer(bufferIndex,null)}_bindBuffer(index,buffer){let byteOffset=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,byteSize=arguments.length>3?arguments[3]:void 0;const handle=buffer&&buffer.handle;return handle&&void 0!==byteSize?this.gl.bindBufferRange(35982,index,handle,byteOffset,byteSize):this.gl.bindBufferBase(35982,index,handle),this}_createHandle(){return this.gl.createTransformFeedback()}_deleteHandle(){this.gl.deleteTransformFeedback(this.handle)}_bindHandle(handle){this.gl.bindTransformFeedback(36386,this.handle)}}},"./node_modules/@luma.gl/webgl/dist/esm/features/features.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{N$:function(){return getFeatures},U6:function(){return hasFeature},ag:function(){return hasFeatures}});var _webgl_features_table__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/features/webgl-features-table.js"),_luma_gl_gltools__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@luma.gl/gltools/dist/esm/index.js"),_utils_assert__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/utils/assert.js");const LOG_UNSUPPORTED_FEATURE=2;function hasFeature(gl,feature){return hasFeatures(gl,feature)}function hasFeatures(gl,features){return(features=Array.isArray(features)?features:[features]).every((feature=>isFeatureSupported(gl,feature)))}function getFeatures(gl){gl.luma=gl.luma||{},gl.luma.caps=gl.luma.caps||{};for(const cap in _webgl_features_table__WEBPACK_IMPORTED_MODULE_1__.Z)void 0===gl.luma.caps[cap]&&(gl.luma.caps[cap]=isFeatureSupported(gl,cap));return gl.luma.caps}function isFeatureSupported(gl,cap){return gl.luma=gl.luma||{},gl.luma.caps=gl.luma.caps||{},void 0===gl.luma.caps[cap]&&(gl.luma.caps[cap]=function queryFeature(gl,cap){const feature=_webgl_features_table__WEBPACK_IMPORTED_MODULE_1__.Z[cap];let isSupported;(0,_utils_assert__WEBPACK_IMPORTED_MODULE_2__.h)(feature,cap);const featureDefinition=(0,_luma_gl_gltools__WEBPACK_IMPORTED_MODULE_0__.D0)(gl)&&feature[1]||feature[0];if("function"==typeof featureDefinition)isSupported=featureDefinition(gl);else if(Array.isArray(featureDefinition)){isSupported=!0;for(const extension of featureDefinition)isSupported=isSupported&&Boolean(gl.getExtension(extension))}else"string"==typeof featureDefinition?isSupported=Boolean(gl.getExtension(featureDefinition)):"boolean"==typeof featureDefinition?isSupported=featureDefinition:(0,_utils_assert__WEBPACK_IMPORTED_MODULE_2__.h)(!1);return isSupported}(gl,cap)),gl.luma.caps[cap]||_luma_gl_gltools__WEBPACK_IMPORTED_MODULE_0__.cM.log(LOG_UNSUPPORTED_FEATURE,"Feature: ".concat(cap," not supported"))(),gl.luma.caps[cap]}},"./node_modules/@luma.gl/webgl/dist/esm/features/webgl-features-table.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{h:function(){return FEATURES}});var _classes_framebuffer__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/classes/framebuffer.js"),_classes_texture_2d__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/classes/texture-2d.js");const FEATURES={WEBGL2:"WEBGL2",VERTEX_ARRAY_OBJECT:"VERTEX_ARRAY_OBJECT",TIMER_QUERY:"TIMER_QUERY",INSTANCED_RENDERING:"INSTANCED_RENDERING",MULTIPLE_RENDER_TARGETS:"MULTIPLE_RENDER_TARGETS",ELEMENT_INDEX_UINT32:"ELEMENT_INDEX_UINT32",BLEND_EQUATION_MINMAX:"BLEND_EQUATION_MINMAX",FLOAT_BLEND:"FLOAT_BLEND",COLOR_ENCODING_SRGB:"COLOR_ENCODING_SRGB",TEXTURE_DEPTH:"TEXTURE_DEPTH",TEXTURE_FLOAT:"TEXTURE_FLOAT",TEXTURE_HALF_FLOAT:"TEXTURE_HALF_FLOAT",TEXTURE_FILTER_LINEAR_FLOAT:"TEXTURE_FILTER_LINEAR_FLOAT",TEXTURE_FILTER_LINEAR_HALF_FLOAT:"TEXTURE_FILTER_LINEAR_HALF_FLOAT",TEXTURE_FILTER_ANISOTROPIC:"TEXTURE_FILTER_ANISOTROPIC",COLOR_ATTACHMENT_RGBA32F:"COLOR_ATTACHMENT_RGBA32F",COLOR_ATTACHMENT_FLOAT:"COLOR_ATTACHMENT_FLOAT",COLOR_ATTACHMENT_HALF_FLOAT:"COLOR_ATTACHMENT_HALF_FLOAT",GLSL_FRAG_DATA:"GLSL_FRAG_DATA",GLSL_FRAG_DEPTH:"GLSL_FRAG_DEPTH",GLSL_DERIVATIVES:"GLSL_DERIVATIVES",GLSL_TEXTURE_LOD:"GLSL_TEXTURE_LOD"};__webpack_exports__.Z={[FEATURES.WEBGL2]:[!1,!0],[FEATURES.VERTEX_ARRAY_OBJECT]:["OES_vertex_array_object",!0],[FEATURES.TIMER_QUERY]:["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"],[FEATURES.INSTANCED_RENDERING]:["ANGLE_instanced_arrays",!0],[FEATURES.MULTIPLE_RENDER_TARGETS]:["WEBGL_draw_buffers",!0],[FEATURES.ELEMENT_INDEX_UINT32]:["OES_element_index_uint",!0],[FEATURES.BLEND_EQUATION_MINMAX]:["EXT_blend_minmax",!0],[FEATURES.FLOAT_BLEND]:["EXT_float_blend"],[FEATURES.COLOR_ENCODING_SRGB]:["EXT_sRGB",!0],[FEATURES.TEXTURE_DEPTH]:["WEBGL_depth_texture",!0],[FEATURES.TEXTURE_FLOAT]:["OES_texture_float",!0],[FEATURES.TEXTURE_HALF_FLOAT]:["OES_texture_half_float",!0],[FEATURES.TEXTURE_FILTER_LINEAR_FLOAT]:["OES_texture_float_linear"],[FEATURES.TEXTURE_FILTER_LINEAR_HALF_FLOAT]:["OES_texture_half_float_linear"],[FEATURES.TEXTURE_FILTER_ANISOTROPIC]:["EXT_texture_filter_anisotropic"],[FEATURES.COLOR_ATTACHMENT_RGBA32F]:[function checkFloat32ColorAttachment(gl){const testTexture=new _classes_texture_2d__WEBPACK_IMPORTED_MODULE_0__.Z(gl,{format:6408,type:5126,dataFormat:6408}),testFb=new _classes_framebuffer__WEBPACK_IMPORTED_MODULE_1__.Z(gl,{id:"test-framebuffer",check:!1,attachments:{36064:testTexture}}),status=testFb.getStatus();return testTexture.delete(),testFb.delete(),36053===status},"EXT_color_buffer_float"],[FEATURES.COLOR_ATTACHMENT_FLOAT]:[!1,"EXT_color_buffer_float"],[FEATURES.COLOR_ATTACHMENT_HALF_FLOAT]:["EXT_color_buffer_half_float"],[FEATURES.GLSL_FRAG_DATA]:["WEBGL_draw_buffers",!0],[FEATURES.GLSL_FRAG_DEPTH]:["EXT_frag_depth",!0],[FEATURES.GLSL_DERIVATIVES]:["OES_standard_derivatives",!0],[FEATURES.GLSL_TEXTURE_LOD]:["EXT_shader_texture_lod",!0]}},"./node_modules/@luma.gl/webgl/dist/esm/init.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{lR:function(){return lumaStats}});var _luma_gl_gltools__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@luma.gl/gltools/dist/esm/index.js"),_probe_gl_stats__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@probe.gl/stats/dist/esm/index.js"),_probe_gl_env__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@probe.gl/env/dist/esm/lib/is-browser.js");const lumaStats=new class StatsManager{constructor(){this.stats=new Map}get(name){return this.stats.has(name)||this.stats.set(name,new _probe_gl_stats__WEBPACK_IMPORTED_MODULE_1__.jk({id:name})),this.stats.get(name)}};if(globalThis.luma&&"8.5.21"!==globalThis.luma.VERSION)throw new Error("luma.gl - multiple VERSIONs detected: ".concat(globalThis.luma.VERSION," vs ").concat("8.5.21"));globalThis.luma||((0,_probe_gl_env__WEBPACK_IMPORTED_MODULE_2__.Z)()&&_luma_gl_gltools__WEBPACK_IMPORTED_MODULE_0__.cM.log(1,"luma.gl ".concat("8.5.21"," - ").concat("set luma.log.level=1 (or higher) to trace rendering"))(),globalThis.luma=globalThis.luma||{VERSION:"8.5.21",version:"8.5.21",log:_luma_gl_gltools__WEBPACK_IMPORTED_MODULE_0__.cM,stats:lumaStats,globals:{modules:{},nodeIO:{}}});globalThis.luma},"./node_modules/@luma.gl/webgl/dist/esm/utils/assert.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";function assert(condition,message){if(!condition)throw new Error(message||"luma.gl: assertion failed.")}__webpack_require__.d(__webpack_exports__,{h:function(){return assert}})},"./node_modules/@luma.gl/webgl/dist/esm/utils/check-props.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{k:function(){return checkProps}});var _luma_gl_gltools__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@luma.gl/gltools/dist/esm/index.js");function checkProps(className,props,propChecks){const{removedProps:removedProps={},deprecatedProps:deprecatedProps={},replacedProps:replacedProps={}}=propChecks;for(const propName in removedProps)if(propName in props){const replacement=removedProps[propName]?"".concat(className,".").concat(removedProps[propName]):"N/A";_luma_gl_gltools__WEBPACK_IMPORTED_MODULE_0__.cM.removed("".concat(className,".").concat(propName),replacement)()}for(const propName in deprecatedProps)if(propName in props){const replacementProp=deprecatedProps[propName];_luma_gl_gltools__WEBPACK_IMPORTED_MODULE_0__.cM.deprecated("".concat(className,".").concat(propName),"".concat(className,".").concat(replacementProp))()}let newProps=null;for(const propName in replacedProps)if(propName in props){const replacementProp=replacedProps[propName];_luma_gl_gltools__WEBPACK_IMPORTED_MODULE_0__.cM.deprecated("".concat(className,".").concat(propName),"".concat(className,".").concat(replacementProp))(),newProps=newProps||Object.assign({},props),newProps[replacementProp]=props[propName],delete newProps[propName]}return newProps||props}},"./node_modules/@luma.gl/webgl/dist/esm/utils/stub-methods.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{F:function(){return stubRemovedMethods}});var _luma_gl_gltools__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@luma.gl/gltools/dist/esm/index.js");function stubRemovedMethods(instance,className,version,methodNames){const upgradeMessage="See luma.gl ".concat(version," Upgrade Guide at https://luma.gl/docs/upgrade-guide"),prototype=Object.getPrototypeOf(instance);methodNames.forEach((methodName=>{prototype.methodName||(prototype[methodName]=()=>{throw _luma_gl_gltools__WEBPACK_IMPORTED_MODULE_0__.cM.removed("Calling removed method ".concat(className,".").concat(methodName,": "),upgradeMessage)(),new Error(methodName)})}))}},"./node_modules/@luma.gl/webgl/dist/esm/utils/utils.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{hQ:function(){return uid},nK:function(){return isObjectEmpty},wt:function(){return isPowerOfTwo}});var _assert__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/utils/assert.js");const uidCounters={};function uid(){let id=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"id";uidCounters[id]=uidCounters[id]||1;const count=uidCounters[id]++;return"".concat(id,"-").concat(count)}function isPowerOfTwo(n){return(0,_assert__WEBPACK_IMPORTED_MODULE_0__.h)("number"==typeof n,"Input must be a number"),n&&0==(n&n-1)}function isObjectEmpty(obj){let isEmpty=!0;for(const key in obj){isEmpty=!1;break}return isEmpty}},"./node_modules/@luma.gl/webgl/dist/esm/webgl-utils/attribute-utils.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{$Z:function(){return getPrimitiveDrawMode},hJ:function(){return decomposeCompositeGLType},jG:function(){return getCompositeGLType}});var _utils_assert__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/utils/assert.js");const GL_BYTE=5120,GL_UNSIGNED_BYTE=5121,GL_SHORT=5122,GL_UNSIGNED_SHORT=5123,GL_POINTS=0,GL_LINES=1,GL_LINE_LOOP=2,GL_LINE_STRIP=3,GL_TRIANGLES=4,GL_TRIANGLE_STRIP=5,GL_TRIANGLE_FAN=6,GL_FLOAT=5126,COMPOSITE_GL_TYPES={[GL_FLOAT]:[GL_FLOAT,1,"float"],35664:[GL_FLOAT,2,"vec2"],35665:[GL_FLOAT,3,"vec3"],35666:[GL_FLOAT,4,"vec4"],5124:[5124,1,"int"],35667:[5124,2,"ivec2"],35668:[5124,3,"ivec3"],35669:[5124,4,"ivec4"],5125:[5125,1,"uint"],36294:[5125,2,"uvec2"],36295:[5125,3,"uvec3"],36296:[5125,4,"uvec4"],35670:[GL_FLOAT,1,"bool"],35671:[GL_FLOAT,2,"bvec2"],35672:[GL_FLOAT,3,"bvec3"],35673:[GL_FLOAT,4,"bvec4"],35674:[GL_FLOAT,8,"mat2"],35685:[GL_FLOAT,8,"mat2x3"],35686:[GL_FLOAT,8,"mat2x4"],35675:[GL_FLOAT,12,"mat3"],35687:[GL_FLOAT,12,"mat3x2"],35688:[GL_FLOAT,12,"mat3x4"],35676:[GL_FLOAT,16,"mat4"],35689:[GL_FLOAT,16,"mat4x2"],35690:[GL_FLOAT,16,"mat4x3"]};function getPrimitiveDrawMode(drawMode){switch(drawMode){case GL_POINTS:return GL_POINTS;case GL_LINES:case GL_LINE_STRIP:case GL_LINE_LOOP:return GL_LINES;case GL_TRIANGLES:case GL_TRIANGLE_STRIP:case GL_TRIANGLE_FAN:return GL_TRIANGLES;default:return(0,_utils_assert__WEBPACK_IMPORTED_MODULE_0__.h)(!1),0}}function decomposeCompositeGLType(compositeGLType){const typeAndSize=COMPOSITE_GL_TYPES[compositeGLType];if(!typeAndSize)return null;const[type,components]=typeAndSize;return{type:type,components:components}}function getCompositeGLType(type,components){switch(type){case GL_BYTE:case GL_UNSIGNED_BYTE:case GL_SHORT:case GL_UNSIGNED_SHORT:type=GL_FLOAT}for(const glType in COMPOSITE_GL_TYPES){const[compType,compComponents,name]=COMPOSITE_GL_TYPES[glType];if(compType===type&&compComponents===components)return{glType:glType,name:name}}return null}},"./node_modules/@luma.gl/webgl/dist/esm/webgl-utils/constants-to-keys.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{km:function(){return getKey},sF:function(){return getKeyValue}});var _utils_assert__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/utils/assert.js");function getKeyValue(gl,name){if("string"!=typeof name)return name;const number=Number(name);if(!isNaN(number))return number;const value=gl[name=name.replace(/^.*\./,"")];return(0,_utils_assert__WEBPACK_IMPORTED_MODULE_0__.h)(void 0!==value,"Accessing undefined constant GL.".concat(name)),value}function getKey(gl,value){value=Number(value);for(const key in gl)if(gl[key]===value)return"GL.".concat(key);return String(value)}},"./node_modules/@luma.gl/webgl/dist/esm/webgl-utils/texture-utils.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Y:function(){return toFramebuffer},h:function(){return cloneTextureFrom}});var _classes_texture_2d__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/classes/texture-2d.js"),_classes_texture_cube__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/classes/texture-cube.js"),_classes_texture_3d__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/classes/texture-3d.js"),_classes_framebuffer__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/classes/framebuffer.js"),_utils_assert__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@luma.gl/webgl/dist/esm/utils/assert.js");function cloneTextureFrom(refTexture,overrides){(0,_utils_assert__WEBPACK_IMPORTED_MODULE_0__.h)(refTexture instanceof _classes_texture_2d__WEBPACK_IMPORTED_MODULE_1__.Z||refTexture instanceof _classes_texture_cube__WEBPACK_IMPORTED_MODULE_2__.Z||refTexture instanceof _classes_texture_3d__WEBPACK_IMPORTED_MODULE_3__.Z);const TextureType=refTexture.constructor,{gl:gl,width:width,height:height,format:format,type:type,dataFormat:dataFormat,border:border,mipmaps:mipmaps}=refTexture;return new TextureType(gl,Object.assign({width:width,height:height,format:format,type:type,dataFormat:dataFormat,border:border,mipmaps:mipmaps},overrides))}function toFramebuffer(texture,opts){const{gl:gl,width:width,height:height,id:id}=texture;return new _classes_framebuffer__WEBPACK_IMPORTED_MODULE_4__.Z(gl,Object.assign({},opts,{id:"framebuffer-for-".concat(id),width:width,height:height,attachments:{36064:texture}}))}},"./node_modules/@luma.gl/webgl/dist/esm/webgl-utils/typed-array-utils.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{KS:function(){return scalePixels},O:function(){return getGLTypeFromTypedArray},c$:function(){return flipRows},vN:function(){return getTypedArrayFromGLType}});const ERR_TYPE_DEDUCTION="Failed to deduce GL constant from typed array";function getGLTypeFromTypedArray(arrayOrType){switch(ArrayBuffer.isView(arrayOrType)?arrayOrType.constructor:arrayOrType){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error(ERR_TYPE_DEDUCTION)}}function getTypedArrayFromGLType(glType){let{clamped:clamped=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(glType){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return clamped?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function flipRows(_ref){let{data:data,width:width,height:height,bytesPerPixel:bytesPerPixel=4,temp:temp}=_ref;const bytesPerRow=width*bytesPerPixel;temp=temp||new Uint8Array(bytesPerRow);for(let y=0;y<height/2;++y){const topOffset=y*bytesPerRow,bottomOffset=(height-y-1)*bytesPerRow;temp.set(data.subarray(topOffset,topOffset+bytesPerRow)),data.copyWithin(topOffset,bottomOffset,bottomOffset+bytesPerRow),data.set(temp,bottomOffset)}}function scalePixels(_ref2){let{data:data,width:width,height:height}=_ref2;const newWidth=Math.round(width/2),newHeight=Math.round(height/2),newData=new Uint8Array(newWidth*newHeight*4);for(let y=0;y<newHeight;y++)for(let x=0;x<newWidth;x++)for(let c=0;c<4;c++)newData[4*(y*newWidth+x)+c]=data[4*(2*y*width+2*x)+c];return{data:newData,width:newWidth,height:newHeight}}},"./node_modules/@math.gl/core/dist/esm/classes/base/math-array.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return MathArray}});var _lib_common__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@math.gl/core/dist/esm/lib/common.js");class MathArray extends(function _extendableBuiltin(cls){function ExtendableBuiltin(){var instance=Reflect.construct(cls,Array.from(arguments));return Object.setPrototypeOf(instance,Object.getPrototypeOf(this)),instance}return ExtendableBuiltin.prototype=Object.create(cls.prototype,{constructor:{value:cls,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(ExtendableBuiltin,cls):ExtendableBuiltin.__proto__=cls,ExtendableBuiltin}(Array)){clone(){return(new this.constructor).copy(this)}fromArray(array,offset=0){for(let i=0;i<this.ELEMENTS;++i)this[i]=array[i+offset];return this.check()}toArray(targetArray=[],offset=0){for(let i=0;i<this.ELEMENTS;++i)targetArray[offset+i]=this[i];return targetArray}from(arrayOrObject){return Array.isArray(arrayOrObject)?this.copy(arrayOrObject):this.fromObject(arrayOrObject)}to(arrayOrObject){return arrayOrObject===this?this:(0,_lib_common__WEBPACK_IMPORTED_MODULE_0__.kJ)(arrayOrObject)?this.toArray(arrayOrObject):this.toObject(arrayOrObject)}toTarget(target){return target?this.to(target):this}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(_lib_common__WEBPACK_IMPORTED_MODULE_0__.vc)}formatString(opts){let string="";for(let i=0;i<this.ELEMENTS;++i)string+=(i>0?", ":"")+(0,_lib_common__WEBPACK_IMPORTED_MODULE_0__.Bw)(this[i],opts);return"".concat(opts.printTypes?this.constructor.name:"","[").concat(string,"]")}equals(array){if(!array||this.length!==array.length)return!1;for(let i=0;i<this.ELEMENTS;++i)if(!(0,_lib_common__WEBPACK_IMPORTED_MODULE_0__.fS)(this[i],array[i]))return!1;return!0}exactEquals(array){if(!array||this.length!==array.length)return!1;for(let i=0;i<this.ELEMENTS;++i)if(this[i]!==array[i])return!1;return!0}negate(){for(let i=0;i<this.ELEMENTS;++i)this[i]=-this[i];return this.check()}lerp(a,b,t){if(void 0===t)return this.lerp(this,a,b);for(let i=0;i<this.ELEMENTS;++i){const ai=a[i];this[i]=ai+t*(b[i]-ai)}return this.check()}min(vector){for(let i=0;i<this.ELEMENTS;++i)this[i]=Math.min(vector[i],this[i]);return this.check()}max(vector){for(let i=0;i<this.ELEMENTS;++i)this[i]=Math.max(vector[i],this[i]);return this.check()}clamp(minVector,maxVector){for(let i=0;i<this.ELEMENTS;++i)this[i]=Math.min(Math.max(this[i],minVector[i]),maxVector[i]);return this.check()}add(...vectors){for(const vector of vectors)for(let i=0;i<this.ELEMENTS;++i)this[i]+=vector[i];return this.check()}subtract(...vectors){for(const vector of vectors)for(let i=0;i<this.ELEMENTS;++i)this[i]-=vector[i];return this.check()}scale(scale){if("number"==typeof scale)for(let i=0;i<this.ELEMENTS;++i)this[i]*=scale;else for(let i=0;i<this.ELEMENTS&&i<scale.length;++i)this[i]*=scale[i];return this.check()}multiplyByScalar(scalar){for(let i=0;i<this.ELEMENTS;++i)this[i]*=scalar;return this.check()}check(){if(_lib_common__WEBPACK_IMPORTED_MODULE_0__.vc.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}validate(){let valid=this.length===this.ELEMENTS;for(let i=0;i<this.ELEMENTS;++i)valid=valid&&Number.isFinite(this[i]);return valid}sub(a){return this.subtract(a)}setScalar(a){for(let i=0;i<this.ELEMENTS;++i)this[i]=a;return this.check()}addScalar(a){for(let i=0;i<this.ELEMENTS;++i)this[i]+=a;return this.check()}subScalar(a){return this.addScalar(-a)}multiplyScalar(scalar){for(let i=0;i<this.ELEMENTS;++i)this[i]*=scalar;return this.check()}divideScalar(a){return this.multiplyByScalar(1/a)}clampScalar(min,max){for(let i=0;i<this.ELEMENTS;++i)this[i]=Math.min(Math.max(this[i],min),max);return this.check()}get elements(){return this}}},"./node_modules/@math.gl/core/dist/esm/classes/base/matrix.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return Matrix}});var _math_array__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@math.gl/core/dist/esm/classes/base/math-array.js"),_lib_validators__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@math.gl/core/dist/esm/lib/validators.js"),_lib_common__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@math.gl/core/dist/esm/lib/common.js");class Matrix extends _math_array__WEBPACK_IMPORTED_MODULE_0__.Z{toString(){let string="[";if(_lib_common__WEBPACK_IMPORTED_MODULE_1__.vc.printRowMajor){string+="row-major:";for(let row=0;row<this.RANK;++row)for(let col=0;col<this.RANK;++col)string+=" ".concat(this[col*this.RANK+row])}else{string+="column-major:";for(let i=0;i<this.ELEMENTS;++i)string+=" ".concat(this[i])}return string+="]",string}getElementIndex(row,col){return col*this.RANK+row}getElement(row,col){return this[col*this.RANK+row]}setElement(row,col,value){return this[col*this.RANK+row]=(0,_lib_validators__WEBPACK_IMPORTED_MODULE_2__.u5)(value),this}getColumn(columnIndex,result=new Array(this.RANK).fill(-0)){const firstIndex=columnIndex*this.RANK;for(let i=0;i<this.RANK;++i)result[i]=this[firstIndex+i];return result}setColumn(columnIndex,columnVector){const firstIndex=columnIndex*this.RANK;for(let i=0;i<this.RANK;++i)this[firstIndex+i]=columnVector[i];return this}}},"./node_modules/@math.gl/core/dist/esm/classes/base/vector.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return Vector}});var _math_array__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@math.gl/core/dist/esm/classes/base/math-array.js"),_lib_validators__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@math.gl/core/dist/esm/lib/validators.js"),_lib_assert__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@math.gl/core/dist/esm/lib/assert.js");class Vector extends _math_array__WEBPACK_IMPORTED_MODULE_0__.Z{get x(){return this[0]}set x(value){this[0]=(0,_lib_validators__WEBPACK_IMPORTED_MODULE_1__.u5)(value)}get y(){return this[1]}set y(value){this[1]=(0,_lib_validators__WEBPACK_IMPORTED_MODULE_1__.u5)(value)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let length=0;for(let i=0;i<this.ELEMENTS;++i)length+=this[i]*this[i];return length}magnitudeSquared(){return this.lengthSquared()}distance(mathArray){return Math.sqrt(this.distanceSquared(mathArray))}distanceSquared(mathArray){let length=0;for(let i=0;i<this.ELEMENTS;++i){const dist=this[i]-mathArray[i];length+=dist*dist}return(0,_lib_validators__WEBPACK_IMPORTED_MODULE_1__.u5)(length)}dot(mathArray){let product=0;for(let i=0;i<this.ELEMENTS;++i)product+=this[i]*mathArray[i];return(0,_lib_validators__WEBPACK_IMPORTED_MODULE_1__.u5)(product)}normalize(){const length=this.magnitude();if(0!==length)for(let i=0;i<this.ELEMENTS;++i)this[i]/=length;return this.check()}multiply(...vectors){for(const vector of vectors)for(let i=0;i<this.ELEMENTS;++i)this[i]*=vector[i];return this.check()}divide(...vectors){for(const vector of vectors)for(let i=0;i<this.ELEMENTS;++i)this[i]/=vector[i];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(vector){return this.distance(vector)}distanceToSquared(vector){return this.distanceSquared(vector)}getComponent(i){return(0,_lib_assert__WEBPACK_IMPORTED_MODULE_2__.Z)(i>=0&&i<this.ELEMENTS,"index is out of range"),(0,_lib_validators__WEBPACK_IMPORTED_MODULE_1__.u5)(this[i])}setComponent(i,value){return(0,_lib_assert__WEBPACK_IMPORTED_MODULE_2__.Z)(i>=0&&i<this.ELEMENTS,"index is out of range"),this[i]=value,this.check()}addVectors(a,b){return this.copy(a).add(b)}subVectors(a,b){return this.copy(a).subtract(b)}multiplyVectors(a,b){return this.copy(a).multiply(b)}addScaledVector(a,b){return this.add(new this.constructor(a).multiplyScalar(b))}}},"./node_modules/@math.gl/core/dist/esm/classes/matrix4.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return Matrix4}});var INDICES,_base_matrix__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@math.gl/core/dist/esm/classes/base/matrix.js"),_lib_validators__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@math.gl/core/dist/esm/lib/validators.js"),_lib_gl_matrix_extras__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@math.gl/core/dist/esm/lib/gl-matrix-extras.js"),gl_matrix_mat4__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/gl-matrix/esm/mat4.js"),gl_matrix_vec2__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/gl-matrix/esm/vec2.js"),gl_matrix_vec3__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/gl-matrix/esm/vec3.js"),gl_matrix_vec4__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/gl-matrix/esm/vec4.js");!function(INDICES){INDICES[INDICES.COL0ROW0=0]="COL0ROW0",INDICES[INDICES.COL0ROW1=1]="COL0ROW1",INDICES[INDICES.COL0ROW2=2]="COL0ROW2",INDICES[INDICES.COL0ROW3=3]="COL0ROW3",INDICES[INDICES.COL1ROW0=4]="COL1ROW0",INDICES[INDICES.COL1ROW1=5]="COL1ROW1",INDICES[INDICES.COL1ROW2=6]="COL1ROW2",INDICES[INDICES.COL1ROW3=7]="COL1ROW3",INDICES[INDICES.COL2ROW0=8]="COL2ROW0",INDICES[INDICES.COL2ROW1=9]="COL2ROW1",INDICES[INDICES.COL2ROW2=10]="COL2ROW2",INDICES[INDICES.COL2ROW3=11]="COL2ROW3",INDICES[INDICES.COL3ROW0=12]="COL3ROW0",INDICES[INDICES.COL3ROW1=13]="COL3ROW1",INDICES[INDICES.COL3ROW2=14]="COL3ROW2",INDICES[INDICES.COL3ROW3=15]="COL3ROW3"}(INDICES||(INDICES={}));const DEFAULT_FOVY=45*Math.PI/180,DEFAULT_ASPECT=1,DEFAULT_NEAR=.1,DEFAULT_FAR=500,IDENTITY_MATRIX=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);class Matrix4 extends _base_matrix__WEBPACK_IMPORTED_MODULE_0__.Z{static get IDENTITY(){return function getIdentityMatrix(){IDENTITY||(IDENTITY=new Matrix4,Object.freeze(IDENTITY));return IDENTITY}()}static get ZERO(){return function getZeroMatrix(){ZERO||(ZERO=new Matrix4([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Object.freeze(ZERO));return ZERO}()}get ELEMENTS(){return 16}get RANK(){return 4}get INDICES(){return INDICES}constructor(array){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(array)?this.copy(array):this.identity()}copy(array){return this[0]=array[0],this[1]=array[1],this[2]=array[2],this[3]=array[3],this[4]=array[4],this[5]=array[5],this[6]=array[6],this[7]=array[7],this[8]=array[8],this[9]=array[9],this[10]=array[10],this[11]=array[11],this[12]=array[12],this[13]=array[13],this[14]=array[14],this[15]=array[15],this.check()}set(m00,m10,m20,m30,m01,m11,m21,m31,m02,m12,m22,m32,m03,m13,m23,m33){return this[0]=m00,this[1]=m10,this[2]=m20,this[3]=m30,this[4]=m01,this[5]=m11,this[6]=m21,this[7]=m31,this[8]=m02,this[9]=m12,this[10]=m22,this[11]=m32,this[12]=m03,this[13]=m13,this[14]=m23,this[15]=m33,this.check()}setRowMajor(m00,m01,m02,m03,m10,m11,m12,m13,m20,m21,m22,m23,m30,m31,m32,m33){return this[0]=m00,this[1]=m10,this[2]=m20,this[3]=m30,this[4]=m01,this[5]=m11,this[6]=m21,this[7]=m31,this[8]=m02,this[9]=m12,this[10]=m22,this[11]=m32,this[12]=m03,this[13]=m13,this[14]=m23,this[15]=m33,this.check()}toRowMajor(result){return result[0]=this[0],result[1]=this[4],result[2]=this[8],result[3]=this[12],result[4]=this[1],result[5]=this[5],result[6]=this[9],result[7]=this[13],result[8]=this[2],result[9]=this[6],result[10]=this[10],result[11]=this[14],result[12]=this[3],result[13]=this[7],result[14]=this[11],result[15]=this[15],result}identity(){return this.copy(IDENTITY_MATRIX)}fromObject(object){return this.check()}fromQuaternion(quaternion){return gl_matrix_mat4__WEBPACK_IMPORTED_MODULE_1__.en(this,quaternion),this.check()}frustum(view){const{left:left,right:right,bottom:bottom,top:top,near:near=DEFAULT_NEAR,far:far=DEFAULT_FAR}=view;return far===1/0?function computeInfinitePerspectiveOffCenter(result,left,right,bottom,top,near){const column0Row0=2*near/(right-left),column1Row1=2*near/(top-bottom),column2Row0=(right+left)/(right-left),column2Row1=(top+bottom)/(top-bottom),column2Row2=-1,column2Row3=-1,column3Row2=-2*near;return result[0]=column0Row0,result[1]=0,result[2]=0,result[3]=0,result[4]=0,result[5]=column1Row1,result[6]=0,result[7]=0,result[8]=column2Row0,result[9]=column2Row1,result[10]=column2Row2,result[11]=column2Row3,result[12]=0,result[13]=0,result[14]=column3Row2,result[15]=0,result}(this,left,right,bottom,top,near):gl_matrix_mat4__WEBPACK_IMPORTED_MODULE_1__.oy(this,left,right,bottom,top,near,far),this.check()}lookAt(view){const{eye:eye,center:center=[0,0,0],up:up=[0,1,0]}=view;return gl_matrix_mat4__WEBPACK_IMPORTED_MODULE_1__.zB(this,eye,center,up),this.check()}ortho(view){const{left:left,right:right,bottom:bottom,top:top,near:near=DEFAULT_NEAR,far:far=DEFAULT_FAR}=view;return gl_matrix_mat4__WEBPACK_IMPORTED_MODULE_1__.M5(this,left,right,bottom,top,near,far),this.check()}orthographic(view){const{fovy:fovy=DEFAULT_FOVY,aspect:aspect=DEFAULT_ASPECT,focalDistance:focalDistance=1,near:near=DEFAULT_NEAR,far:far=DEFAULT_FAR}=view;checkRadians(fovy);const halfY=fovy/2,top=focalDistance*Math.tan(halfY),right=top*aspect;return this.ortho({left:-right,right:right,bottom:-top,top:top,near:near,far:far})}perspective(view){const{fovy:fovy=45*Math.PI/180,aspect:aspect=1,near:near=.1,far:far=500}=view;return checkRadians(fovy),gl_matrix_mat4__WEBPACK_IMPORTED_MODULE_1__.G3(this,fovy,aspect,near,far),this.check()}determinant(){return gl_matrix_mat4__WEBPACK_IMPORTED_MODULE_1__.GH(this)}getScale(result=[-0,-0,-0]){return result[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),result[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),result[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),result}getTranslation(result=[-0,-0,-0]){return result[0]=this[12],result[1]=this[13],result[2]=this[14],result}getRotation(result,scaleResult){result=result||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],scaleResult=scaleResult||[-0,-0,-0];const scale=this.getScale(scaleResult),inverseScale0=1/scale[0],inverseScale1=1/scale[1],inverseScale2=1/scale[2];return result[0]=this[0]*inverseScale0,result[1]=this[1]*inverseScale1,result[2]=this[2]*inverseScale2,result[3]=0,result[4]=this[4]*inverseScale0,result[5]=this[5]*inverseScale1,result[6]=this[6]*inverseScale2,result[7]=0,result[8]=this[8]*inverseScale0,result[9]=this[9]*inverseScale1,result[10]=this[10]*inverseScale2,result[11]=0,result[12]=0,result[13]=0,result[14]=0,result[15]=1,result}getRotationMatrix3(result,scaleResult){result=result||[-0,-0,-0,-0,-0,-0,-0,-0,-0],scaleResult=scaleResult||[-0,-0,-0];const scale=this.getScale(scaleResult),inverseScale0=1/scale[0],inverseScale1=1/scale[1],inverseScale2=1/scale[2];return result[0]=this[0]*inverseScale0,result[1]=this[1]*inverseScale1,result[2]=this[2]*inverseScale2,result[3]=this[4]*inverseScale0,result[4]=this[5]*inverseScale1,result[5]=this[6]*inverseScale2,result[6]=this[8]*inverseScale0,result[7]=this[9]*inverseScale1,result[8]=this[10]*inverseScale2,result}transpose(){return gl_matrix_mat4__WEBPACK_IMPORTED_MODULE_1__.p4(this,this),this.check()}invert(){return gl_matrix_mat4__WEBPACK_IMPORTED_MODULE_1__.U_(this,this),this.check()}multiplyLeft(a){return gl_matrix_mat4__WEBPACK_IMPORTED_MODULE_1__.Jp(this,a,this),this.check()}multiplyRight(a){return gl_matrix_mat4__WEBPACK_IMPORTED_MODULE_1__.Jp(this,this,a),this.check()}rotateX(radians){return gl_matrix_mat4__WEBPACK_IMPORTED_MODULE_1__.lM(this,this,radians),this.check()}rotateY(radians){return gl_matrix_mat4__WEBPACK_IMPORTED_MODULE_1__.uD(this,this,radians),this.check()}rotateZ(radians){return gl_matrix_mat4__WEBPACK_IMPORTED_MODULE_1__.jI(this,this,radians),this.check()}rotateXYZ(angleXYZ){return this.rotateX(angleXYZ[0]).rotateY(angleXYZ[1]).rotateZ(angleXYZ[2])}rotateAxis(radians,axis){return gl_matrix_mat4__WEBPACK_IMPORTED_MODULE_1__.U1(this,this,radians,axis),this.check()}scale(factor){return gl_matrix_mat4__WEBPACK_IMPORTED_MODULE_1__.bA(this,this,Array.isArray(factor)?factor:[factor,factor,factor]),this.check()}translate(vector){return gl_matrix_mat4__WEBPACK_IMPORTED_MODULE_1__.Iu(this,this,vector),this.check()}transform(vector,result){return 4===vector.length?(result=gl_matrix_vec4__WEBPACK_IMPORTED_MODULE_2__.fF(result||[-0,-0,-0,-0],vector,this),(0,_lib_validators__WEBPACK_IMPORTED_MODULE_3__.IL)(result,4),result):this.transformAsPoint(vector,result)}transformAsPoint(vector,result){const{length:length}=vector;let out;switch(length){case 2:out=gl_matrix_vec2__WEBPACK_IMPORTED_MODULE_4__.fF(result||[-0,-0],vector,this);break;case 3:out=gl_matrix_vec3__WEBPACK_IMPORTED_MODULE_5__.fF(result||[-0,-0,-0],vector,this);break;default:throw new Error("Illegal vector")}return(0,_lib_validators__WEBPACK_IMPORTED_MODULE_3__.IL)(out,vector.length),out}transformAsVector(vector,result){let out;switch(vector.length){case 2:out=(0,_lib_gl_matrix_extras__WEBPACK_IMPORTED_MODULE_6__.pb)(result||[-0,-0],vector,this);break;case 3:out=(0,_lib_gl_matrix_extras__WEBPACK_IMPORTED_MODULE_6__.pL)(result||[-0,-0,-0],vector,this);break;default:throw new Error("Illegal vector")}return(0,_lib_validators__WEBPACK_IMPORTED_MODULE_3__.IL)(out,vector.length),out}transformPoint(vector,result){return this.transformAsPoint(vector,result)}transformVector(vector,result){return this.transformAsPoint(vector,result)}transformDirection(vector,result){return this.transformAsVector(vector,result)}makeRotationX(radians){return this.identity().rotateX(radians)}makeTranslation(x,y,z){return this.identity().translate([x,y,z])}}let ZERO,IDENTITY;function checkRadians(possiblyDegrees){if(possiblyDegrees>2*Math.PI)throw Error("expected radians")}},"./node_modules/@math.gl/core/dist/esm/classes/vector3.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return Vector3}});var _base_vector__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@math.gl/core/dist/esm/classes/base/vector.js"),_lib_common__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@math.gl/core/dist/esm/lib/common.js"),_lib_validators__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@math.gl/core/dist/esm/lib/validators.js"),gl_matrix_vec3__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/gl-matrix/esm/vec3.js"),_lib_gl_matrix_extras__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@math.gl/core/dist/esm/lib/gl-matrix-extras.js");const ORIGIN=[0,0,0];let ZERO;class Vector3 extends _base_vector__WEBPACK_IMPORTED_MODULE_0__.Z{static get ZERO(){return ZERO||(ZERO=new Vector3(0,0,0),Object.freeze(ZERO)),ZERO}constructor(x=0,y=0,z=0){super(-0,-0,-0),1===arguments.length&&(0,_lib_common__WEBPACK_IMPORTED_MODULE_1__.kJ)(x)?this.copy(x):(_lib_common__WEBPACK_IMPORTED_MODULE_1__.vc.debug&&((0,_lib_validators__WEBPACK_IMPORTED_MODULE_2__.u5)(x),(0,_lib_validators__WEBPACK_IMPORTED_MODULE_2__.u5)(y),(0,_lib_validators__WEBPACK_IMPORTED_MODULE_2__.u5)(z)),this[0]=x,this[1]=y,this[2]=z)}set(x,y,z){return this[0]=x,this[1]=y,this[2]=z,this.check()}copy(array){return this[0]=array[0],this[1]=array[1],this[2]=array[2],this.check()}fromObject(object){return _lib_common__WEBPACK_IMPORTED_MODULE_1__.vc.debug&&((0,_lib_validators__WEBPACK_IMPORTED_MODULE_2__.u5)(object.x),(0,_lib_validators__WEBPACK_IMPORTED_MODULE_2__.u5)(object.y),(0,_lib_validators__WEBPACK_IMPORTED_MODULE_2__.u5)(object.z)),this[0]=object.x,this[1]=object.y,this[2]=object.z,this.check()}toObject(object){return object.x=this[0],object.y=this[1],object.z=this[2],object}get ELEMENTS(){return 3}get z(){return this[2]}set z(value){this[2]=(0,_lib_validators__WEBPACK_IMPORTED_MODULE_2__.u5)(value)}angle(vector){return gl_matrix_vec3__WEBPACK_IMPORTED_MODULE_3__.EU(this,vector)}cross(vector){return gl_matrix_vec3__WEBPACK_IMPORTED_MODULE_3__.kC(this,this,vector),this.check()}rotateX({radians:radians,origin:origin=ORIGIN}){return gl_matrix_vec3__WEBPACK_IMPORTED_MODULE_3__.lM(this,this,origin,radians),this.check()}rotateY({radians:radians,origin:origin=ORIGIN}){return gl_matrix_vec3__WEBPACK_IMPORTED_MODULE_3__.uD(this,this,origin,radians),this.check()}rotateZ({radians:radians,origin:origin=ORIGIN}){return gl_matrix_vec3__WEBPACK_IMPORTED_MODULE_3__.jI(this,this,origin,radians),this.check()}transform(matrix4){return this.transformAsPoint(matrix4)}transformAsPoint(matrix4){return gl_matrix_vec3__WEBPACK_IMPORTED_MODULE_3__.fF(this,this,matrix4),this.check()}transformAsVector(matrix4){return(0,_lib_gl_matrix_extras__WEBPACK_IMPORTED_MODULE_4__.pL)(this,this,matrix4),this.check()}transformByMatrix3(matrix3){return gl_matrix_vec3__WEBPACK_IMPORTED_MODULE_3__.kK(this,this,matrix3),this.check()}transformByMatrix2(matrix2){return(0,_lib_gl_matrix_extras__WEBPACK_IMPORTED_MODULE_4__.eQ)(this,this,matrix2),this.check()}transformByQuaternion(quaternion){return gl_matrix_vec3__WEBPACK_IMPORTED_MODULE_3__.VC(this,this,quaternion),this.check()}}},"./node_modules/@math.gl/core/dist/esm/lib/assert.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";function assert(condition,message){if(!condition)throw new Error("math.gl assertion ".concat(message))}__webpack_require__.d(__webpack_exports__,{Z:function(){return assert}})},"./node_modules/@math.gl/core/dist/esm/lib/common.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{BJ:function(){return withEpsilon},Bw:function(){return formatValue},I6:function(){return exactEquals},Kh:function(){return acos},O$:function(){return sin},OR:function(){return tan},RW:function(){return degrees},Ux:function(){return toDegrees},Yr:function(){return toRadians},ZR:function(){return asin},d9:function(){return clone},fS:function(){return equals},jQ:function(){return configure},kJ:function(){return isArray},mC:function(){return cos},t7:function(){return lerp},uR:function(){return radians},uZ:function(){return clamp},vc:function(){return config},z4:function(){return atan}});var _assert__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@math.gl/core/dist/esm/lib/assert.js");const RADIANS_TO_DEGREES=1/Math.PI*180,DEGREES_TO_RADIANS=1/180*Math.PI,config={EPSILON:1e-12,debug:!1,precision:4,printTypes:!1,printDegrees:!1,printRowMajor:!0};function configure(options){for(const key in options)(0,_assert__WEBPACK_IMPORTED_MODULE_0__.Z)(key in config),config[key]=options[key];return config}function formatValue(value,{precision:precision=config.precision}={}){return value=function round(value){return Math.round(value/config.EPSILON)*config.EPSILON}(value),"".concat(parseFloat(value.toPrecision(precision)))}function isArray(value){return Array.isArray(value)||ArrayBuffer.isView(value)&&!(value instanceof DataView)}function clone(array){return"clone"in array?array.clone():array.slice()}function toRadians(degrees){return radians(degrees)}function toDegrees(radians){return degrees(radians)}function radians(degrees,result){return map(degrees,(degrees=>degrees*DEGREES_TO_RADIANS),result)}function degrees(radians,result){return map(radians,(radians=>radians*RADIANS_TO_DEGREES),result)}function sin(radians,result){return map(radians,(angle=>Math.sin(angle)),result)}function cos(radians,result){return map(radians,(angle=>Math.cos(angle)),result)}function tan(radians,result){return map(radians,(angle=>Math.tan(angle)),result)}function asin(radians,result){return map(radians,(angle=>Math.asin(angle)),result)}function acos(radians,result){return map(radians,(angle=>Math.acos(angle)),result)}function atan(radians,result){return map(radians,(angle=>Math.atan(angle)),result)}function clamp(value,min,max){return map(value,(value=>Math.max(min,Math.min(max,value))))}function lerp(a,b,t){return isArray(a)?a.map(((ai,i)=>lerp(ai,b[i],t))):t*b+(1-t)*a}function equals(a,b,epsilon){const oldEpsilon=config.EPSILON;epsilon&&(config.EPSILON=epsilon);try{if(a===b)return!0;if(isArray(a)&&isArray(b)){if(a.length!==b.length)return!1;for(let i=0;i<a.length;++i)if(!equals(a[i],b[i]))return!1;return!0}return a&&a.equals?a.equals(b):b&&b.equals?b.equals(a):"number"==typeof a&&"number"==typeof b&&Math.abs(a-b)<=config.EPSILON*Math.max(1,Math.abs(a),Math.abs(b))}finally{config.EPSILON=oldEpsilon}}function exactEquals(a,b){if(a===b)return!0;if(a&&"object"==typeof a&&b&&"object"==typeof b){if(a.constructor!==b.constructor)return!1;if(a.exactEquals)return a.exactEquals(b)}if(isArray(a)&&isArray(b)){if(a.length!==b.length)return!1;for(let i=0;i<a.length;++i)if(!exactEquals(a[i],b[i]))return!1;return!0}return!1}function withEpsilon(epsilon,func){const oldPrecision=config.EPSILON;let value;config.EPSILON=epsilon;try{value=func()}finally{config.EPSILON=oldPrecision}return value}function map(value,func,result){if(isArray(value)){const array=value;result=result||function duplicateArray(array){return array.clone?array.clone():new Array(array.length)}(array);for(let i=0;i<result.length&&i<array.length;++i)result[i]=func(value[i],i,result);return result}return func(value)}},"./node_modules/@math.gl/core/dist/esm/lib/gl-matrix-extras.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";function vec2_transformMat4AsVector(out,a,m){const x=a[0],y=a[1],w=m[3]*x+m[7]*y||1;return out[0]=(m[0]*x+m[4]*y)/w,out[1]=(m[1]*x+m[5]*y)/w,out}function vec3_transformMat4AsVector(out,a,m){const x=a[0],y=a[1],z=a[2],w=m[3]*x+m[7]*y+m[11]*z||1;return out[0]=(m[0]*x+m[4]*y+m[8]*z)/w,out[1]=(m[1]*x+m[5]*y+m[9]*z)/w,out[2]=(m[2]*x+m[6]*y+m[10]*z)/w,out}function vec3_transformMat2(out,a,m){const x=a[0],y=a[1];return out[0]=m[0]*x+m[2]*y,out[1]=m[1]*x+m[3]*y,out[2]=a[2],out}function vec4_transformMat2(out,a,m){const x=a[0],y=a[1];return out[0]=m[0]*x+m[2]*y,out[1]=m[1]*x+m[3]*y,out[2]=a[2],out[3]=a[3],out}function vec4_transformMat3(out,a,m){const x=a[0],y=a[1],z=a[2];return out[0]=m[0]*x+m[3]*y+m[6]*z,out[1]=m[1]*x+m[4]*y+m[7]*z,out[2]=m[2]*x+m[5]*y+m[8]*z,out[3]=a[3],out}__webpack_require__.d(__webpack_exports__,{G7:function(){return vec4_transformMat2},_x:function(){return vec4_transformMat3},eQ:function(){return vec3_transformMat2},pL:function(){return vec3_transformMat4AsVector},pb:function(){return vec2_transformMat4AsVector}})},"./node_modules/@math.gl/core/dist/esm/lib/validators.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{IL:function(){return checkVector},u5:function(){return checkNumber}});var _common__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@math.gl/core/dist/esm/lib/common.js");function checkNumber(value){if(!Number.isFinite(value))throw new Error("Invalid number ".concat(value));return value}function checkVector(v,length,callerName=""){if(_common__WEBPACK_IMPORTED_MODULE_0__.vc.debug&&!function validateVector(v,length){if(v.length!==length)return!1;for(let i=0;i<v.length;++i)if(!Number.isFinite(v[i]))return!1;return!0}(v,length))throw new Error("math.gl: ".concat(callerName," some fields set to invalid numbers'"));return v}},"./node_modules/@math.gl/web-mercator/dist/esm/index.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{LO:function(){return MAX_LATITUDE},DW:function(){return WebMercatorViewport},eG:function(){return addMetersToLngLat},Lu:function(){return altitudeToFovy},Xg:function(){return fitBounds},if:function(){return flyToViewport},sj:function(){return fovyToAltitude},zX:function(){return getBounds},ro:function(){return getDistanceScales},up:function(){return getFlyToDuration},Bf:function(){return getMeterZoom},c7:function(){return getProjectionMatrix},wl:function(){return getProjectionParameters},lf:function(){return getViewMatrix},w5:function(){return lngLatToWorld},QA:function(){return normalizeViewportProps},CT:function(){return pixelsToWorld},sO:function(){return scaleToZoom},NC:function(){return unitsPerMeter},es:function(){return worldToLngLat},aW:function(){return worldToPixels},EO:function(){return zoomToScale}});var defineProperty=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),vec4=__webpack_require__("./node_modules/gl-matrix/esm/vec4.js");function transformVector(matrix,vector){const result=(0,vec4.fF)([],vector,matrix);return(0,vec4.bA)(result,result,1/result[3]),result}function mod(value,divisor){const modulus=value%divisor;return modulus<0?divisor+modulus:modulus}function clamp(x,min,max){return x<min?min:x>max?max:x}const log2=Math.log2||function ieLog2(x){return Math.log(x)*Math.LOG2E};var mat4=__webpack_require__("./node_modules/gl-matrix/esm/mat4.js"),vec2=__webpack_require__("./node_modules/gl-matrix/esm/vec2.js"),vec3=__webpack_require__("./node_modules/gl-matrix/esm/vec3.js");function assert(condition,message){if(!condition)throw new Error(message||"@math.gl/web-mercator: assertion failed.")}const PI=Math.PI,PI_4=PI/4,DEGREES_TO_RADIANS=PI/180,RADIANS_TO_DEGREES=180/PI,TILE_SIZE=512,EARTH_CIRCUMFERENCE=4003e4,MAX_LATITUDE=85.051129,DEFAULT_ALTITUDE=1.5;function zoomToScale(zoom){return Math.pow(2,zoom)}function scaleToZoom(scale){return log2(scale)}function lngLatToWorld(lngLat){const[lng,lat]=lngLat;assert(Number.isFinite(lng)),assert(Number.isFinite(lat)&&lat>=-90&&lat<=90,"invalid latitude");const phi2=lat*DEGREES_TO_RADIANS;return[TILE_SIZE*(lng*DEGREES_TO_RADIANS+PI)/(2*PI),TILE_SIZE*(PI+Math.log(Math.tan(PI_4+.5*phi2)))/(2*PI)]}function worldToLngLat(xy){const[x,y]=xy,lambda2=x/TILE_SIZE*(2*PI)-PI,phi2=2*(Math.atan(Math.exp(y/TILE_SIZE*(2*PI)-PI))-PI_4);return[lambda2*RADIANS_TO_DEGREES,phi2*RADIANS_TO_DEGREES]}function getMeterZoom(options){const{latitude:latitude}=options;assert(Number.isFinite(latitude));const latCosine=Math.cos(latitude*DEGREES_TO_RADIANS);return scaleToZoom(EARTH_CIRCUMFERENCE*latCosine)-9}function unitsPerMeter(latitude){const latCosine=Math.cos(latitude*DEGREES_TO_RADIANS);return TILE_SIZE/EARTH_CIRCUMFERENCE/latCosine}function getDistanceScales(options){const{latitude:latitude,longitude:longitude,highPrecision:highPrecision=!1}=options;assert(Number.isFinite(latitude)&&Number.isFinite(longitude));const worldSize=TILE_SIZE,latCosine=Math.cos(latitude*DEGREES_TO_RADIANS),unitsPerDegreeX=worldSize/360,unitsPerDegreeY=unitsPerDegreeX/latCosine,altUnitsPerMeter=worldSize/EARTH_CIRCUMFERENCE/latCosine,result={unitsPerMeter:[altUnitsPerMeter,altUnitsPerMeter,altUnitsPerMeter],metersPerUnit:[1/altUnitsPerMeter,1/altUnitsPerMeter,1/altUnitsPerMeter],unitsPerDegree:[unitsPerDegreeX,unitsPerDegreeY,altUnitsPerMeter],degreesPerUnit:[1/unitsPerDegreeX,1/unitsPerDegreeY,1/altUnitsPerMeter]};if(highPrecision){const latCosine2=DEGREES_TO_RADIANS*Math.tan(latitude*DEGREES_TO_RADIANS)/latCosine,unitsPerDegreeY2=unitsPerDegreeX*latCosine2/2,altUnitsPerDegree2=worldSize/EARTH_CIRCUMFERENCE*latCosine2,altUnitsPerMeter2=altUnitsPerDegree2/unitsPerDegreeY*altUnitsPerMeter;result.unitsPerDegree2=[0,unitsPerDegreeY2,altUnitsPerDegree2],result.unitsPerMeter2=[altUnitsPerMeter2,0,altUnitsPerMeter2]}return result}function addMetersToLngLat(lngLatZ,xyz){const[longitude,latitude,z0]=lngLatZ,[x,y,z]=xyz,{unitsPerMeter:unitsPerMeter,unitsPerMeter2:unitsPerMeter2}=getDistanceScales({longitude:longitude,latitude:latitude,highPrecision:!0}),worldspace=lngLatToWorld(lngLatZ);worldspace[0]+=x*(unitsPerMeter[0]+unitsPerMeter2[0]*y),worldspace[1]+=y*(unitsPerMeter[1]+unitsPerMeter2[1]*y);const newLngLat=worldToLngLat(worldspace),newZ=(z0||0)+(z||0);return Number.isFinite(z0)||Number.isFinite(z)?[newLngLat[0],newLngLat[1],newZ]:newLngLat}function getViewMatrix(options){const{height:height,pitch:pitch,bearing:bearing,altitude:altitude,scale:scale,center:center}=options,vm=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];mat4.Iu(vm,vm,[0,0,-altitude]),mat4.lM(vm,vm,-pitch*DEGREES_TO_RADIANS),mat4.jI(vm,vm,bearing*DEGREES_TO_RADIANS);const relativeScale=scale/height;return mat4.bA(vm,vm,[relativeScale,relativeScale,relativeScale]),center&&mat4.Iu(vm,vm,vec3.tk([],center)),vm}function getProjectionParameters(options){const{width:width,height:height,altitude:altitude,pitch:pitch=0,offset:offset,center:center,scale:scale,nearZMultiplier:nearZMultiplier=1,farZMultiplier:farZMultiplier=1}=options;let{fovy:fovy=altitudeToFovy(DEFAULT_ALTITUDE)}=options;void 0!==altitude&&(fovy=altitudeToFovy(altitude));const fovRadians=fovy*DEGREES_TO_RADIANS,pitchRadians=pitch*DEGREES_TO_RADIANS,focalDistance=fovyToAltitude(fovy);let cameraToSeaLevelDistance=focalDistance;center&&(cameraToSeaLevelDistance+=center[2]*scale/Math.cos(pitchRadians)/height);const fovAboveCenter=fovRadians*(.5+(offset?offset[1]:0)/height),topHalfSurfaceDistance=Math.sin(fovAboveCenter)*cameraToSeaLevelDistance/Math.sin(clamp(Math.PI/2-pitchRadians-fovAboveCenter,.01,Math.PI-.01)),furthestDistance=Math.sin(pitchRadians)*topHalfSurfaceDistance+cameraToSeaLevelDistance,horizonDistance=10*cameraToSeaLevelDistance;return{fov:fovRadians,aspect:width/height,focalDistance:focalDistance,near:nearZMultiplier,far:Math.min(furthestDistance*farZMultiplier,horizonDistance)}}function getProjectionMatrix(options){const{fov:fov,aspect:aspect,near:near,far:far}=getProjectionParameters(options);return mat4.G3([],fov,aspect,near,far)}function altitudeToFovy(altitude){return 2*Math.atan(.5/altitude)*RADIANS_TO_DEGREES}function fovyToAltitude(fovy){return.5/Math.tan(.5*fovy*DEGREES_TO_RADIANS)}function worldToPixels(xyz,pixelProjectionMatrix){const[x,y,z=0]=xyz;return assert(Number.isFinite(x)&&Number.isFinite(y)&&Number.isFinite(z)),transformVector(pixelProjectionMatrix,[x,y,z,1])}function pixelsToWorld(xyz,pixelUnprojectionMatrix,targetZ=0){const[x,y,z]=xyz;if(assert(Number.isFinite(x)&&Number.isFinite(y),"invalid pixel coordinate"),Number.isFinite(z)){return transformVector(pixelUnprojectionMatrix,[x,y,z,1])}const coord0=transformVector(pixelUnprojectionMatrix,[x,y,0,1]),coord1=transformVector(pixelUnprojectionMatrix,[x,y,1,1]),z0=coord0[2],z1=coord1[2],t=z0===z1?0:((targetZ||0)-z0)/(z1-z0);return vec2.t7([],coord0,coord1,t)}function fitBounds(options){const{width:width,height:height,bounds:bounds,minExtent:minExtent=0,maxZoom:maxZoom=24,offset:offset=[0,0]}=options,[[west,south],[east,north]]=bounds,padding=function getPaddingObject(padding=0){if("number"==typeof padding)return{top:padding,bottom:padding,left:padding,right:padding};return assert(Number.isFinite(padding.top)&&Number.isFinite(padding.bottom)&&Number.isFinite(padding.left)&&Number.isFinite(padding.right)),padding}(options.padding),nw=lngLatToWorld([west,clamp(north,-MAX_LATITUDE,MAX_LATITUDE)]),se=lngLatToWorld([east,clamp(south,-MAX_LATITUDE,MAX_LATITUDE)]),size=[Math.max(Math.abs(se[0]-nw[0]),minExtent),Math.max(Math.abs(se[1]-nw[1]),minExtent)],targetSize=[width-padding.left-padding.right-2*Math.abs(offset[0]),height-padding.top-padding.bottom-2*Math.abs(offset[1])];assert(targetSize[0]>0&&targetSize[1]>0);const scaleX=targetSize[0]/size[0],scaleY=targetSize[1]/size[1],offsetX=(padding.right-padding.left)/2/scaleX,offsetY=(padding.top-padding.bottom)/2/scaleY,centerLngLat=worldToLngLat([(se[0]+nw[0])/2+offsetX,(se[1]+nw[1])/2+offsetY]),zoom=Math.min(maxZoom,log2(Math.abs(Math.min(scaleX,scaleY))));return assert(Number.isFinite(zoom)),{longitude:centerLngLat[0],latitude:centerLngLat[1],zoom:zoom}}const get_bounds_DEGREES_TO_RADIANS=Math.PI/180;function getBounds(viewport,z=0){const{width:width,height:height,unproject:unproject}=viewport,unprojectOps={targetZ:z},bottomLeft=unproject([0,height],unprojectOps),bottomRight=unproject([width,height],unprojectOps);let topLeft,topRight;return(viewport.fovy?.5*viewport.fovy*get_bounds_DEGREES_TO_RADIANS:Math.atan(.5/viewport.altitude))>(90-viewport.pitch)*get_bounds_DEGREES_TO_RADIANS-.01?(topLeft=unprojectOnFarPlane(viewport,0,z),topRight=unprojectOnFarPlane(viewport,width,z)):(topLeft=unproject([0,0],unprojectOps),topRight=unproject([width,0],unprojectOps)),[bottomLeft,bottomRight,topRight,topLeft]}function unprojectOnFarPlane(viewport,x,targetZ){const{pixelUnprojectionMatrix:pixelUnprojectionMatrix}=viewport,coord0=transformVector(pixelUnprojectionMatrix,[x,0,1,1]),coord1=transformVector(pixelUnprojectionMatrix,[x,viewport.height,1,1]),t=(targetZ*viewport.distanceScales.unitsPerMeter[2]-coord0[2])/(coord1[2]-coord0[2]),result=worldToLngLat(vec2.t7([],coord0,coord1,t));return result.push(targetZ),result}class WebMercatorViewport{constructor(props={width:1,height:1}){(0,defineProperty.Z)(this,"latitude",void 0),(0,defineProperty.Z)(this,"longitude",void 0),(0,defineProperty.Z)(this,"zoom",void 0),(0,defineProperty.Z)(this,"pitch",void 0),(0,defineProperty.Z)(this,"bearing",void 0),(0,defineProperty.Z)(this,"altitude",void 0),(0,defineProperty.Z)(this,"fovy",void 0),(0,defineProperty.Z)(this,"meterOffset",void 0),(0,defineProperty.Z)(this,"center",void 0),(0,defineProperty.Z)(this,"width",void 0),(0,defineProperty.Z)(this,"height",void 0),(0,defineProperty.Z)(this,"scale",void 0),(0,defineProperty.Z)(this,"distanceScales",void 0),(0,defineProperty.Z)(this,"viewMatrix",void 0),(0,defineProperty.Z)(this,"projectionMatrix",void 0),(0,defineProperty.Z)(this,"viewProjectionMatrix",void 0),(0,defineProperty.Z)(this,"pixelProjectionMatrix",void 0),(0,defineProperty.Z)(this,"pixelUnprojectionMatrix",void 0),(0,defineProperty.Z)(this,"equals",(viewport=>viewport instanceof WebMercatorViewport&&(viewport.width===this.width&&viewport.height===this.height&&mat4.fS(viewport.projectionMatrix,this.projectionMatrix)&&mat4.fS(viewport.viewMatrix,this.viewMatrix)))),(0,defineProperty.Z)(this,"project",((lngLatZ,options={})=>{const{topLeft:topLeft=!0}=options,coord=worldToPixels(this.projectPosition(lngLatZ),this.pixelProjectionMatrix),[x,y]=coord,y2=topLeft?y:this.height-y;return 2===lngLatZ.length?[x,y2]:[x,y2,coord[2]]})),(0,defineProperty.Z)(this,"unproject",((xyz,options={})=>{const{topLeft:topLeft=!0,targetZ:targetZ}=options,[x,y,z]=xyz,y2=topLeft?y:this.height-y,targetZWorld=targetZ&&targetZ*this.distanceScales.unitsPerMeter[2],coord=pixelsToWorld([x,y2,z],this.pixelUnprojectionMatrix,targetZWorld),[X,Y,Z]=this.unprojectPosition(coord);return Number.isFinite(z)?[X,Y,Z]:Number.isFinite(targetZ)?[X,Y,targetZ]:[X,Y]})),(0,defineProperty.Z)(this,"projectPosition",(xyz=>{const[X,Y]=lngLatToWorld(xyz);return[X,Y,(xyz[2]||0)*this.distanceScales.unitsPerMeter[2]]})),(0,defineProperty.Z)(this,"unprojectPosition",(xyz=>{const[X,Y]=worldToLngLat(xyz);return[X,Y,(xyz[2]||0)*this.distanceScales.metersPerUnit[2]]}));let{width:width,height:height,altitude:altitude=null,fovy:fovy=null}=props;const{latitude:latitude=0,longitude:longitude=0,zoom:zoom=0,pitch:pitch=0,bearing:bearing=0,position:position=null,nearZMultiplier:nearZMultiplier=.02,farZMultiplier:farZMultiplier=1.01}=props;width=width||1,height=height||1,null===fovy&&null===altitude?(altitude=DEFAULT_ALTITUDE,fovy=altitudeToFovy(altitude)):null===fovy?fovy=altitudeToFovy(altitude):null===altitude&&(altitude=fovyToAltitude(fovy));const scale=zoomToScale(zoom);altitude=Math.max(.75,altitude);const distanceScales=getDistanceScales({longitude:longitude,latitude:latitude}),center=lngLatToWorld([longitude,latitude]);center.push(0),position&&vec3.IH(center,center,vec3.dC([],position,distanceScales.unitsPerMeter)),this.projectionMatrix=getProjectionMatrix({width:width,height:height,scale:scale,center:center,pitch:pitch,fovy:fovy,nearZMultiplier:nearZMultiplier,farZMultiplier:farZMultiplier}),this.viewMatrix=getViewMatrix({height:height,scale:scale,center:center,pitch:pitch,bearing:bearing,altitude:altitude}),this.width=width,this.height=height,this.scale=scale,this.latitude=latitude,this.longitude=longitude,this.zoom=zoom,this.pitch=pitch,this.bearing=bearing,this.altitude=altitude,this.fovy=fovy,this.center=center,this.meterOffset=position||[0,0,0],this.distanceScales=distanceScales,this._initMatrices(),Object.freeze(this)}_initMatrices(){const{width:width,height:height,projectionMatrix:projectionMatrix,viewMatrix:viewMatrix}=this,vpm=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];mat4.Jp(vpm,vpm,projectionMatrix),mat4.Jp(vpm,vpm,viewMatrix),this.viewProjectionMatrix=vpm;const m=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];mat4.bA(m,m,[width/2,-height/2,1]),mat4.Iu(m,m,[1,-1,0]),mat4.Jp(m,m,vpm);const mInverse=mat4.U_([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],m);if(!mInverse)throw new Error("Pixel project matrix not invertible");this.pixelProjectionMatrix=m,this.pixelUnprojectionMatrix=mInverse}projectFlat(lngLat){return lngLatToWorld(lngLat)}unprojectFlat(xy){return worldToLngLat(xy)}getMapCenterByLngLatPosition({lngLat:lngLat,pos:pos}){const fromLocation=pixelsToWorld(pos,this.pixelUnprojectionMatrix),toLocation=lngLatToWorld(lngLat),translate=vec2.IH([],toLocation,vec2.tk([],fromLocation));return worldToLngLat(vec2.IH([],this.center,translate))}fitBounds(bounds,options={}){const{width:width,height:height}=this,{longitude:longitude,latitude:latitude,zoom:zoom}=fitBounds(Object.assign({width:width,height:height,bounds:bounds},options));return new WebMercatorViewport({width:width,height:height,longitude:longitude,latitude:latitude,zoom:zoom})}getBounds(options){const corners=this.getBoundingRegion(options),west=Math.min(...corners.map((p=>p[0]))),east=Math.max(...corners.map((p=>p[0])));return[[west,Math.min(...corners.map((p=>p[1])))],[east,Math.max(...corners.map((p=>p[1])))]]}getBoundingRegion(options={}){return getBounds(this,options.z||0)}getLocationAtPoint({lngLat:lngLat,pos:pos}){return this.getMapCenterByLngLatPosition({lngLat:lngLat,pos:pos})}}const normalize_viewport_props_TILE_SIZE=512;function normalizeViewportProps(props){const{width:width,height:height,pitch:pitch=0}=props;let{longitude:longitude,latitude:latitude,zoom:zoom,bearing:bearing=0}=props;(longitude<-180||longitude>180)&&(longitude=mod(longitude+180,360)-180),(bearing<-180||bearing>180)&&(bearing=mod(bearing+180,360)-180);const minZoom=log2(height/normalize_viewport_props_TILE_SIZE);if(zoom<=minZoom)zoom=minZoom,latitude=0;else{const halfHeightPixels=height/2/Math.pow(2,zoom),minLatitude=worldToLngLat([0,halfHeightPixels])[1];if(latitude<minLatitude)latitude=minLatitude;else{const maxLatitude=worldToLngLat([0,normalize_viewport_props_TILE_SIZE-halfHeightPixels])[1];latitude>maxLatitude&&(latitude=maxLatitude)}}return{width:width,height:height,longitude:longitude,latitude:latitude,zoom:zoom,pitch:pitch,bearing:bearing}}const EPSILON=.01,VIEWPORT_TRANSITION_PROPS=["longitude","latitude","zoom"],DEFAULT_OPTS={curve:1.414,speed:1.2};function flyToViewport(startProps,endProps,t,options){const{startZoom:startZoom,startCenterXY:startCenterXY,uDelta:uDelta,w0:w0,u1:u1,S:S,rho:rho,rho2:rho2,r0:r0}=getFlyToTransitionParams(startProps,endProps,options);if(u1<EPSILON){const viewport={};for(const key of VIEWPORT_TRANSITION_PROPS){const startValue=startProps[key],endValue=endProps[key];viewport[key]=(step=t)*endValue+(1-step)*startValue}return viewport}var step;const s=t*S,w=Math.cosh(r0)/Math.cosh(r0+rho*s),u=w0*((Math.cosh(r0)*Math.tanh(r0+rho*s)-Math.sinh(r0))/rho2)/u1,newZoom=startZoom+scaleToZoom(1/w),newCenterWorld=vec2.bA([],uDelta,u);vec2.IH(newCenterWorld,newCenterWorld,startCenterXY);const newCenter=worldToLngLat(newCenterWorld);return{longitude:newCenter[0],latitude:newCenter[1],zoom:newZoom}}function getFlyToDuration(startProps,endProps,options){const opts={...DEFAULT_OPTS,...options},{screenSpeed:screenSpeed,speed:speed,maxDuration:maxDuration}=opts,{S:S,rho:rho}=getFlyToTransitionParams(startProps,endProps,opts),length=1e3*S;let duration;return duration=Number.isFinite(screenSpeed)?length/(screenSpeed/rho):length/speed,Number.isFinite(maxDuration)&&duration>maxDuration?0:duration}function getFlyToTransitionParams(startProps,endProps,opts){const rho=(opts=Object.assign({},DEFAULT_OPTS,opts)).curve,startZoom=startProps.zoom,startCenter=[startProps.longitude,startProps.latitude],startScale=zoomToScale(startZoom),endZoom=endProps.zoom,endCenter=[endProps.longitude,endProps.latitude],scale=zoomToScale(endZoom-startZoom),startCenterXY=lngLatToWorld(startCenter),endCenterXY=lngLatToWorld(endCenter),uDelta=vec2.lu([],endCenterXY,startCenterXY),w0=Math.max(startProps.width,startProps.height),w1=w0/scale,u1=vec2.kE(uDelta)*startScale,_u1=Math.max(u1,EPSILON),rho2=rho*rho,b0=(w1*w1-w0*w0+rho2*rho2*_u1*_u1)/(2*w0*rho2*_u1),b1=(w1*w1-w0*w0-rho2*rho2*_u1*_u1)/(2*w1*rho2*_u1),r0=Math.log(Math.sqrt(b0*b0+1)-b0),r1=Math.log(Math.sqrt(b1*b1+1)-b1);return{startZoom:startZoom,startCenterXY:startCenterXY,uDelta:uDelta,w0:w0,u1:u1,S:(r1-r0)/rho,rho:rho,rho2:rho2,r0:r0,r1:r1}}},"./node_modules/@probe.gl/env/dist/esm/lib/get-browser.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return getBrowser}});var _is_browser__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@probe.gl/env/dist/esm/lib/is-browser.js"),_is_electron__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@probe.gl/env/dist/esm/lib/is-electron.js");const window=globalThis;function getBrowser(mockUserAgent){if(!mockUserAgent&&!(0,_is_browser__WEBPACK_IMPORTED_MODULE_0__.Z)())return"Node";if((0,_is_electron__WEBPACK_IMPORTED_MODULE_1__.Z)(mockUserAgent))return"Electron";const navigator_="undefined"!=typeof navigator?navigator:{},userAgent=mockUserAgent||navigator_.userAgent||"";if(userAgent.indexOf("Edge")>-1)return"Edge";const isMSIE=-1!==userAgent.indexOf("MSIE "),isTrident=-1!==userAgent.indexOf("Trident/");return isMSIE||isTrident?"IE":window.chrome?"Chrome":window.safari?"Safari":window.mozInnerScreenX?"Firefox":"Unknown"}},"./node_modules/@probe.gl/env/dist/esm/lib/is-browser.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return isBrowser}});var _is_electron__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@probe.gl/env/dist/esm/lib/is-electron.js"),process=__webpack_require__("./node_modules/process/browser.js");function isBrowser(){return!("object"==typeof process&&"[object process]"===String(process)&&!process.browser)||(0,_is_electron__WEBPACK_IMPORTED_MODULE_0__.Z)()}},"./node_modules/@probe.gl/env/dist/esm/lib/is-electron.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return isElectron}});var process=__webpack_require__("./node_modules/process/browser.js");function isElectron(mockUserAgent){if("undefined"!=typeof window&&"object"==typeof window.process&&"renderer"===window.process.type)return!0;if(void 0!==process&&"object"==typeof process.versions&&Boolean(process.versions.electron))return!0;const realUserAgent="object"==typeof navigator&&"string"==typeof navigator.userAgent&&navigator.userAgent,userAgent=mockUserAgent||realUserAgent;return!!(userAgent&&userAgent.indexOf("Electron")>=0)}},"./node_modules/@probe.gl/log/dist/esm/log.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return Log}});var defineProperty=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),is_browser=__webpack_require__("./node_modules/@probe.gl/env/dist/esm/lib/is-browser.js");const VERSION="undefined"!=typeof __VERSION__?__VERSION__:"untranspiled source";(0,is_browser.Z)();class LocalStorage{constructor(id,defaultConfig){let type=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sessionStorage";(0,defineProperty.Z)(this,"storage",void 0),(0,defineProperty.Z)(this,"id",void 0),(0,defineProperty.Z)(this,"config",void 0),this.storage=function getStorage(type){try{const storage=window[type],x="__storage_test__";return storage.setItem(x,x),storage.removeItem(x),storage}catch(e){return null}}(type),this.id=id,this.config=defaultConfig,this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(configuration){if(Object.assign(this.config,configuration),this.storage){const serialized=JSON.stringify(this.config);this.storage.setItem(this.id,serialized)}}_loadConfiguration(){let configuration={};if(this.storage){const serializedConfiguration=this.storage.getItem(this.id);configuration=serializedConfiguration?JSON.parse(serializedConfiguration):{}}return Object.assign(this.config,configuration),this}}function formatImage(image,message,scale){let maxWidth=arguments.length>3&&void 0!==arguments[3]?arguments[3]:600;const imageUrl=image.src.replace(/\(/g,"%28").replace(/\)/g,"%29");image.width>maxWidth&&(scale=Math.min(scale,maxWidth/image.width));const width=image.width*scale,height=image.height*scale,style=["font-size:1px;","padding:".concat(Math.floor(height/2),"px ").concat(Math.floor(width/2),"px;"),"line-height:".concat(height,"px;"),"background:url(".concat(imageUrl,");"),"background-size:".concat(width,"px ").concat(height,"px;"),"color:transparent;"].join("");return["".concat(message," %c+"),style]}let COLOR;function getColor(color){return"string"==typeof color?COLOR[color.toUpperCase()]||COLOR.WHITE:color}function assert(condition,message){if(!condition)throw new Error(message||"Assertion failed")}!function(COLOR){COLOR[COLOR.BLACK=30]="BLACK",COLOR[COLOR.RED=31]="RED",COLOR[COLOR.GREEN=32]="GREEN",COLOR[COLOR.YELLOW=33]="YELLOW",COLOR[COLOR.BLUE=34]="BLUE",COLOR[COLOR.MAGENTA=35]="MAGENTA",COLOR[COLOR.CYAN=36]="CYAN",COLOR[COLOR.WHITE=37]="WHITE",COLOR[COLOR.BRIGHT_BLACK=90]="BRIGHT_BLACK",COLOR[COLOR.BRIGHT_RED=91]="BRIGHT_RED",COLOR[COLOR.BRIGHT_GREEN=92]="BRIGHT_GREEN",COLOR[COLOR.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",COLOR[COLOR.BRIGHT_BLUE=94]="BRIGHT_BLUE",COLOR[COLOR.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",COLOR[COLOR.BRIGHT_CYAN=96]="BRIGHT_CYAN",COLOR[COLOR.BRIGHT_WHITE=97]="BRIGHT_WHITE"}(COLOR||(COLOR={}));var process=__webpack_require__("./node_modules/process/browser.js");const globals={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==__webpack_require__.g&&__webpack_require__.g,document:"undefined"!=typeof document&&document,process:"object"==typeof process&&process},window_=globals.window||globals.self||globals.global,process_=globals.process||{};function getHiResTimestamp(){let timestamp;var _window$performance,_window$performance$n;if(is_browser.Z&&"performance"in window_)timestamp=null==window_||null===(_window$performance=window_.performance)||void 0===_window$performance||null===(_window$performance$n=_window$performance.now)||void 0===_window$performance$n?void 0:_window$performance$n.call(_window$performance);else if("hrtime"in process_){var _process$hrtime;const timeParts=null==process_||null===(_process$hrtime=process_.hrtime)||void 0===_process$hrtime?void 0:_process$hrtime.call(process_);timestamp=1e3*timeParts[0]+timeParts[1]/1e6}else timestamp=Date.now();return timestamp}const originalConsole={debug:is_browser.Z&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},DEFAULT_SETTINGS={enabled:!0,level:0};function noop(){}const cache={},ONCE={once:!0};class Log{constructor(){let{id:id}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:""};(0,defineProperty.Z)(this,"id",void 0),(0,defineProperty.Z)(this,"VERSION",VERSION),(0,defineProperty.Z)(this,"_startTs",getHiResTimestamp()),(0,defineProperty.Z)(this,"_deltaTs",getHiResTimestamp()),(0,defineProperty.Z)(this,"_storage",void 0),(0,defineProperty.Z)(this,"userData",{}),(0,defineProperty.Z)(this,"LOG_THROTTLE_TIMEOUT",0),this.id=id,this.userData={},this._storage=new LocalStorage("__probe-".concat(this.id,"__"),DEFAULT_SETTINGS),this.timeStamp("".concat(this.id," started")),function autobind(obj){let predefined=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["constructor"];const proto=Object.getPrototypeOf(obj),propNames=Object.getOwnPropertyNames(proto);for(const key of propNames)"function"==typeof obj[key]&&(predefined.find((name=>key===name))||(obj[key]=obj[key].bind(obj)))}(this),Object.seal(this)}set level(newLevel){this.setLevel(newLevel)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((getHiResTimestamp()-this._startTs).toPrecision(10))}getDelta(){return Number((getHiResTimestamp()-this._deltaTs).toPrecision(10))}set priority(newPriority){this.level=newPriority}get priority(){return this.level}getPriority(){return this.level}enable(){let enabled=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._storage.setConfiguration({enabled:enabled}),this}setLevel(level){return this._storage.setConfiguration({level:level}),this}get(setting){return this._storage.config[setting]}set(setting,value){this._storage.setConfiguration({[setting]:value})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(condition,message){assert(condition,message)}warn(message){return this._getLogFunction(0,message,originalConsole.warn,arguments,ONCE)}error(message){return this._getLogFunction(0,message,originalConsole.error,arguments)}deprecated(oldUsage,newUsage){return this.warn("`".concat(oldUsage,"` is deprecated and will be removed in a later version. Use `").concat(newUsage,"` instead"))}removed(oldUsage,newUsage){return this.error("`".concat(oldUsage,"` has been removed. Use `").concat(newUsage,"` instead"))}probe(logLevel,message){return this._getLogFunction(logLevel,message,originalConsole.log,arguments,{time:!0,once:!0})}log(logLevel,message){return this._getLogFunction(logLevel,message,originalConsole.debug,arguments)}info(logLevel,message){return this._getLogFunction(logLevel,message,console.info,arguments)}once(logLevel,message){for(var _len=arguments.length,args=new Array(_len>2?_len-2:0),_key=2;_key<_len;_key++)args[_key-2]=arguments[_key];return this._getLogFunction(logLevel,message,originalConsole.debug||originalConsole.info,arguments,ONCE)}table(logLevel,table,columns){return table?this._getLogFunction(logLevel,table,console.table||noop,columns&&[columns],{tag:getTableHeader(table)}):noop}image(_ref){let{logLevel:logLevel,priority:priority,image:image,message:message="",scale:scale=1}=_ref;return this._shouldLog(logLevel||priority)?is_browser.Z?function logImageInBrowser(_ref3){let{image:image,message:message="",scale:scale=1}=_ref3;if("string"==typeof image){const img=new Image;return img.onload=()=>{const args=formatImage(img,message,scale);console.log(...args)},img.src=image,noop}const element=image.nodeName||"";if("img"===element.toLowerCase())return console.log(...formatImage(image,message,scale)),noop;if("canvas"===element.toLowerCase()){const img=new Image;return img.onload=()=>console.log(...formatImage(img,message,scale)),img.src=image.toDataURL(),noop}return noop}({image:image,message:message,scale:scale}):function logImageInNode(_ref2){let{image:image,message:message="",scale:scale=1}=_ref2;return console.warn("removed"),noop}({image:image,message:message,scale:scale}):noop}time(logLevel,message){return this._getLogFunction(logLevel,message,console.time?console.time:console.info)}timeEnd(logLevel,message){return this._getLogFunction(logLevel,message,console.timeEnd?console.timeEnd:console.info)}timeStamp(logLevel,message){return this._getLogFunction(logLevel,message,console.timeStamp||noop)}group(logLevel,message){let opts=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{collapsed:!1};const options=normalizeArguments({logLevel:logLevel,message:message,opts:opts}),{collapsed:collapsed}=opts;return options.method=(collapsed?console.groupCollapsed:console.group)||console.info,this._getLogFunction(options)}groupCollapsed(logLevel,message){let opts=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.group(logLevel,message,Object.assign({},opts,{collapsed:!0}))}groupEnd(logLevel){return this._getLogFunction(logLevel,"",console.groupEnd||noop)}withGroup(logLevel,message,func){this.group(logLevel,message)();try{func()}finally{this.groupEnd(logLevel)()}}trace(){console.trace&&console.trace()}_shouldLog(logLevel){return this.isEnabled()&&this.getLevel()>=normalizeLogLevel(logLevel)}_getLogFunction(logLevel,message,method,args,opts){if(this._shouldLog(logLevel)){opts=normalizeArguments({logLevel:logLevel,message:message,args:args,opts:opts}),assert(method=method||opts.method),opts.total=this.getTotal(),opts.delta=this.getDelta(),this._deltaTs=getHiResTimestamp();const tag=opts.tag||opts.message;if(opts.once){if(cache[tag])return noop;cache[tag]=getHiResTimestamp()}return message=function decorateMessage(id,message,opts){if("string"==typeof message){const time=opts.time?function leftPad(string){let length=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8;const padLength=Math.max(length-string.length,0);return"".concat(" ".repeat(padLength)).concat(string)}(function formatTime(ms){let formatted;return formatted=ms<10?"".concat(ms.toFixed(2),"ms"):ms<100?"".concat(ms.toFixed(1),"ms"):ms<1e3?"".concat(ms.toFixed(0),"ms"):"".concat((ms/1e3).toFixed(2),"s"),formatted}(opts.total)):"";message=function addColor(string,color,background){return is_browser.Z||"string"!=typeof string||(color&&(color=getColor(color),string="[".concat(color,"m").concat(string,"[39m")),background&&(color=getColor(background),string="[".concat(background+10,"m").concat(string,"[49m"))),string}(message=opts.time?"".concat(id,": ").concat(time,"  ").concat(message):"".concat(id,": ").concat(message),opts.color,opts.background)}return message}(this.id,opts.message,opts),method.bind(console,message,...opts.args)}return noop}}function normalizeLogLevel(logLevel){if(!logLevel)return 0;let resolvedLevel;switch(typeof logLevel){case"number":resolvedLevel=logLevel;break;case"object":resolvedLevel=logLevel.logLevel||logLevel.priority||0;break;default:return 0}return assert(Number.isFinite(resolvedLevel)&&resolvedLevel>=0),resolvedLevel}function normalizeArguments(opts){const{logLevel:logLevel,message:message}=opts;opts.logLevel=normalizeLogLevel(logLevel);const args=opts.args?Array.from(opts.args):[];for(;args.length&&args.shift()!==message;);switch(typeof logLevel){case"string":case"function":void 0!==message&&args.unshift(message),opts.message=logLevel;break;case"object":Object.assign(opts,logLevel)}"function"==typeof opts.message&&(opts.message=opts.message());const messageType=typeof opts.message;return assert("string"===messageType||"object"===messageType),Object.assign(opts,{args:args},opts.opts)}function getTableHeader(table){for(const key in table)for(const title in table[key])return title||"untitled";return"empty"}(0,defineProperty.Z)(Log,"VERSION",VERSION)},"./node_modules/@probe.gl/stats/dist/esm/index.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{jk:function(){return Stats}});var defineProperty=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),process=__webpack_require__("./node_modules/process/browser.js");function getHiResTimestamp(){let timestamp;if("undefined"!=typeof window&&window.performance)timestamp=window.performance.now();else if(void 0!==process&&process.hrtime){const timeParts=process.hrtime();timestamp=1e3*timeParts[0]+timeParts[1]/1e6}else timestamp=Date.now();return timestamp}class Stat{constructor(name,type){(0,defineProperty.Z)(this,"name",void 0),(0,defineProperty.Z)(this,"type",void 0),(0,defineProperty.Z)(this,"sampleSize",1),(0,defineProperty.Z)(this,"time",void 0),(0,defineProperty.Z)(this,"count",void 0),(0,defineProperty.Z)(this,"samples",void 0),(0,defineProperty.Z)(this,"lastTiming",void 0),(0,defineProperty.Z)(this,"lastSampleTime",void 0),(0,defineProperty.Z)(this,"lastSampleCount",void 0),(0,defineProperty.Z)(this,"_count",0),(0,defineProperty.Z)(this,"_time",0),(0,defineProperty.Z)(this,"_samples",0),(0,defineProperty.Z)(this,"_startTime",0),(0,defineProperty.Z)(this,"_timerPending",!1),this.name=name,this.type=type,this.reset()}setSampleSize(samples){return this.sampleSize=samples,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(value){return this._count+=value,this._samples++,this._checkSampling(),this}subtractCount(value){return this._count-=value,this._samples++,this._checkSampling(),this}addTime(time){return this._time+=time,this.lastTiming=time,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=getHiResTimestamp(),this._timerPending=!0,this}timeEnd(){return this._timerPending?(this.addTime(getHiResTimestamp()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}class Stats{constructor(options){(0,defineProperty.Z)(this,"id",void 0),(0,defineProperty.Z)(this,"stats",{}),this.id=options.id,this.stats={},this._initializeStats(options.stats),Object.seal(this)}get(name){let type=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"count";return this._getOrCreate({name:name,type:type})}get size(){return Object.keys(this.stats).length}reset(){for(const key in this.stats)this.stats[key].reset();return this}forEach(fn){for(const key in this.stats)fn(this.stats[key])}getTable(){const table={};return this.forEach((stat=>{table[stat.name]={time:stat.time||0,count:stat.count||0,average:stat.getAverageTime()||0,hz:stat.getHz()||0}})),table}_initializeStats(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach((stat=>this._getOrCreate(stat)))}_getOrCreate(stat){if(!stat||!stat.name)return null;const{name:name,type:type}=stat;return this.stats[name]||(this.stats[name]=stat instanceof Stat?stat:new Stat(name,type)),this.stats[name]}}},"./node_modules/gl-matrix/esm/common.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Ib:function(){return EPSILON},WT:function(){return ARRAY_TYPE}});var EPSILON=1e-6,ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array;Math.random;Math.PI;Math.hypot||(Math.hypot=function(){for(var y=0,i=arguments.length;i--;)y+=arguments[i]*arguments[i];return Math.sqrt(y)})},"./node_modules/gl-matrix/esm/mat4.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{G3:function(){return perspective},GH:function(){return determinant},Iu:function(){return translate},Jp:function(){return multiply},M5:function(){return ortho},Q$:function(){return getScaling},U1:function(){return rotate},U_:function(){return invert},al:function(){return fromValues},bA:function(){return scale},en:function(){return fromQuat},fS:function(){return equals},jI:function(){return rotateZ},lM:function(){return rotateX},oy:function(){return frustum},p4:function(){return transpose},uD:function(){return rotateY},zB:function(){return lookAt}});var _common_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/gl-matrix/esm/common.js");function fromValues(m00,m01,m02,m03,m10,m11,m12,m13,m20,m21,m22,m23,m30,m31,m32,m33){var out=new _common_js__WEBPACK_IMPORTED_MODULE_0__.WT(16);return out[0]=m00,out[1]=m01,out[2]=m02,out[3]=m03,out[4]=m10,out[5]=m11,out[6]=m12,out[7]=m13,out[8]=m20,out[9]=m21,out[10]=m22,out[11]=m23,out[12]=m30,out[13]=m31,out[14]=m32,out[15]=m33,out}function transpose(out,a){if(out===a){var a01=a[1],a02=a[2],a03=a[3],a12=a[6],a13=a[7],a23=a[11];out[1]=a[4],out[2]=a[8],out[3]=a[12],out[4]=a01,out[6]=a[9],out[7]=a[13],out[8]=a02,out[9]=a12,out[11]=a[14],out[12]=a03,out[13]=a13,out[14]=a23}else out[0]=a[0],out[1]=a[4],out[2]=a[8],out[3]=a[12],out[4]=a[1],out[5]=a[5],out[6]=a[9],out[7]=a[13],out[8]=a[2],out[9]=a[6],out[10]=a[10],out[11]=a[14],out[12]=a[3],out[13]=a[7],out[14]=a[11],out[15]=a[15];return out}function invert(out,a){var a00=a[0],a01=a[1],a02=a[2],a03=a[3],a10=a[4],a11=a[5],a12=a[6],a13=a[7],a20=a[8],a21=a[9],a22=a[10],a23=a[11],a30=a[12],a31=a[13],a32=a[14],a33=a[15],b00=a00*a11-a01*a10,b01=a00*a12-a02*a10,b02=a00*a13-a03*a10,b03=a01*a12-a02*a11,b04=a01*a13-a03*a11,b05=a02*a13-a03*a12,b06=a20*a31-a21*a30,b07=a20*a32-a22*a30,b08=a20*a33-a23*a30,b09=a21*a32-a22*a31,b10=a21*a33-a23*a31,b11=a22*a33-a23*a32,det=b00*b11-b01*b10+b02*b09+b03*b08-b04*b07+b05*b06;return det?(det=1/det,out[0]=(a11*b11-a12*b10+a13*b09)*det,out[1]=(a02*b10-a01*b11-a03*b09)*det,out[2]=(a31*b05-a32*b04+a33*b03)*det,out[3]=(a22*b04-a21*b05-a23*b03)*det,out[4]=(a12*b08-a10*b11-a13*b07)*det,out[5]=(a00*b11-a02*b08+a03*b07)*det,out[6]=(a32*b02-a30*b05-a33*b01)*det,out[7]=(a20*b05-a22*b02+a23*b01)*det,out[8]=(a10*b10-a11*b08+a13*b06)*det,out[9]=(a01*b08-a00*b10-a03*b06)*det,out[10]=(a30*b04-a31*b02+a33*b00)*det,out[11]=(a21*b02-a20*b04-a23*b00)*det,out[12]=(a11*b07-a10*b09-a12*b06)*det,out[13]=(a00*b09-a01*b07+a02*b06)*det,out[14]=(a31*b01-a30*b03-a32*b00)*det,out[15]=(a20*b03-a21*b01+a22*b00)*det,out):null}function determinant(a){var a00=a[0],a01=a[1],a02=a[2],a03=a[3],a10=a[4],a11=a[5],a12=a[6],a13=a[7],a20=a[8],a21=a[9],a22=a[10],a23=a[11],a30=a[12],a31=a[13],a32=a[14],a33=a[15];return(a00*a11-a01*a10)*(a22*a33-a23*a32)-(a00*a12-a02*a10)*(a21*a33-a23*a31)+(a00*a13-a03*a10)*(a21*a32-a22*a31)+(a01*a12-a02*a11)*(a20*a33-a23*a30)-(a01*a13-a03*a11)*(a20*a32-a22*a30)+(a02*a13-a03*a12)*(a20*a31-a21*a30)}function multiply(out,a,b){var a00=a[0],a01=a[1],a02=a[2],a03=a[3],a10=a[4],a11=a[5],a12=a[6],a13=a[7],a20=a[8],a21=a[9],a22=a[10],a23=a[11],a30=a[12],a31=a[13],a32=a[14],a33=a[15],b0=b[0],b1=b[1],b2=b[2],b3=b[3];return out[0]=b0*a00+b1*a10+b2*a20+b3*a30,out[1]=b0*a01+b1*a11+b2*a21+b3*a31,out[2]=b0*a02+b1*a12+b2*a22+b3*a32,out[3]=b0*a03+b1*a13+b2*a23+b3*a33,b0=b[4],b1=b[5],b2=b[6],b3=b[7],out[4]=b0*a00+b1*a10+b2*a20+b3*a30,out[5]=b0*a01+b1*a11+b2*a21+b3*a31,out[6]=b0*a02+b1*a12+b2*a22+b3*a32,out[7]=b0*a03+b1*a13+b2*a23+b3*a33,b0=b[8],b1=b[9],b2=b[10],b3=b[11],out[8]=b0*a00+b1*a10+b2*a20+b3*a30,out[9]=b0*a01+b1*a11+b2*a21+b3*a31,out[10]=b0*a02+b1*a12+b2*a22+b3*a32,out[11]=b0*a03+b1*a13+b2*a23+b3*a33,b0=b[12],b1=b[13],b2=b[14],b3=b[15],out[12]=b0*a00+b1*a10+b2*a20+b3*a30,out[13]=b0*a01+b1*a11+b2*a21+b3*a31,out[14]=b0*a02+b1*a12+b2*a22+b3*a32,out[15]=b0*a03+b1*a13+b2*a23+b3*a33,out}function translate(out,a,v){var a00,a01,a02,a03,a10,a11,a12,a13,a20,a21,a22,a23,x=v[0],y=v[1],z=v[2];return a===out?(out[12]=a[0]*x+a[4]*y+a[8]*z+a[12],out[13]=a[1]*x+a[5]*y+a[9]*z+a[13],out[14]=a[2]*x+a[6]*y+a[10]*z+a[14],out[15]=a[3]*x+a[7]*y+a[11]*z+a[15]):(a00=a[0],a01=a[1],a02=a[2],a03=a[3],a10=a[4],a11=a[5],a12=a[6],a13=a[7],a20=a[8],a21=a[9],a22=a[10],a23=a[11],out[0]=a00,out[1]=a01,out[2]=a02,out[3]=a03,out[4]=a10,out[5]=a11,out[6]=a12,out[7]=a13,out[8]=a20,out[9]=a21,out[10]=a22,out[11]=a23,out[12]=a00*x+a10*y+a20*z+a[12],out[13]=a01*x+a11*y+a21*z+a[13],out[14]=a02*x+a12*y+a22*z+a[14],out[15]=a03*x+a13*y+a23*z+a[15]),out}function scale(out,a,v){var x=v[0],y=v[1],z=v[2];return out[0]=a[0]*x,out[1]=a[1]*x,out[2]=a[2]*x,out[3]=a[3]*x,out[4]=a[4]*y,out[5]=a[5]*y,out[6]=a[6]*y,out[7]=a[7]*y,out[8]=a[8]*z,out[9]=a[9]*z,out[10]=a[10]*z,out[11]=a[11]*z,out[12]=a[12],out[13]=a[13],out[14]=a[14],out[15]=a[15],out}function rotate(out,a,rad,axis){var s,c,t,a00,a01,a02,a03,a10,a11,a12,a13,a20,a21,a22,a23,b00,b01,b02,b10,b11,b12,b20,b21,b22,x=axis[0],y=axis[1],z=axis[2],len=Math.hypot(x,y,z);return len<_common_js__WEBPACK_IMPORTED_MODULE_0__.Ib?null:(x*=len=1/len,y*=len,z*=len,s=Math.sin(rad),t=1-(c=Math.cos(rad)),a00=a[0],a01=a[1],a02=a[2],a03=a[3],a10=a[4],a11=a[5],a12=a[6],a13=a[7],a20=a[8],a21=a[9],a22=a[10],a23=a[11],b00=x*x*t+c,b01=y*x*t+z*s,b02=z*x*t-y*s,b10=x*y*t-z*s,b11=y*y*t+c,b12=z*y*t+x*s,b20=x*z*t+y*s,b21=y*z*t-x*s,b22=z*z*t+c,out[0]=a00*b00+a10*b01+a20*b02,out[1]=a01*b00+a11*b01+a21*b02,out[2]=a02*b00+a12*b01+a22*b02,out[3]=a03*b00+a13*b01+a23*b02,out[4]=a00*b10+a10*b11+a20*b12,out[5]=a01*b10+a11*b11+a21*b12,out[6]=a02*b10+a12*b11+a22*b12,out[7]=a03*b10+a13*b11+a23*b12,out[8]=a00*b20+a10*b21+a20*b22,out[9]=a01*b20+a11*b21+a21*b22,out[10]=a02*b20+a12*b21+a22*b22,out[11]=a03*b20+a13*b21+a23*b22,a!==out&&(out[12]=a[12],out[13]=a[13],out[14]=a[14],out[15]=a[15]),out)}function rotateX(out,a,rad){var s=Math.sin(rad),c=Math.cos(rad),a10=a[4],a11=a[5],a12=a[6],a13=a[7],a20=a[8],a21=a[9],a22=a[10],a23=a[11];return a!==out&&(out[0]=a[0],out[1]=a[1],out[2]=a[2],out[3]=a[3],out[12]=a[12],out[13]=a[13],out[14]=a[14],out[15]=a[15]),out[4]=a10*c+a20*s,out[5]=a11*c+a21*s,out[6]=a12*c+a22*s,out[7]=a13*c+a23*s,out[8]=a20*c-a10*s,out[9]=a21*c-a11*s,out[10]=a22*c-a12*s,out[11]=a23*c-a13*s,out}function rotateY(out,a,rad){var s=Math.sin(rad),c=Math.cos(rad),a00=a[0],a01=a[1],a02=a[2],a03=a[3],a20=a[8],a21=a[9],a22=a[10],a23=a[11];return a!==out&&(out[4]=a[4],out[5]=a[5],out[6]=a[6],out[7]=a[7],out[12]=a[12],out[13]=a[13],out[14]=a[14],out[15]=a[15]),out[0]=a00*c-a20*s,out[1]=a01*c-a21*s,out[2]=a02*c-a22*s,out[3]=a03*c-a23*s,out[8]=a00*s+a20*c,out[9]=a01*s+a21*c,out[10]=a02*s+a22*c,out[11]=a03*s+a23*c,out}function rotateZ(out,a,rad){var s=Math.sin(rad),c=Math.cos(rad),a00=a[0],a01=a[1],a02=a[2],a03=a[3],a10=a[4],a11=a[5],a12=a[6],a13=a[7];return a!==out&&(out[8]=a[8],out[9]=a[9],out[10]=a[10],out[11]=a[11],out[12]=a[12],out[13]=a[13],out[14]=a[14],out[15]=a[15]),out[0]=a00*c+a10*s,out[1]=a01*c+a11*s,out[2]=a02*c+a12*s,out[3]=a03*c+a13*s,out[4]=a10*c-a00*s,out[5]=a11*c-a01*s,out[6]=a12*c-a02*s,out[7]=a13*c-a03*s,out}function getScaling(out,mat){var m11=mat[0],m12=mat[1],m13=mat[2],m21=mat[4],m22=mat[5],m23=mat[6],m31=mat[8],m32=mat[9],m33=mat[10];return out[0]=Math.hypot(m11,m12,m13),out[1]=Math.hypot(m21,m22,m23),out[2]=Math.hypot(m31,m32,m33),out}function fromQuat(out,q){var x=q[0],y=q[1],z=q[2],w=q[3],x2=x+x,y2=y+y,z2=z+z,xx=x*x2,yx=y*x2,yy=y*y2,zx=z*x2,zy=z*y2,zz=z*z2,wx=w*x2,wy=w*y2,wz=w*z2;return out[0]=1-yy-zz,out[1]=yx+wz,out[2]=zx-wy,out[3]=0,out[4]=yx-wz,out[5]=1-xx-zz,out[6]=zy+wx,out[7]=0,out[8]=zx+wy,out[9]=zy-wx,out[10]=1-xx-yy,out[11]=0,out[12]=0,out[13]=0,out[14]=0,out[15]=1,out}function frustum(out,left,right,bottom,top,near,far){var rl=1/(right-left),tb=1/(top-bottom),nf=1/(near-far);return out[0]=2*near*rl,out[1]=0,out[2]=0,out[3]=0,out[4]=0,out[5]=2*near*tb,out[6]=0,out[7]=0,out[8]=(right+left)*rl,out[9]=(top+bottom)*tb,out[10]=(far+near)*nf,out[11]=-1,out[12]=0,out[13]=0,out[14]=far*near*2*nf,out[15]=0,out}var perspective=function perspectiveNO(out,fovy,aspect,near,far){var nf,f=1/Math.tan(fovy/2);return out[0]=f/aspect,out[1]=0,out[2]=0,out[3]=0,out[4]=0,out[5]=f,out[6]=0,out[7]=0,out[8]=0,out[9]=0,out[11]=-1,out[12]=0,out[13]=0,out[15]=0,null!=far&&far!==1/0?(nf=1/(near-far),out[10]=(far+near)*nf,out[14]=2*far*near*nf):(out[10]=-1,out[14]=-2*near),out};var ortho=function orthoNO(out,left,right,bottom,top,near,far){var lr=1/(left-right),bt=1/(bottom-top),nf=1/(near-far);return out[0]=-2*lr,out[1]=0,out[2]=0,out[3]=0,out[4]=0,out[5]=-2*bt,out[6]=0,out[7]=0,out[8]=0,out[9]=0,out[10]=2*nf,out[11]=0,out[12]=(left+right)*lr,out[13]=(top+bottom)*bt,out[14]=(far+near)*nf,out[15]=1,out};function lookAt(out,eye,center,up){var x0,x1,x2,y0,y1,y2,z0,z1,z2,len,eyex=eye[0],eyey=eye[1],eyez=eye[2],upx=up[0],upy=up[1],upz=up[2],centerx=center[0],centery=center[1],centerz=center[2];return Math.abs(eyex-centerx)<_common_js__WEBPACK_IMPORTED_MODULE_0__.Ib&&Math.abs(eyey-centery)<_common_js__WEBPACK_IMPORTED_MODULE_0__.Ib&&Math.abs(eyez-centerz)<_common_js__WEBPACK_IMPORTED_MODULE_0__.Ib?function identity(out){return out[0]=1,out[1]=0,out[2]=0,out[3]=0,out[4]=0,out[5]=1,out[6]=0,out[7]=0,out[8]=0,out[9]=0,out[10]=1,out[11]=0,out[12]=0,out[13]=0,out[14]=0,out[15]=1,out}(out):(z0=eyex-centerx,z1=eyey-centery,z2=eyez-centerz,x0=upy*(z2*=len=1/Math.hypot(z0,z1,z2))-upz*(z1*=len),x1=upz*(z0*=len)-upx*z2,x2=upx*z1-upy*z0,(len=Math.hypot(x0,x1,x2))?(x0*=len=1/len,x1*=len,x2*=len):(x0=0,x1=0,x2=0),y0=z1*x2-z2*x1,y1=z2*x0-z0*x2,y2=z0*x1-z1*x0,(len=Math.hypot(y0,y1,y2))?(y0*=len=1/len,y1*=len,y2*=len):(y0=0,y1=0,y2=0),out[0]=x0,out[1]=y0,out[2]=z0,out[3]=0,out[4]=x1,out[5]=y1,out[6]=z1,out[7]=0,out[8]=x2,out[9]=y2,out[10]=z2,out[11]=0,out[12]=-(x0*eyex+x1*eyey+x2*eyez),out[13]=-(y0*eyex+y1*eyey+y2*eyez),out[14]=-(z0*eyex+z1*eyey+z2*eyez),out[15]=1,out)}function equals(a,b){var a0=a[0],a1=a[1],a2=a[2],a3=a[3],a4=a[4],a5=a[5],a6=a[6],a7=a[7],a8=a[8],a9=a[9],a10=a[10],a11=a[11],a12=a[12],a13=a[13],a14=a[14],a15=a[15],b0=b[0],b1=b[1],b2=b[2],b3=b[3],b4=b[4],b5=b[5],b6=b[6],b7=b[7],b8=b[8],b9=b[9],b10=b[10],b11=b[11],b12=b[12],b13=b[13],b14=b[14],b15=b[15];return Math.abs(a0-b0)<=_common_js__WEBPACK_IMPORTED_MODULE_0__.Ib*Math.max(1,Math.abs(a0),Math.abs(b0))&&Math.abs(a1-b1)<=_common_js__WEBPACK_IMPORTED_MODULE_0__.Ib*Math.max(1,Math.abs(a1),Math.abs(b1))&&Math.abs(a2-b2)<=_common_js__WEBPACK_IMPORTED_MODULE_0__.Ib*Math.max(1,Math.abs(a2),Math.abs(b2))&&Math.abs(a3-b3)<=_common_js__WEBPACK_IMPORTED_MODULE_0__.Ib*Math.max(1,Math.abs(a3),Math.abs(b3))&&Math.abs(a4-b4)<=_common_js__WEBPACK_IMPORTED_MODULE_0__.Ib*Math.max(1,Math.abs(a4),Math.abs(b4))&&Math.abs(a5-b5)<=_common_js__WEBPACK_IMPORTED_MODULE_0__.Ib*Math.max(1,Math.abs(a5),Math.abs(b5))&&Math.abs(a6-b6)<=_common_js__WEBPACK_IMPORTED_MODULE_0__.Ib*Math.max(1,Math.abs(a6),Math.abs(b6))&&Math.abs(a7-b7)<=_common_js__WEBPACK_IMPORTED_MODULE_0__.Ib*Math.max(1,Math.abs(a7),Math.abs(b7))&&Math.abs(a8-b8)<=_common_js__WEBPACK_IMPORTED_MODULE_0__.Ib*Math.max(1,Math.abs(a8),Math.abs(b8))&&Math.abs(a9-b9)<=_common_js__WEBPACK_IMPORTED_MODULE_0__.Ib*Math.max(1,Math.abs(a9),Math.abs(b9))&&Math.abs(a10-b10)<=_common_js__WEBPACK_IMPORTED_MODULE_0__.Ib*Math.max(1,Math.abs(a10),Math.abs(b10))&&Math.abs(a11-b11)<=_common_js__WEBPACK_IMPORTED_MODULE_0__.Ib*Math.max(1,Math.abs(a11),Math.abs(b11))&&Math.abs(a12-b12)<=_common_js__WEBPACK_IMPORTED_MODULE_0__.Ib*Math.max(1,Math.abs(a12),Math.abs(b12))&&Math.abs(a13-b13)<=_common_js__WEBPACK_IMPORTED_MODULE_0__.Ib*Math.max(1,Math.abs(a13),Math.abs(b13))&&Math.abs(a14-b14)<=_common_js__WEBPACK_IMPORTED_MODULE_0__.Ib*Math.max(1,Math.abs(a14),Math.abs(b14))&&Math.abs(a15-b15)<=_common_js__WEBPACK_IMPORTED_MODULE_0__.Ib*Math.max(1,Math.abs(a15),Math.abs(b15))}},"./node_modules/gl-matrix/esm/vec2.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{IH:function(){return add},bA:function(){return scale},c:function(){return transformMat2},fF:function(){return transformMat4},iu:function(){return transformMat2d},kE:function(){return length},kK:function(){return transformMat3},lu:function(){return sub},t7:function(){return lerp},tk:function(){return negate}});var _common_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/gl-matrix/esm/common.js");function add(out,a,b){return out[0]=a[0]+b[0],out[1]=a[1]+b[1],out}function scale(out,a,b){return out[0]=a[0]*b,out[1]=a[1]*b,out}function length(a){var x=a[0],y=a[1];return Math.hypot(x,y)}function negate(out,a){return out[0]=-a[0],out[1]=-a[1],out}function lerp(out,a,b,t){var ax=a[0],ay=a[1];return out[0]=ax+t*(b[0]-ax),out[1]=ay+t*(b[1]-ay),out}function transformMat2(out,a,m){var x=a[0],y=a[1];return out[0]=m[0]*x+m[2]*y,out[1]=m[1]*x+m[3]*y,out}function transformMat2d(out,a,m){var x=a[0],y=a[1];return out[0]=m[0]*x+m[2]*y+m[4],out[1]=m[1]*x+m[3]*y+m[5],out}function transformMat3(out,a,m){var x=a[0],y=a[1];return out[0]=m[0]*x+m[3]*y+m[6],out[1]=m[1]*x+m[4]*y+m[7],out}function transformMat4(out,a,m){var x=a[0],y=a[1];return out[0]=m[0]*x+m[4]*y+m[12],out[1]=m[1]*x+m[5]*y+m[13],out}var vec,sub=function subtract(out,a,b){return out[0]=a[0]-b[0],out[1]=a[1]-b[1],out};vec=function create(){var out=new _common_js__WEBPACK_IMPORTED_MODULE_0__.WT(2);return _common_js__WEBPACK_IMPORTED_MODULE_0__.WT!=Float32Array&&(out[0]=0,out[1]=0),out}()},"./node_modules/gl-matrix/esm/vec3.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{AK:function(){return dot},EU:function(){return angle},Fv:function(){return normalize},IH:function(){return add},TK:function(){return dist},Ue:function(){return create},VC:function(){return transformQuat},Zh:function(){return len},al:function(){return fromValues},dC:function(){return mul},fF:function(){return transformMat4},jI:function(){return rotateZ},kC:function(){return cross},kE:function(){return length},kK:function(){return transformMat3},lM:function(){return rotateX},lu:function(){return sub},t7:function(){return lerp},tk:function(){return negate},uD:function(){return rotateY},x9:function(){return sqrLen}});var _common_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/gl-matrix/esm/common.js");function create(){var out=new _common_js__WEBPACK_IMPORTED_MODULE_0__.WT(3);return _common_js__WEBPACK_IMPORTED_MODULE_0__.WT!=Float32Array&&(out[0]=0,out[1]=0,out[2]=0),out}function length(a){var x=a[0],y=a[1],z=a[2];return Math.hypot(x,y,z)}function fromValues(x,y,z){var out=new _common_js__WEBPACK_IMPORTED_MODULE_0__.WT(3);return out[0]=x,out[1]=y,out[2]=z,out}function add(out,a,b){return out[0]=a[0]+b[0],out[1]=a[1]+b[1],out[2]=a[2]+b[2],out}function negate(out,a){return out[0]=-a[0],out[1]=-a[1],out[2]=-a[2],out}function normalize(out,a){var x=a[0],y=a[1],z=a[2],len=x*x+y*y+z*z;return len>0&&(len=1/Math.sqrt(len)),out[0]=a[0]*len,out[1]=a[1]*len,out[2]=a[2]*len,out}function dot(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]}function cross(out,a,b){var ax=a[0],ay=a[1],az=a[2],bx=b[0],by=b[1],bz=b[2];return out[0]=ay*bz-az*by,out[1]=az*bx-ax*bz,out[2]=ax*by-ay*bx,out}function lerp(out,a,b,t){var ax=a[0],ay=a[1],az=a[2];return out[0]=ax+t*(b[0]-ax),out[1]=ay+t*(b[1]-ay),out[2]=az+t*(b[2]-az),out}function transformMat4(out,a,m){var x=a[0],y=a[1],z=a[2],w=m[3]*x+m[7]*y+m[11]*z+m[15];return w=w||1,out[0]=(m[0]*x+m[4]*y+m[8]*z+m[12])/w,out[1]=(m[1]*x+m[5]*y+m[9]*z+m[13])/w,out[2]=(m[2]*x+m[6]*y+m[10]*z+m[14])/w,out}function transformMat3(out,a,m){var x=a[0],y=a[1],z=a[2];return out[0]=x*m[0]+y*m[3]+z*m[6],out[1]=x*m[1]+y*m[4]+z*m[7],out[2]=x*m[2]+y*m[5]+z*m[8],out}function transformQuat(out,a,q){var qx=q[0],qy=q[1],qz=q[2],qw=q[3],x=a[0],y=a[1],z=a[2],uvx=qy*z-qz*y,uvy=qz*x-qx*z,uvz=qx*y-qy*x,uuvx=qy*uvz-qz*uvy,uuvy=qz*uvx-qx*uvz,uuvz=qx*uvy-qy*uvx,w2=2*qw;return uvx*=w2,uvy*=w2,uvz*=w2,uuvx*=2,uuvy*=2,uuvz*=2,out[0]=x+uvx+uuvx,out[1]=y+uvy+uuvy,out[2]=z+uvz+uuvz,out}function rotateX(out,a,b,rad){var p=[],r=[];return p[0]=a[0]-b[0],p[1]=a[1]-b[1],p[2]=a[2]-b[2],r[0]=p[0],r[1]=p[1]*Math.cos(rad)-p[2]*Math.sin(rad),r[2]=p[1]*Math.sin(rad)+p[2]*Math.cos(rad),out[0]=r[0]+b[0],out[1]=r[1]+b[1],out[2]=r[2]+b[2],out}function rotateY(out,a,b,rad){var p=[],r=[];return p[0]=a[0]-b[0],p[1]=a[1]-b[1],p[2]=a[2]-b[2],r[0]=p[2]*Math.sin(rad)+p[0]*Math.cos(rad),r[1]=p[1],r[2]=p[2]*Math.cos(rad)-p[0]*Math.sin(rad),out[0]=r[0]+b[0],out[1]=r[1]+b[1],out[2]=r[2]+b[2],out}function rotateZ(out,a,b,rad){var p=[],r=[];return p[0]=a[0]-b[0],p[1]=a[1]-b[1],p[2]=a[2]-b[2],r[0]=p[0]*Math.cos(rad)-p[1]*Math.sin(rad),r[1]=p[0]*Math.sin(rad)+p[1]*Math.cos(rad),r[2]=p[2],out[0]=r[0]+b[0],out[1]=r[1]+b[1],out[2]=r[2]+b[2],out}function angle(a,b){var ax=a[0],ay=a[1],az=a[2],bx=b[0],by=b[1],bz=b[2],mag=Math.sqrt(ax*ax+ay*ay+az*az)*Math.sqrt(bx*bx+by*by+bz*bz),cosine=mag&&dot(a,b)/mag;return Math.acos(Math.min(Math.max(cosine,-1),1))}var vec,sub=function subtract(out,a,b){return out[0]=a[0]-b[0],out[1]=a[1]-b[1],out[2]=a[2]-b[2],out},mul=function multiply(out,a,b){return out[0]=a[0]*b[0],out[1]=a[1]*b[1],out[2]=a[2]*b[2],out},dist=function distance(a,b){var x=b[0]-a[0],y=b[1]-a[1],z=b[2]-a[2];return Math.hypot(x,y,z)},len=length,sqrLen=function squaredLength(a){var x=a[0],y=a[1],z=a[2];return x*x+y*y+z*z};vec=create()},"./node_modules/gl-matrix/esm/vec4.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{AK:function(){return dot},Fv:function(){return normalize},I6:function(){return exactEquals},IH:function(){return add},JG:function(){return copy},Ue:function(){return create},VC:function(){return transformQuat},al:function(){return fromValues},bA:function(){return scale},d9:function(){return clone},fF:function(){return transformMat4},fS:function(){return equals},kE:function(){return length},t7:function(){return lerp},t8:function(){return set},we:function(){return squaredLength}});var _common_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/gl-matrix/esm/common.js");function create(){var out=new _common_js__WEBPACK_IMPORTED_MODULE_0__.WT(4);return _common_js__WEBPACK_IMPORTED_MODULE_0__.WT!=Float32Array&&(out[0]=0,out[1]=0,out[2]=0,out[3]=0),out}function clone(a){var out=new _common_js__WEBPACK_IMPORTED_MODULE_0__.WT(4);return out[0]=a[0],out[1]=a[1],out[2]=a[2],out[3]=a[3],out}function fromValues(x,y,z,w){var out=new _common_js__WEBPACK_IMPORTED_MODULE_0__.WT(4);return out[0]=x,out[1]=y,out[2]=z,out[3]=w,out}function copy(out,a){return out[0]=a[0],out[1]=a[1],out[2]=a[2],out[3]=a[3],out}function set(out,x,y,z,w){return out[0]=x,out[1]=y,out[2]=z,out[3]=w,out}function add(out,a,b){return out[0]=a[0]+b[0],out[1]=a[1]+b[1],out[2]=a[2]+b[2],out[3]=a[3]+b[3],out}function scale(out,a,b){return out[0]=a[0]*b,out[1]=a[1]*b,out[2]=a[2]*b,out[3]=a[3]*b,out}function length(a){var x=a[0],y=a[1],z=a[2],w=a[3];return Math.hypot(x,y,z,w)}function squaredLength(a){var x=a[0],y=a[1],z=a[2],w=a[3];return x*x+y*y+z*z+w*w}function normalize(out,a){var x=a[0],y=a[1],z=a[2],w=a[3],len=x*x+y*y+z*z+w*w;return len>0&&(len=1/Math.sqrt(len)),out[0]=x*len,out[1]=y*len,out[2]=z*len,out[3]=w*len,out}function dot(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]}function lerp(out,a,b,t){var ax=a[0],ay=a[1],az=a[2],aw=a[3];return out[0]=ax+t*(b[0]-ax),out[1]=ay+t*(b[1]-ay),out[2]=az+t*(b[2]-az),out[3]=aw+t*(b[3]-aw),out}function transformMat4(out,a,m){var x=a[0],y=a[1],z=a[2],w=a[3];return out[0]=m[0]*x+m[4]*y+m[8]*z+m[12]*w,out[1]=m[1]*x+m[5]*y+m[9]*z+m[13]*w,out[2]=m[2]*x+m[6]*y+m[10]*z+m[14]*w,out[3]=m[3]*x+m[7]*y+m[11]*z+m[15]*w,out}function transformQuat(out,a,q){var x=a[0],y=a[1],z=a[2],qx=q[0],qy=q[1],qz=q[2],qw=q[3],ix=qw*x+qy*z-qz*y,iy=qw*y+qz*x-qx*z,iz=qw*z+qx*y-qy*x,iw=-qx*x-qy*y-qz*z;return out[0]=ix*qw+iw*-qx+iy*-qz-iz*-qy,out[1]=iy*qw+iw*-qy+iz*-qx-ix*-qz,out[2]=iz*qw+iw*-qz+ix*-qy-iy*-qx,out[3]=a[3],out}function exactEquals(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]}function equals(a,b){var a0=a[0],a1=a[1],a2=a[2],a3=a[3],b0=b[0],b1=b[1],b2=b[2],b3=b[3];return Math.abs(a0-b0)<=_common_js__WEBPACK_IMPORTED_MODULE_0__.Ib*Math.max(1,Math.abs(a0),Math.abs(b0))&&Math.abs(a1-b1)<=_common_js__WEBPACK_IMPORTED_MODULE_0__.Ib*Math.max(1,Math.abs(a1),Math.abs(b1))&&Math.abs(a2-b2)<=_common_js__WEBPACK_IMPORTED_MODULE_0__.Ib*Math.max(1,Math.abs(a2),Math.abs(b2))&&Math.abs(a3-b3)<=_common_js__WEBPACK_IMPORTED_MODULE_0__.Ib*Math.max(1,Math.abs(a3),Math.abs(b3))}var vec;vec=create()},"./node_modules/hammerjs/hammer.js":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;!function(window,document,exportName,undefined){"use strict";var assign,VENDOR_PREFIXES=["","webkit","Moz","MS","ms","o"],TEST_ELEMENT=document.createElement("div"),TYPE_FUNCTION="function",round=Math.round,abs=Math.abs,now=Date.now;function setTimeoutContext(fn,timeout,context){return setTimeout(bindFn(fn,context),timeout)}function invokeArrayArg(arg,fn,context){return!!Array.isArray(arg)&&(each(arg,context[fn],context),!0)}function each(obj,iterator,context){var i;if(obj)if(obj.forEach)obj.forEach(iterator,context);else if(obj.length!==undefined)for(i=0;i<obj.length;)iterator.call(context,obj[i],i,obj),i++;else for(i in obj)obj.hasOwnProperty(i)&&iterator.call(context,obj[i],i,obj)}function deprecate(method,name,message){var deprecationMessage="DEPRECATED METHOD: "+name+"\n"+message+" AT \n";return function(){var e=new Error("get-stack-trace"),stack=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",log=window.console&&(window.console.warn||window.console.log);return log&&log.call(window.console,deprecationMessage,stack),method.apply(this,arguments)}}assign="function"!=typeof Object.assign?function assign(target){if(target===undefined||null===target)throw new TypeError("Cannot convert undefined or null to object");for(var output=Object(target),index=1;index<arguments.length;index++){var source=arguments[index];if(source!==undefined&&null!==source)for(var nextKey in source)source.hasOwnProperty(nextKey)&&(output[nextKey]=source[nextKey])}return output}:Object.assign;var extend=deprecate((function extend(dest,src,merge){for(var keys=Object.keys(src),i=0;i<keys.length;)(!merge||merge&&dest[keys[i]]===undefined)&&(dest[keys[i]]=src[keys[i]]),i++;return dest}),"extend","Use `assign`."),merge=deprecate((function merge(dest,src){return extend(dest,src,!0)}),"merge","Use `assign`.");function inherit(child,base,properties){var childP,baseP=base.prototype;(childP=child.prototype=Object.create(baseP)).constructor=child,childP._super=baseP,properties&&assign(childP,properties)}function bindFn(fn,context){return function boundFn(){return fn.apply(context,arguments)}}function boolOrFn(val,args){return typeof val==TYPE_FUNCTION?val.apply(args&&args[0]||undefined,args):val}function ifUndefined(val1,val2){return val1===undefined?val2:val1}function addEventListeners(target,types,handler){each(splitStr(types),(function(type){target.addEventListener(type,handler,!1)}))}function removeEventListeners(target,types,handler){each(splitStr(types),(function(type){target.removeEventListener(type,handler,!1)}))}function hasParent(node,parent){for(;node;){if(node==parent)return!0;node=node.parentNode}return!1}function inStr(str,find){return str.indexOf(find)>-1}function splitStr(str){return str.trim().split(/\s+/g)}function inArray(src,find,findByKey){if(src.indexOf&&!findByKey)return src.indexOf(find);for(var i=0;i<src.length;){if(findByKey&&src[i][findByKey]==find||!findByKey&&src[i]===find)return i;i++}return-1}function toArray(obj){return Array.prototype.slice.call(obj,0)}function uniqueArray(src,key,sort){for(var results=[],values=[],i=0;i<src.length;){var val=key?src[i][key]:src[i];inArray(values,val)<0&&results.push(src[i]),values[i]=val,i++}return sort&&(results=key?results.sort((function sortUniqueArray(a,b){return a[key]>b[key]})):results.sort()),results}function prefixed(obj,property){for(var prefix,prop,camelProp=property[0].toUpperCase()+property.slice(1),i=0;i<VENDOR_PREFIXES.length;){if((prop=(prefix=VENDOR_PREFIXES[i])?prefix+camelProp:property)in obj)return prop;i++}return undefined}var _uniqueId=1;function getWindowForElement(element){var doc=element.ownerDocument||element;return doc.defaultView||doc.parentWindow||window}var SUPPORT_TOUCH="ontouchstart"in window,SUPPORT_POINTER_EVENTS=prefixed(window,"PointerEvent")!==undefined,SUPPORT_ONLY_TOUCH=SUPPORT_TOUCH&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),COMPUTE_INTERVAL=25,INPUT_START=1,INPUT_END=4,INPUT_CANCEL=8,DIRECTION_NONE=1,DIRECTION_LEFT=2,DIRECTION_RIGHT=4,DIRECTION_UP=8,DIRECTION_DOWN=16,DIRECTION_HORIZONTAL=DIRECTION_LEFT|DIRECTION_RIGHT,DIRECTION_VERTICAL=DIRECTION_UP|DIRECTION_DOWN,DIRECTION_ALL=DIRECTION_HORIZONTAL|DIRECTION_VERTICAL,PROPS_XY=["x","y"],PROPS_CLIENT_XY=["clientX","clientY"];function Input(manager,callback){var self=this;this.manager=manager,this.callback=callback,this.element=manager.element,this.target=manager.options.inputTarget,this.domHandler=function(ev){boolOrFn(manager.options.enable,[manager])&&self.handler(ev)},this.init()}function inputHandler(manager,eventType,input){var pointersLen=input.pointers.length,changedPointersLen=input.changedPointers.length,isFirst=eventType&INPUT_START&&pointersLen-changedPointersLen==0,isFinal=eventType&(INPUT_END|INPUT_CANCEL)&&pointersLen-changedPointersLen==0;input.isFirst=!!isFirst,input.isFinal=!!isFinal,isFirst&&(manager.session={}),input.eventType=eventType,function computeInputData(manager,input){var session=manager.session,pointers=input.pointers,pointersLength=pointers.length;session.firstInput||(session.firstInput=simpleCloneInputData(input));pointersLength>1&&!session.firstMultiple?session.firstMultiple=simpleCloneInputData(input):1===pointersLength&&(session.firstMultiple=!1);var firstInput=session.firstInput,firstMultiple=session.firstMultiple,offsetCenter=firstMultiple?firstMultiple.center:firstInput.center,center=input.center=getCenter(pointers);input.timeStamp=now(),input.deltaTime=input.timeStamp-firstInput.timeStamp,input.angle=getAngle(offsetCenter,center),input.distance=getDistance(offsetCenter,center),function computeDeltaXY(session,input){var center=input.center,offset=session.offsetDelta||{},prevDelta=session.prevDelta||{},prevInput=session.prevInput||{};input.eventType!==INPUT_START&&prevInput.eventType!==INPUT_END||(prevDelta=session.prevDelta={x:prevInput.deltaX||0,y:prevInput.deltaY||0},offset=session.offsetDelta={x:center.x,y:center.y});input.deltaX=prevDelta.x+(center.x-offset.x),input.deltaY=prevDelta.y+(center.y-offset.y)}(session,input),input.offsetDirection=getDirection(input.deltaX,input.deltaY);var overallVelocity=getVelocity(input.deltaTime,input.deltaX,input.deltaY);input.overallVelocityX=overallVelocity.x,input.overallVelocityY=overallVelocity.y,input.overallVelocity=abs(overallVelocity.x)>abs(overallVelocity.y)?overallVelocity.x:overallVelocity.y,input.scale=firstMultiple?function getScale(start,end){return getDistance(end[0],end[1],PROPS_CLIENT_XY)/getDistance(start[0],start[1],PROPS_CLIENT_XY)}(firstMultiple.pointers,pointers):1,input.rotation=firstMultiple?function getRotation(start,end){return getAngle(end[1],end[0],PROPS_CLIENT_XY)+getAngle(start[1],start[0],PROPS_CLIENT_XY)}(firstMultiple.pointers,pointers):0,input.maxPointers=session.prevInput?input.pointers.length>session.prevInput.maxPointers?input.pointers.length:session.prevInput.maxPointers:input.pointers.length,function computeIntervalInputData(session,input){var velocity,velocityX,velocityY,direction,last=session.lastInterval||input,deltaTime=input.timeStamp-last.timeStamp;if(input.eventType!=INPUT_CANCEL&&(deltaTime>COMPUTE_INTERVAL||last.velocity===undefined)){var deltaX=input.deltaX-last.deltaX,deltaY=input.deltaY-last.deltaY,v=getVelocity(deltaTime,deltaX,deltaY);velocityX=v.x,velocityY=v.y,velocity=abs(v.x)>abs(v.y)?v.x:v.y,direction=getDirection(deltaX,deltaY),session.lastInterval=input}else velocity=last.velocity,velocityX=last.velocityX,velocityY=last.velocityY,direction=last.direction;input.velocity=velocity,input.velocityX=velocityX,input.velocityY=velocityY,input.direction=direction}(session,input);var target=manager.element;hasParent(input.srcEvent.target,target)&&(target=input.srcEvent.target);input.target=target}(manager,input),manager.emit("hammer.input",input),manager.recognize(input),manager.session.prevInput=input}function simpleCloneInputData(input){for(var pointers=[],i=0;i<input.pointers.length;)pointers[i]={clientX:round(input.pointers[i].clientX),clientY:round(input.pointers[i].clientY)},i++;return{timeStamp:now(),pointers:pointers,center:getCenter(pointers),deltaX:input.deltaX,deltaY:input.deltaY}}function getCenter(pointers){var pointersLength=pointers.length;if(1===pointersLength)return{x:round(pointers[0].clientX),y:round(pointers[0].clientY)};for(var x=0,y=0,i=0;i<pointersLength;)x+=pointers[i].clientX,y+=pointers[i].clientY,i++;return{x:round(x/pointersLength),y:round(y/pointersLength)}}function getVelocity(deltaTime,x,y){return{x:x/deltaTime||0,y:y/deltaTime||0}}function getDirection(x,y){return x===y?DIRECTION_NONE:abs(x)>=abs(y)?x<0?DIRECTION_LEFT:DIRECTION_RIGHT:y<0?DIRECTION_UP:DIRECTION_DOWN}function getDistance(p1,p2,props){props||(props=PROPS_XY);var x=p2[props[0]]-p1[props[0]],y=p2[props[1]]-p1[props[1]];return Math.sqrt(x*x+y*y)}function getAngle(p1,p2,props){props||(props=PROPS_XY);var x=p2[props[0]]-p1[props[0]],y=p2[props[1]]-p1[props[1]];return 180*Math.atan2(y,x)/Math.PI}Input.prototype={handler:function(){},init:function(){this.evEl&&addEventListeners(this.element,this.evEl,this.domHandler),this.evTarget&&addEventListeners(this.target,this.evTarget,this.domHandler),this.evWin&&addEventListeners(getWindowForElement(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&removeEventListeners(this.element,this.evEl,this.domHandler),this.evTarget&&removeEventListeners(this.target,this.evTarget,this.domHandler),this.evWin&&removeEventListeners(getWindowForElement(this.element),this.evWin,this.domHandler)}};var MOUSE_INPUT_MAP={mousedown:INPUT_START,mousemove:2,mouseup:INPUT_END},MOUSE_ELEMENT_EVENTS="mousedown",MOUSE_WINDOW_EVENTS="mousemove mouseup";function MouseInput(){this.evEl=MOUSE_ELEMENT_EVENTS,this.evWin=MOUSE_WINDOW_EVENTS,this.pressed=!1,Input.apply(this,arguments)}inherit(MouseInput,Input,{handler:function MEhandler(ev){var eventType=MOUSE_INPUT_MAP[ev.type];eventType&INPUT_START&&0===ev.button&&(this.pressed=!0),2&eventType&&1!==ev.which&&(eventType=INPUT_END),this.pressed&&(eventType&INPUT_END&&(this.pressed=!1),this.callback(this.manager,eventType,{pointers:[ev],changedPointers:[ev],pointerType:"mouse",srcEvent:ev}))}});var POINTER_INPUT_MAP={pointerdown:INPUT_START,pointermove:2,pointerup:INPUT_END,pointercancel:INPUT_CANCEL,pointerout:INPUT_CANCEL},IE10_POINTER_TYPE_ENUM={2:"touch",3:"pen",4:"mouse",5:"kinect"},POINTER_ELEMENT_EVENTS="pointerdown",POINTER_WINDOW_EVENTS="pointermove pointerup pointercancel";function PointerEventInput(){this.evEl=POINTER_ELEMENT_EVENTS,this.evWin=POINTER_WINDOW_EVENTS,Input.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}window.MSPointerEvent&&!window.PointerEvent&&(POINTER_ELEMENT_EVENTS="MSPointerDown",POINTER_WINDOW_EVENTS="MSPointerMove MSPointerUp MSPointerCancel"),inherit(PointerEventInput,Input,{handler:function PEhandler(ev){var store=this.store,removePointer=!1,eventTypeNormalized=ev.type.toLowerCase().replace("ms",""),eventType=POINTER_INPUT_MAP[eventTypeNormalized],pointerType=IE10_POINTER_TYPE_ENUM[ev.pointerType]||ev.pointerType,isTouch="touch"==pointerType,storeIndex=inArray(store,ev.pointerId,"pointerId");eventType&INPUT_START&&(0===ev.button||isTouch)?storeIndex<0&&(store.push(ev),storeIndex=store.length-1):eventType&(INPUT_END|INPUT_CANCEL)&&(removePointer=!0),storeIndex<0||(store[storeIndex]=ev,this.callback(this.manager,eventType,{pointers:store,changedPointers:[ev],pointerType:pointerType,srcEvent:ev}),removePointer&&store.splice(storeIndex,1))}});var SINGLE_TOUCH_INPUT_MAP={touchstart:INPUT_START,touchmove:2,touchend:INPUT_END,touchcancel:INPUT_CANCEL};function SingleTouchInput(){this.evTarget="touchstart",this.evWin="touchstart touchmove touchend touchcancel",this.started=!1,Input.apply(this,arguments)}function normalizeSingleTouches(ev,type){var all=toArray(ev.touches),changed=toArray(ev.changedTouches);return type&(INPUT_END|INPUT_CANCEL)&&(all=uniqueArray(all.concat(changed),"identifier",!0)),[all,changed]}inherit(SingleTouchInput,Input,{handler:function TEhandler(ev){var type=SINGLE_TOUCH_INPUT_MAP[ev.type];if(type===INPUT_START&&(this.started=!0),this.started){var touches=normalizeSingleTouches.call(this,ev,type);type&(INPUT_END|INPUT_CANCEL)&&touches[0].length-touches[1].length==0&&(this.started=!1),this.callback(this.manager,type,{pointers:touches[0],changedPointers:touches[1],pointerType:"touch",srcEvent:ev})}}});var TOUCH_INPUT_MAP={touchstart:INPUT_START,touchmove:2,touchend:INPUT_END,touchcancel:INPUT_CANCEL},TOUCH_TARGET_EVENTS="touchstart touchmove touchend touchcancel";function TouchInput(){this.evTarget=TOUCH_TARGET_EVENTS,this.targetIds={},Input.apply(this,arguments)}function getTouches(ev,type){var allTouches=toArray(ev.touches),targetIds=this.targetIds;if(type&(2|INPUT_START)&&1===allTouches.length)return targetIds[allTouches[0].identifier]=!0,[allTouches,allTouches];var i,targetTouches,changedTouches=toArray(ev.changedTouches),changedTargetTouches=[],target=this.target;if(targetTouches=allTouches.filter((function(touch){return hasParent(touch.target,target)})),type===INPUT_START)for(i=0;i<targetTouches.length;)targetIds[targetTouches[i].identifier]=!0,i++;for(i=0;i<changedTouches.length;)targetIds[changedTouches[i].identifier]&&changedTargetTouches.push(changedTouches[i]),type&(INPUT_END|INPUT_CANCEL)&&delete targetIds[changedTouches[i].identifier],i++;return changedTargetTouches.length?[uniqueArray(targetTouches.concat(changedTargetTouches),"identifier",!0),changedTargetTouches]:void 0}inherit(TouchInput,Input,{handler:function MTEhandler(ev){var type=TOUCH_INPUT_MAP[ev.type],touches=getTouches.call(this,ev,type);touches&&this.callback(this.manager,type,{pointers:touches[0],changedPointers:touches[1],pointerType:"touch",srcEvent:ev})}});var DEDUP_TIMEOUT=2500;function TouchMouseInput(){Input.apply(this,arguments);var handler=bindFn(this.handler,this);this.touch=new TouchInput(this.manager,handler),this.mouse=new MouseInput(this.manager,handler),this.primaryTouch=null,this.lastTouches=[]}function recordTouches(eventType,eventData){eventType&INPUT_START?(this.primaryTouch=eventData.changedPointers[0].identifier,setLastTouch.call(this,eventData)):eventType&(INPUT_END|INPUT_CANCEL)&&setLastTouch.call(this,eventData)}function setLastTouch(eventData){var touch=eventData.changedPointers[0];if(touch.identifier===this.primaryTouch){var lastTouch={x:touch.clientX,y:touch.clientY};this.lastTouches.push(lastTouch);var lts=this.lastTouches;setTimeout((function(){var i=lts.indexOf(lastTouch);i>-1&&lts.splice(i,1)}),DEDUP_TIMEOUT)}}function isSyntheticEvent(eventData){for(var x=eventData.srcEvent.clientX,y=eventData.srcEvent.clientY,i=0;i<this.lastTouches.length;i++){var t=this.lastTouches[i],dx=Math.abs(x-t.x),dy=Math.abs(y-t.y);if(dx<=25&&dy<=25)return!0}return!1}inherit(TouchMouseInput,Input,{handler:function TMEhandler(manager,inputEvent,inputData){var isTouch="touch"==inputData.pointerType,isMouse="mouse"==inputData.pointerType;if(!(isMouse&&inputData.sourceCapabilities&&inputData.sourceCapabilities.firesTouchEvents)){if(isTouch)recordTouches.call(this,inputEvent,inputData);else if(isMouse&&isSyntheticEvent.call(this,inputData))return;this.callback(manager,inputEvent,inputData)}},destroy:function destroy(){this.touch.destroy(),this.mouse.destroy()}});var PREFIXED_TOUCH_ACTION=prefixed(TEST_ELEMENT.style,"touchAction"),NATIVE_TOUCH_ACTION=PREFIXED_TOUCH_ACTION!==undefined,TOUCH_ACTION_MAP=function getTouchActionProps(){if(!NATIVE_TOUCH_ACTION)return!1;var touchMap={},cssSupports=window.CSS&&window.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach((function(val){touchMap[val]=!cssSupports||window.CSS.supports("touch-action",val)})),touchMap}();function TouchAction(manager,value){this.manager=manager,this.set(value)}TouchAction.prototype={set:function(value){"compute"==value&&(value=this.compute()),NATIVE_TOUCH_ACTION&&this.manager.element.style&&TOUCH_ACTION_MAP[value]&&(this.manager.element.style[PREFIXED_TOUCH_ACTION]=value),this.actions=value.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var actions=[];return each(this.manager.recognizers,(function(recognizer){boolOrFn(recognizer.options.enable,[recognizer])&&(actions=actions.concat(recognizer.getTouchAction()))})),function cleanTouchActions(actions){if(inStr(actions,"none"))return"none";var hasPanX=inStr(actions,"pan-x"),hasPanY=inStr(actions,"pan-y");if(hasPanX&&hasPanY)return"none";if(hasPanX||hasPanY)return hasPanX?"pan-x":"pan-y";if(inStr(actions,"manipulation"))return"manipulation";return"auto"}(actions.join(" "))},preventDefaults:function(input){var srcEvent=input.srcEvent,direction=input.offsetDirection;if(this.manager.session.prevented)srcEvent.preventDefault();else{var actions=this.actions,hasNone=inStr(actions,"none")&&!TOUCH_ACTION_MAP.none,hasPanY=inStr(actions,"pan-y")&&!TOUCH_ACTION_MAP["pan-y"],hasPanX=inStr(actions,"pan-x")&&!TOUCH_ACTION_MAP["pan-x"];if(hasNone){var isTapPointer=1===input.pointers.length,isTapMovement=input.distance<2,isTapTouchTime=input.deltaTime<250;if(isTapPointer&&isTapMovement&&isTapTouchTime)return}if(!hasPanX||!hasPanY)return hasNone||hasPanY&&direction&DIRECTION_HORIZONTAL||hasPanX&&direction&DIRECTION_VERTICAL?this.preventSrc(srcEvent):void 0}},preventSrc:function(srcEvent){this.manager.session.prevented=!0,srcEvent.preventDefault()}};var STATE_POSSIBLE=1;function Recognizer(options){this.options=assign({},this.defaults,options||{}),this.id=function uniqueId(){return _uniqueId++}(),this.manager=null,this.options.enable=ifUndefined(this.options.enable,!0),this.state=STATE_POSSIBLE,this.simultaneous={},this.requireFail=[]}function stateStr(state){return 16&state?"cancel":8&state?"end":4&state?"move":2&state?"start":""}function directionStr(direction){return direction==DIRECTION_DOWN?"down":direction==DIRECTION_UP?"up":direction==DIRECTION_LEFT?"left":direction==DIRECTION_RIGHT?"right":""}function getRecognizerByNameIfManager(otherRecognizer,recognizer){var manager=recognizer.manager;return manager?manager.get(otherRecognizer):otherRecognizer}function AttrRecognizer(){Recognizer.apply(this,arguments)}function PanRecognizer(){AttrRecognizer.apply(this,arguments),this.pX=null,this.pY=null}function PinchRecognizer(){AttrRecognizer.apply(this,arguments)}function PressRecognizer(){Recognizer.apply(this,arguments),this._timer=null,this._input=null}function RotateRecognizer(){AttrRecognizer.apply(this,arguments)}function SwipeRecognizer(){AttrRecognizer.apply(this,arguments)}function TapRecognizer(){Recognizer.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Hammer(element,options){return(options=options||{}).recognizers=ifUndefined(options.recognizers,Hammer.defaults.preset),new Manager(element,options)}Recognizer.prototype={defaults:{},set:function(options){return assign(this.options,options),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(otherRecognizer){if(invokeArrayArg(otherRecognizer,"recognizeWith",this))return this;var simultaneous=this.simultaneous;return simultaneous[(otherRecognizer=getRecognizerByNameIfManager(otherRecognizer,this)).id]||(simultaneous[otherRecognizer.id]=otherRecognizer,otherRecognizer.recognizeWith(this)),this},dropRecognizeWith:function(otherRecognizer){return invokeArrayArg(otherRecognizer,"dropRecognizeWith",this)||(otherRecognizer=getRecognizerByNameIfManager(otherRecognizer,this),delete this.simultaneous[otherRecognizer.id]),this},requireFailure:function(otherRecognizer){if(invokeArrayArg(otherRecognizer,"requireFailure",this))return this;var requireFail=this.requireFail;return-1===inArray(requireFail,otherRecognizer=getRecognizerByNameIfManager(otherRecognizer,this))&&(requireFail.push(otherRecognizer),otherRecognizer.requireFailure(this)),this},dropRequireFailure:function(otherRecognizer){if(invokeArrayArg(otherRecognizer,"dropRequireFailure",this))return this;otherRecognizer=getRecognizerByNameIfManager(otherRecognizer,this);var index=inArray(this.requireFail,otherRecognizer);return index>-1&&this.requireFail.splice(index,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(otherRecognizer){return!!this.simultaneous[otherRecognizer.id]},emit:function(input){var self=this,state=this.state;function emit(event){self.manager.emit(event,input)}state<8&&emit(self.options.event+stateStr(state)),emit(self.options.event),input.additionalEvent&&emit(input.additionalEvent),state>=8&&emit(self.options.event+stateStr(state))},tryEmit:function(input){if(this.canEmit())return this.emit(input);this.state=32},canEmit:function(){for(var i=0;i<this.requireFail.length;){if(!(this.requireFail[i].state&(32|STATE_POSSIBLE)))return!1;i++}return!0},recognize:function(inputData){var inputDataClone=assign({},inputData);if(!boolOrFn(this.options.enable,[this,inputDataClone]))return this.reset(),void(this.state=32);56&this.state&&(this.state=STATE_POSSIBLE),this.state=this.process(inputDataClone),30&this.state&&this.tryEmit(inputDataClone)},process:function(inputData){},getTouchAction:function(){},reset:function(){}},inherit(AttrRecognizer,Recognizer,{defaults:{pointers:1},attrTest:function(input){var optionPointers=this.options.pointers;return 0===optionPointers||input.pointers.length===optionPointers},process:function(input){var state=this.state,eventType=input.eventType,isRecognized=6&state,isValid=this.attrTest(input);return isRecognized&&(eventType&INPUT_CANCEL||!isValid)?16|state:isRecognized||isValid?eventType&INPUT_END?8|state:2&state?4|state:2:32}}),inherit(PanRecognizer,AttrRecognizer,{defaults:{event:"pan",threshold:10,pointers:1,direction:DIRECTION_ALL},getTouchAction:function(){var direction=this.options.direction,actions=[];return direction&DIRECTION_HORIZONTAL&&actions.push("pan-y"),direction&DIRECTION_VERTICAL&&actions.push("pan-x"),actions},directionTest:function(input){var options=this.options,hasMoved=!0,distance=input.distance,direction=input.direction,x=input.deltaX,y=input.deltaY;return direction&options.direction||(options.direction&DIRECTION_HORIZONTAL?(direction=0===x?DIRECTION_NONE:x<0?DIRECTION_LEFT:DIRECTION_RIGHT,hasMoved=x!=this.pX,distance=Math.abs(input.deltaX)):(direction=0===y?DIRECTION_NONE:y<0?DIRECTION_UP:DIRECTION_DOWN,hasMoved=y!=this.pY,distance=Math.abs(input.deltaY))),input.direction=direction,hasMoved&&distance>options.threshold&&direction&options.direction},attrTest:function(input){return AttrRecognizer.prototype.attrTest.call(this,input)&&(2&this.state||!(2&this.state)&&this.directionTest(input))},emit:function(input){this.pX=input.deltaX,this.pY=input.deltaY;var direction=directionStr(input.direction);direction&&(input.additionalEvent=this.options.event+direction),this._super.emit.call(this,input)}}),inherit(PinchRecognizer,AttrRecognizer,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return["none"]},attrTest:function(input){return this._super.attrTest.call(this,input)&&(Math.abs(input.scale-1)>this.options.threshold||2&this.state)},emit:function(input){if(1!==input.scale){var inOut=input.scale<1?"in":"out";input.additionalEvent=this.options.event+inOut}this._super.emit.call(this,input)}}),inherit(PressRecognizer,Recognizer,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(input){var options=this.options,validPointers=input.pointers.length===options.pointers,validMovement=input.distance<options.threshold,validTime=input.deltaTime>options.time;if(this._input=input,!validMovement||!validPointers||input.eventType&(INPUT_END|INPUT_CANCEL)&&!validTime)this.reset();else if(input.eventType&INPUT_START)this.reset(),this._timer=setTimeoutContext((function(){this.state=8,this.tryEmit()}),options.time,this);else if(input.eventType&INPUT_END)return 8;return 32},reset:function(){clearTimeout(this._timer)},emit:function(input){8===this.state&&(input&&input.eventType&INPUT_END?this.manager.emit(this.options.event+"up",input):(this._input.timeStamp=now(),this.manager.emit(this.options.event,this._input)))}}),inherit(RotateRecognizer,AttrRecognizer,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return["none"]},attrTest:function(input){return this._super.attrTest.call(this,input)&&(Math.abs(input.rotation)>this.options.threshold||2&this.state)}}),inherit(SwipeRecognizer,AttrRecognizer,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:DIRECTION_HORIZONTAL|DIRECTION_VERTICAL,pointers:1},getTouchAction:function(){return PanRecognizer.prototype.getTouchAction.call(this)},attrTest:function(input){var velocity,direction=this.options.direction;return direction&(DIRECTION_HORIZONTAL|DIRECTION_VERTICAL)?velocity=input.overallVelocity:direction&DIRECTION_HORIZONTAL?velocity=input.overallVelocityX:direction&DIRECTION_VERTICAL&&(velocity=input.overallVelocityY),this._super.attrTest.call(this,input)&&direction&input.offsetDirection&&input.distance>this.options.threshold&&input.maxPointers==this.options.pointers&&abs(velocity)>this.options.velocity&&input.eventType&INPUT_END},emit:function(input){var direction=directionStr(input.offsetDirection);direction&&this.manager.emit(this.options.event+direction,input),this.manager.emit(this.options.event,input)}}),inherit(TapRecognizer,Recognizer,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return["manipulation"]},process:function(input){var options=this.options,validPointers=input.pointers.length===options.pointers,validMovement=input.distance<options.threshold,validTouchTime=input.deltaTime<options.time;if(this.reset(),input.eventType&INPUT_START&&0===this.count)return this.failTimeout();if(validMovement&&validTouchTime&&validPointers){if(input.eventType!=INPUT_END)return this.failTimeout();var validInterval=!this.pTime||input.timeStamp-this.pTime<options.interval,validMultiTap=!this.pCenter||getDistance(this.pCenter,input.center)<options.posThreshold;if(this.pTime=input.timeStamp,this.pCenter=input.center,validMultiTap&&validInterval?this.count+=1:this.count=1,this._input=input,0===this.count%options.taps)return this.hasRequireFailures()?(this._timer=setTimeoutContext((function(){this.state=8,this.tryEmit()}),options.interval,this),2):8}return 32},failTimeout:function(){return this._timer=setTimeoutContext((function(){this.state=32}),this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Hammer.VERSION="2.0.7",Hammer.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[RotateRecognizer,{enable:!1}],[PinchRecognizer,{enable:!1},["rotate"]],[SwipeRecognizer,{direction:DIRECTION_HORIZONTAL}],[PanRecognizer,{direction:DIRECTION_HORIZONTAL},["swipe"]],[TapRecognizer],[TapRecognizer,{event:"doubletap",taps:2},["tap"]],[PressRecognizer]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};function Manager(element,options){this.options=assign({},Hammer.defaults,options||{}),this.options.inputTarget=this.options.inputTarget||element,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=element,this.input=function createInputInstance(manager){return new(manager.options.inputClass||(SUPPORT_POINTER_EVENTS?PointerEventInput:SUPPORT_ONLY_TOUCH?TouchInput:SUPPORT_TOUCH?TouchMouseInput:MouseInput))(manager,inputHandler)}(this),this.touchAction=new TouchAction(this,this.options.touchAction),toggleCssProps(this,!0),each(this.options.recognizers,(function(item){var recognizer=this.add(new item[0](item[1]));item[2]&&recognizer.recognizeWith(item[2]),item[3]&&recognizer.requireFailure(item[3])}),this)}function toggleCssProps(manager,add){var prop,element=manager.element;element.style&&(each(manager.options.cssProps,(function(value,name){prop=prefixed(element.style,name),add?(manager.oldCssProps[prop]=element.style[prop],element.style[prop]=value):element.style[prop]=manager.oldCssProps[prop]||""})),add||(manager.oldCssProps={}))}Manager.prototype={set:function(options){return assign(this.options,options),options.touchAction&&this.touchAction.update(),options.inputTarget&&(this.input.destroy(),this.input.target=options.inputTarget,this.input.init()),this},stop:function(force){this.session.stopped=force?2:1},recognize:function(inputData){var session=this.session;if(!session.stopped){var recognizer;this.touchAction.preventDefaults(inputData);var recognizers=this.recognizers,curRecognizer=session.curRecognizer;(!curRecognizer||curRecognizer&&8&curRecognizer.state)&&(curRecognizer=session.curRecognizer=null);for(var i=0;i<recognizers.length;)recognizer=recognizers[i],2===session.stopped||curRecognizer&&recognizer!=curRecognizer&&!recognizer.canRecognizeWith(curRecognizer)?recognizer.reset():recognizer.recognize(inputData),!curRecognizer&&14&recognizer.state&&(curRecognizer=session.curRecognizer=recognizer),i++}},get:function(recognizer){if(recognizer instanceof Recognizer)return recognizer;for(var recognizers=this.recognizers,i=0;i<recognizers.length;i++)if(recognizers[i].options.event==recognizer)return recognizers[i];return null},add:function(recognizer){if(invokeArrayArg(recognizer,"add",this))return this;var existing=this.get(recognizer.options.event);return existing&&this.remove(existing),this.recognizers.push(recognizer),recognizer.manager=this,this.touchAction.update(),recognizer},remove:function(recognizer){if(invokeArrayArg(recognizer,"remove",this))return this;if(recognizer=this.get(recognizer)){var recognizers=this.recognizers,index=inArray(recognizers,recognizer);-1!==index&&(recognizers.splice(index,1),this.touchAction.update())}return this},on:function(events,handler){if(events!==undefined&&handler!==undefined){var handlers=this.handlers;return each(splitStr(events),(function(event){handlers[event]=handlers[event]||[],handlers[event].push(handler)})),this}},off:function(events,handler){if(events!==undefined){var handlers=this.handlers;return each(splitStr(events),(function(event){handler?handlers[event]&&handlers[event].splice(inArray(handlers[event],handler),1):delete handlers[event]})),this}},emit:function(event,data){this.options.domEvents&&function triggerDomEvent(event,data){var gestureEvent=document.createEvent("Event");gestureEvent.initEvent(event,!0,!0),gestureEvent.gesture=data,data.target.dispatchEvent(gestureEvent)}(event,data);var handlers=this.handlers[event]&&this.handlers[event].slice();if(handlers&&handlers.length){data.type=event,data.preventDefault=function(){data.srcEvent.preventDefault()};for(var i=0;i<handlers.length;)handlers[i](data),i++}},destroy:function(){this.element&&toggleCssProps(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},assign(Hammer,{INPUT_START:INPUT_START,INPUT_MOVE:2,INPUT_END:INPUT_END,INPUT_CANCEL:INPUT_CANCEL,STATE_POSSIBLE:STATE_POSSIBLE,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:32,DIRECTION_NONE:DIRECTION_NONE,DIRECTION_LEFT:DIRECTION_LEFT,DIRECTION_RIGHT:DIRECTION_RIGHT,DIRECTION_UP:DIRECTION_UP,DIRECTION_DOWN:DIRECTION_DOWN,DIRECTION_HORIZONTAL:DIRECTION_HORIZONTAL,DIRECTION_VERTICAL:DIRECTION_VERTICAL,DIRECTION_ALL:DIRECTION_ALL,Manager:Manager,Input:Input,TouchAction:TouchAction,TouchInput:TouchInput,MouseInput:MouseInput,PointerEventInput:PointerEventInput,TouchMouseInput:TouchMouseInput,SingleTouchInput:SingleTouchInput,Recognizer:Recognizer,AttrRecognizer:AttrRecognizer,Tap:TapRecognizer,Pan:PanRecognizer,Swipe:SwipeRecognizer,Pinch:PinchRecognizer,Rotate:RotateRecognizer,Press:PressRecognizer,on:addEventListeners,off:removeEventListeners,each:each,merge:merge,extend:extend,assign:assign,inherit:inherit,bindFn:bindFn,prefixed:prefixed}),(void 0!==window?window:"undefined"!=typeof self?self:{}).Hammer=Hammer,(__WEBPACK_AMD_DEFINE_RESULT__=function(){return Hammer}.call(exports,__webpack_require__,exports,module))===undefined||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}(window,document)}}]);