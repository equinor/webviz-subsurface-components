"use strict";(self.webpackChunk_webviz_subsurface_components=self.webpackChunk_webviz_subsurface_components||[]).push([[1632],{"./packages/subsurface-viewer/src/storybook/layers/WellLabelLayer.stories.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:function(){return Default},LabelAutoPosition:function(){return LabelAutoPosition},LabelPosition:function(){return LabelPosition},LabelStyle:function(){return LabelStyle},TangentOrientation:function(){return TangentOrientation},__namedExportsOrder:function(){return __namedExportsOrder}});var mathjs__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/mathjs/lib/esm/core/create.js"),mathjs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/mathjs/lib/esm/entry/allFactoriesAny.js"),react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_layers__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/subsurface-viewer/src/layers/index.ts"),_layers_wells_layers_wellLabelLayer__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/subsurface-viewer/src/layers/wells/layers/wellLabelLayer.ts"),_SubsurfaceViewer__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/subsurface-viewer/src/SubsurfaceViewer.tsx"),_constant_argTypes__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/subsurface-viewer/src/storybook/constant/argTypes.ts"),_util_color__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./packages/subsurface-viewer/src/storybook/util/color.ts");const math=(0,mathjs__WEBPACK_IMPORTED_MODULE_5__.v)(mathjs__WEBPACK_IMPORTED_MODULE_6__.Q,{randomSeed:"1984"}),randomFunc=math?.random?math.random:Math.random,DEFAULT_VIEWS={layout:[1,2],viewports:[{id:"view_1",show3D:!1,layerIds:["well-layer","well-labels"]},{id:"view_2",show3D:!0,layerIds:["well-layer","axes-layer-3d","well-labels"]}]},SPLIT_VIEWS={layout:[1,2],viewports:[{id:"view_1",show3D:!1,layerIds:["well-layer","label-2d"]},{id:"view_2",show3D:!0,layerIds:["well-layer","axes-layer-3d","label-3d"]}]},WELL_LAYER_PROPS={id:"well-layer",wellNameVisible:!1,wellHeadStyle:{size:6}},getRandomDeviation=(magnitude=10,mean=5)=>randomFunc()*(2*mean-.5*magnitude)*Math.PI/180,createSyntheticWell=(index,headPosition)=>{const name=`Well ${index}`,avgDipDeviation=10*randomFunc(),avgAzimuthDeviation=5*randomFunc()-2.5,maxDip=.5*Math.PI+.05,coordinates=[headPosition],leadCount=Math.trunc(17*randomFunc())+3;for(let i=0;i<leadCount;i++){const x=coordinates[coordinates.length-1][0],y=coordinates[coordinates.length-1][1],z=coordinates[coordinates.length-1][2]+150;coordinates.push([x,y,z])}let previousAzimuth=randomFunc()*Math.PI*2,previousDip=0;for(let i=0;i<20-leadCount;i++){const prevSample=coordinates[coordinates.length-1],azimuth=previousAzimuth+getRandomDeviation(5,avgAzimuthDeviation),dip=Math.min(previousDip+getRandomDeviation(11,avgDipDeviation),maxDip),x=prevSample[0]+150*Math.cos(azimuth)*Math.sin(dip),y=prevSample[1]+150*Math.sin(azimuth)*Math.sin(dip),z=prevSample[2]+150*Math.cos(dip);coordinates.push([x,y,z]),previousAzimuth=azimuth,previousDip=dip}return{type:"Feature",properties:{name:name,color:[100+Math.floor(155*randomFunc()),100+Math.floor(155*randomFunc()),100+Math.floor(155*randomFunc()),255]},geometry:{type:"GeometryCollection",geometries:[{type:"Point",coordinates:headPosition},{type:"LineString",coordinates:coordinates}]}}},SYNTHETIC_WELLS=((wellCount=1e3,wellHeadCount=100)=>{const wellHeads=[];for(let i=0;i<wellHeadCount;i++){const headPosition=[456e3+(1e4*randomFunc()-2e3),6785e3+(8e3*randomFunc()-2e3),0];wellHeads.push(headPosition)}const wells=[];for(let i=0;i<wellCount;i++){const headPosition=wellHeads[Math.trunc(randomFunc()*wellHeads.length)],syntheticWell=createSyntheticWell(i,headPosition);wells.push(syntheticWell)}return{type:"FeatureCollection",features:wells}})(1e3),AXES_LAYERS=[new _layers__WEBPACK_IMPORTED_MODULE_1__.AxesLayer({id:"axes-layer-3d",bounds:[45e4,6781e3,0,464e3,6791e3,3500]})],DEFAULT_LABEL_PROPS={id:"well-labels",data:SYNTHETIC_WELLS.features},getSyntheticWells=wellCount=>({type:"FeatureCollection",features:SYNTHETIC_WELLS.features.slice(0,wellCount)}),Default={render:({wellCount:wellCount})=>{const data=getSyntheticWells(wellCount),wellLayer=new _layers__WEBPACK_IMPORTED_MODULE_1__.WellsLayer({...WELL_LAYER_PROPS,data:data}),labelLayer=new _layers_wells_layers_wellLabelLayer__WEBPACK_IMPORTED_MODULE_2__.U({...DEFAULT_LABEL_PROPS,data:data.features}),propsWithLayers={id:"default",layers:[...AXES_LAYERS,wellLayer,labelLayer],views:DEFAULT_VIEWS};return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_SubsurfaceViewer__WEBPACK_IMPORTED_MODULE_3__.A,propsWithLayers)}},LabelPosition={render:({wellCount:wellCount,getPositionAlongPath:getPositionAlongPath})=>{const data=getSyntheticWells(wellCount),wellLayer=new _layers__WEBPACK_IMPORTED_MODULE_1__.WellsLayer({...WELL_LAYER_PROPS,data:data}),labelLayer=new _layers_wells_layers_wellLabelLayer__WEBPACK_IMPORTED_MODULE_2__.U({...DEFAULT_LABEL_PROPS,getPositionAlongPath:getPositionAlongPath,data:data.features}),propsWithLayers={id:"position",layers:[...AXES_LAYERS,wellLayer,labelLayer],views:DEFAULT_VIEWS};return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_SubsurfaceViewer__WEBPACK_IMPORTED_MODULE_3__.A,propsWithLayers)},argTypes:_constant_argTypes__WEBPACK_IMPORTED_MODULE_4__.XO,args:{getPositionAlongPath:.5}},LabelAutoPosition={render:({wellCount:wellCount})=>{const data=getSyntheticWells(wellCount),labelProps={autoPosition:!0,data:data.features},wellLayer=new _layers__WEBPACK_IMPORTED_MODULE_1__.WellsLayer({...WELL_LAYER_PROPS,data:data}),labelLayer2d=new _layers_wells_layers_wellLabelLayer__WEBPACK_IMPORTED_MODULE_2__.U({id:"label-2d",...labelProps}),labelLayer3d=new _layers_wells_layers_wellLabelLayer__WEBPACK_IMPORTED_MODULE_2__.U({id:"label-3d",...labelProps}),propsWithLayers={id:"position",layers:[...AXES_LAYERS,wellLayer,labelLayer2d,labelLayer3d],views:SPLIT_VIEWS};return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_SubsurfaceViewer__WEBPACK_IMPORTED_MODULE_3__.A,propsWithLayers)}},TangentOrientation={render:({wellCount:wellCount,getPositionAlongPath:getPositionAlongPath})=>{const data=getSyntheticWells(wellCount),wellLayer=new _layers__WEBPACK_IMPORTED_MODULE_1__.WellsLayer({...WELL_LAYER_PROPS,data:data}),labelProps={orientation:_layers_wells_layers_wellLabelLayer__WEBPACK_IMPORTED_MODULE_2__.$.TANGENT,data:data.features,getPositionAlongPath:getPositionAlongPath},labelLayer2d=new _layers_wells_layers_wellLabelLayer__WEBPACK_IMPORTED_MODULE_2__.U({id:"label-2d",...labelProps}),labelLayer3d=new _layers_wells_layers_wellLabelLayer__WEBPACK_IMPORTED_MODULE_2__.U({id:"label-3d",...labelProps}),propsWithLayers={id:"orientation",layers:[...AXES_LAYERS,wellLayer,labelLayer2d,labelLayer3d],views:SPLIT_VIEWS};return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_SubsurfaceViewer__WEBPACK_IMPORTED_MODULE_3__.A,propsWithLayers)},argTypes:_constant_argTypes__WEBPACK_IMPORTED_MODULE_4__.XO,args:{getPositionAlongPath:.5}},LabelStyle={render:({wellCount:wellCount,getPositionAlongPath:getPositionAlongPath,getSize:getSize,orientation:orientation,background:background,getBorderWidth:getBorderWidth,...props})=>{const data=getSyntheticWells(wellCount),labelProps={getPositionAlongPath:getPositionAlongPath,data:data.features,getSize:getSize,getColor:(0,_util_color__WEBPACK_IMPORTED_MODULE_7__.l)(props.color),background:background,getBorderColor:(0,_util_color__WEBPACK_IMPORTED_MODULE_7__.l)(props.borderColor),getBorderWidth:getBorderWidth,getBackgroundColor:(0,_util_color__WEBPACK_IMPORTED_MODULE_7__.l)(props.bgColor),orientation:orientation},wellLayer=new _layers__WEBPACK_IMPORTED_MODULE_1__.WellsLayer({...WELL_LAYER_PROPS,data:data}),labelLayer2d=new _layers_wells_layers_wellLabelLayer__WEBPACK_IMPORTED_MODULE_2__.U({...labelProps,id:"label-2d"}),labelLayer3d=new _layers_wells_layers_wellLabelLayer__WEBPACK_IMPORTED_MODULE_2__.U({...labelProps,id:"label-3d"}),propsWithLayers={id:"style",layers:[...AXES_LAYERS,wellLayer,labelLayer2d,labelLayer3d],views:SPLIT_VIEWS};return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_SubsurfaceViewer__WEBPACK_IMPORTED_MODULE_3__.A,propsWithLayers)},args:{getSize:15,orientation:_layers_wells_layers_wellLabelLayer__WEBPACK_IMPORTED_MODULE_2__.$.HORIZONTAL,color:"yellow",background:!0,borderColor:"black",getBorderWidth:2,bgColor:"grey",getPositionAlongPath:.5},argTypes:{..._constant_argTypes__WEBPACK_IMPORTED_MODULE_4__.XO,..._constant_argTypes__WEBPACK_IMPORTED_MODULE_4__.Ll,..._constant_argTypes__WEBPACK_IMPORTED_MODULE_4__.yM}};__webpack_exports__.default={title:"SubsurfaceViewer / Well Label Layer",parameters:{docs:{description:{component:"Layer for displaying well labels"},story:{height:"700px"}}},argTypes:{wellCount:{control:{type:"range",min:1,max:1e3,step:1}}},args:{wellCount:10}};const __namedExportsOrder=["Default","LabelPosition","LabelAutoPosition","TangentOrientation","LabelStyle"];Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:'{\n  render: ({\n    wellCount\n  }) => {\n    const data = getSyntheticWells(wellCount);\n    const wellLayer = new WellsLayer({\n      ...WELL_LAYER_PROPS,\n      data\n    });\n    const labelLayer = new WellLabelLayer({\n      ...DEFAULT_LABEL_PROPS,\n      data: data.features\n    });\n    const propsWithLayers = {\n      id: "default",\n      layers: [...AXES_LAYERS, wellLayer, labelLayer],\n      views: DEFAULT_VIEWS\n    };\n    return <SubsurfaceViewer {...propsWithLayers} />;\n  }\n}',...Default.parameters?.docs?.source}}},LabelPosition.parameters={...LabelPosition.parameters,docs:{...LabelPosition.parameters?.docs,source:{originalSource:'{\n  render: ({\n    wellCount,\n    getPositionAlongPath\n  }) => {\n    const data = getSyntheticWells(wellCount);\n    const wellLayer = new WellsLayer({\n      ...WELL_LAYER_PROPS,\n      data\n    });\n    const labelLayer = new WellLabelLayer({\n      ...DEFAULT_LABEL_PROPS,\n      getPositionAlongPath,\n      data: data.features\n    });\n    const propsWithLayers = {\n      id: "position",\n      layers: [...AXES_LAYERS, wellLayer, labelLayer],\n      views: DEFAULT_VIEWS\n    };\n    return <SubsurfaceViewer {...propsWithLayers} />;\n  },\n  argTypes: LABEL_POSITION_ARGTYPES,\n  args: {\n    getPositionAlongPath: 0.5\n  }\n}',...LabelPosition.parameters?.docs?.source}}},LabelAutoPosition.parameters={...LabelAutoPosition.parameters,docs:{...LabelAutoPosition.parameters?.docs,source:{originalSource:'{\n  render: ({\n    wellCount\n  }) => {\n    const data = getSyntheticWells(wellCount);\n    const labelProps = {\n      autoPosition: true,\n      data: data.features\n    };\n    const wellLayer = new WellsLayer({\n      ...WELL_LAYER_PROPS,\n      data\n    });\n    const labelLayer2d = new WellLabelLayer({\n      id: "label-2d",\n      ...labelProps\n    });\n    const labelLayer3d = new WellLabelLayer({\n      id: "label-3d",\n      ...labelProps\n    });\n    const layers = [...AXES_LAYERS, wellLayer, labelLayer2d, labelLayer3d];\n    const propsWithLayers = {\n      id: "position",\n      layers,\n      views: SPLIT_VIEWS\n    };\n    return <SubsurfaceViewer {...propsWithLayers} />;\n  }\n}',...LabelAutoPosition.parameters?.docs?.source}}},TangentOrientation.parameters={...TangentOrientation.parameters,docs:{...TangentOrientation.parameters?.docs,source:{originalSource:'{\n  render: ({\n    wellCount,\n    getPositionAlongPath\n  }) => {\n    const data = getSyntheticWells(wellCount);\n    const wellLayer = new WellsLayer({\n      ...WELL_LAYER_PROPS,\n      data\n    });\n    const labelProps = {\n      orientation: LabelOrientation.TANGENT,\n      data: data.features,\n      getPositionAlongPath\n    };\n    const labelLayer2d = new WellLabelLayer({\n      id: "label-2d",\n      ...labelProps\n    });\n    const labelLayer3d = new WellLabelLayer({\n      id: "label-3d",\n      ...labelProps\n    });\n    const layers = [...AXES_LAYERS, wellLayer, labelLayer2d, labelLayer3d];\n    const propsWithLayers = {\n      id: "orientation",\n      layers,\n      views: SPLIT_VIEWS\n    };\n    return <SubsurfaceViewer {...propsWithLayers} />;\n  },\n  argTypes: LABEL_POSITION_ARGTYPES,\n  args: {\n    getPositionAlongPath: 0.5\n  }\n}',...TangentOrientation.parameters?.docs?.source}}},LabelStyle.parameters={...LabelStyle.parameters,docs:{...LabelStyle.parameters?.docs,source:{originalSource:'{\n  render: ({\n    wellCount,\n    getPositionAlongPath,\n    getSize,\n    orientation,\n    background,\n    getBorderWidth,\n    ...props\n  }) => {\n    const data = getSyntheticWells(wellCount);\n    const labelProps = {\n      getPositionAlongPath,\n      data: data.features,\n      getSize,\n      getColor: getRgba(props.color),\n      background,\n      getBorderColor: getRgba(props.borderColor),\n      getBorderWidth,\n      getBackgroundColor: getRgba(props.bgColor),\n      orientation\n    };\n    const wellLayer = new WellsLayer({\n      ...WELL_LAYER_PROPS,\n      data\n    });\n    const labelLayer2d = new WellLabelLayer({\n      ...labelProps,\n      id: "label-2d"\n    });\n    const labelLayer3d = new WellLabelLayer({\n      ...labelProps,\n      id: "label-3d"\n    });\n    const layers = [...AXES_LAYERS, wellLayer, labelLayer2d, labelLayer3d];\n    const propsWithLayers = {\n      id: "style",\n      layers,\n      views: SPLIT_VIEWS\n    };\n    return <SubsurfaceViewer {...propsWithLayers} />;\n  },\n  args: {\n    getSize: 15,\n    orientation: LabelOrientation.HORIZONTAL,\n    color: "yellow",\n    background: true,\n    borderColor: "black",\n    getBorderWidth: 2,\n    bgColor: "grey",\n    getPositionAlongPath: 0.5\n  },\n  argTypes: {\n    ...LABEL_POSITION_ARGTYPES,\n    ...LABEL_SIZE_ARGTYPES,\n    ...LABEL_ORIENTATION_ARGTYPES\n  }\n}',...LabelStyle.parameters?.docs?.source}}}},"./packages/subsurface-viewer/src/storybook/constant/argTypes.ts":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{Ll:function(){return LABEL_SIZE_ARGTYPES},XO:function(){return LABEL_POSITION_ARGTYPES},yM:function(){return LABEL_ORIENTATION_ARGTYPES}});const LABEL_POSITION_ARGTYPES={getPositionAlongPath:{control:{type:"range",min:0,max:1,step:.01}}},LABEL_SIZE_ARGTYPES={getSize:{control:{type:"range",min:0,max:50,step:1}}},LABEL_ORIENTATION_ARGTYPES={orientation:{options:["horizontal","tangent"],control:{type:"select"}}}},"./packages/subsurface-viewer/src/storybook/util/color.ts":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{l:function(){return getRgba}});var d3_color__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/d3-color/src/color.js");function getRgba(color){const c=(0,d3_color__WEBPACK_IMPORTED_MODULE_0__.Qh)(color);return[c.r,c.g,c.b,255*c.opacity]}}}]);